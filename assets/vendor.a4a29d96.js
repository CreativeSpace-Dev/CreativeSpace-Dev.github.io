var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var s={exports:{}},u={},l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function f(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var d=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,r,i=f(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))c.call(n,a)&&(i[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)h.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},p=d,m=60103,v=60106;
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.Fragment=60107,u.StrictMode=60108,u.Profiler=60114;var g=60109,y=60110,b=60112;u.Suspense=60113;var _=60115,w=60116;if("function"==typeof Symbol&&Symbol.for){var x=Symbol.for;m=x("react.element"),v=x("react.portal"),u.Fragment=x("react.fragment"),u.StrictMode=x("react.strict_mode"),u.Profiler=x("react.profiler"),g=x("react.provider"),y=x("react.context"),b=x("react.forward_ref"),u.Suspense=x("react.suspense"),_=x("react.memo"),w=x("react.lazy")}var S="function"==typeof Symbol&&Symbol.iterator;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M={};function C(e,t,n){this.props=e,this.context=t,this.refs=M,this.updater=n||T}function I(){}function A(e,t,n){this.props=e,this.context=t,this.refs=M,this.updater=n||T}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(E(85));this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},I.prototype=C.prototype;var k=A.prototype=new I;k.constructor=A,p(k,C.prototype),k.isPureReactComponent=!0;var P={current:null},R=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function L(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)R.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:m,type:e,key:o,ref:a,props:i,_owner:P.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===m}var D=/\/+/g;function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function U(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case m:case v:a=!0}}if(a)return i=i(a=e),e=""===r?"."+F(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(D,"$&/")+"/"),U(i,t,n,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:m,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(D,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+F(o=e[s],s);a+=U(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=U(o=o.value,t,n,u=r+F(o,s++),i);else if("object"===o)throw t=""+e,Error(E(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function z(e,t,n){if(null==e)return e;var r=[],i=0;return U(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var B={current:null};function V(){var e=B.current;if(null===e)throw Error(E(321));return e}var H={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:P,IsSomeRendererActing:{current:!1},assign:p};u.Children={map:z,forEach:function(e,t,n){z(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return z(e,(function(){t++})),t},toArray:function(e){return z(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error(E(143));return e}},u.Component=C,u.PureComponent=A,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,u.cloneElement=function(e,t,n){if(null==e)throw Error(E(267,e));var r=p({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=P.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)R.call(t,u)&&!O.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:m,type:e.type,key:i,ref:o,props:r,_owner:a}},u.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:y,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:g,_context:e},e.Consumer=e},u.createElement=L,u.createFactory=function(e){var t=L.bind(null,e);return t.type=e,t},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:b,render:e}},u.isValidElement=N,u.lazy=function(e){return{$$typeof:w,_payload:{_status:-1,_result:e},_init:j}},u.memo=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},u.useCallback=function(e,t){return V().useCallback(e,t)},u.useContext=function(e,t){return V().useContext(e,t)},u.useDebugValue=function(){},u.useEffect=function(e,t){return V().useEffect(e,t)},u.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},u.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},u.useMemo=function(e,t){return V().useMemo(e,t)},u.useReducer=function(e,t,n){return V().useReducer(e,t,n)},u.useRef=function(e){return V().useRef(e)},u.useState=function(e){return V().useState(e)},u.version="17.0.2",s.exports=u;var W=s.exports,G={exports:{}},q={},K={exports:{}},X={};
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,l=null,c=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(n){throw setTimeout(c,0),n}};t=function(e){null!==u?setTimeout(t,0,e):(u=e,setTimeout(c,0))},n=function(e,t){l=setTimeout(e,t)},r=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var d=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,m=null,v=-1,g=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();y=t+g;try{m(!0,t)?_.postMessage(null):(p=!1,m=null)}catch(n){throw _.postMessage(null),n}}else p=!1},t=function(e){m=e,p||(p=!0,_.postMessage(null))},n=function(t,n){v=h((function(){t(e.unstable_now())}),n)},r=function(){f(v),v=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>E(a,n))void 0!==u&&0>E(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],M=[],C=1,I=null,A=3,k=!1,P=!1,R=!1;function O(e){for(var t=x(M);null!==t;){if(null===t.callback)S(M);else{if(!(t.startTime<=e))break;S(M),t.sortIndex=t.expirationTime,w(T,t)}t=x(M)}}function L(e){if(R=!1,O(e),!P)if(null!==x(T))P=!0,t(N);else{var r=x(M);null!==r&&n(L,r.startTime-e)}}function N(t,i){P=!1,R&&(R=!1,r()),k=!0;var o=A;try{for(O(i),I=x(T);null!==I&&(!(I.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=I.callback;if("function"==typeof a){I.callback=null,A=I.priorityLevel;var s=a(I.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?I.callback=s:I===x(T)&&S(T),O(i)}else S(T);I=x(T)}if(null!==I)var u=!0;else{var l=x(M);null!==l&&n(L,l.startTime-i),u=!1}return u}finally{I=null,A=o,k=!1}}var D=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){P||k||(P=!0,t(N))},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return x(T)},e.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=D,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},e.unstable_scheduleCallback=function(i,o,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,i){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return i={id:C++,callback:o,priorityLevel:i,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(i.sortIndex=a,w(M,i),null===x(T)&&i===x(M)&&(R?r():R=!0,n(L,a-s))):(i.sortIndex=u,w(T,i),P||k||(P=!0,t(N))),i},e.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}}(X),K.exports=X;
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Y=s.exports,$=d,Q=K.exports;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Y)throw Error(J(227));var Z=new Set,ee={};function te(e,t){ne(e,t),ne(e+"Capture",t)}function ne(e,t){for(ee[e]=t,e=0;e<t.length;e++)Z.add(t[e])}var re=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oe=Object.prototype.hasOwnProperty,ae={},se={};function ue(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){le[e]=new ue(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];le[t]=new ue(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){le[e]=new ue(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){le[e]=new ue(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){le[e]=new ue(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){le[e]=new ue(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){le[e]=new ue(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){le[e]=new ue(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){le[e]=new ue(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ce=/[\-:]([a-z])/g;function he(e){return e[1].toUpperCase()}function fe(e,t,n,r){var i=le.hasOwnProperty(t)?le[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!oe.call(se,e)||!oe.call(ae,e)&&(ie.test(e)?se[e]=!0:(ae[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ce,he);le[t]=new ue(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ce,he);le[t]=new ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ce,he);le[t]=new ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){le[e]=new ue(e,1,!1,e.toLowerCase(),null,!1,!1)})),le.xlinkHref=new ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){le[e]=new ue(e,1,!1,e.toLowerCase(),null,!0,!0)}));var de=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=60103,me=60106,ve=60107,ge=60108,ye=60114,be=60109,_e=60110,we=60112,xe=60113,Se=60120,Ee=60115,Te=60116,Me=60121,Ce=60128,Ie=60129,Ae=60130,ke=60131;if("function"==typeof Symbol&&Symbol.for){var Pe=Symbol.for;pe=Pe("react.element"),me=Pe("react.portal"),ve=Pe("react.fragment"),ge=Pe("react.strict_mode"),ye=Pe("react.profiler"),be=Pe("react.provider"),_e=Pe("react.context"),we=Pe("react.forward_ref"),xe=Pe("react.suspense"),Se=Pe("react.suspense_list"),Ee=Pe("react.memo"),Te=Pe("react.lazy"),Me=Pe("react.block"),Pe("react.scope"),Ce=Pe("react.opaque.id"),Ie=Pe("react.debug_trace_mode"),Ae=Pe("react.offscreen"),ke=Pe("react.legacy_hidden")}var Re,Oe="function"==typeof Symbol&&Symbol.iterator;function Le(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}function Ne(e){if(void 0===Re)try{throw Error()}catch(a_){var t=a_.stack.trim().match(/\n( *(at )?)/);Re=t&&t[1]||""}return"\n"+Re+e}var De=!1;function Fe(e,t){if(!e||De)return"";De=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{De=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ne(e):""}function Ue(e){switch(e.tag){case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 22:return e=Fe(e.type._render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ve:return"Fragment";case me:return"Portal";case ye:return"Profiler";case ge:return"StrictMode";case xe:return"Suspense";case Se:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case _e:return(e.displayName||"Context")+".Consumer";case be:return(e._context.displayName||"Context")+".Provider";case we:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ee:return ze(e.type);case Me:return ze(e._render);case Te:t=e._payload,e=e._init;try{return ze(e(t))}catch(a_){}}return null}function je(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ve(e){e._valueTracker||(e._valueTracker=function(e){var t=Be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function We(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ge(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function qe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=je(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ke(e,t){null!=(t=t.checked)&&fe(e,"checked",t,!1)}function Xe(e,t){Ke(e,t);var n=je(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?$e(e,t.type,n):t.hasOwnProperty("defaultValue")&&$e(e,t.type,je(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ye(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function $e(e,t,n){"number"===t&&We(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Qe(e,t){return e=$({children:void 0},t),(t=function(e){var t="";return Y.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Je(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+je(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ze(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(J(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function et(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(J(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(J(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:je(n)}}function tt(e,t){var n=je(t.value),r=je(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function nt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var rt="http://www.w3.org/1999/xhtml",it="http://www.w3.org/2000/svg";function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ot(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var st,ut,lt=(ut=function(e,t){if(e.namespaceURI!==it||"innerHTML"in e)e.innerHTML=t;else{for((st=st||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=st.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(e,t)}))}:ut);function ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ht={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function dt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ht.hasOwnProperty(e)&&ht[e]?(""+t).trim():t+"px"}function pt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=dt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ht).forEach((function(e){ft.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ht[t]=ht[e]}))}));var mt=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(e,t){if(t){if(mt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(J(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(J(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(J(62))}}function gt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function yt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var bt=null,_t=null,wt=null;function xt(e){if(e=qi(e)){if("function"!=typeof bt)throw Error(J(280));var t=e.stateNode;t&&(t=Xi(t),bt(e.stateNode,e.type,t))}}function St(e){_t?wt?wt.push(e):wt=[e]:_t=e}function Et(){if(_t){var e=_t,t=wt;if(wt=_t=null,xt(e),t)for(e=0;e<t.length;e++)xt(t[e])}}function Tt(e,t){return e(t)}function Mt(e,t,n,r,i){return e(t,n,r,i)}function Ct(){}var It=Tt,At=!1,kt=!1;function Pt(){null===_t&&null===wt||(Ct(),Et())}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=Xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(J(231,t,typeof n));return n}var Ot=!1;if(re)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(ut){Ot=!1}function Nt(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(o_){this.onError(o_)}}var Dt=!1,Ft=null,Ut=!1,zt=null,jt={onError:function(e){Dt=!0,Ft=e}};function Bt(e,t,n,r,i,o,a,s,u){Dt=!1,Ft=null,Nt.apply(jt,arguments)}function Vt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ht(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Wt(e){if(Vt(e)!==e)throw Error(J(188))}function Gt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Vt(e)))throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Wt(i),e;if(o===r)return Wt(i),t;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(3!==n.tag)throw Error(J(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function qt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Kt,Xt,Yt,$t,Qt=!1,Jt=[],Zt=null,en=null,tn=null,nn=new Map,rn=new Map,on=[],an="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sn(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function un(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rn.delete(t.pointerId)}}function ln(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=sn(t,n,r,i,o),null!==t&&(null!==(t=qi(t))&&Xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function cn(e){var t=Gi(e.target);if(null!==t){var n=Vt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ht(n)))return e.blockedOn=t,void $t(e.lanePriority,(function(){Q.unstable_runWithPriority(e.priority,(function(){Yt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function hn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=qi(n))&&Xt(t),e.blockedOn=n,!1;t.shift()}return!0}function fn(e,t,n){hn(e)&&n.delete(t)}function dn(){for(Qt=!1;0<Jt.length;){var e=Jt[0];if(null!==e.blockedOn){null!==(e=qi(e.blockedOn))&&Kt(e);break}for(var t=e.targetContainers;0<t.length;){var n=qn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Jt.shift()}null!==Zt&&hn(Zt)&&(Zt=null),null!==en&&hn(en)&&(en=null),null!==tn&&hn(tn)&&(tn=null),nn.forEach(fn),rn.forEach(fn)}function pn(e,t){e.blockedOn===t&&(e.blockedOn=null,Qt||(Qt=!0,Q.unstable_scheduleCallback(Q.unstable_NormalPriority,dn)))}function mn(e){function t(t){return pn(t,e)}if(0<Jt.length){pn(Jt[0],e);for(var n=1;n<Jt.length;n++){var r=Jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Zt&&pn(Zt,e),null!==en&&pn(en,e),null!==tn&&pn(tn,e),nn.forEach(t),rn.forEach(t),n=0;n<on.length;n++)(r=on[n]).blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&null===(n=on[0]).blockedOn;)cn(n),null===n.blockedOn&&on.shift()}function vn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gn={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},yn={},bn={};function _n(e){if(yn[e])return yn[e];if(!gn[e])return e;var t,n=gn[e];for(t in n)if(n.hasOwnProperty(t)&&t in bn)return yn[e]=n[t];return e}re&&(bn=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);var wn=_n("animationend"),xn=_n("animationiteration"),Sn=_n("animationstart"),En=_n("transitionend"),Tn=new Map,Mn=new Map,Cn=["abort","abort",wn,"animationEnd",xn,"animationIteration",Sn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",En,"transitionEnd","waiting","waiting"];function In(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Mn.set(r,t),Tn.set(r,i),te(i,[r])}}(0,Q.unstable_now)();var An=8;function kn(e){if(0!=(1&e))return An=15,1;if(0!=(2&e))return An=14,2;if(0!=(4&e))return An=13,4;var t=24&e;return 0!==t?(An=12,t):0!=(32&e)?(An=11,32):0!==(t=192&e)?(An=10,t):0!=(256&e)?(An=9,256):0!==(t=3584&e)?(An=8,t):0!=(4096&e)?(An=7,4096):0!==(t=4186112&e)?(An=6,t):0!==(t=62914560&e)?(An=5,t):67108864&e?(An=4,67108864):0!=(134217728&e)?(An=3,134217728):0!==(t=805306368&e)?(An=2,t):0!=(1073741824&e)?(An=1,1073741824):(An=8,e)}function Pn(e,t){var n=e.pendingLanes;if(0===n)return An=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=An=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=kn(u),i=An):0!==(s&=o)&&(r=kn(s),i=An)}else 0!==(o=n&~a)?(r=kn(o),i=An):0!==s&&(r=kn(s),i=An);if(0===r)return 0;if(r=n&((0>(r=31-Fn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(kn(t),i<=An)return t;An=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Fn(t)),r|=e[n],t&=~i;return r}function Rn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function On(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ln(24&~t))?On(10,t):e;case 10:return 0===(e=Ln(192&~t))?On(8,t):e;case 8:return 0===(e=Ln(3584&~t))&&(0===(e=Ln(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ln(805306368&~t))&&(t=268435456),t}throw Error(J(358,e))}function Ln(e){return e&-e}function Nn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dn(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Fn(t)]=n}var Fn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Un(e)/zn|0)|0},Un=Math.log,zn=Math.LN2;var jn=Q.unstable_UserBlockingPriority,Bn=Q.unstable_runWithPriority,Vn=!0;function Hn(e,t,n,r){At||Ct();var i=Gn,o=At;At=!0;try{Mt(i,e,t,n,r)}finally{(At=o)||Pt()}}function Wn(e,t,n,r){Bn(jn,Gn.bind(null,e,t,n,r))}function Gn(e,t,n,r){var i;if(Vn)if((i=0==(4&t))&&0<Jt.length&&-1<an.indexOf(e))e=sn(null,e,t,n,r),Jt.push(e);else{var o=qn(e,t,n,r);if(null===o)i&&un(e,r);else{if(i){if(-1<an.indexOf(e))return e=sn(o,e,t,n,r),void Jt.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Zt=ln(Zt,e,t,n,r,i),!0;case"dragenter":return en=ln(en,e,t,n,r,i),!0;case"mouseover":return tn=ln(tn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return nn.set(o,ln(nn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rn.set(o,ln(rn.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;un(e,r)}Ei(e,t,r,null,n)}}}function qn(e,t,n,r){var i=yt(r);if(null!==(i=Gi(i))){var o=Vt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ht(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ei(e,t,r,i,n),null}var Kn=null,Xn=null,Yn=null;function $n(){if(Yn)return Yn;var e,t,n=Xn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Yn=i.slice(e,1<t?1-t:void 0)}function Qn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jn(){return!0}function Zn(){return!1}function er(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Jn:Zn,this.isPropagationStopped=Zn,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),t}var tr,nr,rr,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},or=er(ir),ar=$({},ir,{view:0,detail:0}),sr=er(ar),ur=$({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&"mousemove"===e.type?(tr=e.screenX-rr.screenX,nr=e.screenY-rr.screenY):nr=tr=0,rr=e),tr)},movementY:function(e){return"movementY"in e?e.movementY:nr}}),lr=er(ur),cr=er($({},ur,{dataTransfer:0})),hr=er($({},ar,{relatedTarget:0})),fr=er($({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),dr=er($({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),pr=er($({},ir,{data:0})),mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gr[e])&&!!t[e]}function br(){return yr}var _r=er($({},ar,{key:function(e){if(e.key){var t=mr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(e){return"keypress"===e.type?Qn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wr=er($({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xr=er($({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br})),Sr=er($({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),Er=er($({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tr=[9,13,27,32],Mr=re&&"CompositionEvent"in window,Cr=null;re&&"documentMode"in document&&(Cr=document.documentMode);var Ir=re&&"TextEvent"in window&&!Cr,Ar=re&&(!Mr||Cr&&8<Cr&&11>=Cr),kr=String.fromCharCode(32),Pr=!1;function Rr(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Lr=!1;var Nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nr[e.type]:"textarea"===t}function Fr(e,t,n,r){St(r),0<(t=Mi(t,"onChange")).length&&(n=new or("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ur=null,zr=null;function jr(e){yi(e,0)}function Br(e){if(He(Ki(e)))return e}function Vr(e,t){if("change"===e)return t}var Hr=!1;if(re){var Wr;if(re){var Gr="oninput"in document;if(!Gr){var qr=document.createElement("div");qr.setAttribute("oninput","return;"),Gr="function"==typeof qr.oninput}Wr=Gr}else Wr=!1;Hr=Wr&&(!document.documentMode||9<document.documentMode)}function Kr(){Ur&&(Ur.detachEvent("onpropertychange",Xr),zr=Ur=null)}function Xr(e){if("value"===e.propertyName&&Br(zr)){var t=[];if(Fr(t,zr,e,yt(e)),e=jr,At)e(t);else{At=!0;try{Tt(e,t)}finally{At=!1,Pt()}}}}function Yr(e,t,n){"focusin"===e?(Kr(),zr=n,(Ur=t).attachEvent("onpropertychange",Xr)):"focusout"===e&&Kr()}function $r(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Br(zr)}function Qr(e,t){if("click"===e)return Br(t)}function Jr(e,t){if("input"===e||"change"===e)return Br(t)}var Zr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ei=Object.prototype.hasOwnProperty;function ti(e,t){if(Zr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ei.call(t,n[r])||!Zr(e[n[r]],t[n[r]]))return!1;return!0}function ni(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ri(e,t){var n,r=ni(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ni(r)}}function ii(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ii(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function oi(){for(var e=window,t=We();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=We((e=t.contentWindow).document)}return t}function ai(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var si=re&&"documentMode"in document&&11>=document.documentMode,ui=null,li=null,ci=null,hi=!1;function fi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;hi||null==ui||ui!==We(r)||("selectionStart"in(r=ui)&&ai(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ci&&ti(ci,r)||(ci=r,0<(r=Mi(li,"onSelect")).length&&(t=new or("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ui)))}In("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),In("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),In(Cn,2);for(var di="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),pi=0;pi<di.length;pi++)Mn.set(di[pi],0);ne("onMouseEnter",["mouseout","mouseover"]),ne("onMouseLeave",["mouseout","mouseover"]),ne("onPointerEnter",["pointerout","pointerover"]),ne("onPointerLeave",["pointerout","pointerover"]),te("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),te("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),te("onBeforeInput",["compositionend","keypress","textInput","paste"]),te("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),te("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),te("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vi=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function gi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(Bt.apply(this,arguments),Dt){if(!Dt)throw Error(J(198));var l=Ft;Dt=!1,Ft=null,Ut||(Ut=!0,zt=l)}}(r,t,void 0,e),e.currentTarget=null}function yi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;gi(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;gi(i,s,l),o=u}}}if(Ut)throw e=zt,Ut=!1,zt=null,e}function bi(e,t){var n=Yi(t),r=e+"__bubble";n.has(r)||(Si(t,e,2,!1),n.add(r))}var _i="_reactListening"+Math.random().toString(36).slice(2);function wi(e){e[_i]||(e[_i]=!0,Z.forEach((function(t){vi.has(t)||xi(t,!1,e,null),xi(t,!0,e,null)})))}function xi(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&vi.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Yi(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Si(o,e,i,t),a.add(s))}function Si(e,t,n,r){var i=Mn.get(t);switch(void 0===i?2:i){case 0:i=Hn;break;case 1:i=Wn;break;default:i=Gn}n=i.bind(null,t,n,e),i=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ei(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Gi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(kt)return e(t,n);kt=!0;try{It(e,t,n)}finally{kt=!1,Pt()}}((function(){var r=o,i=yt(n),a=[];e:{var s=Tn.get(e);if(void 0!==s){var u=or,l=e;switch(e){case"keypress":if(0===Qn(n))break e;case"keydown":case"keyup":u=_r;break;case"focusin":l="focus",u=hr;break;case"focusout":l="blur",u=hr;break;case"beforeblur":case"afterblur":u=hr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=xr;break;case wn:case xn:case Sn:u=fr;break;case En:u=Sr;break;case"scroll":u=sr;break;case"wheel":u=Er;break;case"copy":case"cut":case"paste":u=dr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=wr}var c=0!=(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Rt(p,f))&&c.push(Ti(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Gi(l)&&!l[Hi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Gi(l):null)&&(l!==(h=Vt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=lr,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=wr,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:Ki(u),d=null==l?s:Ki(l),(s=new c(m,p+"leave",u,n,i)).target=h,s.relatedTarget=d,m=null,Gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,m=c),h=m,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Ci(d))p++;for(d=0,m=f;m;m=Ci(m))d++;for(;0<p-d;)c=Ci(c),p--;for(;0<d-p;)f=Ci(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Ci(c),f=Ci(f)}c=null}else c=null;null!==u&&Ii(a,s,u,c,!1),null!==l&&null!==h&&Ii(a,h,l,c,!0)}if("select"===(u=(s=r?Ki(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Vr;else if(Dr(s))if(Hr)v=Jr;else{v=$r;var g=Yr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=Qr);switch(v&&(v=v(e,r))?Fr(a,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&$e(s,"number",s.value)),g=r?Ki(r):window,e){case"focusin":(Dr(g)||"true"===g.contentEditable)&&(ui=g,li=r,ci=null);break;case"focusout":ci=li=ui=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,fi(a,n,i);break;case"selectionchange":if(si)break;case"keydown":case"keyup":fi(a,n,i)}var y;if(Mr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Lr?Rr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ar&&"ko"!==n.locale&&(Lr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Lr&&(y=$n()):(Xn="value"in(Kn=i)?Kn.value:Kn.textContent,Lr=!0)),0<(g=Mi(r,b)).length&&(b=new pr(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=Or(n))&&(b.data=y))),(y=Ir?function(e,t){switch(e){case"compositionend":return Or(t);case"keypress":return 32!==t.which?null:(Pr=!0,kr);case"textInput":return(e=t.data)===kr&&Pr?null:e;default:return null}}(e,n):function(e,t){if(Lr)return"compositionend"===e||!Mr&&Rr(e,t)?(e=$n(),Yn=Xn=Kn=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ar&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Mi(r,"onBeforeInput")).length&&(i=new pr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}yi(a,t)}))}function Ti(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Rt(e,n))&&r.unshift(Ti(e,o,i)),null!=(o=Rt(e,t))&&r.push(Ti(e,o,i))),e=e.return}return r}function Ci(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ii(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Rt(n,o))&&a.unshift(Ti(n,u,s)):i||null!=(u=Rt(n,o))&&a.push(Ti(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ai(){}var ki=null,Pi=null;function Ri(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Oi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Li="function"==typeof setTimeout?setTimeout:void 0,Ni="function"==typeof clearTimeout?clearTimeout:void 0;function Di(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Fi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var zi=0;var ji=Math.random().toString(36).slice(2),Bi="__reactFiber$"+ji,Vi="__reactProps$"+ji,Hi="__reactContainer$"+ji,Wi="__reactEvents$"+ji;function Gi(e){var t=e[Bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hi]||n[Bi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ui(e);null!==e;){if(n=e[Bi])return n;e=Ui(e)}return t}n=(e=n).parentNode}return null}function qi(e){return!(e=e[Bi]||e[Hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(J(33))}function Xi(e){return e[Vi]||null}function Yi(e){var t=e[Wi];return void 0===t&&(t=e[Wi]=new Set),t}var $i=[],Qi=-1;function Ji(e){return{current:e}}function Zi(e){0>Qi||(e.current=$i[Qi],$i[Qi]=null,Qi--)}function eo(e,t){Qi++,$i[Qi]=e.current,e.current=t}var to={},no=Ji(to),ro=Ji(!1),io=to;function oo(e,t){var n=e.type.contextTypes;if(!n)return to;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ao(e){return null!=(e=e.childContextTypes)}function so(){Zi(ro),Zi(no)}function uo(e,t,n){if(no.current!==to)throw Error(J(168));eo(no,t),eo(ro,n)}function lo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(J(108,ze(t)||"Unknown",i));return $({},n,r)}function co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||to,io=no.current,eo(no,e),eo(ro,ro.current),!0}function ho(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=lo(e,t,io),r.__reactInternalMemoizedMergedChildContext=e,Zi(ro),Zi(no),eo(no,e)):Zi(ro),eo(ro,n)}var fo=null,po=null,mo=Q.unstable_runWithPriority,vo=Q.unstable_scheduleCallback,go=Q.unstable_cancelCallback,yo=Q.unstable_shouldYield,bo=Q.unstable_requestPaint,_o=Q.unstable_now,wo=Q.unstable_getCurrentPriorityLevel,xo=Q.unstable_ImmediatePriority,So=Q.unstable_UserBlockingPriority,Eo=Q.unstable_NormalPriority,To=Q.unstable_LowPriority,Mo=Q.unstable_IdlePriority,Co={},Io=void 0!==bo?bo:function(){},Ao=null,ko=null,Po=!1,Ro=_o(),Oo=1e4>Ro?_o:function(){return _o()-Ro};function Lo(){switch(wo()){case xo:return 99;case So:return 98;case Eo:return 97;case To:return 96;case Mo:return 95;default:throw Error(J(332))}}function No(e){switch(e){case 99:return xo;case 98:return So;case 97:return Eo;case 96:return To;case 95:return Mo;default:throw Error(J(332))}}function Do(e,t){return e=No(e),mo(e,t)}function Fo(e,t,n){return e=No(e),vo(e,t,n)}function Uo(){if(null!==ko){var e=ko;ko=null,go(e)}zo()}function zo(){if(!Po&&null!==Ao){Po=!0;var e=0;try{var t=Ao;Do(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ao=null}catch(a_){throw null!==Ao&&(Ao=Ao.slice(e+1)),vo(xo,Uo),a_}finally{Po=!1}}}var jo=de.ReactCurrentBatchConfig;function Bo(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Vo=Ji(null),Ho=null,Wo=null,Go=null;function qo(){Go=Wo=Ho=null}function Ko(e){var t=Vo.current;Zi(Vo),e.type._context._currentValue=t}function Xo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Yo(e,t){Ho=e,Go=Wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ms=!0),e.firstContext=null)}function $o(e,t){if(Go!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Go=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Wo){if(null===Ho)throw Error(J(308));Wo=t,Ho.dependencies={lanes:0,firstContext:t,responders:null}}else Wo=Wo.next=t;return e._currentValue}var Qo=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ea(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ta(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function na(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ra(e,t,n,r){var i=e.updateQueue;Qo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var h=(c=c.updateQueue).lastBaseUpdate;h!==a&&(null===h?c.firstBaseUpdate=l:h.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(h=i.baseState,a=0,c=l=u=null;;){s=o.lane;var f=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,p=o;switch(s=t,f=n,p.tag){case 1:if("function"==typeof(d=p.payload)){h=d.call(f,h,s);break e}h=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(s="function"==typeof(d=p.payload)?d.call(f,h,s):d))break e;h=$({},h,s);break e;case 2:Qo=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else f={eventTime:f,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,ku|=a,e.lanes=a,e.memoizedState=h}}function ia(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(J(191,i));i.call(r)}}}var oa=(new Y.Component).refs;function aa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Vt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=ea(r,i);o.payload=t,null!=n&&(o.callback=n),ta(e,o),rl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=ea(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ta(e,o),rl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=ea(n,r);i.tag=2,null!=t&&(i.callback=t),ta(e,i),rl(e,r,n)}};function ua(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ti(n,r)||!ti(i,o))}function la(e,t,n){var r=!1,i=to,o=t.contextType;return"object"==typeof o&&null!==o?o=$o(o):(i=ao(t)?io:no.current,o=(r=null!=(r=t.contextTypes))?oo(e,i):to),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ca(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=oa,Jo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=$o(o):(o=ao(t)?io:no.current,i.context=oo(e,o)),ra(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(aa(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),ra(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var fa=Array.isArray;function da(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===oa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function pa(e,t){if("textarea"!==e.type)throw Error(J(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ma(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=da(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=da(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Fl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case pe:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=da(e,null,t),n.return=e,n;case me:return(t=jl(t,e.mode,n)).return=e,t}if(fa(t)||Le(t))return(t=Fl(t,e.mode,n,null)).return=e,t;pa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case pe:return n.key===i?n.type===ve?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case me:return n.key===i?l(e,t,n,r):null}if(fa(n)||Le(n))return null!==i?null:c(e,t,n,r,null);pa(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case pe:return e=e.get(null===r.key?n:r.key)||null,r.type===ve?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case me:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(fa(r)||Le(r))return c(t,e=e.get(n)||null,r,i,null);pa(t,r)}return null}return function(s,u,l,c){var p="object"==typeof l&&null!==l&&l.type===ve&&null===l.key;p&&(l=l.props.children);var m="object"==typeof l&&null!==l;if(m)switch(l.$$typeof){case pe:e:{for(m=l.key,p=u;null!==p;){if(p.key===m){switch(p.tag){case 7:if(l.type===ve){n(s,p.sibling),(u=i(p,l.props.children)).return=s,s=u;break e}break;default:if(p.elementType===l.type){n(s,p.sibling),(u=i(p,l.props)).ref=da(s,p,l),u.return=s,s=u;break e}}n(s,p);break}t(s,p),p=p.sibling}l.type===ve?((u=Fl(l.props.children,s.mode,c,l.key)).return=s,s=u):((c=Dl(l.type,l.key,l.props,null,s.mode,c)).ref=da(s,u,l),c.return=s,s=c)}return a(s);case me:e:{for(p=l.key;null!==u;){if(u.key===p){if(4===u.tag&&u.stateNode.containerInfo===l.containerInfo&&u.stateNode.implementation===l.implementation){n(s,u.sibling),(u=i(u,l.children||[])).return=s,s=u;break e}n(s,u);break}t(s,u),u=u.sibling}(u=jl(l,s.mode,c)).return=s,s=u}return a(s)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==u&&6===u.tag?(n(s,u.sibling),(u=i(u,l)).return=s,s=u):(n(s,u),(u=zl(l,s.mode,c)).return=s,s=u),a(s);if(fa(l))return function(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,v=null;null!==p&&m<s.length;m++){p.index>m?(v=p,p=null):v=p.sibling;var g=f(i,p,s[m],u);if(null===g){null===p&&(p=v);break}e&&p&&null===g.alternate&&t(i,p),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g,p=v}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=h(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(v=d(p,i,m,s[m],u))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v);return e&&p.forEach((function(e){return t(i,e)})),l}(s,u,l,c);if(Le(l))return function(i,a,s,u){var l=Le(s);if("function"!=typeof l)throw Error(J(150));if(null==(s=l.call(s)))throw Error(J(151));for(var c=l=null,p=a,m=a=0,v=null,g=s.next();null!==p&&!g.done;m++,g=s.next()){p.index>m?(v=p,p=null):v=p.sibling;var y=f(i,p,g.value,u);if(null===y){null===p&&(p=v);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=v}if(g.done)return n(i,p),l;if(null===p){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,u))&&(a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return l}for(p=r(i,p);!g.done;m++,g=s.next())null!==(g=d(p,i,m,g.value,u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}(s,u,l,c);if(m&&pa(s,l),void 0===l&&!p)switch(s.tag){case 1:case 22:case 0:case 11:case 15:throw Error(J(152,ze(s.type)||"Component"))}return n(s,u)}}var va=ma(!0),ga=ma(!1),ya={},ba=Ji(ya),_a=Ji(ya),wa=Ji(ya);function xa(e){if(e===ya)throw Error(J(174));return e}function Sa(e,t){switch(eo(wa,t),eo(_a,e),eo(ba,ya),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:at(null,"");break;default:t=at(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Zi(ba),eo(ba,t)}function Ea(){Zi(ba),Zi(_a),Zi(wa)}function Ta(e){xa(wa.current);var t=xa(ba.current),n=at(t,e.type);t!==n&&(eo(_a,e),eo(ba,n))}function Ma(e){_a.current===e&&(Zi(ba),Zi(_a))}var Ca=Ji(0);function Ia(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Aa=null,ka=null,Pa=!1;function Ra(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function La(e){if(Pa){var t=ka;if(t){var n=t;if(!Oa(e,t)){if(!(t=Fi(n.nextSibling))||!Oa(e,t))return e.flags=-1025&e.flags|2,Pa=!1,void(Aa=e);Ra(Aa,n)}Aa=e,ka=Fi(t.firstChild)}else e.flags=-1025&e.flags|2,Pa=!1,Aa=e}}function Na(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Da(e){if(e!==Aa)return!1;if(!Pa)return Na(e),Pa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Oi(t,e.memoizedProps))for(t=ka;t;)Ra(e,t),t=Fi(t.nextSibling);if(Na(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ka=Fi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ka=null}}else ka=Aa?Fi(e.stateNode.nextSibling):null;return!0}function Fa(){ka=Aa=null,Pa=!1}var Ua=[];function za(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var ja=de.ReactCurrentDispatcher,Ba=de.ReactCurrentBatchConfig,Va=0,Ha=null,Wa=null,Ga=null,qa=!1,Ka=!1;function Xa(){throw Error(J(321))}function Ya(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zr(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,i,o){if(Va=o,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ja.current=null===e||null===e.memoizedState?xs:Ss,e=n(r,i),Ka){o=0;do{if(Ka=!1,!(25>o))throw Error(J(301));o+=1,Ga=Wa=null,t.updateQueue=null,ja.current=Es,e=n(r,i)}while(Ka)}if(ja.current=ws,t=null!==Wa&&null!==Wa.next,Va=0,Ga=Wa=Ha=null,qa=!1,t)throw Error(J(300));return e}function Qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ga?Ha.memoizedState=Ga=e:Ga=Ga.next=e,Ga}function Ja(){if(null===Wa){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Wa.next;var t=null===Ga?Ha.memoizedState:Ga.next;if(null!==t)Ga=t,Wa=e;else{if(null===e)throw Error(J(310));e={memoizedState:(Wa=e).memoizedState,baseState:Wa.baseState,baseQueue:Wa.baseQueue,queue:Wa.queue,next:null},null===Ga?Ha.memoizedState=Ga=e:Ga=Ga.next=e}return Ga}function Za(e,t){return"function"==typeof t?t(e):t}function es(e){var t=Ja(),n=t.queue;if(null===n)throw Error(J(311));n.lastRenderedReducer=e;var r=Wa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((Va&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,Ha.lanes|=l,ku|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Zr(r,t.memoizedState)||(Ms=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ts(e){var t=Ja(),n=t.queue;if(null===n)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Zr(o,t.memoizedState)||(Ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ns(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Va&e)===e)&&(t._workInProgressVersionPrimary=r,Ua.push(t))),e)return n(t._source);throw Ua.push(t),Error(J(350))}function rs(e,t,n,r){var i=xu;if(null===i)throw Error(J(349));var o=t._getVersion,a=o(t._source),s=ja.current,u=s.useState((function(){return ns(i,t,n)})),l=u[1],c=u[0];u=Ga;var h=e.memoizedState,f=h.refs,d=f.getSnapshot,p=h.source;h=h.subscribe;var m=Ha;return e.memoizedState={refs:f,source:t,subscribe:r},s.useEffect((function(){f.getSnapshot=n,f.setSnapshot=l;var e=o(t._source);if(!Zr(a,e)){e=n(t._source),Zr(c,e)||(l(e),e=nl(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Fn(s),h=1<<u;r[u]|=e,s&=~h}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=nl(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),Zr(d,n)&&Zr(p,t)&&Zr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Za,lastRenderedState:c}).dispatch=l=_s.bind(null,Ha,e),u.queue=e,u.baseQueue=null,c=ns(i,t,n),u.memoizedState=u.baseState=c),c}function is(e,t,n){return rs(Ja(),e,t,n)}function os(e){var t=Qa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Za,lastRenderedState:e}).dispatch=_s.bind(null,Ha,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ha.updateQueue)?(t={lastEffect:null},Ha.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ss(e){return e={current:e},Qa().memoizedState=e}function us(){return Ja().memoizedState}function ls(e,t,n,r){var i=Qa();Ha.flags|=e,i.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var i=Ja();r=void 0===r?null:r;var o=void 0;if(null!==Wa){var a=Wa.memoizedState;if(o=a.destroy,null!==r&&Ya(r,a.deps))return void as(t,n,o,r)}Ha.flags|=e,i.memoizedState=as(1|t,n,o,r)}function hs(e,t){return ls(516,4,e,t)}function fs(e,t){return cs(516,4,e,t)}function ds(e,t){return cs(4,2,e,t)}function ps(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ms(e,t,n){return n=null!=n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)}function vs(){}function gs(e,t){var n=Ja();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ya(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ys(e,t){var n=Ja();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ya(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bs(e,t){var n=Lo();Do(98>n?98:n,(function(){e(!0)})),Do(97<n?97:n,(function(){var n=Ba.transition;Ba.transition=1;try{e(!1),t()}finally{Ba.transition=n}}))}function _s(e,t,n){var r=tl(),i=nl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Ha||null!==a&&a===Ha)Ka=qa=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Zr(u,s))return}catch(l){}rl(e,i,r)}}var ws={readContext:$o,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useLayoutEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useMutableSource:Xa,useOpaqueIdentifier:Xa,unstable_isNewReconciler:!1},xs={readContext:$o,useCallback:function(e,t){return Qa().memoizedState=[e,void 0===t?null:t],e},useContext:$o,useEffect:hs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ls(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ls(4,2,e,t)},useMemo:function(e,t){var n=Qa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_s.bind(null,Ha,e),[r.memoizedState,e]},useRef:ss,useState:os,useDebugValue:vs,useDeferredValue:function(e){var t=os(e),n=t[0],r=t[1];return hs((function(){var t=Ba.transition;Ba.transition=1;try{r(e)}finally{Ba.transition=t}}),[e]),n},useTransition:function(){var e=os(!1),t=e[0];return ss(e=bs.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Qa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},rs(r,e,t,n)},useOpaqueIdentifier:function(){if(Pa){var e=!1,t=function(e){return{$$typeof:Ce,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(zi++).toString(36))),Error(J(355))})),n=os(t)[1];return 0==(2&Ha.mode)&&(Ha.flags|=516,as(5,(function(){n("r:"+(zi++).toString(36))}),void 0,null)),t}return os(t="r:"+(zi++).toString(36)),t},unstable_isNewReconciler:!1},Ss={readContext:$o,useCallback:gs,useContext:$o,useEffect:fs,useImperativeHandle:ms,useLayoutEffect:ds,useMemo:ys,useReducer:es,useRef:us,useState:function(){return es(Za)},useDebugValue:vs,useDeferredValue:function(e){var t=es(Za),n=t[0],r=t[1];return fs((function(){var t=Ba.transition;Ba.transition=1;try{r(e)}finally{Ba.transition=t}}),[e]),n},useTransition:function(){var e=es(Za)[0];return[us().current,e]},useMutableSource:is,useOpaqueIdentifier:function(){return es(Za)[0]},unstable_isNewReconciler:!1},Es={readContext:$o,useCallback:gs,useContext:$o,useEffect:fs,useImperativeHandle:ms,useLayoutEffect:ds,useMemo:ys,useReducer:ts,useRef:us,useState:function(){return ts(Za)},useDebugValue:vs,useDeferredValue:function(e){var t=ts(Za),n=t[0],r=t[1];return fs((function(){var t=Ba.transition;Ba.transition=1;try{r(e)}finally{Ba.transition=t}}),[e]),n},useTransition:function(){var e=ts(Za)[0];return[us().current,e]},useMutableSource:is,useOpaqueIdentifier:function(){return ts(Za)[0]},unstable_isNewReconciler:!1},Ts=de.ReactCurrentOwner,Ms=!1;function Cs(e,t,n,r){t.child=null===e?ga(t,null,n,r):va(t,e.child,n,r)}function Is(e,t,n,r,i){n=n.render;var o=t.ref;return Yo(t,i),r=$a(e,t,n,r,o,i),null===e||Ms?(t.flags|=1,Cs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Xs(e,t,i))}function As(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Ll(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ti)(i,r)&&e.ref===t.ref)?Xs(e,t,o):(t.flags|=1,(e=Nl(a,r)).ref=t.ref,e.return=t,t.child=e)}function ks(e,t,n,r,i,o){if(null!==e&&ti(e.memoizedProps,r)&&e.ref===t.ref){if(Ms=!1,0==(o&i))return t.lanes=e.lanes,Xs(e,t,o);0!=(16384&e.flags)&&(Ms=!0)}return Os(e,t,n,r,o)}function Ps(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},hl(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},hl(t,e),null;t.memoizedState={baseLanes:0},hl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,hl(t,r);return Cs(e,t,i,n),t.child}function Rs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Os(e,t,n,r,i){var o=ao(n)?io:no.current;return o=oo(t,o),Yo(t,i),n=$a(e,t,n,r,o,i),null===e||Ms?(t.flags|=1,Cs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Xs(e,t,i))}function Ls(e,t,n,r,i){if(ao(n)){var o=!0;co(t)}else o=!1;if(Yo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),la(t,n,r),ha(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=$o(l):l=oo(t,l=ao(n)?io:no.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ca(t,a,r,l),Qo=!1;var f=t.memoizedState;a.state=f,ra(t,r,a,i),u=t.memoizedState,s!==r||f!==u||ro.current||Qo?("function"==typeof c&&(aa(t,n,c,r),u=t.memoizedState),(s=Qo||ua(t,n,s,r,f,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,Zo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Bo(t.type,s),a.props=l,h=t.pendingProps,f=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=$o(u):u=oo(t,u=ao(n)?io:no.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||f!==u)&&ca(t,a,r,u),Qo=!1,f=t.memoizedState,a.state=f,ra(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||ro.current||Qo?("function"==typeof d&&(aa(t,n,d,r),p=t.memoizedState),(l=Qo||ua(t,n,l,r,f,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ns(e,t,n,r,o,i)}function Ns(e,t,n,r,i,o){Rs(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&ho(t,n,!1),Xs(e,t,o);r=t.stateNode,Ts.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=va(t,e.child,null,o),t.child=va(t,null,s,o)):Cs(e,t,s,o),t.memoizedState=r.state,i&&ho(t,n,!0),t.child}function Ds(e){var t=e.stateNode;t.pendingContext?uo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&uo(0,t.context,!1),Sa(e,t.containerInfo)}var Fs,Us,zs,js={dehydrated:null,retryLane:0};function Bs(e,t,n){var r,i=t.pendingProps,o=Ca.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),eo(Ca,1&o),null===e?(void 0!==i.fallback&&La(t),e=i.children,o=i.fallback,a?(e=Vs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=js,e):"number"==typeof i.unstable_expectedLoadTime?(e=Vs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=js,t.lanes=33554432,e):((n=Ul({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Ws(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=js,i):(n=Hs(e,t,i.children,n),t.memoizedState=null,n))}function Vs(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Ul(t,i,0,null),n=Fl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Hs(e,t,n,r){var i=e.child;return e=i.sibling,n=Nl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Ws(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Nl(a,s),null!==e?r=Nl(e,r):(r=Fl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Gs(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Xo(e.return,t)}function qs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Cs(e,t,r.children,n),0!=(2&(r=Ca.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,n);else if(19===e.tag)Gs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(eo(Ca,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ia(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ia(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,o,t.lastEffect);break;case"together":qs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ku|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(J(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Ys(e,t){if(!Pa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ao(t.type)&&so(),null;case 3:return Ea(),Zi(ro),Zi(no),za(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Da(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var i=xa(wa.current);if(n=t.type,null!==e&&null!=t.stateNode)Us(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(J(166));return null}if(e=xa(ba.current),Da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Bi]=t,r[Vi]=o,n){case"dialog":bi("cancel",r),bi("close",r);break;case"iframe":case"object":case"embed":bi("load",r);break;case"video":case"audio":for(e=0;e<mi.length;e++)bi(mi[e],r);break;case"source":bi("error",r);break;case"img":case"image":case"link":bi("error",r),bi("load",r);break;case"details":bi("toggle",r);break;case"input":qe(r,o),bi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},bi("invalid",r);break;case"textarea":et(r,o),bi("invalid",r)}for(var a in vt(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):ee.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&bi("scroll",r));switch(n){case"input":Ve(r),Ye(r,o,!0);break;case"textarea":Ve(r),nt(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Ai)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===rt&&(e=ot(n)),e===rt?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bi]=t,e[Vi]=r,Fs(e,t),t.stateNode=e,a=gt(n,r),n){case"dialog":bi("cancel",e),bi("close",e),i=r;break;case"iframe":case"object":case"embed":bi("load",e),i=r;break;case"video":case"audio":for(i=0;i<mi.length;i++)bi(mi[i],e);i=r;break;case"source":bi("error",e),i=r;break;case"img":case"image":case"link":bi("error",e),bi("load",e),i=r;break;case"details":bi("toggle",e),i=r;break;case"input":qe(e,r),i=Ge(e,r),bi("invalid",e);break;case"option":i=Qe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=$({},r,{value:void 0}),bi("invalid",e);break;case"textarea":et(e,r),i=Ze(e,r),bi("invalid",e);break;default:i=r}vt(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?pt(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&lt(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&ct(e,u):"number"==typeof u&&ct(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ee.hasOwnProperty(o)?null!=u&&"onScroll"===o&&bi("scroll",e):null!=u&&fe(e,o,u,a))}switch(n){case"input":Ve(e),Ye(e,r,!1);break;case"textarea":Ve(e),nt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+je(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Je(e,!!r.multiple,o,!1):null!=r.defaultValue&&Je(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ai)}Ri(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)zs(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(J(166));n=xa(wa.current),xa(ba.current),Da(t)?(r=t.stateNode,n=t.memoizedProps,r[Bi]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Bi]=t,t.stateNode=r)}return null;case 13:return Zi(Ca),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Da(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ca.current)?0===Cu&&(Cu=3):(0!==Cu&&3!==Cu||(Cu=4),null===xu||0==(134217727&ku)&&0==(134217727&Pu)||sl(xu,Eu))),(r||n)&&(t.flags|=4),null);case 4:return Ea(),null===e&&wi(t.stateNode.containerInfo),null;case 10:return Ko(t),null;case 17:return ao(t.type)&&so(),null;case 19:if(Zi(Ca),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Ys(r,!1);else{if(0!==Cu||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ia(e))){for(t.flags|=64,Ys(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return eo(Ca,1&Ca.current|2),t.child}e=e.sibling}null!==r.tail&&Oo()>Nu&&(t.flags|=64,o=!0,Ys(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ia(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!Pa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Oo()-r.renderingStartTime>Nu&&1073741824!==n&&(t.flags|=64,o=!0,Ys(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Oo(),n.sibling=null,t=Ca.current,eo(Ca,o?1&t|2:1&t),n):null;case 23:case 24:return fl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(J(156,t.tag))}function Qs(e){switch(e.tag){case 1:ao(e.type)&&so();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ea(),Zi(ro),Zi(no),za(),0!=(64&(t=e.flags)))throw Error(J(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return Zi(Ca),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Zi(Ca),null;case 4:return Ea(),null;case 10:return Ko(e),null;case 23:case 24:return fl(),null;default:return null}}function Js(e,t){try{var n="",r=t;do{n+=Ue(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function Zs(e,t){try{console.error(t.value)}catch(a_){setTimeout((function(){throw a_}))}}Fs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Us=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,xa(ba.current);var o,a=null;switch(n){case"input":i=Ge(e,i),r=Ge(e,r),a=[];break;case"option":i=Qe(e,i),r=Qe(e,r),a=[];break;case"select":i=$({},i,{value:void 0}),r=$({},r,{value:void 0}),a=[];break;case"textarea":i=Ze(e,i),r=Ze(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ai)}for(l in vt(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ee.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(ee.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&bi("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Ce?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},zs=function(e,t,n,r){n!==r&&(t.flags|=4)};var eu="function"==typeof WeakMap?WeakMap:Map;function tu(e,t,n){(n=ea(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zu||(zu=!0,ju=r),Zs(0,t)},n}function nu(e,t,n){(n=ea(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Zs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Bu?Bu=new Set([this]):Bu.add(this),Zs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ru="function"==typeof WeakSet?WeakSet:Set;function iu(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(a_){Al(e,a_)}else t.current=null}function ou(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Bo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Di(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(J(163))}function au(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ml(n,e),Tl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Bo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ia(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ia(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ri(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&mn(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(J(163))}function su(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=dt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function uu(e,t){if(po&&"function"==typeof po.onCommitFiberUnmount)try{po.onCommitFiberUnmount(fo,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ml(t,n);else{r=t;try{i()}catch(o){Al(r,o)}}n=n.next}while(n!==e)}break;case 1:if(iu(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Al(t,o)}break;case 5:iu(t);break;case 4:pu(e,t)}}function lu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function cu(e){return 5===e.tag||3===e.tag||4===e.tag}function hu(e){e:{for(var t=e.return;null!==t;){if(cu(t))break e;t=t.return}throw Error(J(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(J(161))}16&n.flags&&(ct(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||cu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?fu(e,n,t):du(e,n,t)}function fu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ai));else if(4!==r&&null!==(e=e.child))for(fu(e,t,n),e=e.sibling;null!==e;)fu(e,t,n),e=e.sibling}function du(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(du(e,t,n),e=e.sibling;null!==e;)du(e,t,n),e=e.sibling}function pu(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(J(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(uu(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(uu(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function mu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Vi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ke(n,r),gt(e,i),t=gt(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?pt(n,s):"dangerouslySetInnerHTML"===a?lt(n,s):"children"===a?ct(n,s):fe(n,a,s,t)}switch(e){case"input":Xe(n,r);break;case"textarea":tt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Je(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Je(n,!!r.multiple,r.defaultValue,!0):Je(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(J(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,mn(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Lu=Oo(),su(t.child,!0)),void vu(t);case 19:return void vu(t);case 17:return;case 23:case 24:return void su(t,null!==t.memoizedState)}throw Error(J(163))}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ru),t.forEach((function(t){var r=Pl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var yu=Math.ceil,bu=de.ReactCurrentDispatcher,_u=de.ReactCurrentOwner,wu=0,xu=null,Su=null,Eu=0,Tu=0,Mu=Ji(0),Cu=0,Iu=null,Au=0,ku=0,Pu=0,Ru=0,Ou=null,Lu=0,Nu=1/0;function Du(){Nu=Oo()+500}var Fu,Uu=null,zu=!1,ju=null,Bu=null,Vu=!1,Hu=null,Wu=90,Gu=[],qu=[],Ku=null,Xu=0,Yu=null,$u=-1,Qu=0,Ju=0,Zu=null,el=!1;function tl(){return 0!=(48&wu)?Oo():-1!==$u?$u:$u=Oo()}function nl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Lo()?1:2;if(0===Qu&&(Qu=Au),0!==jo.transition){0!==Ju&&(Ju=null!==Ou?Ou.pendingLanes:0),e=Qu;var t=4186112&~Ju;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Lo(),0!=(4&wu)&&98===e?e=On(12,Qu):e=On(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Qu),e}function rl(e,t,n){if(50<Xu)throw Xu=0,Yu=null,Error(J(185));if(null===(e=il(e,t)))return null;Dn(e,t,n),e===xu&&(Pu|=t,4===Cu&&sl(e,Eu));var r=Lo();1===t?0!=(8&wu)&&0==(48&wu)?ul(e):(ol(e,n),0===wu&&(Du(),Uo())):(0==(4&wu)||98!==r&&99!==r||(null===Ku?Ku=new Set([e]):Ku.add(e)),ol(e,n)),Ou=e}function il(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ol(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Fn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,kn(u);var c=An;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Pn(e,e===xu?Eu:0),t=An,0===r)null!==n&&(n!==Co&&go(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Co&&go(n)}15===t?(n=ul.bind(null,e),null===Ao?(Ao=[n],ko=vo(xo,zo)):Ao.push(n),n=Co):14===t?n=Fo(99,ul.bind(null,e)):n=Fo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(J(358,e))}}(t),al.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function al(e){if($u=-1,Ju=Qu=0,0!=(48&wu))throw Error(J(327));var t=e.callbackNode;if(El()&&e.callbackNode!==t)return null;var n=Pn(e,e===xu?Eu:0);if(0===n)return null;var r=n,i=wu;wu|=16;var o=ml();for(xu===e&&Eu===r||(Du(),dl(e,r));;)try{yl();break}catch(s){pl(e,s)}if(qo(),bu.current=o,wu=i,null!==Su?r=0:(xu=null,Eu=0,r=Cu),0!=(Au&Pu))dl(e,0);else if(0!==r){if(2===r&&(wu|=64,e.hydrate&&(e.hydrate=!1,Di(e.containerInfo)),0!==(n=Rn(e))&&(r=vl(e,n))),1===r)throw t=Iu,dl(e,0),sl(e,n),ol(e,Oo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(J(345));case 2:wl(e);break;case 3:if(sl(e,n),(62914560&n)===n&&10<(r=Lu+500-Oo())){if(0!==Pn(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Li(wl.bind(null,e),r);break}wl(e);break;case 4:if(sl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Fn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Oo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*yu(n/1960))-n)){e.timeoutHandle=Li(wl.bind(null,e),n);break}wl(e);break;case 5:wl(e);break;default:throw Error(J(329))}}return ol(e,Oo()),e.callbackNode===t?al.bind(null,e):null}function sl(e,t){for(t&=~Ru,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fn(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!=(48&wu))throw Error(J(327));if(El(),e===xu&&0!=(e.expiredLanes&Eu)){var t=Eu,n=vl(e,t);0!=(Au&Pu)&&(n=vl(e,t=Pn(e,t)))}else n=vl(e,t=Pn(e,0));if(0!==e.tag&&2===n&&(wu|=64,e.hydrate&&(e.hydrate=!1,Di(e.containerInfo)),0!==(t=Rn(e))&&(n=vl(e,t))),1===n)throw n=Iu,dl(e,0),sl(e,t),ol(e,Oo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e),ol(e,Oo()),null}function ll(e,t){var n=wu;wu|=1;try{return e(t)}finally{0===(wu=n)&&(Du(),Uo())}}function cl(e,t){var n=wu;wu&=-2,wu|=8;try{return e(t)}finally{0===(wu=n)&&(Du(),Uo())}}function hl(e,t){eo(Mu,Tu),Tu|=t,Au|=t}function fl(){Tu=Mu.current,Zi(Mu)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Ni(n)),null!==Su)for(n=Su.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&so();break;case 3:Ea(),Zi(ro),Zi(no),za();break;case 5:Ma(r);break;case 4:Ea();break;case 13:case 19:Zi(Ca);break;case 10:Ko(r);break;case 23:case 24:fl()}n=n.return}xu=e,Su=Nl(e.current,null),Eu=Tu=Au=t,Cu=0,Iu=null,Ru=Pu=ku=0}function pl(e,t){for(;;){var n=Su;try{if(qo(),ja.current=ws,qa){for(var r=Ha.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}qa=!1}if(Va=0,Ga=Wa=Ha=null,Ka=!1,_u.current=null,null===n||null===n.return){Cu=1,Iu=t,Su=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Eu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Ca.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var v=f.updateQueue;if(null===v){var g=new Set;g.add(l),f.updateQueue=g}else v.add(l);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ea(-1,1);y.tag=2,ta(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new eu,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var _=kl.bind(null,o,l,s);l.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((ze(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Cu&&(Cu=2),u=Js(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,na(f,tu(0,o,t));break e;case 1:o=u;var w=f.type,x=f.stateNode;if(0==(64&f.flags)&&("function"==typeof w.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Bu||!Bu.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,na(f,nu(f,o,t));break e}}f=f.return}while(null!==f)}_l(n)}catch(S){t=S,Su===n&&null!==n&&(Su=n=n.return);continue}break}}function ml(){var e=bu.current;return bu.current=ws,null===e?ws:e}function vl(e,t){var n=wu;wu|=16;var r=ml();for(xu===e&&Eu===t||dl(e,t);;)try{gl();break}catch(XY){pl(e,XY)}if(qo(),wu=n,bu.current=r,null!==Su)throw Error(J(261));return xu=null,Eu=0,Cu}function gl(){for(;null!==Su;)bl(Su)}function yl(){for(;null!==Su&&!yo();)bl(Su)}function bl(e){var t=Fu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?_l(e):Su=t,_u.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$s(n,t,Tu)))return void(Su=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Tu)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Qs(t)))return n.flags&=2047,void(Su=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Su=t);Su=t=e}while(null!==t);0===Cu&&(Cu=5)}function wl(e){var t=Lo();return Do(99,xl.bind(null,e,t)),null}function xl(e,t){do{El()}while(null!==Hu);if(0!=(48&wu))throw Error(J(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Fn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==Ku&&0==(24&r)&&Ku.has(e)&&Ku.delete(e),e===xu&&(Su=xu=null,Eu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=wu,wu|=32,_u.current=null,ki=Vn,ai(a=oi())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(T){s=null;break e}var c=0,h=-1,f=-1,d=0,p=0,m=a,v=null;t:for(;;){for(var g;m!==s||0!==o&&3!==m.nodeType||(h=c+o),m!==u||0!==l&&3!==m.nodeType||(f=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(g=m.firstChild);)v=m,m=g;for(;;){if(m===a)break t;if(v===s&&++d===o&&(h=c),v===u&&++p===l&&(f=c),null!==(g=m.nextSibling))break;v=(m=v).parentNode}m=g}s=-1===h||-1===f?null:{start:h,end:f}}else s=null;s=s||{start:0,end:0}}else s=null;Pi={focusedElem:a,selectionRange:s},Vn=!1,Zu=null,el=!1,Uu=r;do{try{Sl()}catch(T){if(null===Uu)throw Error(J(330));Al(Uu,T),Uu=Uu.nextEffect}}while(null!==Uu);Zu=null,Uu=r;do{try{for(a=e;null!==Uu;){var y=Uu.flags;if(16&y&&ct(Uu.stateNode,""),128&y){var b=Uu.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&y){case 2:hu(Uu),Uu.flags&=-3;break;case 6:hu(Uu),Uu.flags&=-3,mu(Uu.alternate,Uu);break;case 1024:Uu.flags&=-1025;break;case 1028:Uu.flags&=-1025,mu(Uu.alternate,Uu);break;case 4:mu(Uu.alternate,Uu);break;case 8:pu(a,s=Uu);var w=s.alternate;lu(s),null!==w&&lu(w)}Uu=Uu.nextEffect}}catch(T){if(null===Uu)throw Error(J(330));Al(Uu,T),Uu=Uu.nextEffect}}while(null!==Uu);if(_=Pi,b=oi(),y=_.focusedElem,a=_.selectionRange,b!==y&&y&&y.ownerDocument&&ii(y.ownerDocument.documentElement,y)){null!==a&&ai(y)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(_,y.value.length)):(_=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),s=y.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!_.extend&&w>a&&(s=a,a=w,w=s),s=ri(y,w),o=ri(y,a),s&&o&&(1!==_.rangeCount||_.anchorNode!==s.node||_.anchorOffset!==s.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),_.removeAllRanges(),w>a?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=y;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<b.length;y++)(_=b[y]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Vn=!!ki,Pi=ki=null,e.current=n,Uu=r;do{try{for(y=e;null!==Uu;){var x=Uu.flags;if(36&x&&au(y,Uu.alternate,Uu),128&x){b=void 0;var S=Uu.ref;if(null!==S){var E=Uu.stateNode;switch(Uu.tag){case 5:b=E;break;default:b=E}"function"==typeof S?S(b):S.current=b}}Uu=Uu.nextEffect}}catch(T){if(null===Uu)throw Error(J(330));Al(Uu,T),Uu=Uu.nextEffect}}while(null!==Uu);Uu=null,Io(),wu=i}else e.current=n;if(Vu)Vu=!1,Hu=e,Wu=t;else for(Uu=r;null!==Uu;)t=Uu.nextEffect,Uu.nextEffect=null,8&Uu.flags&&((x=Uu).sibling=null,x.stateNode=null),Uu=t;if(0===(r=e.pendingLanes)&&(Bu=null),1===r?e===Yu?Xu++:(Xu=0,Yu=e):Xu=0,n=n.stateNode,po&&"function"==typeof po.onCommitFiberRoot)try{po.onCommitFiberRoot(fo,n,void 0,64==(64&n.current.flags))}catch(T){}if(ol(e,Oo()),zu)throw zu=!1,e=ju,ju=null,e;return 0!=(8&wu)||Uo(),null}function Sl(){for(;null!==Uu;){var e=Uu.alternate;el||null===Zu||(0!=(8&Uu.flags)?qt(Uu,Zu)&&(el=!0):13===Uu.tag&&gu(e,Uu)&&qt(Uu,Zu)&&(el=!0));var t=Uu.flags;0!=(256&t)&&ou(e,Uu),0==(512&t)||Vu||(Vu=!0,Fo(97,(function(){return El(),null}))),Uu=Uu.nextEffect}}function El(){if(90!==Wu){var e=97<Wu?97:Wu;return Wu=90,Do(e,Cl)}return!1}function Tl(e,t){Gu.push(t,e),Vu||(Vu=!0,Fo(97,(function(){return El(),null})))}function Ml(e,t){qu.push(t,e),Vu||(Vu=!0,Fo(97,(function(){return El(),null})))}function Cl(){if(null===Hu)return!1;var e=Hu;if(Hu=null,0!=(48&wu))throw Error(J(331));var t=wu;wu|=32;var n=qu;qu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(u){if(null===o)throw Error(J(330));Al(o,u)}}for(n=Gu,Gu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(u){if(null===o)throw Error(J(330));Al(o,u)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return wu=t,Uo(),!0}function Il(e,t,n){ta(e,t=tu(0,t=Js(n,t),1)),t=tl(),null!==(e=il(e,1))&&(Dn(e,1,t),ol(e,t))}function Al(e,t){if(3===e.tag)Il(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Il(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Bu||!Bu.has(r))){var i=nu(n,e=Js(t,e),1);if(ta(n,i),i=tl(),null!==(n=il(n,1)))Dn(n,1,i),ol(n,i);else if("function"==typeof r.componentDidCatch&&(null===Bu||!Bu.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,xu===e&&(Eu&n)===n&&(4===Cu||3===Cu&&(62914560&Eu)===Eu&&500>Oo()-Lu?dl(e,0):Ru|=n),ol(e,t)}function Pl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Lo()?1:2:(0===Qu&&(Qu=Au),0===(t=Ln(62914560&~Qu))&&(t=4194304))),n=tl(),null!==(e=il(e,t))&&(Dn(e,t,n),ol(e,n))}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Rl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ll(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ve:return Fl(n.children,i,o,t);case Ie:a=8,i|=16;break;case ge:a=8,i|=1;break;case ye:return(e=Ol(12,n,t,8|i)).elementType=ye,e.type=ye,e.lanes=o,e;case xe:return(e=Ol(13,n,t,i)).type=xe,e.elementType=xe,e.lanes=o,e;case Se:return(e=Ol(19,n,t,i)).elementType=Se,e.lanes=o,e;case Ae:return Ul(n,i,o,t);case ke:return(e=Ol(24,n,t,i)).elementType=ke,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case be:a=10;break e;case _e:a=9;break e;case we:a=11;break e;case Ee:a=14;break e;case Te:a=16,r=null;break e;case Me:a=22;break e}throw Error(J(130,null==e?e:typeof e,""))}return(t=Ol(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){return(e=Ol(23,e,r,t)).elementType=Ae,e.lanes=n,e}function zl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Nn(0),this.expirationTimes=Nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.mutableSourceEagerHydrationData=null}function Vl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:me,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hl(e,t,n,r){var i=t.current,o=tl(),a=nl(i);e:if(n){t:{if(Vt(n=n._reactInternals)!==n||1!==n.tag)throw Error(J(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ao(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(J(171))}if(1===n.tag){var u=n.type;if(ao(u)){n=lo(n,u,s);break e}}n=s}else n=to;return null===t.context?t.context=n:t.pendingContext=n,(t=ea(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ta(i,t),rl(i,a,o),a}function Wl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}function Kl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Bl(e,t,null!=n&&!0===n.hydrate),t=Ol(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,Jo(t),e[Hi]=n.current,wi(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wl(a);s.call(e)}}Hl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Kl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Wl(a);u.call(e)}}cl((function(){Hl(t,a,e,i)}))}return Wl(a)}function $l(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(J(200));return Vl(e,t,null,n)}Fu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ro.current)Ms=!0;else{if(0==(n&r)){switch(Ms=!1,t.tag){case 3:Ds(t),Fa();break;case 5:Ta(t);break;case 1:ao(t.type)&&co(t);break;case 4:Sa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;eo(Vo,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Bs(e,t,n):(eo(Ca,1&Ca.current),null!==(t=Xs(e,t,n))?t.sibling:null);eo(Ca,1&Ca.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ks(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),eo(Ca,Ca.current),r)break;return null;case 23:case 24:return t.lanes=0,Ps(e,t,n)}return Xs(e,t,n)}Ms=0!=(16384&e.flags)}else Ms=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=oo(t,no.current),Yo(t,n),i=$a(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ao(r)){var o=!0;co(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Jo(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&aa(t,r,a,e),i.updater=sa,t.stateNode=i,i._reactInternals=t,ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)}else t.tag=0,Cs(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Ll(e)?1:0;if(null!=e){if((e=e.$$typeof)===we)return 11;if(e===Ee)return 14}return 2}(i),e=Bo(i,e),o){case 0:t=Os(null,t,i,e,n);break e;case 1:t=Ls(null,t,i,e,n);break e;case 11:t=Is(null,t,i,e,n);break e;case 14:t=As(null,t,i,Bo(i.type,e),r,n);break e}throw Error(J(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Os(e,t,r,i=t.elementType===r?i:Bo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:Bo(r,i),n);case 3:if(Ds(t),r=t.updateQueue,null===e||null===r)throw Error(J(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,Zo(e,t),ra(t,r,null,n),(r=t.memoizedState.element)===i)Fa(),t=Xs(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ka=Fi(t.stateNode.containerInfo.firstChild),Aa=t,o=Pa=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Ua.push(o);for(n=ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Cs(e,t,r,n),Fa();t=t.child}return t;case 5:return Ta(t),null===e&&La(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Oi(r,i)?a=null:null!==o&&Oi(r,o)&&(t.flags|=16),Rs(e,t),Cs(e,t,a,n),t.child;case 6:return null===e&&La(t),null;case 13:return Bs(e,t,n);case 4:return Sa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=va(t,null,r,n):Cs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:Bo(r,i),n);case 7:return Cs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(eo(Vo,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Zr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!ro.current){t=Xs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=ea(-1,n&-n)).tag=2,ta(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Xo(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Cs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Yo(t,n),r=r(i=$o(i,o.unstable_observedBits)),t.flags|=1,Cs(e,t,r,n),t.child;case 14:return o=Bo(i=t.type,t.pendingProps),As(e,t,i,o=Bo(i.type,o),r,n);case 15:return ks(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ao(r)?(e=!0,co(t)):e=!1,Yo(t,n),la(t,r,i),ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 23:case 24:return Ps(e,t,n)}throw Error(J(156,t.tag))},Kl.prototype.render=function(e){Hl(e,this._internalRoot,null,null)},Kl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Hl(null,e,null,(function(){t[Hi]=null}))},Kt=function(e){13===e.tag&&(rl(e,4,tl()),ql(e,4))},Xt=function(e){13===e.tag&&(rl(e,67108864,tl()),ql(e,67108864))},Yt=function(e){if(13===e.tag){var t=tl(),n=nl(e);rl(e,n,t),ql(e,n)}},$t=function(e,t){return t()},bt=function(e,t,n){switch(t){case"input":if(Xe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Xi(r);if(!i)throw Error(J(90));He(r),Xe(r,i)}}}break;case"textarea":tt(e,n);break;case"select":null!=(t=n.value)&&Je(e,!!n.multiple,t,!1)}},Tt=ll,Mt=function(e,t,n,r,i){var o=wu;wu|=4;try{return Do(98,e.bind(null,t,n,r,i))}finally{0===(wu=o)&&(Du(),Uo())}},Ct=function(){0==(49&wu)&&(function(){if(null!==Ku){var e=Ku;Ku=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ol(e,Oo())}))}Uo()}(),El())},It=function(e,t){var n=wu;wu|=2;try{return e(t)}finally{0===(wu=n)&&(Du(),Uo())}};var Ql={Events:[qi,Ki,Xi,St,Et,El,{current:!1}]},Jl={findFiberByHostInstance:Gi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Zl={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Gt(e))?null:e.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{fo=ec.inject(Zl),po=ec}catch(ut){}}q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ql,q.createPortal=$l,q.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(J(188));throw Error(J(268,Object.keys(e)))}return e=null===(e=Gt(t))?null:e.stateNode},q.flushSync=function(e,t){var n=wu;if(0!=(48&n))return e(t);wu|=1;try{if(e)return Do(99,e.bind(null,t))}finally{wu=n,Uo()}},q.hydrate=function(e,t,n){if(!Xl(t))throw Error(J(200));return Yl(null,e,t,!0,n)},q.render=function(e,t,n){if(!Xl(t))throw Error(J(200));return Yl(null,e,t,!1,n)},q.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(J(40));return!!e._reactRootContainer&&(cl((function(){Yl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Hi]=null}))})),!0)},q.unstable_batchedUpdates=ll,q.unstable_createPortal=function(e,t){return $l(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},q.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(J(200));if(null==e||void 0===e._reactInternals)throw Error(J(38));return Yl(e,t,n,!1,r)},q.version="17.0.2",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),G.exports=q;var tc=G.exports;function nc(e,t){return(nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rc(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,nc(e,t)}var ic={exports:{}};function oc(){}function ac(){}ac.resetWarningCache=oc;ic.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ac,resetWarningCache:oc};return n.PropTypes=n,n}();var sc=ic.exports;function uc(){return(uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lc(e){return"/"===e.charAt(0)}function cc(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var hc="Invariant failed";function fc(e,t){if(!e)throw new Error(hc)}function dc(e){return"/"===e.charAt(0)?e:"/"+e}function pc(e){return"/"===e.charAt(0)?e.substr(1):e}function mc(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function vc(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function gc(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function yc(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=uc({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(XY){throw XY instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):XY}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&lc(e),a=t&&lc(t),s=o||a;if(e&&lc(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var l=0,c=i.length;c>=0;c--){var h=i[c];"."===h?cc(i,c):".."===h?(cc(i,c),l++):l&&(cc(i,c),l--)}if(!s)for(;l--;l)i.unshift("..");!s||""===i[0]||i[0]&&lc(i[0])||i.unshift("");var f=i.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function bc(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var _c=!("undefined"==typeof window||!window.document||!window.document.createElement);function wc(e,t){t(window.confirm(e))}var xc={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+pc(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:pc,decodePath:dc},slash:{encodePath:dc,decodePath:dc}};function Sc(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Ec(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Tc(e){window.location.replace(Sc(window.location.href)+"#"+e)}function Mc(e){void 0===e&&(e={}),_c||fc(!1);var t=window.history;window.navigator.userAgent.indexOf("Firefox");var n=e,r=n.getUserConfirmation,i=void 0===r?wc:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?vc(dc(e.basename)):"",u=xc[a],l=u.encodePath,c=u.decodePath;function h(){var e=c(Ec());return s&&(e=mc(e,s)),yc(e)}var f=bc();function d(e){uc(T,e),T.length=t.length,f.notifyListeners(T.location,T.action)}var p=!1,m=null;function v(){var e=Ec(),t=l(e);if(e!==t)Tc(t);else{var n=h(),r=T.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===gc(n))return;m=null,function(e){if(p)p=!1,d();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=T.location,n=_.lastIndexOf(gc(t));-1===n&&(n=0);var r=_.lastIndexOf(gc(e));-1===r&&(r=0);var i=n-r;i&&(p=!0,w(i))}(e)}))}}(n)}}var g=Ec(),y=l(g);g!==y&&Tc(y);var b=h(),_=[gc(b)];function w(e){t.go(e)}var x=0;function S(e){1===(x+=e)&&1===e?window.addEventListener("hashchange",v):0===x&&window.removeEventListener("hashchange",v)}var E=!1;var T={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=Sc(window.location.href)),n+"#"+l(s+gc(e))},push:function(e,t){var n="PUSH",r=yc(e,void 0,void 0,T.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=gc(r),i=l(s+t);if(Ec()!==i){m=t,function(e){window.location.hash=e}(i);var o=_.lastIndexOf(gc(T.location)),a=_.slice(0,o+1);a.push(t),_=a,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=yc(e,void 0,void 0,T.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=gc(r),i=l(s+t);Ec()!==i&&(m=t,Tc(i));var o=_.indexOf(gc(T.location));-1!==o&&(_[o]=t),d({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return E||(S(1),E=!0),function(){return E&&(E=!1,S(-1)),t()}},listen:function(e){var t=f.appendListener(e);return S(1),function(){S(-1),t()}}};return T}var Cc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function Ic(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var Ac=W.createContext||function(e,t){var n,r,i,o="__create-react-context-"+((Cc[i="__global_unique_id__"]=(Cc[i]||0)+1)+"__"),a=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=Ic(t.props.value),t}rc(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o==1/a:o!=o&&a!=a)?n=0:(n="function"==typeof t?t(r,i):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(s.exports.Component);a.childContextTypes=((n={})[o]=sc.object.isRequired,n);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}rc(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?1073741823:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?1073741823:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(s.exports.Component);return u.contextTypes=((r={})[o]=sc.object,r),{Provider:a,Consumer:u}},kc={exports:{}},Pc=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};kc.exports=Bc,kc.exports.parse=Oc,kc.exports.compile=function(e,t){return Nc(Oc(e,t),t)},kc.exports.tokensToFunction=Nc,kc.exports.tokensToRegExp=jc;var Rc=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Oc(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=Rc.exec(e));){var u=n[0],l=n[1],c=n.index;if(a+=e.slice(o,c),o=c+u.length,l)a+=l[1];else{var h=e[o],f=n[2],d=n[3],p=n[4],m=n[5],v=n[6],g=n[7];a&&(r.push(a),a="");var y=null!=f&&null!=h&&h!==f,b="+"===v||"*"===v,_="?"===v||"*"===v,w=n[2]||s,x=p||m;r.push({name:d||i++,prefix:f||"",delimiter:w,optional:_,repeat:b,partial:y,asterisk:!!g,pattern:x?Fc(x):g?".*":"[^"+Dc(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function Lc(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function Nc(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",zc(t)));return function(t,r){for(var i="",o=t||{},a=(r||{}).pretty?Lc:encodeURIComponent,s=0;s<e.length;s++){var u=e[s];if("string"!=typeof u){var l,c=o[u.name];if(null==c){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(Pc(c)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<c.length;h++){if(l=a(c[h]),!n[s].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===h?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?encodeURI(c).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(c),!n[s].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');i+=u.prefix+l}}else i+=u}return i}}function Dc(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Fc(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Uc(e,t){return e.keys=t,e}function zc(e){return e&&e.sensitive?"":"i"}function jc(e,t,n){Pc(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=Dc(s);else{var u=Dc(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+u+l+")*"),o+=l=s.optional?s.partial?u+"("+l+")?":"(?:"+u+"("+l+"))?":u+"("+l+")"}}var c=Dc(n.delimiter||"/"),h=o.slice(-c.length)===c;return r||(o=(h?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+c+"|$)",Uc(new RegExp("^"+o,zc(n)),t)}function Bc(e,t,n){return Pc(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Uc(e,t)}(e,t):Pc(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Bc(e[i],t,n).source);return Uc(new RegExp("(?:"+r.join("|")+")",zc(n)),t)}(e,t,n):function(e,t,n){return jc(Oc(e,n),t,n)}(e,t,n)}var Vc=kc.exports,Hc={exports:{}},Wc={},Gc="function"==typeof Symbol&&Symbol.for,qc=Gc?Symbol.for("react.element"):60103,Kc=Gc?Symbol.for("react.portal"):60106,Xc=Gc?Symbol.for("react.fragment"):60107,Yc=Gc?Symbol.for("react.strict_mode"):60108,$c=Gc?Symbol.for("react.profiler"):60114,Qc=Gc?Symbol.for("react.provider"):60109,Jc=Gc?Symbol.for("react.context"):60110,Zc=Gc?Symbol.for("react.async_mode"):60111,eh=Gc?Symbol.for("react.concurrent_mode"):60111,th=Gc?Symbol.for("react.forward_ref"):60112,nh=Gc?Symbol.for("react.suspense"):60113,rh=Gc?Symbol.for("react.suspense_list"):60120,ih=Gc?Symbol.for("react.memo"):60115,oh=Gc?Symbol.for("react.lazy"):60116,ah=Gc?Symbol.for("react.block"):60121,sh=Gc?Symbol.for("react.fundamental"):60117,uh=Gc?Symbol.for("react.responder"):60118,lh=Gc?Symbol.for("react.scope"):60119;function ch(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case qc:switch(e=e.type){case Zc:case eh:case Xc:case $c:case Yc:case nh:return e;default:switch(e=e&&e.$$typeof){case Jc:case th:case oh:case ih:case Qc:return e;default:return t}}case Kc:return t}}}function hh(e){return ch(e)===eh}function fh(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Wc.AsyncMode=Zc,Wc.ConcurrentMode=eh,Wc.ContextConsumer=Jc,Wc.ContextProvider=Qc,Wc.Element=qc,Wc.ForwardRef=th,Wc.Fragment=Xc,Wc.Lazy=oh,Wc.Memo=ih,Wc.Portal=Kc,Wc.Profiler=$c,Wc.StrictMode=Yc,Wc.Suspense=nh,Wc.isAsyncMode=function(e){return hh(e)||ch(e)===Zc},Wc.isConcurrentMode=hh,Wc.isContextConsumer=function(e){return ch(e)===Jc},Wc.isContextProvider=function(e){return ch(e)===Qc},Wc.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===qc},Wc.isForwardRef=function(e){return ch(e)===th},Wc.isFragment=function(e){return ch(e)===Xc},Wc.isLazy=function(e){return ch(e)===oh},Wc.isMemo=function(e){return ch(e)===ih},Wc.isPortal=function(e){return ch(e)===Kc},Wc.isProfiler=function(e){return ch(e)===$c},Wc.isStrictMode=function(e){return ch(e)===Yc},Wc.isSuspense=function(e){return ch(e)===nh},Wc.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Xc||e===eh||e===$c||e===Yc||e===nh||e===rh||"object"==typeof e&&null!==e&&(e.$$typeof===oh||e.$$typeof===ih||e.$$typeof===Qc||e.$$typeof===Jc||e.$$typeof===th||e.$$typeof===sh||e.$$typeof===uh||e.$$typeof===lh||e.$$typeof===ah)},Wc.typeOf=ch,Hc.exports=Wc;var dh=Hc.exports,ph={};ph[dh.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ph[dh.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var mh=function(e){var t=Ac();return t.displayName=e,t},vh=mh("Router-History"),gh=mh("Router"),yh=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}rc(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return W.createElement(gh.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},W.createElement(vh.Provider,{children:this.props.children||null,value:this.props.history}))},t}(W.Component);W.Component,W.Component;var bh={},_h=0;function wh(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,l=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=bh[n]||(bh[n]={});if(r[e])return r[e];var i=[],o={regexp:Vc(e,i,t),keys:i};return _h<1e4&&(r[e]=o,_h++),o}(n,{end:o,strict:s,sensitive:l}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var c=u[0],h=u.slice(1),f=e===c;return o&&!f?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:f,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var xh=function(e){function t(){return e.apply(this,arguments)||this}return rc(t,e),t.prototype.render=function(){var e=this;return W.createElement(gh.Consumer,null,(function(t){t||fc(!1);var n=e.props.location||t.location,r=uc({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?wh(n.pathname,e.props):t.match}),i=e.props,o=i.children,a=i.component,s=i.render;return Array.isArray(o)&&function(e){return 0===W.Children.count(e)}(o)&&(o=null),W.createElement(gh.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:a?W.createElement(a,r):s?s(r):null:"function"==typeof o?o(r):null)}))},t}(W.Component);W.Component;var Sh=function(e){function t(){return e.apply(this,arguments)||this}return rc(t,e),t.prototype.render=function(){var e=this;return W.createElement(gh.Consumer,null,(function(t){t||fc(!1);var n,r,i=e.props.location||t.location;return W.Children.forEach(e.props.children,(function(e){if(null==r&&W.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?wh(i.pathname,uc({},e.props,{path:o})):t.match}})),r?W.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(W.Component);W.useContext,W.Component;var Eh=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Mc(t.props),t}return rc(t,e),t.prototype.render=function(){return W.createElement(yh,{history:this.history,children:this.props.children})},t}(W.Component),Th=function(e,t){return"function"==typeof e?e(t):e},Mh=function(e,t){return"string"==typeof e?yc(e,null,null,t):e},Ch=function(e){return e},Ih=W.forwardRef;void 0===Ih&&(Ih=Ch);var Ah=Ih((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=fh(e,["innerRef","navigate","onClick"]),a=o.target,s=uc({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return s.ref=Ch!==Ih&&t||n,W.createElement("a",s)})),kh=Ih((function(e,t){var n=e.component,r=void 0===n?Ah:n,i=e.replace,o=e.to,a=e.innerRef,s=fh(e,["component","replace","to","innerRef"]);return W.createElement(gh.Consumer,null,(function(e){e||fc(!1);var n=e.history,u=Mh(Th(o,e.location),e.location),l=u?n.createHref(u):"",c=uc({},s,{href:l,navigate:function(){var t=Th(o,e.location),r=gc(e.location)===gc(Mh(t));(i||r?n.replace:n.push)(t)}});return Ch!==Ih?c.ref=t||a:c.innerRef=a,W.createElement(r,c)}))})),Ph=function(e){return e},Rh=W.forwardRef;void 0===Rh&&(Rh=Ph),Rh((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,a=e.activeStyle,s=e.className,u=e.exact,l=e.isActive,c=e.location,h=e.sensitive,f=e.strict,d=e.style,p=e.to,m=e.innerRef,v=fh(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return W.createElement(gh.Consumer,null,(function(e){e||fc(!1);var n=c||e.location,i=Mh(Th(p,n),n),g=i.pathname,y=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=y?wh(n.pathname,{path:y,exact:u,sensitive:h,strict:f}):null,_=!!(l?l(b,n):b),w="function"==typeof s?s(_):s,x="function"==typeof d?d(_):d;_&&(w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(w,o),x=uc({},x,a));var S=uc({"aria-current":_&&r||null,className:w,style:x,to:i},v);return Ph!==Rh?S.ref=t||m:S.innerRef=m,W.createElement(kh,S)}))}));
/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const Oh=1,Lh=2;class Nh{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Dh=[];for(let kae=0;kae<256;kae++)Dh[kae]=(kae<16?"0":"")+kae.toString(16);const Fh=Math.PI/180,Uh=180/Math.PI;function zh(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Dh[255&e]+Dh[e>>8&255]+Dh[e>>16&255]+Dh[e>>24&255]+"-"+Dh[255&t]+Dh[t>>8&255]+"-"+Dh[t>>16&15|64]+Dh[t>>24&255]+"-"+Dh[63&n|128]+Dh[n>>8&255]+"-"+Dh[n>>16&255]+Dh[n>>24&255]+Dh[255&r]+Dh[r>>8&255]+Dh[r>>16&255]+Dh[r>>24&255]).toUpperCase()}function jh(e,t,n){return Math.max(t,Math.min(n,e))}function Bh(e,t,n){return(1-n)*e+n*t}function Vh(e){return 0==(e&e-1)&&0!==e}function Hh(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}class Wh{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Wh.prototype.isVector2=!0;class Gh{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*x,i[1]=u*p+l*g+c*_,i[4]=u*m+l*y+c*w,i[7]=u*v+l*b+c*x,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*w,i[8]=h*v+f*b+d*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=l*o-a*u,h=a*s-l*i,f=u*i-o*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let qh;Gh.prototype.isMatrix3=!0;class Kh{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===qh&&(qh=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),qh.width=e.width,qh.height=e.height;const n=qh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=qh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Xh=0;class Yh extends Nh{constructor(e=Yh.DEFAULT_IMAGE,t=Yh.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,u=1,l=3e3){super(),Object.defineProperty(this,"id",{value:Xh++}),this.uuid=zh(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Wh(0,0),this.repeat=new Wh(1,1),this.center=new Wh(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gh,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=zh()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push($h(r[e].image)):t.push($h(r[e]))}else t=$h(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function $h(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Kh.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Yh.DEFAULT_IMAGE=void 0,Yh.DEFAULT_MAPPING=300,Yh.prototype.isTexture=!0;class Qh{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(c-p)<o&&Math.abs(d-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+p)<a&&Math.abs(d+m)<a&&Math.abs(u+f+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(u+1)/2,s=(f+1)/2,g=(v+1)/2,y=(l+h)/4,b=(c+p)/4,_=(d+m)/4;return e>s&&e>g?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>g?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=_/r):g<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=b/i,r=_/i),this.set(n,r,i,t),this}let g=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(g)<.001&&(g=1),this.x=(m-d)/g,this.y=(c-p)/g,this.z=(h-l)/g,this.w=Math.acos((u+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Qh.prototype.isVector4=!0;class Jh extends Nh{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Qh(0,0,e,t),this.scissorTest=!1,this.viewport=new Qh(0,0,e,t),this.texture=new Yh(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=((e,o)=>{for(var a in o||(o={}))n.call(o,a)&&i(e,a,o[a]);if(t)for(var a of t(o))r.call(o,a)&&i(e,a,o[a]);return e})({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Jh.prototype.isWebGLRenderTarget=!0;(class extends Jh{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let i=0;i<n;i++)this.texture[i]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Zh extends Jh{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Zh.prototype.isWebGLMultisampleRenderTarget=!0;class ef{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3];const h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){let e=1-a;const t=s*h+u*f+l*d+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,u=u*e+f*i,l=l*e+d*i,c=c*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=e,u*=e,l*=e,c*=e}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return e[t]=a*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-a*f,e[t+2]=u*d+l*f+a*h-s*c,e[t+3]=l*d-a*c-s*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+a+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(i-u)*e,this._z=(o-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(l-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+u)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(o-r)/e,this._x=(i+u)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jh(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(s),l=Math.atan2(u,a),c=Math.sin((1-t)*l)/u,h=Math.sin(t*l)/u;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ef.prototype.isQuaternion=!0;class tf{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(rf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return nf.copy(this).projectOnVector(e),this.sub(nf)}reflect(e){return this.sub(nf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jh(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}tf.prototype.isVector3=!0;const nf=new tf,rf=new ef;class of{constructor(e=new tf(1/0,1/0,1/0),t=new tf(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.length;s<u;s+=3){const u=e[s],l=e[s+1],c=e[s+2];u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>o&&(o=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.count;s<u;s++){const u=e.getX(s),l=e.getY(s),c=e.getZ(s);u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>o&&(o=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=sf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),uf.copy(t.boundingBox),uf.applyMatrix4(e.matrixWorld),this.union(uf));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,sf),sf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mf),vf.subVectors(this.max,mf),lf.subVectors(e.a,mf),cf.subVectors(e.b,mf),hf.subVectors(e.c,mf),ff.subVectors(cf,lf),df.subVectors(hf,cf),pf.subVectors(lf,hf);let t=[0,-ff.z,ff.y,0,-df.z,df.y,0,-pf.z,pf.y,ff.z,0,-ff.x,df.z,0,-df.x,pf.z,0,-pf.x,-ff.y,ff.x,0,-df.y,df.x,0,-pf.y,pf.x,0];return!!bf(t,lf,cf,hf,vf)&&(t=[1,0,0,0,1,0,0,0,1],!!bf(t,lf,cf,hf,vf)&&(gf.crossVectors(ff,df),t=[gf.x,gf.y,gf.z],bf(t,lf,cf,hf,vf)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return sf.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(sf).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(af[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),af[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),af[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),af[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),af[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),af[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),af[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),af[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(af)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}of.prototype.isBox3=!0;const af=[new tf,new tf,new tf,new tf,new tf,new tf,new tf,new tf],sf=new tf,uf=new of,lf=new tf,cf=new tf,hf=new tf,ff=new tf,df=new tf,pf=new tf,mf=new tf,vf=new tf,gf=new tf,yf=new tf;function bf(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){yf.fromArray(e,o);const a=i.x*Math.abs(yf.x)+i.y*Math.abs(yf.y)+i.z*Math.abs(yf.z),s=t.dot(yf),u=n.dot(yf),l=r.dot(yf);if(Math.max(-Math.max(s,u,l),Math.min(s,u,l))>a)return!1}return!0}const _f=new of,wf=new tf,xf=new tf,Sf=new tf;class Ef{constructor(e=new tf,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):_f.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Sf.subVectors(e,this.center);const t=Sf.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Sf.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return xf.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(wf.copy(e.center).add(xf)),this.expandByPoint(wf.copy(e.center).sub(xf)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tf=new tf,Mf=new tf,Cf=new tf,If=new tf,Af=new tf,kf=new tf,Pf=new tf;class Rf{constructor(e=new tf,t=new tf(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tf.copy(this.direction).multiplyScalar(t).add(this.origin),Tf.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Mf.copy(e).add(t).multiplyScalar(.5),Cf.copy(t).sub(e).normalize(),If.copy(this.origin).sub(Mf);const i=.5*e.distanceTo(t),o=-this.direction.dot(Cf),a=If.dot(this.direction),s=-If.dot(Cf),u=If.lengthSq(),l=Math.abs(1-o*o);let c,h,f,d;if(l>0)if(c=o*s-a,h=o*a-s,d=i*l,c>=0)if(h>=-d)if(h<=d){const e=1/l;c*=e,h*=e,f=c*(c+o*h+2*a)+h*(o*c+h+2*s)+u}else h=i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;else h=-i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;else h<=-d?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+u):h<=d?(c=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+u):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+u);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Cf).multiplyScalar(h).add(Mf),f}intersectSphere(e,t){Tf.subVectors(e.center,this.origin);const n=Tf.dot(this.direction),r=Tf.dot(Tf)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Tf)}intersectTriangle(e,t,n,r,i){Af.subVectors(t,e),kf.subVectors(n,e),Pf.crossVectors(Af,kf);let o,a=this.direction.dot(Pf);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}If.subVectors(this.origin,e);const s=o*this.direction.dot(kf.crossVectors(If,kf));if(s<0)return null;const u=o*this.direction.dot(Af.cross(If));if(u<0)return null;if(s+u>a)return null;const l=-o*If.dot(Pf);return l<0?null:this.at(l/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Of{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Of).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Lf.setFromMatrixColumn(e,0).length(),i=1/Lf.setFromMatrixColumn(e,1).length(),o=1/Lf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=o*l,n=o*c,r=a*l,i=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=n+r*u,t[5]=e-i*u,t[9]=-a*s,t[2]=i-e*u,t[6]=r+n*u,t[10]=o*s}else if("YXZ"===e.order){const e=s*l,n=s*c,r=u*l,i=u*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*l,n=s*c,r=u*l,i=u*c;t[0]=e-i*a,t[4]=-o*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*l,t[9]=i-e*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*l,n=o*c,r=a*l,i=a*c;t[0]=s*l,t[4]=r*u-n,t[8]=e*u+i,t[1]=s*c,t[5]=i*u+e,t[9]=n*u-r,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*l,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=e*c+i,t[5]=o*l,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*l,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Df,e,Ff)}lookAt(e,t,n){const r=this.elements;return jf.subVectors(e,t),0===jf.lengthSq()&&(jf.z=1),jf.normalize(),Uf.crossVectors(n,jf),0===Uf.lengthSq()&&(1===Math.abs(n.z)?jf.x+=1e-4:jf.z+=1e-4,jf.normalize(),Uf.crossVectors(n,jf)),Uf.normalize(),zf.crossVectors(jf,Uf),r[0]=Uf.x,r[4]=zf.x,r[8]=jf.x,r[1]=Uf.y,r[5]=zf.y,r[9]=jf.y,r[2]=Uf.z,r[6]=zf.z,r[10]=jf.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],E=r[12],T=r[1],M=r[5],C=r[9],I=r[13],A=r[2],k=r[6],P=r[10],R=r[14],O=r[3],L=r[7],N=r[11],D=r[15];return i[0]=o*w+a*T+s*A+u*O,i[4]=o*x+a*M+s*k+u*L,i[8]=o*S+a*C+s*P+u*N,i[12]=o*E+a*I+s*R+u*D,i[1]=l*w+c*T+h*A+f*O,i[5]=l*x+c*M+h*k+f*L,i[9]=l*S+c*C+h*P+f*N,i[13]=l*E+c*I+h*R+f*D,i[2]=d*w+p*T+m*A+v*O,i[6]=d*x+p*M+m*k+v*L,i[10]=d*S+p*C+m*P+v*N,i[14]=d*E+p*I+m*R+v*D,i[3]=g*w+y*T+b*A+_*O,i[7]=g*x+y*M+b*k+_*L,i[11]=g*S+y*C+b*P+_*N,i[15]=g*E+y*I+b*R+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],v=e[15],g=c*m*u-p*h*u+p*s*f-a*m*f-c*s*v+a*h*v,y=d*h*u-l*m*u-d*s*f+o*m*f+l*s*v-o*h*v,b=l*p*u-d*c*u+d*a*f-o*p*f-l*a*v+o*c*v,_=d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m,w=t*g+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=g*x,e[1]=(p*h*i-c*m*i-p*r*f+n*m*f+c*r*v-n*h*v)*x,e[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*v+n*s*v)*x,e[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*f-n*s*f)*x,e[4]=y*x,e[5]=(l*m*i-d*h*i+d*r*f-t*m*f-l*r*v+t*h*v)*x,e[6]=(d*s*i-o*m*i-d*r*u+t*m*u+o*r*v-t*s*v)*x,e[7]=(o*h*i-l*s*i+l*r*u-t*h*u-o*r*f+t*s*f)*x,e[8]=b*x,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*v-t*c*v)*x,e[10]=(o*p*i-d*a*i+d*n*u-t*p*u-o*n*v+t*a*v)*x,e[11]=(l*a*i-o*c*i-l*n*u+t*c*u+o*n*f-t*a*f)*x,e[12]=_*x,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*m+t*c*m)*x,e[14]=(d*a*r-o*p*r-d*n*s+t*p*s+o*n*m-t*a*m)*x,e[15]=(o*c*r-l*a*r+l*n*s-t*c*s-o*n*h+t*a*h)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Lf.set(r[0],r[1],r[2]).length();const o=Lf.set(r[4],r[5],r[6]).length(),a=Lf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Nf.copy(this);const s=1/i,u=1/o,l=1/a;return Nf.elements[0]*=s,Nf.elements[1]*=s,Nf.elements[2]*=s,Nf.elements[4]*=u,Nf.elements[5]*=u,Nf.elements[6]*=u,Nf.elements[8]*=l,Nf.elements[9]*=l,Nf.elements[10]*=l,t.setFromRotationMatrix(Nf),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Of.prototype.isMatrix4=!0;const Lf=new tf,Nf=new Of,Df=new tf(0,0,0),Ff=new tf(1,1,1),Uf=new tf,zf=new tf,jf=new tf,Bf=new Of,Vf=new ef;class Hf{constructor(e=0,t=0,n=0,r=Hf.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(jh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-jh(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(jh(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-jh(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(jh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-jh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Bf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Bf,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Vf.setFromEuler(this),this.setFromQuaternion(Vf,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new tf(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hf.prototype.isEuler=!0,Hf.DefaultOrder="XYZ",Hf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Wf{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Gf=0;const qf=new tf,Kf=new ef,Xf=new Of,Yf=new tf,$f=new tf,Qf=new tf,Jf=new ef,Zf=new tf(1,0,0),ed=new tf(0,1,0),td=new tf(0,0,1),nd={type:"added"},rd={type:"removed"};class id extends Nh{constructor(){super(),Object.defineProperty(this,"id",{value:Gf++}),this.uuid=zh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=id.DefaultUp.clone();const e=new tf,t=new Hf,n=new ef,r=new tf(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Of},normalMatrix:{value:new Gh}}),this.matrix=new Of,this.matrixWorld=new Of,this.matrixAutoUpdate=id.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Wf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Kf.setFromAxisAngle(e,t),this.quaternion.multiply(Kf),this}rotateOnWorldAxis(e,t){return Kf.setFromAxisAngle(e,t),this.quaternion.premultiply(Kf),this}rotateX(e){return this.rotateOnAxis(Zf,e)}rotateY(e){return this.rotateOnAxis(ed,e)}rotateZ(e){return this.rotateOnAxis(td,e)}translateOnAxis(e,t){return qf.copy(e).applyQuaternion(this.quaternion),this.position.add(qf.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Zf,e)}translateY(e){return this.translateOnAxis(ed,e)}translateZ(e){return this.translateOnAxis(td,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Xf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Yf.copy(e):Yf.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),$f.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xf.lookAt($f,Yf,this.up):Xf.lookAt(Yf,$f,this.up),this.quaternion.setFromRotationMatrix(Xf),r&&(Xf.extractRotation(r.matrixWorld),Kf.setFromRotationMatrix(Xf),this.quaternion.premultiply(Kf.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(nd)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rd)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(rd)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Xf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xf),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($f,e,Qf),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($f,Jf,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),u=o(e.skeletons),l=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),u.length>0&&(n.skeletons=u),l.length>0&&(n.animations=l)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}id.DefaultUp=new tf(0,1,0),id.DefaultMatrixAutoUpdate=!0,id.prototype.isObject3D=!0;const od=new tf,ad=new tf,sd=new tf,ud=new tf,ld=new tf,cd=new tf,hd=new tf,fd=new tf,dd=new tf,pd=new tf;class md{constructor(e=new tf,t=new tf,n=new tf){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),od.subVectors(e,t),r.cross(od);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){od.subVectors(r,t),ad.subVectors(n,t),sd.subVectors(e,t);const o=od.dot(od),a=od.dot(ad),s=od.dot(sd),u=ad.dot(ad),l=ad.dot(sd),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,f=(u*s-a*l)*h,d=(o*l-a*s)*h;return i.set(1-f-d,d,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ud),ud.x>=0&&ud.y>=0&&ud.x+ud.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,ud),s.set(0,0),s.addScaledVector(i,ud.x),s.addScaledVector(o,ud.y),s.addScaledVector(a,ud.z),s}static isFrontFacing(e,t,n,r){return od.subVectors(n,t),ad.subVectors(e,t),od.cross(ad).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return od.subVectors(this.c,this.b),ad.subVectors(this.a,this.b),.5*od.cross(ad).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return md.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return md.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return md.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return md.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return md.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;ld.subVectors(r,n),cd.subVectors(i,n),fd.subVectors(e,n);const s=ld.dot(fd),u=cd.dot(fd);if(s<=0&&u<=0)return t.copy(n);dd.subVectors(e,r);const l=ld.dot(dd),c=cd.dot(dd);if(l>=0&&c<=l)return t.copy(r);const h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),t.copy(n).addScaledVector(ld,o);pd.subVectors(e,i);const f=ld.dot(pd),d=cd.dot(pd);if(d>=0&&f<=d)return t.copy(i);const p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return a=u/(u-d),t.copy(n).addScaledVector(cd,a);const m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return hd.subVectors(i,r),a=(c-l)/(c-l+(f-d)),t.copy(r).addScaledVector(hd,a);const v=1/(m+p+h);return o=p*v,a=h*v,t.copy(n).addScaledVector(ld,o).addScaledVector(cd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let vd=0;class gd extends Nh{constructor(){super(),Object.defineProperty(this,"id",{value:vd++}),this.uuid=zh(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}gd.prototype.isMaterial=!0;const yd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bd={h:0,s:0,l:0},_d={h:0,s:0,l:0};function wd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function xd(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Sd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Ed{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){var r;if(e=(e%(r=1)+r)%r,t=jh(t,0,1),n=jh(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=wd(i,r,e+1/3),this.g=wd(i,r,e),this.b=wd(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=yd[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=xd(e.r),this.g=xd(e.g),this.b=xd(e.b),this}copyLinearToSRGB(e){return this.r=Sd(e.r),this.g=Sd(e.g),this.b=Sd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const u=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=u<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=u,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(bd),bd.h+=e,bd.s+=t,bd.l+=n,this.setHSL(bd.h,bd.s,bd.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(bd),e.getHSL(_d);const n=Bh(bd.h,_d.h,t),r=Bh(bd.s,_d.s,t),i=Bh(bd.l,_d.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ed.NAMES=yd,Ed.prototype.isColor=!0,Ed.prototype.r=1,Ed.prototype.g=1,Ed.prototype.b=1;class Td extends gd{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ed(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}Td.prototype.isMeshBasicMaterial=!0;const Md=new tf,Cd=new Wh;class Id{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Ed),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Wh),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new tf),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Qh),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Cd.fromBufferAttribute(this,t),Cd.applyMatrix3(e),this.setXY(t,Cd.x,Cd.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Md.fromBufferAttribute(this,t),Md.applyMatrix3(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Md.x=this.getX(t),Md.y=this.getY(t),Md.z=this.getZ(t),Md.applyMatrix4(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Md.x=this.getX(t),Md.y=this.getY(t),Md.z=this.getZ(t),Md.applyNormalMatrix(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Md.x=this.getX(t),Md.y=this.getY(t),Md.z=this.getZ(t),Md.transformDirection(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Id.prototype.isBufferAttribute=!0;class Ad extends Id{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class kd extends Id{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class extends Id{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class Pd extends Id{constructor(e,t,n){super(new Float32Array(e),t,n)}}function Rd(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}let Od=0;const Ld=new Of,Nd=new id,Dd=new tf,Fd=new of,Ud=new of,zd=new tf;class jd extends Nh{constructor(){super(),Object.defineProperty(this,"id",{value:Od++}),this.uuid=zh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Rd(e)>65535?kd:Ad)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Gh).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ld.makeRotationFromQuaternion(e),this.applyMatrix4(Ld),this}rotateX(e){return Ld.makeRotationX(e),this.applyMatrix4(Ld),this}rotateY(e){return Ld.makeRotationY(e),this.applyMatrix4(Ld),this}rotateZ(e){return Ld.makeRotationZ(e),this.applyMatrix4(Ld),this}translate(e,t,n){return Ld.makeTranslation(e,t,n),this.applyMatrix4(Ld),this}scale(e,t,n){return Ld.makeScale(e,t,n),this.applyMatrix4(Ld),this}lookAt(e){return Nd.lookAt(e),Nd.updateMatrix(),this.applyMatrix4(Nd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dd).negate(),this.translate(Dd.x,Dd.y,Dd.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Pd(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new of);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new tf(-1/0,-1/0,-1/0),new tf(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Fd.setFromBufferAttribute(e),this.morphTargetsRelative?(zd.addVectors(this.boundingBox.min,Fd.min),this.boundingBox.expandByPoint(zd),zd.addVectors(this.boundingBox.max,Fd.max),this.boundingBox.expandByPoint(zd)):(this.boundingBox.expandByPoint(Fd.min),this.boundingBox.expandByPoint(Fd.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ef);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new tf,1/0);if(e){const n=this.boundingSphere.center;if(Fd.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Ud.setFromBufferAttribute(n),this.morphTargetsRelative?(zd.addVectors(Fd.min,Ud.min),Fd.expandByPoint(zd),zd.addVectors(Fd.max,Ud.max),Fd.expandByPoint(zd)):(Fd.expandByPoint(Ud.min),Fd.expandByPoint(Ud.max))}Fd.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)zd.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(zd));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)zd.fromBufferAttribute(o,t),a&&(Dd.fromBufferAttribute(e,t),zd.add(Dd)),r=Math.max(r,n.distanceToSquared(zd))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Id(new Float32Array(4*a),4));const s=t.tangent.array,u=[],l=[];for(let T=0;T<a;T++)u[T]=new tf,l[T]=new tf;const c=new tf,h=new tf,f=new tf,d=new Wh,p=new Wh,m=new Wh,v=new tf,g=new tf;function y(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),f.fromArray(r,3*n),d.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(c),f.sub(c),p.sub(d),m.sub(d);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),g.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(v),u[t].add(v),u[n].add(v),l[e].add(g),l[t].add(g),l[n].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let T=0,M=b.length;T<M;++T){const e=b[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}const _=new tf,w=new tf,x=new tf,S=new tf;function E(e){x.fromArray(i,3*e),S.copy(x);const t=u[e];_.copy(t),_.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(l[e])<0?-1:1;s[4*e]=_.x,s[4*e+1]=_.y,s[4*e+2]=_.z,s[4*e+3]=n}for(let T=0,M=b.length;T<M;++T){const e=b[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Id(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new tf,i=new tf,o=new tf,a=new tf,s=new tf,u=new tf,l=new tf,c=new tf;if(e)for(let h=0,f=e.count;h<f;h+=3){const f=e.getX(h+0),d=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,f),i.fromBufferAttribute(t,d),o.fromBufferAttribute(t,p),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),u.fromBufferAttribute(n,p),a.add(l),s.add(l),u.add(l),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s);for(let e=0,t=s;e<u;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)zd.fromBufferAttribute(e,t),zd.normalize(),e.setXYZ(t,zd.x,zd.y,zd.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let u=0,l=t.length;u<l;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Id(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jd,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new jd).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const e=r[u];this.setAttribute(u,e.clone(t))}const i=e.morphAttributes;for(const u in i){const e=[],n=i[u];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[u]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,l=o.length;u<l;u++){const e=o[u];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}jd.prototype.isBufferGeometry=!0;const Bd=new Of,Vd=new Rf,Hd=new Ef,Wd=new tf,Gd=new tf,qd=new tf,Kd=new tf,Xd=new tf,Yd=new tf,$d=new tf,Qd=new tf,Jd=new tf,Zd=new Wh,ep=new Wh,tp=new Wh,np=new tf,rp=new tf;class ip extends id{constructor(e=new jd,t=new Td){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hd.copy(n.boundingSphere),Hd.applyMatrix4(i),!1===e.ray.intersectsSphere(Hd))return;if(Bd.copy(i).invert(),Vd.copy(e.ray).applyMatrix4(Bd),null!==n.boundingBox&&!1===Vd.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative,l=n.attributes.uv,c=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const d=h[n],p=r[d.materialIndex];for(let n=Math.max(d.start,f.start),r=Math.min(d.start+d.count,f.start+f.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),f=i.getX(n+2);o=op(this,p,e,Vd,a,s,u,l,c,r,h,f),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=d.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),h=Math.min(i.count,f.start+f.count);n<h;n+=3){const h=i.getX(n),f=i.getX(n+1),d=i.getX(n+2);o=op(this,r,e,Vd,a,s,u,l,c,h,f,d),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const i=h[n],d=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(i.start+i.count,f.start+f.count);n<r;n+=3){o=op(this,d,e,Vd,a,s,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){o=op(this,r,e,Vd,a,s,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function op(e,t,n,r,i,o,a,s,u,l,c,h){Wd.fromBufferAttribute(i,l),Gd.fromBufferAttribute(i,c),qd.fromBufferAttribute(i,h);const f=e.morphTargetInfluences;if(t.morphTargets&&o&&f){$d.set(0,0,0),Qd.set(0,0,0),Jd.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=f[e],n=o[e];0!==t&&(Kd.fromBufferAttribute(n,l),Xd.fromBufferAttribute(n,c),Yd.fromBufferAttribute(n,h),a?($d.addScaledVector(Kd,t),Qd.addScaledVector(Xd,t),Jd.addScaledVector(Yd,t)):($d.addScaledVector(Kd.sub(Wd),t),Qd.addScaledVector(Xd.sub(Gd),t),Jd.addScaledVector(Yd.sub(qd),t)))}Wd.add($d),Gd.add(Qd),qd.add(Jd)}e.isSkinnedMesh&&(e.boneTransform(l,Wd),e.boneTransform(c,Gd),e.boneTransform(h,qd));const d=function(e,t,n,r,i,o,a,s){let u;if(u=1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s),null===u)return null;rp.copy(s),rp.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(rp);return l<n.near||l>n.far?null:{distance:l,point:rp.clone(),object:e}}(e,t,n,r,Wd,Gd,qd,np);if(d){s&&(Zd.fromBufferAttribute(s,l),ep.fromBufferAttribute(s,c),tp.fromBufferAttribute(s,h),d.uv=md.getUV(np,Wd,Gd,qd,Zd,ep,tp,new Wh)),u&&(Zd.fromBufferAttribute(u,l),ep.fromBufferAttribute(u,c),tp.fromBufferAttribute(u,h),d.uv2=md.getUV(np,Wd,Gd,qd,Zd,ep,tp,new Wh));const e={a:l,b:c,c:h,normal:new tf,materialIndex:0};md.getNormal(Wd,Gd,qd,e.normal),d.face=e}return d}ip.prototype.isMesh=!0;class ap extends jd{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],u=[],l=[],c=[];let h=0,f=0;function d(e,t,n,r,i,o,d,p,m,v,g){const y=o/m,b=d/v,_=o/2,w=d/2,x=p/2,S=m+1,E=v+1;let T=0,M=0;const C=new tf;for(let a=0;a<E;a++){const o=a*b-w;for(let s=0;s<S;s++){const h=s*y-_;C[e]=h*r,C[t]=o*i,C[n]=x,u.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,l.push(C.x,C.y,C.z),c.push(s/m),c.push(1-a/v),T+=1}}for(let a=0;a<v;a++)for(let e=0;e<m;e++){const t=h+e+S*a,n=h+e+S*(a+1),r=h+(e+1)+S*(a+1),i=h+(e+1)+S*a;s.push(t,n,i),s.push(n,r,i),M+=6}a.addGroup(f,M,g),f+=M,h+=T}d("z","y","x",-1,-1,n,t,e,o,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Pd(u,3)),this.setAttribute("normal",new Pd(l,3)),this.setAttribute("uv",new Pd(c,2))}static fromJSON(e){return new ap(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function sp(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function up(e){const t={};for(let n=0;n<e.length;n++){const r=sp(e[n]);for(const e in r)t[e]=r[e]}return t}const lp={clone:sp,merge:up};class cp extends gd{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sp(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}cp.prototype.isShaderMaterial=!0;class hp extends id{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Of,this.projectionMatrix=new Of,this.projectionMatrixInverse=new Of}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}hp.prototype.isCamera=!0;class fp extends hp{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Uh*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Fh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Uh*Math.atan(Math.tan(.5*Fh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Fh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}fp.prototype.isPerspectiveCamera=!0;class dp extends id{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new fp(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new tf(1,0,0)),this.add(r);const i=new fp(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new tf(-1,0,0)),this.add(i);const o=new fp(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new tf(0,1,0)),this.add(o);const a=new fp(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new tf(0,-1,0)),this.add(a);const s=new fp(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new tf(0,0,1)),this.add(s);const u=new fp(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new tf(0,0,-1)),this.add(u)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,u]=this.children,l=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=l}}class pp extends Yh{constructor(e,t,n,r,i,o,a,s,u,l){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,o,a=void 0!==a?a:1022,s,u,l),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}pp.prototype.isCubeTexture=!0;class mp extends Jh{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new pp(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new ap(5,5,5),i=new cp({name:"CubemapFromEquirect",uniforms:sp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const o=new ip(r,i),a=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);return new dp(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}mp.prototype.isWebGLCubeRenderTarget=!0;const vp=new tf,gp=new tf,yp=new Gh;class bp{constructor(e=new tf(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=vp.subVectors(n,t).cross(gp.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(vp),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||yp.getNormalMatrix(e),r=this.coplanarPoint(vp).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}bp.prototype.isPlane=!0;const _p=new Ef,wp=new tf;class xp{constructor(e=new bp,t=new bp,n=new bp,r=new bp,i=new bp,o=new bp){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+u,p+f,y+v).normalize(),t[3].setComponents(a-i,c-u,p-f,y-v).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_p.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_p)}intersectsSprite(e){return _p.center.set(0,0,0),_p.radius=.7071067811865476,_p.applyMatrix4(e.matrixWorld),this.intersectsSphere(_p)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(wp.x=r.normal.x>0?e.max.x:e.min.x,wp.y=r.normal.y>0?e.max.y:e.min.y,wp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(wp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Sp(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ep(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class Tp extends jd{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),u=a+1,l=s+1,c=e/a,h=t/s,f=[],d=[],p=[],m=[];for(let v=0;v<l;v++){const e=v*h-o;for(let t=0;t<u;t++){const n=t*c-i;d.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-v/s)}}for(let v=0;v<s;v++)for(let e=0;e<a;e++){const t=e+u*v,n=e+u*(v+1),r=e+1+u*(v+1),i=e+1+u*v;f.push(t,n,i),f.push(n,r,i)}this.setIndex(f),this.setAttribute("position",new Pd(d,3)),this.setAttribute("normal",new Pd(p,3)),this.setAttribute("uv",new Pd(m,2))}static fromJSON(e){return new Tp(e.width,e.height,e.widthSegments,e.heightSegments)}}const Mp={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Cp={common:{diffuse:{value:new Ed(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gh},uv2Transform:{value:new Gh},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Wh(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ed(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ed(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Gh}},sprite:{diffuse:{value:new Ed(16777215)},opacity:{value:1},center:{value:new Wh(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Gh}}},Ip={basic:{uniforms:up([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.fog]),vertexShader:Mp.meshbasic_vert,fragmentShader:Mp.meshbasic_frag},lambert:{uniforms:up([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.fog,Cp.lights,{emissive:{value:new Ed(0)}}]),vertexShader:Mp.meshlambert_vert,fragmentShader:Mp.meshlambert_frag},phong:{uniforms:up([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.fog,Cp.lights,{emissive:{value:new Ed(0)},specular:{value:new Ed(1118481)},shininess:{value:30}}]),vertexShader:Mp.meshphong_vert,fragmentShader:Mp.meshphong_frag},standard:{uniforms:up([Cp.common,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.roughnessmap,Cp.metalnessmap,Cp.fog,Cp.lights,{emissive:{value:new Ed(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mp.meshphysical_vert,fragmentShader:Mp.meshphysical_frag},toon:{uniforms:up([Cp.common,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.gradientmap,Cp.fog,Cp.lights,{emissive:{value:new Ed(0)}}]),vertexShader:Mp.meshtoon_vert,fragmentShader:Mp.meshtoon_frag},matcap:{uniforms:up([Cp.common,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.fog,{matcap:{value:null}}]),vertexShader:Mp.meshmatcap_vert,fragmentShader:Mp.meshmatcap_frag},points:{uniforms:up([Cp.points,Cp.fog]),vertexShader:Mp.points_vert,fragmentShader:Mp.points_frag},dashed:{uniforms:up([Cp.common,Cp.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mp.linedashed_vert,fragmentShader:Mp.linedashed_frag},depth:{uniforms:up([Cp.common,Cp.displacementmap]),vertexShader:Mp.depth_vert,fragmentShader:Mp.depth_frag},normal:{uniforms:up([Cp.common,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,{opacity:{value:1}}]),vertexShader:Mp.normal_vert,fragmentShader:Mp.normal_frag},sprite:{uniforms:up([Cp.sprite,Cp.fog]),vertexShader:Mp.sprite_vert,fragmentShader:Mp.sprite_frag},background:{uniforms:{uvTransform:{value:new Gh},t2D:{value:null}},vertexShader:Mp.background_vert,fragmentShader:Mp.background_frag},cube:{uniforms:up([Cp.envmap,{opacity:{value:1}}]),vertexShader:Mp.cube_vert,fragmentShader:Mp.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mp.equirect_vert,fragmentShader:Mp.equirect_frag},distanceRGBA:{uniforms:up([Cp.common,Cp.displacementmap,{referencePosition:{value:new tf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mp.distanceRGBA_vert,fragmentShader:Mp.distanceRGBA_frag},shadow:{uniforms:up([Cp.lights,Cp.fog,{color:{value:new Ed(0)},opacity:{value:1}}]),vertexShader:Mp.shadow_vert,fragmentShader:Mp.shadow_frag}};function Ap(e,t,n,r,i){const o=new Ed(0);let a,s,u=0,l=null,c=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(n,i){let d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));const m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(p=null),null===p?f(o,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===s&&(s=new ip(new ap(1,1,1),new cp({name:"BackgroundCubeMaterial",uniforms:sp(Ip.cube.uniforms),vertexShader:Ip.cube.vertexShader,fragmentShader:Ip.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,l===p&&c===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&(a=new ip(new Tp(2,2),new cp({name:"BackgroundMaterial",uniforms:sp(Ip.background.uniforms),vertexShader:Ip.background.vertexShader,fragmentShader:Ip.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function kp(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null);let l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const t=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),l!==u&&(l=u,c(l.object))}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){let _=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let u=s[t.id];void 0===u&&(u={},s[t.id]=u);let l=u[n.id];void 0===l&&(l={},u[n.id]=l);let c=l[a];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(y,h,u);l!==t&&(l=t,c(l.object)),_=function(e,t){const n=l.attributes,r=e.attributes;let i=0;for(const o in r){const e=n[o],t=r[o];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b),_&&function(e,t){const n={},r=e.attributes;let i=0;for(const o in r){const e=r[o],t={};t.attribute=e,e.data&&(t.data=e.data),n[o]=t,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{const e=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===e||(l.geometry=y.id,l.program=h.id,l.wireframe=e,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();const u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(const t in l){const r=l[t];if(r>=0){const o=u[t];if(void 0!==o){const t=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const u=a.buffer,l=a.type,c=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),e.bindBuffer(34962,u),g(r,i,l,t,a*c,h*c)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),e.bindBuffer(34962,u),g(r,i,l,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r+0,4,a,!1,64,0),e.vertexAttribPointer(r+1,4,a,!1,64,16),e.vertexAttribPointer(r+2,4,a,!1,64,32),e.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}v()}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:v}}function Pp(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let u,l;if(i)u=e,l="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](o,r,a,s),n.update(a,o,s)}}function Rp(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const u=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function Op(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new bp,s=new Gh,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){const o=null!==e?e.length:0;let l=null;if(0!==o){if(l=u.value,!0!==i||null===l){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let n=0,u=r;n!==o;++n,u+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(l,u),l[u+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){const h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!d)o?c(null):l();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;u.value=i,i=c(h,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=e}}}function Lp(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(303===o||304===o){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new mp(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function Np(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Dp(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const u=o.get(s);u&&(t.remove(u),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Rd(n)>65535?kd:Ad)(n,1);s.version=a;const u=o.get(e);u&&t.remove(u),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Fp(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,u,l){if(0===l)return;let c,h;if(i)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,u,a,r*s,l),n.update(u,o,l)}}function Up(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function zp(e,t){return e[0]-t[0]}function jp(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Bp(e){const t={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){const u=i.morphTargetInfluences,l=void 0===u?0:u.length;let c=t[o.id];if(void 0===c||c.length!==l){c=[];for(let e=0;e<l;e++)c[e]=[e,0];t[o.id]=c}for(let e=0;e<l;e++){const t=c[e];t[0]=e,t[1]=u[e]}c.sort(jp);for(let e=0;e<8;e++)e<l&&c[e][1]?(r[e][0]=c[e][0],r[e][1]=c[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(zp);const h=a.morphTargets&&o.morphAttributes.position,f=a.morphNormals&&o.morphAttributes.normal;let d=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],a=t[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[i]&&o.setAttribute("morphTarget"+e,h[i]),f&&o.getAttribute("morphNormal"+e)!==f[i]&&o.setAttribute("morphNormal"+e,f[i]),n[e]=a,d+=a):(h&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),f&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const p=o.morphTargetsRelative?1:1-d;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Vp(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}Ip.physical={uniforms:up([Ip.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Wh(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ed(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Wh},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ed(0)}}]),vertexShader:Mp.meshphysical_vert,fragmentShader:Mp.meshphysical_frag};class Hp extends Yh{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Hp.prototype.isDataTexture2DArray=!0;class Wp extends Yh{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Wp.prototype.isDataTexture3D=!0;const Gp=new Yh,qp=new Hp,Kp=new Wp,Xp=new pp,Yp=[],$p=[],Qp=new Float32Array(16),Jp=new Float32Array(9),Zp=new Float32Array(4);function em(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Yp[i];if(void 0===o&&(o=new Float32Array(i),Yp[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function tm(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function nm(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function rm(e,t){let n=$p[t];void 0===n&&(n=new Int32Array(t),$p[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function im(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function om(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tm(n,t))return;e.uniform2fv(this.addr,t),nm(n,t)}}function am(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(tm(n,t))return;e.uniform3fv(this.addr,t),nm(n,t)}}function sm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tm(n,t))return;e.uniform4fv(this.addr,t),nm(n,t)}}function um(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tm(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),nm(n,t)}else{if(tm(n,r))return;Zp.set(r),e.uniformMatrix2fv(this.addr,!1,Zp),nm(n,r)}}function lm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tm(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),nm(n,t)}else{if(tm(n,r))return;Jp.set(r),e.uniformMatrix3fv(this.addr,!1,Jp),nm(n,r)}}function cm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tm(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),nm(n,t)}else{if(tm(n,r))return;Qp.set(r),e.uniformMatrix4fv(this.addr,!1,Qp),nm(n,r)}}function hm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function fm(e,t){const n=this.cache;tm(n,t)||(e.uniform2iv(this.addr,t),nm(n,t))}function dm(e,t){const n=this.cache;tm(n,t)||(e.uniform3iv(this.addr,t),nm(n,t))}function pm(e,t){const n=this.cache;tm(n,t)||(e.uniform4iv(this.addr,t),nm(n,t))}function mm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function vm(e,t){const n=this.cache;tm(n,t)||(e.uniform2uiv(this.addr,t),nm(n,t))}function gm(e,t){const n=this.cache;tm(n,t)||(e.uniform3uiv(this.addr,t),nm(n,t))}function ym(e,t){const n=this.cache;tm(n,t)||(e.uniform4uiv(this.addr,t),nm(n,t))}function bm(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Gp,i)}function _m(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Kp,i)}function wm(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Xp,i)}function xm(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||qp,i)}function Sm(e,t){e.uniform1fv(this.addr,t)}function Em(e,t){const n=em(t,this.size,2);e.uniform2fv(this.addr,n)}function Tm(e,t){const n=em(t,this.size,3);e.uniform3fv(this.addr,n)}function Mm(e,t){const n=em(t,this.size,4);e.uniform4fv(this.addr,n)}function Cm(e,t){const n=em(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Im(e,t){const n=em(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Am(e,t){const n=em(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function km(e,t){e.uniform1iv(this.addr,t)}function Pm(e,t){e.uniform2iv(this.addr,t)}function Rm(e,t){e.uniform3iv(this.addr,t)}function Om(e,t){e.uniform4iv(this.addr,t)}function Lm(e,t){e.uniform1uiv(this.addr,t)}function Nm(e,t){e.uniform2uiv(this.addr,t)}function Dm(e,t){e.uniform3uiv(this.addr,t)}function Fm(e,t){e.uniform4uiv(this.addr,t)}function Um(e,t,n){const r=t.length,i=rm(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Gp,i[o])}function zm(e,t,n){const r=t.length,i=rm(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Xp,i[o])}function jm(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return im;case 35664:return om;case 35665:return am;case 35666:return sm;case 35674:return um;case 35675:return lm;case 35676:return cm;case 5124:case 35670:return hm;case 35667:case 35671:return fm;case 35668:case 35672:return dm;case 35669:case 35673:return pm;case 5125:return mm;case 36294:return vm;case 36295:return gm;case 36296:return ym;case 35678:case 36198:case 36298:case 36306:case 35682:return bm;case 35679:case 36299:case 36307:return _m;case 35680:case 36300:case 36308:case 36293:return wm;case 36289:case 36303:case 36311:case 36292:return xm}}(t.type)}function Bm(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Sm;case 35664:return Em;case 35665:return Tm;case 35666:return Mm;case 35674:return Cm;case 35675:return Im;case 35676:return Am;case 5124:case 35670:return km;case 35667:case 35671:return Pm;case 35668:case 35672:return Rm;case 35669:case 35673:return Om;case 5125:return Lm;case 36294:return Nm;case 36295:return Dm;case 36296:return Fm;case 35678:case 36198:case 36298:case 36306:case 35682:return Um;case 35680:case 36300:case 36308:case 36293:return zm}}(t.type)}function Vm(e){this.id=e,this.seq=[],this.map={}}Bm.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),nm(t,e)},Vm.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const Hm=/(\w+)(\])?(\[|\.)?/g;function Wm(e,t){e.seq.push(t),e.map[t.id]=t}function Gm(e,t,n){const r=e.name,i=r.length;for(Hm.lastIndex=0;;){const o=Hm.exec(r),a=Hm.lastIndex;let s=o[1];const u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){Wm(n,void 0===l?new jm(s,e,t):new Bm(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Vm(s),Wm(n,e)),n=e}}}function qm(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Gm(n,e.getUniformLocation(t,n.name),this)}}function Km(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}qm.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},qm.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},qm.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},qm.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let Xm=0;function Ym(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function $m(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Qm(e,t){const n=Ym(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Jm(e,t){const n=Ym(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Zm(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ev(e){return""!==e}function tv(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const rv=/^[ \t]*#include +<([\w\d./]+)>/gm;function iv(e){return e.replace(rv,ov)}function ov(e,t){const n=Mp[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return iv(n)}const av=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,sv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uv(e){return e.replace(sv,cv).replace(av,lv)}function lv(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),cv(e,t,n,r)}function cv(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function hv(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function fv(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const u=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ev).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=[p].filter(ev).join("\n"),v.length>0&&(v+="\n"),g=[d,p].filter(ev).join("\n"),g.length>0&&(g+="\n")):(v=[hv(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ev).join("\n"),g=[d,hv(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Mp.tonemapping_pars_fragment:"",0!==n.toneMapping?Zm("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Mp.encodings_pars_fragment,n.map?Qm("mapTexelToLinear",n.mapEncoding):"",n.matcap?Qm("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Qm("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Qm("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Qm("lightMapTexelToLinear",n.lightMapEncoding):"",Jm("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ev).join("\n")),a=iv(a),a=tv(a,n),a=nv(a,n),s=iv(s),s=tv(s,n),s=nv(s,n),a=uv(a),s=uv(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const b=y+g+s,_=Km(i,35633,y+v+a),w=Km(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=$m(i,_,"vertex"),n=$m(i,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:v},fragmentShader:{log:n,prefix:g}})}let x,S;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===x&&(x=new qm(i,m)),x},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Xm++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}function dv(e,t,n,r,i,o){const a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures;let f=r.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(i,a,p,v,g){const y=v.fog,b=i.isMeshStandardMaterial?v.environment:null,_=t.get(i.envMap||b),w=d[i.type],x=g.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(l)return 1024;{const e=c,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(g):0;let S,E;if(null!==i.precision&&(f=r.getMaxPrecision(i.precision),f!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead.")),w){const e=Ip[w];S=e.vertexShader,E=e.fragmentShader}else S=i.vertexShader,E=i.fragmentShader;const T=e.getRenderTarget();return{isWebGL2:s,shaderID:w,shaderName:i.type,vertexShader:S,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null!==T?m(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&g.geometry&&g.geometry.attributes.color&&4===g.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh&&x>0,maxBones:x,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=d[e.type];let n;if(t){const e=Ip[t];n=lp.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=a.length;e<i;e++){const t=a[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new fv(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function pv(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function mv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function vv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function gv(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,l){let c=t[n];const h=e.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=h.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,u,l){const c=s(e,t,n,a,u,l);n.transmission>0?i.push(c):!0===n.transparent?o.push(c):r.push(c)},unshift:function(e,t,n,a,u,l){const c=s(e,t,n,a,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?o.unshift(c):r.unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||mv),i.length>1&&i.sort(t||vv),o.length>1&&o.sort(t||vv)}}}function yv(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new gv(e),t.set(n,[i])):r>=t.get(n).length?(i=new gv(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function bv(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new tf,color:new Ed};break;case"SpotLight":n={position:new tf,direction:new tf,color:new Ed,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new tf,color:new Ed,distance:0,decay:0};break;case"HemisphereLight":n={direction:new tf,skyColor:new Ed,groundColor:new Ed};break;case"RectAreaLight":n={color:new Ed,position:new tf,halfWidth:new tf,halfHeight:new tf}}return e[t.id]=n,n}}}let _v=0;function wv(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function xv(e,t){const n=new bv,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wh};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wh,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new tf);const o=new tf,a=new Of,s=new Of;return{setup:function(o){let a=0,s=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,h=0,f=0,d=0,p=0,m=0,v=0;o.sort(wv);for(let e=0,t=o.length;e<t;e++){const t=o[e],g=t.color,y=t.intensity,b=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=g.r*y,s+=g.g*y,u+=g.b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[l]=n,i.directionalShadowMap[l]=_,i.directionalShadowMatrix[l]=t.shadow.matrix,p++}i.directional[l]=e,l++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(g).multiplyScalar(y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(g).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[c]=n,i.pointShadowMap[c]=_,i.pointShadowMatrix[c]=t.shadow.matrix,m++}i.point[c]=e,c++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y),e.groundColor.copy(t.groundColor).multiplyScalar(y),i.hemi[d]=e,d++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Cp.LTC_FLOAT_1,i.rectAreaLTC2=Cp.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Cp.LTC_HALF_1,i.rectAreaLTC2=Cp.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;const g=i.hash;g.directionalLength===l&&g.pointLength===c&&g.spotLength===h&&g.rectAreaLength===f&&g.hemiLength===d&&g.numDirectionalShadows===p&&g.numPointShadows===m&&g.numSpotShadows===v||(i.directional.length=l,i.spot.length=h,i.rectArea.length=f,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=v,g.directionalLength=l,g.pointLength=c,g.spotLength=h,g.rectAreaLength=f,g.hemiLength=d,g.numDirectionalShadows=p,g.numPointShadows=m,g.numSpotShadows=v,i.version=_v++)},setupView:function(e,t){let n=0,r=0,u=0,l=0,c=0;const h=t.matrixWorldInverse;for(let f=0,d=e.length;f<d;f++){const t=e[f];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),u++}else if(t.isRectAreaLight){const e=i.rectArea[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(t.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),l++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),c++}}},state:i}}function Sv(e,t){const n=new xv(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ev(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new Sv(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new Sv(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class Tv extends gd{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Tv.prototype.isMeshDepthMaterial=!0;class Mv extends gd{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new tf,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Mv.prototype.isMeshDistanceMaterial=!0;function Cv(e,t,n){let r=new xp;const i=new Wh,o=new Wh,a=new Qh,s=[],u=[],l={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new cp({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wh},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new jd;p.setAttribute("position",new Id(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ip(p,f),v=this;function g(n,r){const i=t.update(m);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,m,null)}function y(e){const t=e<<0;let n=s[t];return void 0===n&&(n=new Tv({depthPacking:3201,morphTargets:e}),s[t]=n),n}function b(e){const t=e<<0;let n=u[t];return void 0===n&&(n=new Mv({morphTargets:e}),u[t]=n),n}function _(t,n,r,i,o,a,s){let u=null,c=y,f=t.customDepthMaterial;if(!0===i.isPointLight&&(c=b,f=t.customDistanceMaterial),void 0===f){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=c(e)}else u=f;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=u.uuid,t=r.uuid;let n=l[e];void 0===n&&(n={},l[e]=n);let i=n[t];void 0===i&&(i=u.clone(),n[t]=i),u=i}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function w(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let u=0,l=t.length;u<l;u++){const l=t[u],c=i[l.materialIndex];if(c&&c.visible){const t=_(n,r,c,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,l)}}}else if(i.visible){const t=_(n,r,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const u=n.children;for(let e=0,t=u.length;e<t;e++)w(u[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let d=0,p=t.length;d<p;d++){const u=t[d],l=u.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const h=l.getFrameExtents();if(i.multiply(h),o.copy(l.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/h.x),i.x=o.x*h.x,l.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/h.y),i.y=o.y*h.y,l.mapSize.y=o.y)),null===l.map&&!l.isPointLightShadow&&3===this.type){const e={minFilter:1006,magFilter:1006,format:1023};l.map=new Jh(i.x,i.y,e),l.map.texture.name=u.name+".shadowMap",l.mapPass=new Jh(i.x,i.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:1003,magFilter:1003,format:1023};l.map=new Jh(i.x,i.y,e),l.map.texture.name=u.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const p=l.getViewportCount();for(let e=0;e<p;e++){const t=l.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),f.viewport(a),l.updateMatrices(u,e),r=l.getFrustum(),w(n,s,l.camera,u,this.type)}l.isPointLightShadow||3!==this.type||g(l,s),l.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(u,l,h)}}function Iv(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new Qh;let r=null;const i=new Qh(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?F(2929):U(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?F(2960):U(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}};let s={},u=null,l={},c=null,h=!1,f=null,d=null,p=null,m=null,v=null,g=null,y=null,b=!1,_=null,w=null,x=null,S=null,E=null;const T=e.getParameter(35661);let M=!1,C=0;const I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(I)[1]),M=C>=1):-1!==I.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),M=C>=2);let A=null,k={};const P=e.getParameter(3088),R=e.getParameter(2978),O=(new Qh).fromArray(P),L=(new Qh).fromArray(R);function N(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const D={};function F(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function U(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}D[3553]=N(3553,3553,1),D[34067]=N(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(3),V(!1),H(1),F(2884),B(0);const z={100:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(z[103]=e.MIN_EXT,z[104]=e.MAX_EXT)}const j={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function B(t,n,r,i,o,a,s,u){if(0!==t){if(!1===h&&(F(3042),h=!0),5===t)o=o||n,a=a||r,s=s||i,n===d&&o===v||(e.blendEquationSeparate(z[n],z[o]),d=n,v=o),r===p&&i===m&&a===g&&s===y||(e.blendFuncSeparate(j[r],j[i],j[a],j[s]),p=r,m=i,g=a,y=s),f=t,b=null;else if(t!==f||u!==b){if(100===d&&100===v||(e.blendEquation(32774),d=100,v=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,m=null,g=null,y=null,f=t,b=u}}else!0===h&&(U(3042),h=!1)}function V(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function H(t){0!==t?(F(2884),t!==w&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):U(2884),w=t}function W(t,n,r){t?(F(32823),S===n&&E===r||(e.polygonOffset(n,r),S=n,E=r)):U(32823)}function G(t){void 0===t&&(t=33984+T-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:i,depth:o,stencil:a},enable:F,disable:U,bindFramebuffer:function(t,n){return null===n&&null!==u&&(n=u),l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,r&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==u&&(e.bindFramebuffer(36160,t),u=t)},useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:B,setMaterial:function(e,t){2===e.side?U(2884):F(2884);let n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?B(0):B(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):U(32926)},setFlipSided:V,setCullFace:H,setLineWidth:function(t){t!==x&&(M&&e.lineWidth(t),x=t)},setPolygonOffset:W,setScissorTest:function(e){e?F(3089):U(3089)},activeTexture:G,bindTexture:function(t,n){null===A&&G();let r=k[A];void 0===r&&(r={type:void 0,texture:void 0},k[A]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||D[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=k[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},A=null,k={},u=null,l={},c=null,h=!1,f=null,d=null,p=null,m=null,v=null,g=null,y=null,b=!1,_=null,w=null,x=null,S=null,E=null,O.set(0,0,e.canvas.width,e.canvas.height),L.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function Av(e,t,n,r,i,o,a){const s=i.isWebGL2,u=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=new WeakMap;let d,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Hh:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===d&&(d=m(o,a));const s=n?m(o,a):d;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return Vh(e.width)&&Vh(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(t,n,i,o,a=1){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,o,a))}function _(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return 1003===e||1004===e||1005===e?9728:9729}function x(t){const n=t.target;n.removeEventListener("dispose",x),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&f.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let s=0,u=n.length;s<u;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}let E=0;function T(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function M(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;k(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),u=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=a||u?u?r.image[e].image:r.image[e]:v(r.image[e],!1,!0,l);const h=c[0],f=g(h)||s,d=o.convert(r.format),p=o.convert(r.type),m=_(r.internalFormat,d,p);let w;if(A(34067,r,f),a){for(let e=0;e<6;e++){w=c[e].mipmaps;for(let t=0;t<w.length;t++){const i=w[t];1023!==r.format&&1022!==r.format?null!==d?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,d,p,i.data)}}t.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let e=0;e<6;e++)if(u){n.texImage2D(34069+e,0,m,c[e].width,c[e].height,0,d,p,c[e].data);for(let t=0;t<w.length;t++){const r=w[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,d,p,r.data)}}else{n.texImage2D(34069+e,0,m,d,p,c[e]);for(let t=0;t<w.length;t++){const r=w[t];n.texImage2D(34069+e,t+1,m,d,p,r.image[e])}}t.__maxMipLevel=w.length}y(r,f)&&b(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const C={1e3:10497,1001:33071,1002:33648},I={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function A(n,o,a){if(a?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,I[o.magFilter]),e.texParameteri(n,10241,I[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&1016===o.type&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function k(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x),t.__webglTexture=e.createTexture(),a.memory.textures++)}function P(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),k(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const u=function(e){return!s&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===g(r.image),l=v(r.image,u,!1,c),h=g(l)||s,f=o.convert(r.format);let d,p=o.convert(r.type),m=_(r.internalFormat,f,p);A(a,r,h);const w=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=o.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)d=w[e],n.texImage2D(3553,e,m,d.width,d.height,0,f,p,d.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)d=w[e],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,e,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,d.width,d.height,0,f,p,d.data);t.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)d=w[e],n.texImage2D(3553,e,m,f,p,d);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,f,p,l),t.__maxMipLevel=0;y(r,h)&&b(a,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,i,a,s,u){const l=o.convert(a.format),c=o.convert(a.type),h=_(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=36012:1014===t.type&&(i=33190));const r=N(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=N(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=_(t.internalFormat,i,a);if(r){const t=N(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function L(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),O(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),O(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function N(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let D=!1,F=!1;this.allocateTextureUnit=function(){const e=E;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(t){const u=t.texture,l=r.get(t),c=r.get(u);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=u.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,p=u.isDataTexture3D||u.isDataTexture2DArray,m=g(t)||s;if(!s||1022!==u.format||1015!==u.type&&1016!==u.type||(u.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(s){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const r=o.convert(u.format),i=o.convert(u.type),a=_(u.internalFormat,r,i),s=N(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),O(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),A(34067,u,m);for(let e=0;e<6;e++)R(l.__webglFramebuffer[e],t,u,36064,34069+e);y(u,m)&&b(34067,u,t.width,t.height),n.bindTexture(34067,null)}else if(f){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),A(3553,o,m),R(l.__webglFramebuffer,t,o,36064+i,3553),y(o,m)&&b(3553,o,t.width,t.height)}n.bindTexture(3553,null)}else{let e=3553;if(p)if(s){e=u.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,c.__webglTexture),A(e,u,m),R(l.__webglFramebuffer,t,u,36064,e),y(u,m)&&b(e,u,t.width,t.height,t.depth),n.bindTexture(e,null)}t.depthBuffer&&L(t)},this.updateRenderTargetMipmap=function(e){const t=g(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),b(t,a,e.width,e.height),n.bindTexture(t,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const i=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),M(e,t)}}function kv(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):1020===e?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Pv extends fp{constructor(e=[]){super(),this.cameras=e}}Pv.prototype.isArrayCamera=!0;class Rv extends id{constructor(){super(),this.type="Group"}}Rv.prototype.isGroup=!0;const Ov={type:"move"};class Lv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Rv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Rv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new tf,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new tf),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Rv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new tf,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new tf),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ov))),u&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n);if(void 0===u.joints[o.jointName]){const e=new Rv;e.matrixAutoUpdate=!1,e.visible=!1,u.joints[o.jointName]=e,u.add(e)}const r=u.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=u.joints["index-finger-tip"],i=u.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,l=.005;u.inputState.pinching&&a>s+l?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&a<=s-l&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}class Nv extends Nh{constructor(e,t){super();const n=this,r=e.state;let i=null,o=1,a=null,s="local-floor",u=null,l=null,c=null,h=null;const f=[],d=new Map,p=new fp;p.layers.enable(1),p.viewport=new Qh;const m=new fp;m.layers.enable(2),m.viewport=new Qh;const v=[p,m],g=new Pv;g.layers.enable(1),g.layers.enable(2);let y=null,b=null;function _(e){const t=d.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function w(){d.forEach((function(e,t){e.disconnect(t)})),d.clear(),y=null,b=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),C.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function x(e){const t=i.inputSources;for(let n=0;n<f.length;n++)d.set(t[n],f[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=d.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),d.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=d.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=f[e];return void 0===t&&(t=new Lv,f[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=f[e];return void 0===t&&(t=new Lv,f[e]=t),t.getGripSpace()},this.getHand=function(e){let t=f[e];return void 0===t&&(t=new Lv,f[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",_),i.addEventListener("selectstart",_),i.addEventListener("selectend",_),i.addEventListener("squeeze",_),i.addEventListener("squeezestart",_),i.addEventListener("squeezeend",_),i.addEventListener("end",w),i.addEventListener("inputsourceschange",x);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o},r=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:r})}else{let n=0;e.depth&&(n=e.stencil?34041:6402);const r={colorFormat:e.alpha?6408:6407,depthFormat:n,scaleFactor:o};l=new XRWebGLBinding(i,t),h=l.createProjectionLayer(r),c=t.createFramebuffer(),i.updateRenderState({layers:[h]})}a=await i.requestReferenceSpace(s),C.setContext(i),C.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const S=new tf,E=new tf;function T(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;g.near=m.near=p.near=e.near,g.far=m.far=p.far=e.far,y===g.near&&b===g.far||(i.updateRenderState({depthNear:g.near,depthFar:g.far}),y=g.near,b=g.far);const t=e.parent,n=g.cameras;T(g,t);for(let i=0;i<n.length;i++)T(n[i],t);g.matrixWorld.decompose(g.position,g.quaternion,g.scale),e.position.copy(g.position),e.quaternion.copy(g.quaternion),e.scale.copy(g.scale),e.matrix.copy(g.matrix),e.matrixWorld.copy(g.matrixWorld);const r=e.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){S.setFromMatrixPosition(t.matrixWorld),E.setFromMatrixPosition(n.matrixWorld);const r=S.distanceTo(E),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=a+p,g=s+p,y=f-m,b=d+(r-m),_=u*s/g*v,w=l*s/g*v;e.projectionMatrix.makePerspective(y,b,_,w,v,g)}(g,p,m):g.projectionMatrix.copy(p.projectionMatrix)},this.getCamera=function(){return g};let M=null;const C=new Sp;C.setAnimationLoop((function(e,n){if(u=n.getViewerPose(a),null!==u){const e=u.views,n=i.renderState.baseLayer;void 0===i.renderState.layers&&r.bindXRFramebuffer(n.framebuffer);let o=!1;e.length!==g.cameras.length&&(g.cameras.length=0,o=!0);for(let a=0;a<e.length;a++){const s=e[a];let u=null;if(void 0===i.renderState.layers)u=n.getViewport(s);else{const e=l.getViewSubImage(h,s);r.bindXRFramebuffer(c),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,36096,3553,e.depthStencilTexture,0),u=e.viewport}const f=v[a];f.matrix.fromArray(s.transform.matrix),f.projectionMatrix.fromArray(s.projectionMatrix),f.viewport.set(u.x,u.y,u.width,u.height),0===a&&g.matrix.copy(f.matrix),!0===o&&g.cameras.push(f)}}const o=i.inputSources;for(let t=0;t<f.length;t++){const e=f[t],r=o[t];e.update(r,n,a)}M&&M(e,n)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}}function Dv(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height));e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap);e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Fv(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,f=null;const d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let v=!1,g=0,y=0,b=null,_=-1,w=null;const x=new Qh,S=new Qh;let E=null,T=t.width,M=t.height,C=1,I=null,A=null;const k=new Qh(0,0,T,M),P=new Qh(0,0,T,M);let R=!1;const O=[],L=new xp;let N=!1,D=!1,F=null;const U=new Of,z=new tf,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===b?C:1}let V,H,W,G,q,K,X,Y,$,Q,J,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce=n;function he(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),ce=he(t,e),null===ce)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ce){throw console.error("THREE.WebGLRenderer: "+Ce.message),Ce}function fe(){V=new Np(ce),H=new Rp(ce,V,e),V.init(H),ue=new kv(ce,V,H),W=new Iv(ce,V,H),O[0]=1029,G=new Up(ce),q=new pv,K=new Av(ce,V,W,q,H,ue,G),X=new Lp(m),Y=new Ep(ce,H),le=new kp(ce,V,Y,H),$=new Dp(ce,Y,G,le),Q=new Vp(ce,$,Y,G),oe=new Bp(ce),ne=new Op(q),J=new dv(m,X,V,H,le,ne),Z=new Dv(q),ee=new yv(q),te=new Ev(V,H),ie=new Ap(m,X,W,Q,s),re=new Cv(m,Q,H),ae=new Pp(ce,V,G,H),se=new Fp(ce,V,G,H),G.programs=J.programs,m.capabilities=H,m.extensions=V,m.properties=q,m.renderLists=ee,m.shadowMap=re,m.state=W,m.info=G}fe();const de=new Nv(m,ce);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const e=G.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;fe(),G.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){J.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=de,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(T,M,!1))},this.getSize=function(e){return e.set(T,M)},this.setSize=function(e,n,r){de.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,M=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*C,M*C).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,M=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),W.viewport(x.copy(k).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),W.scissor(S.copy(P).multiplyScalar(C).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){W.setScissorTest(R=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),q.dispose(),X.dispose(),Q.dispose(),le.dispose(),de.dispose(),de.removeEventListener("sessionstart",ye),de.removeEventListener("sessionend",be),F&&(F.dispose(),F=null),_e.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const n=q.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=j);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Me(e,t,r,i);W.setMaterial(r,a);let u=n.index;const l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;let c,h=1;!0===r.wireframe&&(u=$.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&oe.update(i,n,r,s),le.setup(i,r,s,n,u);let f=ae;null!==u&&(c=Y.get(u),f=se,f.setIndex(c));const d=null!==u?u.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,v=null!==o?o.start*h:0,g=null!==o?o.count*h:1/0,y=Math.max(p,v),b=Math.min(d,p+m,v+g)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*B()),f.setMode(1)):f.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),W.setLineWidth(e*B()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,e)}else f.render(y,_)}},this.compile=function(e,t){f=te.get(e),f.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Ee(n[r],e,t)}else Ee(n,e,t)}))};let ge=null;function ye(){_e.stop()}function be(){_e.start()}const _e=new Sp;function we(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||L.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=Q.update(e),i=e.material;i.visible&&h.push(e,t,i,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U),h.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||L.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=Q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,z.z,a)}}else i.visible&&h.push(e,t,i,n,z.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)we(i[o],t,n,r)}function xe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,u=null===r?o.material:r,l=o.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];a.layers.test(r.layers)&&(W.viewport(x.copy(r.viewport)),f.setupLightsView(r),Se(a,t,r,s,u,l))}}else Se(a,t,n,s,u,l)}}function Se(e,t,n,r,i,o){if(e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Me(n,t,i,e);W.setMaterial(i),le.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,r)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=2):m.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(m,t,n,r,i,o)}function Ee(e,t,n){!0!==t.isScene&&(t=j);const r=q.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=J.getParameters(e,i.state,o,t,n),u=J.getProgramCacheKey(s);let l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",ve),l=new Map,r.programs=l);let c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Te(e,s),c}else s.uniforms=J.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),c=J.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Te(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=c.getUniforms(),p=qm.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Te(e,t){const n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function Me(e,t,n,r){!0!==t.isScene&&(t=j),K.resetTextureUnits();const i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===b?m.outputEncoding:b.texture.encoding,s=X.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=q.get(n),c=f.state.lights;if(!0===N&&(!0===D||e!==w)){const t=e===w&&n.id===_;ne.setState(n,e,t)}let h=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==a||r.isInstancedMesh&&!1===l.instancing?h=!0:r.isInstancedMesh||!0!==l.instancing?r.isSkinnedMesh&&!1===l.skinning?h=!0:r.isSkinnedMesh||!0!==l.skinning?l.envMap!==s||n.fog&&l.fog!==i?h=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?l.vertexAlphas!==u&&(h=!0):h=!0:h=!0:h=!0:(h=!0,l.__version=n.version);let d=l.currentProgram;!0===h&&(d=Ee(n,t,r));let p=!1,v=!1,g=!1;const y=d.getUniforms(),x=l.uniforms;if(W.useProgram(d.program)&&(p=!0,v=!0,g=!0),n.id!==_&&(_=n.id,v=!0),p||w!==e){if(y.setValue(ce,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&y.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,v=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=y.map.cameraPosition;void 0!==t&&t.setValue(ce,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&y.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){y.setOptional(ce,r,"bindMatrix"),y.setOptional(ce,r,"bindMatrixInverse");const e=r.skeleton;e&&(H.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),y.setValue(ce,"boneTexture",e.boneTexture,K),y.setValue(ce,"boneTextureSize",e.boneTextureSize)):y.setOptional(ce,e,"boneMatrices"))}var S,E;return(v||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,y.setValue(ce,"receiveShadow",r.receiveShadow)),v&&(y.setValue(ce,"toneMappingExposure",m.toneMappingExposure),l.needsLights&&(E=g,(S=x).ambientLightColor.needsUpdate=E,S.lightProbe.needsUpdate=E,S.directionalLights.needsUpdate=E,S.directionalLightShadows.needsUpdate=E,S.pointLights.needsUpdate=E,S.pointLightShadows.needsUpdate=E,S.spotLights.needsUpdate=E,S.spotLightShadows.needsUpdate=E,S.rectAreaLights.needsUpdate=E,S.hemisphereLights.needsUpdate=E),i&&n.fog&&Z.refreshFogUniforms(x,i),Z.refreshMaterialUniforms(x,n,C,M,F),qm.upload(ce,l.uniformsList,x,K)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(qm.upload(ce,l.uniformsList,x,K),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(ce,"center",r.center),y.setValue(ce,"modelViewMatrix",r.modelViewMatrix),y.setValue(ce,"normalMatrix",r.normalMatrix),y.setValue(ce,"modelMatrix",r.matrixWorld),d}_e.setAnimationLoop((function(e){ge&&ge(e)})),"undefined"!=typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){ge=e,de.setAnimationLoop(e),null===e?_e.stop():_e.start()},de.addEventListener("sessionstart",ye),de.addEventListener("sessionend",be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===v)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===de.enabled&&!0===de.isPresenting&&(!0===de.cameraAutoUpdate&&de.updateCamera(t),t=de.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),f=te.get(e,p.length),f.init(),p.push(f),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),L.setFromProjectionMatrix(U),D=this.localClippingEnabled,N=ne.init(this.clippingPlanes,D,t),h=ee.get(e,d.length),h.init(),d.push(h),we(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(I,A),!0===N&&ne.beginShadows();const n=f.state.shadowsArray;re.render(n,e,t),f.setupLights(),f.setupLightsView(t),!0===N&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e);const r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&xe(r,e,t),i.length>0&&function(e,t,n,r){if(null===F){const e=!0===a&&!0===H.isWebGL2;F=new(e?Zh:Jh)(1024,1024,{generateMipmaps:!0,type:null!==ue.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}const i=m.getRenderTarget();m.setRenderTarget(F),m.clear();const o=m.toneMapping;m.toneMapping=0,xe(e,n,r),m.toneMapping=o,K.updateMultisampleRenderTarget(F),K.updateRenderTargetMipmap(F),m.setRenderTarget(i),xe(t,n,r)}(r,i,e,t),o.length>0&&xe(o,e,t),null!==b&&(K.updateMultisampleRenderTarget(b),K.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),le.resetDefaultState(),_=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e,t=0,n=0){b=e,g=t,y=n,e&&void 0===q.get(e).__webglFramebuffer&&K.setupRenderTarget(e);let r=null,i=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,x.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else x.copy(k).multiplyScalar(C).floor(),S.copy(P).multiplyScalar(C).floor(),E=R;if(W.bindFramebuffer(36160,r)&&H.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(O.length!==n.length||36064!==O[0]){for(let e=0,t=n.length;e<t;e++)O[e]=36064+e;O.length=n.length,t=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,t=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,t=!0);t&&(H.isWebGL2?ce.drawBuffers(O):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(W.viewport(x),W.scissor(S),W.setScissorTest(E),i){const r=q.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=q.get(e.texture),i=t||0;ce.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){W.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,u=a.type;if(1023!==s&&ue.convert(s)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=1016===u&&(V.has("EXT_color_buffer_half_float")||H.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(1009===u||ue.convert(u)===ce.getParameter(35738)||1015===u&&(H.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,ue.convert(s),ue.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==b?q.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=ue.convert(t.format);H.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),K.setTexture2D(t,0),ce.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=ue.convert(n.format),s=ue.convert(n.type);K.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,u=ue.convert(r.format),l=ue.convert(r.type);let c;if(r.isDataTexture3D)K.setTexture3D(r,0),c=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),c=35866}ce.pixelStorei(37440,r.flipY),ce.pixelStorei(37441,r.premultiplyAlpha),ce.pixelStorei(3317,r.unpackAlignment);const h=ce.getParameter(3314),f=ce.getParameter(32878),d=ce.getParameter(3316),p=ce.getParameter(3315),v=ce.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ce.pixelStorei(3314,g.width),ce.pixelStorei(32878,g.height),ce.pixelStorei(3316,e.min.x),ce.pixelStorei(3315,e.min.y),ce.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ce.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,g.data)):ce.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,l,g),ce.pixelStorei(3314,h),ce.pixelStorei(32878,f),ce.pixelStorei(3316,d),ce.pixelStorei(3315,p),ce.pixelStorei(32877,v),0===i&&r.generateMipmaps&&ce.generateMipmap(c),W.unbindTexture()},this.initTexture=function(e){K.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,W.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Fv{}).prototype.isWebGL1Renderer=!0;class Uv extends id{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Uv.prototype.isScene=!0;class zv{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=zh()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}zv.prototype.isInterleavedBuffer=!0;const jv=new tf;class Bv{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)jv.x=this.getX(t),jv.y=this.getY(t),jv.z=this.getZ(t),jv.applyMatrix4(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)jv.x=this.getX(t),jv.y=this.getY(t),jv.z=this.getZ(t),jv.applyNormalMatrix(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)jv.x=this.getX(t),jv.y=this.getY(t),jv.z=this.getZ(t),jv.transformDirection(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Id(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bv(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Bv.prototype.isInterleavedBufferAttribute=!0;class Vv extends gd{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ed(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Hv;Vv.prototype.isSpriteMaterial=!0;const Wv=new tf,Gv=new tf,qv=new tf,Kv=new Wh,Xv=new Wh,Yv=new Of,$v=new tf,Qv=new tf,Jv=new tf,Zv=new Wh,eg=new Wh,tg=new Wh;function ng(e,t,n,r,i,o){Kv.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Xv.x=o*Kv.x-i*Kv.y,Xv.y=i*Kv.x+o*Kv.y):Xv.copy(Kv),e.copy(t),e.x+=Xv.x,e.y+=Xv.y,e.applyMatrix4(Yv)}(class extends id{constructor(e){if(super(),this.type="Sprite",void 0===Hv){Hv=new jd;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new zv(e,5);Hv.setIndex([0,1,2,0,2,3]),Hv.setAttribute("position",new Bv(t,3,0,!1)),Hv.setAttribute("uv",new Bv(t,2,3,!1))}this.geometry=Hv,this.material=void 0!==e?e:new Vv,this.center=new Wh(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gv.setFromMatrixScale(this.matrixWorld),Yv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Gv.multiplyScalar(-qv.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;ng($v.set(-.5,-.5,0),qv,o,Gv,r,i),ng(Qv.set(.5,-.5,0),qv,o,Gv,r,i),ng(Jv.set(.5,.5,0),qv,o,Gv,r,i),Zv.set(0,0),eg.set(1,0),tg.set(1,1);let a=e.ray.intersectTriangle($v,Qv,Jv,!1,Wv);if(null===a&&(ng(Qv.set(-.5,.5,0),qv,o,Gv,r,i),eg.set(0,1),a=e.ray.intersectTriangle($v,Jv,Qv,!1,Wv),null===a))return;const s=e.ray.origin.distanceTo(Wv);s<e.near||s>e.far||t.push({distance:s,point:Wv.clone(),uv:md.getUV(Wv,$v,Qv,Jv,Zv,eg,tg,new Wh),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const rg=new tf,ig=new Qh,og=new Qh,ag=new tf,sg=new Of;class ug extends ip{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Of,this.bindMatrixInverse=new Of}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qh,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;ig.fromBufferAttribute(r.attributes.skinIndex,e),og.fromBufferAttribute(r.attributes.skinWeight,e),rg.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=og.getComponent(i);if(0!==e){const r=ig.getComponent(i);sg.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ag.copy(rg).applyMatrix4(sg),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}ug.prototype.isSkinnedMesh=!0;(class extends id{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends Yh{constructor(e=null,t=1,n=1,r,i,o,a,s,u=1003,l=1003,c,h){super(null,o,a,s,u,l,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=u,this.minFilter=l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;const lg=new Of,cg=new Of,hg=[],fg=new ip;(class extends ip{constructor(e,t,n){super(e,t),this.instanceMatrix=new Id(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(fg.geometry=this.geometry,fg.material=this.material,void 0!==fg.material)for(let i=0;i<r;i++){this.getMatrixAt(i,lg),cg.multiplyMatrices(n,lg),fg.matrixWorld=cg,fg.raycast(e,hg);for(let e=0,n=hg.length;e<n;e++){const n=hg[e];n.instanceId=i,n.object=this,t.push(n)}hg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Id(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class dg extends gd{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ed(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}dg.prototype.isLineBasicMaterial=!0;const pg=new tf,mg=new tf,vg=new Of,gg=new Rf,yg=new Ef;class bg extends id{constructor(e=new jd,t=new dg){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)pg.fromBufferAttribute(t,e-1),mg.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=pg.distanceTo(mg);e.setAttribute("lineDistance",new Pd(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yg.copy(n.boundingSphere),yg.applyMatrix4(r),yg.radius+=i,!1===e.ray.intersectsSphere(yg))return;vg.copy(r).invert(),gg.copy(e.ray).applyMatrix4(vg);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new tf,l=new tf,c=new tf,h=new tf,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=f){const o=r.getX(n),a=r.getX(n+1);u.fromBufferAttribute(i,o),l.fromBufferAttribute(i,a);if(gg.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const f=e.ray.origin.distanceTo(h);f<e.near||f>e.far||t.push({distance:f,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=f){u.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1);if(gg.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}bg.prototype.isLine=!0;const _g=new tf,wg=new tf;class xg extends bg{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)_g.fromBufferAttribute(t,e),wg.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+_g.distanceTo(wg);e.setAttribute("lineDistance",new Pd(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}xg.prototype.isLineSegments=!0;(class extends bg{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Sg extends gd{constructor(e){super(),this.type="PointsMaterial",this.color=new Ed(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}Sg.prototype.isPointsMaterial=!0;const Eg=new Of,Tg=new Rf,Mg=new Ef,Cg=new tf;function Ig(e,t,n,r,i,o,a){const s=Tg.distanceSqToPoint(e);if(s<n){const n=new tf;Tg.closestPointToPoint(e,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}(class extends id{constructor(e=new jd,t=new Sg){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mg.copy(n.boundingSphere),Mg.applyMatrix4(r),Mg.radius+=i,!1===e.ray.intersectsSphere(Mg))return;Eg.copy(r).invert(),Tg.copy(e.ray).applyMatrix4(Eg);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),u=Math.min(i.count,o.start+o.count);n<u;n++){const o=i.getX(n);Cg.fromBufferAttribute(a,o),Ig(Cg,o,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)Cg.fromBufferAttribute(a,n),Ig(Cg,n,s,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0;(class extends Yh{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;(class extends Yh{constructor(e,t,n,r,i,o,a,s,u,l,c,h){super(null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;(class extends Yh{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends Yh{constructor(e,t,n,r,i,o,a,s,u,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),super(null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0,new tf,new tf,new tf,new md;class Ag{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,u=i-1;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new Wh:new tf);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new tf,r=[],i=[],o=[],a=new tf,s=new Of;for(let f=0;f<=e;f++){const t=f/e;r[f]=this.getTangentAt(t,new tf),r[f].normalize()}i[0]=new tf,o[0]=new tf;let u=Number.MAX_VALUE;const l=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=u&&(u=l,n.set(1,0,0)),c<=u&&(u=c,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let f=1;f<=e;f++){if(i[f]=i[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(jh(r[f-1].dot(r[f]),-1,1));i[f].applyMatrix4(s.makeRotationAxis(a,e))}o[f].crossVectors(r[f],i[f])}if(!0===t){let t=Math.acos(jh(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kg extends Ag{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new Wh,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*e-r*t+this.aX,u=n*t+r*e+this.aY}return n.set(s,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}kg.prototype.isEllipseCurve=!0;class Pg extends kg{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function Rg(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;u*=a,l*=a,i(t,n,u,l)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}Pg.prototype.isArcCurve=!0;const Og=new tf,Lg=new Rg,Ng=new Rg,Dg=new Rg;class Fg extends Ag{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new tf){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,u=Math.floor(o),l=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===l&&u===i-1&&(u=i-2,l=1),this.closed||u>0?a=r[(u-1)%i]:(Og.subVectors(r[0],r[1]).add(r[0]),a=Og);const c=r[u%i],h=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(Og.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=Og),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Lg.initNonuniformCatmullRom(a.x,c.x,h.x,s.x,t,n,r),Ng.initNonuniformCatmullRom(a.y,c.y,h.y,s.y,t,n,r),Dg.initNonuniformCatmullRom(a.z,c.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Lg.initCatmullRom(a.x,c.x,h.x,s.x,this.tension),Ng.initCatmullRom(a.y,c.y,h.y,s.y,this.tension),Dg.initCatmullRom(a.z,c.z,h.z,s.z,this.tension));return n.set(Lg.calc(l),Ng.calc(l),Dg.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new tf).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ug(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function zg(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function jg(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}Fg.prototype.isCatmullRomCurve3=!0;class Bg extends Ag{constructor(e=new Wh,t=new Wh,n=new Wh,r=new Wh){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Wh){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(jg(e,r.x,i.x,o.x,a.x),jg(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Bg.prototype.isCubicBezierCurve=!0;class Vg extends Ag{constructor(e=new tf,t=new tf,n=new tf,r=new tf){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new tf){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(jg(e,r.x,i.x,o.x,a.x),jg(e,r.y,i.y,o.y,a.y),jg(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Vg.prototype.isCubicBezierCurve3=!0;class Hg extends Ag{constructor(e=new Wh,t=new Wh){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Wh){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Wh;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Hg.prototype.isLineCurve=!0;class Wg extends Ag{constructor(e=new Wh,t=new Wh,n=new Wh){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Wh){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(zg(e,r.x,i.x,o.x),zg(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Wg.prototype.isQuadraticBezierCurve=!0;class Gg extends Ag{constructor(e=new tf,t=new tf,n=new tf){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tf){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(zg(e,r.x,i.x,o.x),zg(e,r.y,i.y,o.y),zg(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Gg.prototype.isQuadraticBezierCurve3=!0;class qg extends Ag{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Wh){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Ug(a,s.x,u.x,l.x,c.x),Ug(a,s.y,u.y,l.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Wh).fromArray(n))}return this}}qg.prototype.isSplineCurve=!0;var Kg=Object.freeze({__proto__:null,ArcCurve:Pg,CatmullRomCurve3:Fg,CubicBezierCurve:Bg,CubicBezierCurve3:Vg,EllipseCurve:kg,LineCurve:Hg,LineCurve3:class extends Ag{constructor(e=new tf,t=new tf){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new tf){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Wg,QuadraticBezierCurve3:Gg,SplineCurve:qg});const Xg=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=Yg(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,u,l,c,h,f,d;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,u,l;for(o=0,a=t.length;o<a;o++)s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,l=Yg(e,s,u,r,!1),l===l.next&&(l.steiner=!0),i.push(ay(l));for(i.sort(ny),o=0;o<i.length;o++)ry(i[o],n),n=$g(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=l=e[0],u=c=e[1];for(let t=n;t<i;t+=n)h=e[t],f=e[t+1],h<s&&(s=h),f<u&&(u=f),h>l&&(l=h),f>c&&(c=f);d=Math.max(l-s,c-u),d=0!==d?1/d:0}return Qg(o,a,n,s,u,d),a};function Yg(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=vy(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=vy(o,e[o],e[o+1],a);return a&&cy(a,a.next)&&(gy(a),a=a.next),a}function $g(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!cy(r,r.next)&&0!==ly(r.prev,r,r.next))r=r.next;else{if(gy(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Qg(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=oy(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ,r);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);let s,u,l=e;for(;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Zg(e,r,i,o):Jg(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),gy(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?Qg(e=ey($g(e),t,n),t,n,r,i,o,2):2===a&&ty(e,t,n,r,i,o):Qg($g(e),t,n,r,i,o,1);break}}function Jg(e){const t=e.prev,n=e,r=e.next;if(ly(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(sy(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ly(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Zg(e,t,n,r){const i=e.prev,o=e,a=e.next;if(ly(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=oy(s,u,t,n,r),f=oy(l,c,t,n,r);let d=e.prevZ,p=e.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&sy(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ly(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&sy(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ly(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&sy(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ly(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&sy(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ly(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ey(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!cy(i,o)&&hy(i,r,r.next,o)&&py(i,o)&&py(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),gy(r),gy(r.next),r=e=o),r=r.next}while(r!==e);return $g(r)}function ty(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&uy(a,e)){let s=my(a,e);return a=$g(a,a.next),s=$g(s,s.next),Qg(a,t,n,r,i,o),void Qg(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function ny(e,t){return e.x-t.x}function ry(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,u=o.x,l=o.y;let c,h=1/0;n=o;do{r>=n.x&&n.x>=u&&r!==n.x&&sy(i<l?r:a,i,u,l,i<l?a:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),py(n,e)&&(c<h||c===h&&(n.x>o.x||n.x===o.x&&iy(o,n)))&&(o=n,h=c)),n=n.next}while(n!==s);return o}(e,t)){const n=my(t,e);$g(t,t.next),$g(n,n.next)}}function iy(e,t){return ly(e.prev,e,t.prev)<0&&ly(t.next,e,e.next)<0}function oy(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ay(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function sy(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function uy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&hy(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(py(e,t)&&py(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(ly(e.prev,e,t.prev)||ly(e,t.prev,t))||cy(e,t)&&ly(e.prev,e,e.next)>0&&ly(t.prev,t,t.next)>0)}function ly(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function cy(e,t){return e.x===t.x&&e.y===t.y}function hy(e,t,n,r){const i=dy(ly(e,t,n)),o=dy(ly(e,t,r)),a=dy(ly(n,r,e)),s=dy(ly(n,r,t));return i!==o&&a!==s||(!(0!==i||!fy(e,n,t))||(!(0!==o||!fy(e,r,t))||(!(0!==a||!fy(n,e,r))||!(0!==s||!fy(n,t,r)))))}function fy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function dy(e){return e>0?1:e<0?-1:0}function py(e,t){return ly(e.prev,e,e.next)<0?ly(e,t,e.next)>=0&&ly(e,e.prev,t)>=0:ly(e,t,e.prev)<0||ly(e,e.next,t)<0}function my(e,t){const n=new yy(e.i,e.x,e.y),r=new yy(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vy(e,t,n,r){const i=new yy(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yy(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class by{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return by.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];_y(e),wy(n,e);let o=e.length;t.forEach(_y);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,wy(n,t[s]);const a=Xg(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function _y(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wy(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class xy extends jd{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Sy;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let v,g,y,b,_,w=!1;p&&(v=p.getSpacedPoints(s),w=!0,l=!1,g=p.computeFrenetFrames(s,!1),y=new tf,b=new tf,_=new tf),l||(d=0,c=0,h=0,f=0);const x=e.extractPoints(a);let S=x.shape;const E=x.holes;if(!by.isClockWise(S)){S=S.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];by.isClockWise(t)&&(E[e]=t.reverse())}}const T=by.triangulateShape(S,E),M=S;for(let t=0,n=E.length;t<n;t++){const e=E[t];S=S.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const I=S.length,A=T.length;function k(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+a/h,m=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(a*l-s*u);r=d+a*m-e.x,i=p+s*m-e.y;const v=r*r+i*i;if(v<=2)return new Wh(r,i);o=Math.sqrt(v/2)}else{let e=!1;a>Number.EPSILON?u>Number.EPSILON&&(e=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Wh(r/o,i/o)}const P=[];for(let t=0,n=M.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[t]=k(M[t],M[r],M[i]);const R=[];let O,L=P.concat();for(let t=0,n=E.length;t<n;t++){const e=E[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=k(e[t],e[r],e[i]);R.push(O),L=L.concat(O)}for(let t=0;t<d;t++){const e=t/d,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,i=M.length;t<i;t++){const e=C(M[t],P[t],r);F(e.x,e.y,-n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];O=R[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);F(i.x,i.y,-n)}}}const N=h+f;for(let t=0;t<I;t++){const e=l?C(S[t],L[t],N):S[t];w?(b.copy(g.normals[0]).multiplyScalar(e.x),y.copy(g.binormals[0]).multiplyScalar(e.y),_.copy(v[0]).add(b).add(y),F(_.x,_.y,_.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<I;e++){const n=l?C(S[e],L[e],N):S[e];w?(b.copy(g.normals[t]).multiplyScalar(n.x),y.copy(g.binormals[t]).multiplyScalar(n.y),_.copy(v[t]).add(b).add(y),F(_.x,_.y,_.z)):F(n.x,n.y,u/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,i=M.length;t<i;t++){const e=C(M[t],P[t],r);F(e.x,e.y,u+n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];O=R[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);w?F(i.x,i.y+v[s-1].y,v[s-1].x+n):F(i.x,i.y,u+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*d;e<n;e++){const n=I*e,o=I*(e+1);z(t+r+n,t+i+n,t+i+o,t+r+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function U(e,t,i){j(e),j(t),j(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);B(a[0]),B(a[1]),B(a[2])}function z(e,t,i,o){j(e),j(t),j(o),j(t),j(i),j(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[3]),B(s[1]),B(s[2]),B(s[3])}function j(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function B(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(l){let e=0,t=I*e;for(let n=0;n<A;n++){const e=T[n];U(e[2]+t,e[1]+t,e[0]+t)}e=s+2*d,t=I*e;for(let n=0;n<A;n++){const e=T[n];U(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<A;e++){const t=T[e];U(t[2],t[1],t[0])}for(let e=0;e<A;e++){const t=T[e];U(t[0]+I*s,t[1]+I*s,t[2]+I*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(M,t),t+=M.length;for(let n=0,r=E.length;n<r;n++){const e=E[n];D(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Pd(r,3)),this.setAttribute("uv",new Pd(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Kg[r.type]).fromJSON(r)),new xy(n,e.options)}}const Sy={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new Wh(o,a),new Wh(s,u),new Wh(l,c)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new Wh(a,1-u),new Wh(l,1-h),new Wh(f,1-p),new Wh(m,1-g)]:[new Wh(s,1-u),new Wh(c,1-h),new Wh(d,1-p),new Wh(v,1-g)]}};class Ey extends jd{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))u(e);else for(let l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){const a=r.length/3,u=e.extractPoints(t);let l=u.shape;const c=u.holes;!1===by.isClockWise(l)&&(l=l.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===by.isClockWise(e)&&(c[t]=e.reverse())}const h=by.triangulateShape(l,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];l=l.concat(e)}for(let t=0,n=l.length;t<n;t++){const e=l[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Pd(r,3)),this.setAttribute("normal",new Pd(i,3)),this.setAttribute("uv",new Pd(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Ey(n,e.curveSegments)}}class Ty extends jd{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let u=0;const l=[],c=new tf,h=new tf,f=[],d=[],p=[],m=[];for(let v=0;v<=n;v++){const f=[],g=v/n;let y=0;0==v&&0==o?y=.5/t:v==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(o+g*a),c.y=e*Math.cos(o+g*a),c.z=e*Math.sin(r+s*i)*Math.sin(o+g*a),d.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-g),f.push(u++)}l.push(f)}for(let v=0;v<n;v++)for(let e=0;e<t;e++){const t=l[v][e+1],r=l[v][e],i=l[v+1][e],a=l[v+1][e+1];(0!==v||o>0)&&f.push(t,r,a),(v!==n-1||s<Math.PI)&&f.push(r,i,a)}this.setIndex(f),this.setAttribute("position",new Pd(d,3)),this.setAttribute("normal",new Pd(p,3)),this.setAttribute("uv",new Pd(m,2))}static fromJSON(e){return new Ty(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}(class extends gd{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ed(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;(class extends cp{constructor(e){super(e),this.type="RawShaderMaterial"}}).prototype.isRawShaderMaterial=!0;class My extends gd{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ed(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ed(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}My.prototype.isMeshStandardMaterial=!0;(class extends My{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Wh(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=jh(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ed(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ed).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}).prototype.isMeshPhysicalMaterial=!0;(class extends gd{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ed(16777215),this.specular=new Ed(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ed(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends gd{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ed(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ed(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshToonMaterial=!0;(class extends gd{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends gd{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ed(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ed(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshLambertMaterial=!0;(class extends gd{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ed(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends dg{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Cy={arraySlice:function(e,t,n){return Cy.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let u=0;u<o.tracks.length;++u){const e=o.tracks[u],t=e.getValueSize(),s=[],l=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)l.push(e.values[o*t+n])}}0!==s.length&&(e.times=Cy.convertArray(s,e.times.constructor),e.values=Cy.convertArray(l,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let u=0;u<o.tracks.length;++u)s>o.tracks[u].times[0]&&(s=o.tracks[u].times[0]);for(let u=0;u<o.tracks.length;++u)o.tracks[u].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);let l=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);const h=t.times.length-1;let f;if(o<=t.times[0]){const e=s,n=u-s;f=Cy.arraySlice(t.values,e,n)}else if(o>=t.times[h]){const e=h*u+s,n=e+u-s;f=Cy.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=u-s;e.evaluate(o),f=Cy.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new ef).fromArray(f).normalize().conjugate().toArray(f)}const d=i.times.length;for(let e=0;e<d;++e){const t=e*c+l;if("quaternion"===r)ef.multiplyQuaternionsFlat(i.values,t,f,0,i.values,t);else{const e=c-2*l;for(let n=0;n<e;++n)i.values[t+n]-=f[n]}}}return e.blendMode=2501,e}};class Iy{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Iy.prototype.beforeStart_=Iy.prototype.copySampleValue_,Iy.prototype.afterEnd_=Iy.prototype.copySampleValue_;class Ay extends Iy{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p;for(let _=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}class ky extends Iy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l;for(let h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}class Py extends Iy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ry{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cy.convertArray(t,this.TimeBufferType),this.values=Cy.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Cy.convertArray(e.times,Array),values:Cy.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Py(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ky(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ay(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=Cy.arraySlice(n,i,o),this.values=Cy.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&Cy.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=Cy.arraySlice(this.times),t=Cy.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=Cy.arraySlice(e,0,o),this.values=Cy.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Cy.arraySlice(this.times,0),t=Cy.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Ry.prototype.TimeBufferType=Float32Array,Ry.prototype.ValueBufferType=Float32Array,Ry.prototype.DefaultInterpolation=2301;class Oy extends Ry{}Oy.prototype.ValueTypeName="bool",Oy.prototype.ValueBufferType=Array,Oy.prototype.DefaultInterpolation=2300,Oy.prototype.InterpolantFactoryMethodLinear=void 0,Oy.prototype.InterpolantFactoryMethodSmooth=void 0;class Ly extends Ry{}Ly.prototype.ValueTypeName="color";class Ny extends Ry{}Ny.prototype.ValueTypeName="number";class Dy extends Iy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let u=e*a;for(let l=u+a;u!==l;u+=4)ef.slerpFlat(i,0,o,u-a,o,u,s);return i}}class Fy extends Ry{InterpolantFactoryMethodLinear(e){return new Dy(this.times,this.values,this.getValueSize(),e)}}Fy.prototype.ValueTypeName="quaternion",Fy.prototype.DefaultInterpolation=2301,Fy.prototype.InterpolantFactoryMethodSmooth=void 0;class Uy extends Ry{}Uy.prototype.ValueTypeName="string",Uy.prototype.ValueBufferType=Array,Uy.prototype.DefaultInterpolation=2300,Uy.prototype.InterpolantFactoryMethodLinear=void 0,Uy.prototype.InterpolantFactoryMethodSmooth=void 0;class zy extends Ry{}zy.prototype.ValueTypeName="vector";class jy{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=zh(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(By(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(Ry.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const u=Cy.getKeyframeOrder(e);e=Cy.sortedArray(e,1,u),s=Cy.sortedArray(s,1,u),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new Ny(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];Cy.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const u=e.hierarchy||[];for(let l=0;l<u.length;l++){const e=u[l].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new Ny(".morphTargetInfluence["+i+"]",t,o))}s=t.length*(o||1)}else{const i=".bones["+t[l].name+"]";n(zy,i+".position",e,"pos",r),n(Fy,i+".quaternion",e,"rot",r),n(zy,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function By(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ny;case"vector":case"vector2":case"vector3":case"vector4":return zy;case"color":return Ly;case"quaternion":return Fy;case"bool":case"boolean":return Oy;case"string":return Uy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Cy.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Vy={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Hy=new class{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){const t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=u.length;t<n;t+=2){const n=u[t],r=u[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}};class Wy{constructor(e){this.manager=void 0!==e?e:Hy,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Gy={};class qy extends Wy{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Vy.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0!==Gy[e])return void Gy[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let n=0;n<s.length;n++)e[n]=s.charCodeAt(n);r="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(u){setTimeout((function(){r&&r(u),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{Gy[e]=[],Gy[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,r=Gy[e];if(delete Gy[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Vy.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=Gy[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=Gy[e];delete Gy[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=Gy[e];delete Gy[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return i.manager.itemStart(e),s}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ky extends Wy{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Vy.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Vy.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Xy extends Wy{constructor(e){super(e)}load(e,t,n,r){const i=new pp,o=new Ky(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let u=0;u<e.length;++u)s(u);return i}}class Yy extends Wy{constructor(e){super(e)}load(e,t,n,r){const i=new Yh,o=new Ky(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class $y extends Ag{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Hg(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Kg[n.type]).fromJSON(n))}return this}}class Qy extends $y{constructor(e){super(),this.type="Path",this.currentPoint=new Wh,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Hg(this.currentPoint.clone(),new Wh(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Wg(this.currentPoint.clone(),new Wh(e,t),new Wh(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new Bg(this.currentPoint.clone(),new Wh(e,t),new Wh(n,r),new Wh(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new qg(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const u=new kg(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=u.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(u);const l=u.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Jy extends Qy{constructor(e){super(e),this.uuid=zh(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Qy).fromJSON(n))}return this}}class Zy extends id{constructor(e,t=1){super(),this.type="Light",this.color=new Ed(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Zy.prototype.isLight=!0;(class extends Zy{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(id.DefaultUp),this.updateMatrix(),this.groundColor=new Ed(t)}copy(e){return Zy.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const eb=new Of,tb=new tf,nb=new tf;class rb{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Wh(512,512),this.map=null,this.mapPass=null,this.matrix=new Of,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xp,this._frameExtents=new Wh(1,1),this._viewportCount=1,this._viewports=[new Qh(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;tb.setFromMatrixPosition(e.matrixWorld),t.position.copy(tb),nb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nb),t.updateMatrixWorld(),eb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ib extends rb{constructor(){super(new fp(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Uh*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ib.prototype.isSpotLightShadow=!0;(class extends Zy{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(id.DefaultUp),this.updateMatrix(),this.target=new id,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new ib}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const ob=new Of,ab=new tf,sb=new tf;class ub extends rb{constructor(){super(new fp(90,1,.5,500)),this._frameExtents=new Wh(4,2),this._viewportCount=6,this._viewports=[new Qh(2,1,1,1),new Qh(0,1,1,1),new Qh(3,1,1,1),new Qh(1,1,1,1),new Qh(3,0,1,1),new Qh(1,0,1,1)],this._cubeDirections=[new tf(1,0,0),new tf(-1,0,0),new tf(0,0,1),new tf(0,0,-1),new tf(0,1,0),new tf(0,-1,0)],this._cubeUps=[new tf(0,1,0),new tf(0,1,0),new tf(0,1,0),new tf(0,1,0),new tf(0,0,1),new tf(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),ab.setFromMatrixPosition(e.matrixWorld),n.position.copy(ab),sb.copy(n.position),sb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(sb),n.updateMatrixWorld(),r.makeTranslation(-ab.x,-ab.y,-ab.z),ob.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ob)}}ub.prototype.isPointLightShadow=!0;(class extends Zy{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new ub}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class lb extends hp{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}lb.prototype.isOrthographicCamera=!0;class cb extends rb{constructor(){super(new lb(-5,5,5,-5,.5,500))}}cb.prototype.isDirectionalLightShadow=!0;(class extends Zy{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(id.DefaultUp),this.updateMatrix(),this.target=new id,this.shadow=new cb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends Zy{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Zy{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class hb{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new tf)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}hb.prototype.isSphericalHarmonics3=!0;class fb extends Zy{constructor(e=new hb,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}fb.prototype.isLightProbe=!0;(class extends jd{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;(class extends Id{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}).prototype.isInstancedBufferAttribute=!0;let db;(class extends Wy{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Vy.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Vy.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;const pb=function(){return void 0===db&&(db=new(window.AudioContext||window.webkitAudioContext)),db};class mb extends Wy{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new qy(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);pb().decodeAudioData(e,(function(e){t(e)}))}catch(XY){r?r(XY):console.error(XY),i.manager.itemError(e)}}),n,r)}}(class extends fb{constructor(e,t,n=1){super(void 0,n);const r=(new Ed).set(e),i=(new Ed).set(t),o=new tf(r.r,r.g,r.b),a=new tf(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}).prototype.isHemisphereLightProbe=!0;(class extends fb{constructor(e,t=1){super(void 0,t);const n=(new Ed).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class vb{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ef.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;ef.multiplyQuaternionsFlat(e,o,e,t,e,n),ef.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const gb=new RegExp("[\\[\\]\\.:\\/]","g"),yb="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",bb=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),_b=/(WCOD+)?/.source.replace("WCOD",yb),wb=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xb=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Sb=new RegExp("^"+bb+_b+wb+xb+"$"),Eb=["material","materials","bones"];class Tb{constructor(e,t,n){this.path=t,this.parsedPath=n||Tb.parseTrackName(t),this.node=Tb.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Tb.Composite(e,t,n):new Tb(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gb,"")}static parseTrackName(e){const t=Sb.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Eb.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Tb.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tb.Composite=class{constructor(e,t,n){const r=n||Tb.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Tb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Tb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Tb.prototype.GetterByBindingType=[Tb.prototype._getValue_direct,Tb.prototype._getValue_array,Tb.prototype._getValue_arrayElement,Tb.prototype._getValue_toArray],Tb.prototype.SetterByBindingTypeAndVersioning=[[Tb.prototype._setValue_direct,Tb.prototype._setValue_direct_setNeedsUpdate,Tb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tb.prototype._setValue_array,Tb.prototype._setValue_array_setNeedsUpdate,Tb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tb.prototype._setValue_arrayElement,Tb.prototype._setValue_arrayElement_setNeedsUpdate,Tb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tb.prototype._setValue_fromArray,Tb.prototype._setValue_fromArray_setNeedsUpdate,Tb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Mb{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let u=0;u!==o;++u){const e=i[u].createInterpolant(null);a[u]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=2202===n;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}(class extends Nh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName;let l=u[s];void 0===l&&(l={},u[s]=l);for(let c=0;c!==i;++c){const e=r[c],i=e.name;let u=l[i];if(void 0!==u)o[c]=u;else{if(u=o[c],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,i));continue}const r=t&&t._propertyBindings[c].binding.parsedPath;u=new vb(Tb.create(n,i,r),e.ValueTypeName,e.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,i),o[c]=u}a[c].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ky(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?jy.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;const l=new Mb(this,o,t,n);return this._bindAction(l,u),this._addInactiveAction(l,a,i),l}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?jy.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u){t[u]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let u=0;u!==s;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);(class extends zv{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;(class extends id{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}).prototype.isImmediateRenderObject=!0;const Cb=new tf,Ib=new Of,Ab=new Of;function kb(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,kb(e.children[n]));return t}const Pb=new Float32Array(1);new Int32Array(Pb.buffer);const Rb=new Td({side:1,depthWrite:!1,depthTest:!1});function Ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.7.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/new ip(new ap,Rb),Ag.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ag.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Qy.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends xg{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ed(n),r=new Ed(r);const i=t/2,o=e/t,a=e/2,s=[],u=[];for(let c=0,h=0,f=-a;c<=t;c++,f+=o){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);const e=c===i?n:r;e.toArray(u,h),h+=3,e.toArray(u,h),h+=3,e.toArray(u,h),h+=3,e.toArray(u,h),h+=3}const l=new jd;l.setAttribute("position",new Pd(s,3)),l.setAttribute("color",new Pd(u,3));super(l,new dg({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends xg{constructor(e){const t=kb(e),n=new jd,r=[],i=[],o=new Ed(0,0,1),a=new Ed(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Pd(r,3)),n.setAttribute("color",new Pd(i,3));super(n,new dg({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ab.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(Ib.multiplyMatrices(Ab,e.matrixWorld),Cb.setFromMatrixPosition(Ib),r.setXYZ(o,Cb.x,Cb.y,Cb.z),Ib.multiplyMatrices(Ab,e.parent.matrixWorld),Cb.setFromMatrixPosition(Ib),r.setXYZ(o+1,Cb.x,Cb.y,Cb.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Wy.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(XY){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}.extractUrlBase(e)},Wy.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},of.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},of.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},of.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},of.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},of.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Ef.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},xp.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Gh.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Gh.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Gh.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Gh.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Gh.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Gh.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Of.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Of.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Of.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new tf).setFromMatrixColumn(this,3)},Of.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Of.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Of.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Of.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Of.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Of.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Of.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Of.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Of.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Of.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Of.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Of.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Of.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Of.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Of.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},Of.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},bp.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},ef.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},ef.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Rf.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Rf.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Rf.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},md.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},md.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},md.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},md.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},md.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},md.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),md.getBarycoord(e,t,n,r,i)},md.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),md.getNormal(e,t,n,r)},Jy.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Jy.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xy(this,e)},Jy.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ey(this,e)},Wh.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Wh.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Wh.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},tf.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},tf.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},tf.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},tf.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},tf.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},tf.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},tf.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},tf.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},tf.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Qh.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Qh.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},id.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},id.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},id.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},id.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},id.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(id.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),ip.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(ip.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ug.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},fp.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Zy.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Id.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Id.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},Id.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Id.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},jd.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},jd.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Id(arguments[1],arguments[2])))},jd.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},jd.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},jd.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},jd.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},jd.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(jd.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),zv.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},zv.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},xy.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},xy.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},xy.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Uv.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(gd.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ed}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(cp.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Fv.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Fv.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Fv.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Fv.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Fv.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Fv.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Fv.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Fv.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Fv.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Fv.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Fv.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Fv.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Fv.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Fv.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Fv.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Fv.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Fv.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Fv.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Fv.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Fv.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Fv.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Fv.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Fv.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Fv.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Fv.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Fv.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Cv.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Jh.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends id{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new mb).load(e,(function(e){t.setBuffer(e)})),this},dp.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},dp.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},Kh.crossOrigin=void 0,Kh.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Yy;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Kh.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Xy;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Kh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Kh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"130"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="130");var Nb,Db,Fb,Ub,zb,jb,Bb,Vb,Hb,Wb,Gb,qb,Kb,Xb,Yb,$b,Qb,Jb,Zb,e_,t_,n_,r_,i_,o_,a_,s_,u_,l_={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},c_={duration:.5,overwrite:!1,delay:0},h_=2*Math.PI,f_=h_/4,d_=0,p_=Math.sqrt,m_=Math.cos,v_=Math.sin,g_=function(e){return"string"==typeof e},y_=function(e){return"function"==typeof e},b_=function(e){return"number"==typeof e},__=function(e){return void 0===e},w_=function(e){return"object"==typeof e},x_=function(e){return!1!==e},S_=function(){return"undefined"!=typeof window},E_=function(e){return y_(e)||g_(e)},T_="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},M_=Array.isArray,C_=/(?:-?\.?\d|\.)+/gi,I_=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,A_=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,k_=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,P_=/[+-]=-?[.\d]+/,R_=/[^,'"\[\]\s]+/gi,O_=/[\d.+\-=]+(?:e[-+]\d*)*/i,L_={},N_={},D_=function(e){return(N_=sw(e,L_))&&qx},F_=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},U_=function(e,t){return!t&&console.warn(e)},z_=function(e,t){return e&&(L_[e]=t)&&N_&&(N_[e]=t)||L_},j_=function(){return 0},B_={},V_=[],H_={},W_={},G_={},q_=30,K_=[],X_="",Y_=function(e){var t,n,r=e[0];if(w_(r)||y_(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=K_.length;n--&&!K_[n].targetTest(r););t=K_[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new gx(e[n],t)))||e.splice(n,1);return e},$_=function(e){return e._gsap||Y_(Fw(e))[0]._gsap},Q_=function(e,t,n){return(n=e[t])&&y_(n)?e[t]():__(n)&&e.getAttribute&&e.getAttribute(t)||n},J_=function(e,t){return(e=e.split(",")).forEach(t)||e},Z_=function(e){return Math.round(1e5*e)/1e5||0},ew=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},tw=function(){var e,t,n=V_.length,r=V_.slice(0);for(H_={},V_.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},nw=function(e,t,n,r){V_.length&&tw(),e.render(t,n,r),V_.length&&tw()},rw=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(R_).length<2?t:g_(e)?e.trim():e},iw=function(e){return e},ow=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},aw=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},sw=function(e,t){for(var n in t)e[n]=t[n];return e},uw=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=w_(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},lw=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},cw=function(e){var t=e.parent||Db,n=e.keyframes?aw:ow;if(x_(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},hw=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},fw=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},dw=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},pw=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},mw=function e(t){return!t||t._ts&&e(t.parent)},vw=function(e){return e._repeat?gw(e._tTime,e=e.duration()+e._rDelay)*e:0},gw=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},yw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},bw=function(e){return e._end=Z_(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},_w=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Z_(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),bw(e),n._dirty||dw(n,e)),e},ww=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=yw(e.rawTime(),t),(!t._dur||Ow(0,t.totalDuration(),n)-t._tTime>1e-8)&&t.render(n,!0)),dw(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},xw=function(e,t,n,r){return t.parent&&fw(t),t._start=Z_((b_(n)?n:n||e!==Db?kw(e,n,t):e._time)+t._delay),t._end=Z_(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=e[r];if(i)for(o=t[i];a&&a[i]>o;)a=a._prev;a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),Mw(t)||(e._recent=t),r||ww(e,t),e},Sw=function(e,t){return(L_.ScrollTrigger||F_("scrollTrigger",t))&&L_.ScrollTrigger.create(t,e)},Ew=function(e,t,n,r){return Ex(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Bb!==ix.frame?(V_.push(e),e._lazy=[t,r],1):void 0:1},Tw=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Mw=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Cw=function(e,t,n,r){var i=e._repeat,o=Z_(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:Z_(o*(i+1)+e._rDelay*i):o,a&&!r?_w(e,e._tTime=e._tDur*a):e.parent&&bw(e),n||dw(e.parent,e),e},Iw=function(e){return e instanceof bx?dw(e):Cw(e,e._dur)},Aw={_start:0,endTime:j_,totalDuration:j_},kw=function e(t,n,r){var i,o,a,s=t.labels,u=t._recent||Aw,l=t.duration()>=1e8?u.endTime(!1):t._dur;return g_(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?u:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=l),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(M_(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+o:l+o)):null==n?l:+n},Pw=function(e,t,n){var r,i,o=b_(t[1]),a=(o?2:1)+(e<2?0:1),s=t[a];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=x_(i.vars.inherit)&&i.parent;s.immediateRender=x_(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[a-1]}return new Ix(t[0],s,t[a+1])},Rw=function(e,t){return e||0===e?t(e):t},Ow=function(e,t,n){return n<e?e:n>t?t:n},Lw=function(e){if("string"!=typeof e)return"";var t=O_.exec(e);return t?e.substr(t.index+t[0].length):""},Nw=[].slice,Dw=function(e,t){return e&&w_(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&w_(e[0]))&&!e.nodeType&&e!==Fb},Fw=function(e,t,n){return!g_(e)||n||!Ub&&ox()?M_(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return g_(e)&&!t||Dw(e,1)?(r=n).push.apply(r,Fw(e)):n.push(e)}))||n}(e,n):Dw(e)?Nw.call(e,0):e?[e]:[]:Nw.call((t||zb).querySelectorAll(e),0)},Uw=function(e){return e.sort((function(){return.5-Math.random()}))},zw=function(e){if(y_(e))return e;var t=w_(e)?e:{each:e},n=fx(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=t.axis,l=r,c=r;return g_(r)?l=c={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(l=r[0],c=r[1]),function(e,a,h){var f,d,p,m,v,g,y,b,_,w=(h||t).length,x=o[w];if(!x){if(!(_="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(y=-1e8;y<(y=h[_++].getBoundingClientRect().left)&&_<w;);_--}for(x=o[w]=[],f=s?Math.min(_,w)*l-.5:r%_,d=s?w*c/_-.5:r/_|0,y=0,b=1e8,g=0;g<w;g++)p=g%_-f,m=d-(g/_|0),x[g]=v=u?Math.abs("y"===u?m:p):p_(p*p+m*m),v>y&&(y=v),v<b&&(b=v);"random"===r&&Uw(x),x.max=y-b,x.min=b,x.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(_>w?w-1:u?"y"===u?w/_:_:Math.max(_,w/_))||0)*("edges"===r?-1:1),x.b=w<0?i-w:i,x.u=Lw(t.amount||t.each)||0,n=n&&w<0?cx(n):n}return w=(x[e]-x.min)/x.max||0,Z_(x.b+(n?n(w):w)*x.v)+x.u}},jw=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(b_(n)?0:Lw(n))}},Bw=function(e,t){var n,r,i=M_(e);return!i&&w_(e)&&(n=i=e.radius||1e8,e.values?(e=Fw(e.values),(r=!b_(e[0]))&&(n*=n)):e=jw(e.increment)),Rw(t,i?y_(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,a=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),u=1e8,l=0,c=e.length;c--;)(i=r?(i=e[c].x-a)*i+(o=e[c].y-s)*o:Math.abs(e[c]-a))<u&&(u=i,l=c);return l=!n||u<=n?e[l]:t,r||l===t||b_(t)?l:l+Lw(t)}:jw(e))},Vw=function(e,t,n,r){return Rw(M_(e)?!t:!0===n?!!(n=0):!r,(function(){return M_(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},Hw=function(e,t,n){return Rw(n,(function(n){return e[~~t(n)]}))},Ww=function(e){for(var t,n,r,i,o=0,a="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?R_:C_),a+=e.substr(o,t-o)+Vw(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},Gw=function(e,t,n,r,i){var o=t-e,a=r-n;return Rw(i,(function(t){return n+((t-e)/o*a||0)}))},qw=function(e,t,n){var r,i,o,a=e.labels,s=1e8;for(r in a)(i=a[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},Kw=function(e,t,n){var r,i,o=e.vars,a=o[t];if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&V_.length&&tw(),r?a.apply(i,r):a.call(i)},Xw=function(e){return fw(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&Kw(e,"onInterrupt"),e},Yw=function(e){var t=(e=!e.name&&e.default||e).name,n=y_(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:j_,render:Fx,add:xx,kill:zx,modifier:Ux,rawVars:0},o={targetTest:0,get:0,getSetter:Ox,aliases:{},register:0};if(ox(),e!==r){if(W_[t])return;ow(r,ow(lw(e,i),o)),sw(r.prototype,sw(i,lw(e,o))),W_[r.prop=t]=r,e.targetTest&&(K_.push(r),B_[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}z_(t,r),e.register&&e.register(qx,r,Vx)},$w={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Qw=function(e,t,n){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},Jw=function(e,t,n){var r,i,o,a,s,u,l,c,h,f,d=e?b_(e)?[e>>16,e>>8&255,255&e]:0:$w.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),$w[e])d=$w[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(d=parseInt(e.substr(1,6),16))>>16,d>>8&255,255&d,parseInt(e.substr(7),16)/255];d=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3))if(d=f=e.match(C_),t){if(~e.indexOf("="))return d=e.match(I_),n&&d.length<4&&(d[3]=1),d}else a=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=Qw(a+1/3,r,i),d[1]=Qw(a,r,i),d[2]=Qw(a-1/3,r,i);else d=e.match(C_)||$w.transparent;d=d.map(Number)}return t&&!f&&(r=d[0]/255,i=d[1]/255,o=d[2]/255,u=((l=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,l===c?a=s=0:(h=l-c,s=u>.5?h/(2-l-c):h/(l+c),a=l===r?(i-o)/h+(i<o?6:0):l===i?(o-r)/h+2:(r-i)/h+4,a*=60),d[0]=~~(a+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},Zw=function(e){var t=[],n=[],r=-1;return e.split(tx).forEach((function(e){var i=e.match(A_)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},ex=function(e,t,n){var r,i,o,a,s="",u=(e+s).match(tx),l=t?"hsla(":"rgba(",c=0;if(!u)return e;if(u=u.map((function(e){return(e=Jw(e,t,1))&&l+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=Zw(e),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=e.replace(tx,"1").split(A_)).length-1;c<a;c++)s+=i[c]+(~r.indexOf(c)?u.shift()||l+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=e.split(tx)).length-1;c<a;c++)s+=i[c]+u[c];return s+i[a]},tx=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in $w)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),nx=/hsl[a]?\(/,rx=function(e){var t,n=e.join(" ");if(tx.lastIndex=0,tx.test(n))return t=nx.test(n),e[1]=ex(e[1],t),e[0]=ex(e[0],t,Zw(e[1])),!0},ix=($b=Date.now,Qb=500,Jb=33,Zb=$b(),e_=Zb,n_=t_=1e3/240,i_=function e(t){var n,r,i,o,a=$b()-e_,s=!0===t;if(a>Qb&&(Zb+=a-Jb),((n=(i=(e_+=a)-Zb)-n_)>0||s)&&(o=++Kb.frame,Xb=i-1e3*Kb.time,Kb.time=i/=1e3,n_+=n+(n>=t_?4:t_-n),r=1),s||(Wb=Gb(e)),r)for(Yb=0;Yb<r_.length;Yb++)r_[Yb](i,Xb,o,t)},Kb={time:0,frame:0,tick:function(){i_(!0)},deltaRatio:function(e){return Xb/(1e3/(e||60))},wake:function(){jb&&(!Ub&&S_()&&(Fb=Ub=window,zb=Fb.document||{},L_.gsap=qx,(Fb.gsapVersions||(Fb.gsapVersions=[])).push(qx.version),D_(N_||Fb.GreenSockGlobals||!Fb.gsap&&Fb||{}),qb=Fb.requestAnimationFrame),Wb&&Kb.sleep(),Gb=qb||function(e){return setTimeout(e,n_-1e3*Kb.time+1|0)},Hb=1,i_(2))},sleep:function(){(qb?Fb.cancelAnimationFrame:clearTimeout)(Wb),Hb=0,Gb=j_},lagSmoothing:function(e,t){Qb=e||1/1e-8,Jb=Math.min(t,Qb,0)},fps:function(e){t_=1e3/(e||240),n_=1e3*Kb.time+t_},add:function(e){r_.indexOf(e)<0&&r_.push(e),ox()},remove:function(e){var t;~(t=r_.indexOf(e))&&r_.splice(t,1)&&Yb>=t&&Yb--},_listeners:r_=[]}),ox=function(){return!Hb&&ix.wake()},ax={},sx=/^[\d.\-M][\d.\-,\s]/,ux=/["']/g,lx=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],t=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(ux,"").trim():+r,a=n.substr(t+1).trim();return i},cx=function(e){return function(t){return 1-e(1-t)}},hx=function e(t,n){for(var r,i=t._first;i;)i instanceof bx?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},fx=function(e,t){return e&&(y_(e)?e:ax[e]||function(e){var t,n,r,i,o=(e+"").split("("),a=ax[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[lx(o[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(rw)):ax._CE&&sx.test(e)?ax._CE("",e):a}(e))||t},dx=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return J_(e,(function(e){for(var t in ax[e]=L_[e]=o,ax[i=e.toLowerCase()]=n,o)ax[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=ax[e+"."+t]=o[t]})),o},px=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},mx=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),a=o/h_*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*v_((e-a)*o)+1},u="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:px(s);return o=h_/o,u.config=function(n,r){return e(t,n,r)},u},vx=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:px(r);return i.config=function(n){return e(t,n)},i};J_("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;dx(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),ax.Linear.easeNone=ax.none=ax.Linear.easeIn,dx("Elastic",mx("in"),mx("out"),mx()),o_=7.5625,s_=1/(a_=2.75),dx("Bounce",(function(e){return 1-u_(1-e)}),u_=function(e){return e<s_?o_*e*e:e<.7272727272727273?o_*Math.pow(e-1.5/a_,2)+.75:e<.9090909090909092?o_*(e-=2.25/a_)*e+.9375:o_*Math.pow(e-2.625/a_,2)+.984375}),dx("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),dx("Circ",(function(e){return-(p_(1-e*e)-1)})),dx("Sine",(function(e){return 1===e?1:1-m_(e*f_)})),dx("Back",vx("in"),vx("out"),vx()),ax.SteppedEase=ax.steps=L_.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*Ow(0,.99999999,e)|0)+i)*n}}},c_.ease=ax["quad.out"],J_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return X_+=e+","+e+"Params,"}));var gx=function(e,t){this.id=d_++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Q_,this.set=t?t.getSetter:Ox},yx=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Cw(this,+e.duration,1,1),this.data=e.data,Hb||ix.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Cw(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(ox(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(_w(this,e),!n._dp||n.parent||ww(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&xw(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&1e-8===Math.abs(this._zTime)||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),nw(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+vw(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+vw(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?gw(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?yw(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,pw(this.totalTime(Ow(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ox(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&xw(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(x_(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?yw(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Iw(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Iw(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(kw(this,e),x_(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,x_(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-1e-8))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=y_(e)?e:iw,i=function(){var e=t.then;t.then=null,y_(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){Xw(this)},e}();ow(yx.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var bx=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=x_(t.sortChildren),Db&&xw(t.parent||Db,Ob(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&Sw(Ob(r),t.scrollTrigger),r}Lb(t,e);var n=t.prototype;return n.to=function(e,t,n){return Pw(0,arguments,this),this},n.from=function(e,t,n){return Pw(1,arguments,this),this},n.fromTo=function(e,t,n,r){return Pw(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,cw(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Ix(e,t,kw(this,n),1),this},n.call=function(e,t,n){return xw(this,Ix.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,o,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new Ix(e,n,kw(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,a){return n.runBackwards=1,cw(n).immediateRender=x_(n.immediateRender),this.staggerTo(e,t,n,r,i,o,a)},n.staggerFromTo=function(e,t,n,r,i,o,a,s){return r.startAt=n,cw(r).immediateRender=x_(r.immediateRender),this.staggerTo(e,t,r,i,o,a,s)},n.render=function(e,t,n){var r,i,o,a,s,u,l,c,h,f,d,p,m=this._time,v=this._dirty?this.totalDuration():this._tDur,g=this._dur,y=this!==Db&&e>v-1e-8&&e>=0?v:e<1e-8?0:e,b=this._zTime<0!=e<0&&(this._initted||!g);if(y!==this._tTime||n||b){if(m!==this._time&&g&&(y+=this._time-m,e+=this._time-m),r=y,h=this._start,u=!(c=this._ts),b&&(g||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(d=this._yoyo,s=g+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(r=Z_(y%s),y===v?(a=this._repeat,r=g):((a=~~(y/s))&&a===y/s&&(r=g,a--),r>g&&(r=g)),f=gw(this._tTime,s),!m&&this._tTime&&f!==a&&(f=a),d&&1&a&&(r=g-r,p=1),a!==f&&!this._lock){var _=d&&1&f,w=_===(d&&1&a);if(a<f&&(_=!_),m=_?0:g,this._lock=1,this.render(m||(p?0:Z_(a*s)),t,!g)._lock=0,this._tTime=y,!t&&this.parent&&Kw(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,v=this._tDur,w&&(this._lock=2,m=_?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;hx(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Z_(m),Z_(r)))&&(y-=r-(r=l._start)),this._tTime=y,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&(Kw(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,o&&(y+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var x=e<0?e:r;i;){if(o=i._prev,(i._act||x<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(x-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(x-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,o&&(y+=this._zTime=x?-1e-8:1e-8);break}}i=o}}if(l&&!t&&(this.pause(),l.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=h,bw(this),this.render(e,t,n);this._onUpdate&&!t&&Kw(this,"onUpdate",!0),(y===v&&v>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!g)&&(y===v&&this._ts>0||!y&&this._ts<0)&&fw(this,1),t||e<0&&!m||!y&&!m&&v||(Kw(this,y===v&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(b_(t)||(t=kw(this,t,e)),!(e instanceof yx)){if(M_(e))return e.forEach((function(e){return n.add(e,t)})),this;if(g_(e))return this.addLabel(e,t);if(!y_(e))return this;e=Ix.delayedCall(0,e)}return this!==e?xw(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof Ix?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return g_(e)?this.removeLabel(e):y_(e)?this.killTweensOf(e):(hw(this,e),e===this._recent&&(this._recent=this._last),dw(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Z_(ix.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=kw(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=Ix.delayedCall(0,t||j_,n);return r.data="isPause",this._hasPause=1,xw(this,r,kw(this,e))},n.removePause=function(e){var t=this._first;for(e=kw(this,e);t;)t._start===e&&"isPause"===t.data&&fw(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)_x!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=Fw(e),o=this._first,a=b_(t);o;)o instanceof Ix?ew(o._targets,i)&&(a?(!_x||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=kw(r,e),o=t,a=o.startAt,s=o.onStart,u=o.onStartParams,l=o.immediateRender,c=Ix.to(r,ow({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==e&&Cw(c,e,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,u||[])}},t));return l?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,ow({startAt:{time:kw(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),qw(this,kw(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),qw(this,kw(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return dw(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),dw(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,a=o._last,s=1e8;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,xw(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-1/0),s=0),a._end>i&&a._ts&&(i=a._end),a=t;Cw(o,o===Db&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(Db._ts&&(nw(Db,yw(e,Db)),Bb=ix.frame),ix.frame>=q_){q_+=l_.autoSleep||120;var t=Db._first;if((!t||!t._ts)&&l_.autoSleep&&ix._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||ix.sleep()}}},t}(yx);ow(bx.prototype,{_lock:0,_hasPause:0,_forcing:0});var _x,wx=function(e,t,n,r,i,o,a){var s,u,l,c,h,f,d,p,m=new Vx(this._pt,e,t,0,1,Dx,null,i),v=0,g=0;for(m.b=n,m.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=Ww(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]),u=n.match(k_)||[];s=k_.exec(r);)c=s[0],h=r.substring(v,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[g++]&&(f=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:f,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-f,m:l&&l<4?Math.round:0},v=k_.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=a,(P_.test(r)||d)&&(m.e=0),this._pt=m,m},xx=function(e,t,n,r,i,o,a,s,u){y_(r)&&(r=r(i||0,e,o));var l,c=e[t],h="get"!==n?n:y_(c)?u?e[t.indexOf("set")||!y_(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():c,f=y_(c)?u?Px:kx:Ax;if(g_(r)&&(~r.indexOf("random(")&&(r=Ww(r)),"="===r.charAt(1)&&((l=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(Lw(h)||0))||0===l)&&(r=l)),h!==r)return isNaN(h*r)||""===r?(!c&&!(t in e)&&F_(t,r),wx.call(this,e,t,h,r,f,s||l_.stringFilter,u)):(l=new Vx(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof c?Nx:Lx,0,f),u&&(l.fp=u),a&&l.modifier(a,this,e),this._pt=l)},Sx=function(e,t,n,r,i,o){var a,s,u,l;if(W_[e]&&!1!==(a=new W_[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(y_(e)&&(e=Tx(e,i,t,n,r)),!w_(e)||e.style&&e.nodeType||M_(e)||T_(e))return g_(e)?Tx(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=Tx(e[o],i,t,n,r);return a}(t[e],r,i,o,n),n,r,o)&&(n._pt=s=new Vx(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==Vb))for(u=n._ptLookup[n._targets.indexOf(i)],l=a._props.length;l--;)u[a._props[l]]=s;return a},Ex=function e(t,n){var r,i,o,a,s,u,l,c,h,f,d,p,m,v=t.vars,g=v.ease,y=v.startAt,b=v.immediateRender,_=v.lazy,w=v.onUpdate,x=v.onUpdateParams,S=v.callbackScope,E=v.runBackwards,T=v.yoyoEase,M=v.keyframes,C=v.autoRevert,I=t._dur,A=t._startAt,k=t._targets,P=t.parent,R=P&&"nested"===P.data?P.parent._targets:k,O="auto"===t._overwrite&&!Nb,L=t.timeline;if(L&&(!M||!g)&&(g="none"),t._ease=fx(g,c_.ease),t._yEase=T?cx(fx(!0===T?g:T,c_.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!L&&!!v.runBackwards,!L){if(p=(c=k[0]?$_(k[0]).harness:0)&&v[c.prop],r=lw(v,B_),A&&A.render(-1,!0).kill(),y)if(fw(t._startAt=Ix.set(k,ow({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:x_(_),startAt:null,delay:0,onUpdate:w,onUpdateParams:x,callbackScope:S,stagger:0},y))),n<0&&!b&&!C&&t._startAt.render(-1,!0),b){if(n>0&&!C&&(t._startAt=0),I&&n<=0)return void(n&&(t._zTime=n))}else!1===C&&(t._startAt=0);else if(E&&I)if(A)!C&&(t._startAt=0);else if(n&&(b=!1),o=ow({overwrite:!1,data:"isFromStart",lazy:b&&x_(_),immediateRender:b,stagger:0,parent:P},r),p&&(o[c.prop]=p),fw(t._startAt=Ix.set(k,o)),n<0&&t._startAt.render(-1,!0),b){if(!n)return}else e(t._startAt,1e-8);for(t._pt=0,_=I&&x_(_)||_&&!I,i=0;i<k.length;i++){if(l=(s=k[i])._gsap||Y_(k)[i]._gsap,t._ptLookup[i]=f={},H_[l.id]&&V_.length&&tw(),d=R===k?i:R.indexOf(s),c&&!1!==(h=new c).init(s,p||r,t,d,R)&&(t._pt=a=new Vx(t._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){f[e]=a})),h.priority&&(u=1)),!c||p)for(o in r)W_[o]&&(h=Sx(o,r,t,d,s,R))?h.priority&&(u=1):f[o]=a=xx.call(t,s,o,"get",r[o],d,R,0,v.stringFilter);t._op&&t._op[i]&&t.kill(s,t._op[i]),O&&t._pt&&(_x=t,Db.killTweensOf(s,f,t.globalTime(0)),m=!t.parent,_x=0),t._pt&&_&&(H_[l.id]=1)}u&&Bx(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},Tx=function(e,t,n,r,i){return y_(e)?e.call(t,n,r,i):g_(e)&&~e.indexOf("random(")?Ww(e):e},Mx=X_+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Cx=(Mx+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Ix=function(e){function t(t,n,r,i){var o;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,s,u,l,c,h,f,d,p=(o=e.call(this,i?n:cw(n))||this).vars,m=p.duration,v=p.delay,g=p.immediateRender,y=p.stagger,b=p.overwrite,_=p.keyframes,w=p.defaults,x=p.scrollTrigger,S=p.yoyoEase,E=n.parent||Db,T=(M_(t)||T_(t)?b_(t[0]):"length"in n)?[t]:Fw(t);if(o._targets=T.length?Y_(T):U_("GSAP target "+t+" not found. https://greensock.com",!l_.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,_||y||E_(m)||E_(v)){if(n=o.vars,(a=o.timeline=new bx({data:"nested",defaults:w||{}})).kill(),a.parent=a._dp=Ob(o),a._start=0,_)ow(a.vars.defaults,{ease:"none"}),y?T.forEach((function(e,t){return _.forEach((function(n,r){return a.to(e,n,r?">":t*y)}))})):_.forEach((function(e){return a.to(T,e,">")}));else{if(l=T.length,f=y?zw(y):j_,w_(y))for(c in y)~Mx.indexOf(c)&&(d||(d={}),d[c]=y[c]);for(s=0;s<l;s++){for(c in u={},n)Cx.indexOf(c)<0&&(u[c]=n[c]);u.stagger=0,S&&(u.yoyoEase=S),d&&sw(u,d),h=T[s],u.duration=+Tx(m,Ob(o),s,h,T),u.delay=(+Tx(v,Ob(o),s,h,T)||0)-o._delay,!y&&1===l&&u.delay&&(o._delay=v=u.delay,o._start+=v,u.delay=0),a.to(h,u,f(s,h,T))}a.duration()?m=v=0:o.timeline=0}m||o.duration(m=a.duration())}else o.timeline=0;return!0!==b||Nb||(_x=Ob(o),Db.killTweensOf(T),_x=0),xw(E,Ob(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(g||!m&&!_&&o._start===Z_(E._time)&&x_(g)&&mw(Ob(o))&&"nested"!==E.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-v))),x&&Sw(Ob(o),x),o}Lb(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,a,s,u,l,c,h,f=this._time,d=this._tDur,p=this._dur,m=e>d-1e-8&&e>=0?d:e<1e-8?0:e;if(p){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(r=m,c=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=Z_(m%a),m===d?(o=this._repeat,r=p):((o=~~(m/a))&&o===m/a&&(r=p,o--),r>p&&(r=p)),(u=this._yoyo&&1&o)&&(h=this._yEase,r=p-r),s=gw(this._tTime,a),r===f&&!n&&this._initted)return this;o!==s&&(c&&this._yEase&&hx(c,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(Z_(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Ew(this,e<0?e:r,n,t))return this._tTime=0,this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(r/p),this._from&&(this.ratio=l=1-l),r&&!f&&!t&&(Kw(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(l,i.d),i=i._next;c&&c.render(e<0?e:!r&&u?-1e-8:c._dur*l,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),Kw(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!t&&this.parent&&Kw(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&fw(this,1),t||e<0&&!f||!m&&!f||(Kw(this,m===d?"onComplete":"onReverseComplete",!0),this._prom&&!(m<d&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,a,s=e.ratio,u=t<0||!t&&(!e._start&&Tw(e)&&(e._initted||!Mw(e))||(e._ts<0||e._dp._ts<0)&&!Mw(e))?0:1,l=e._rDelay,c=0;if(l&&e._repeat&&(c=Ow(0,e._tDur,t),o=gw(c,l),a=gw(e._tTime,l),e._yoyo&&1&o&&(u=1-u),o!==a&&(s=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==s||r||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&Ew(e,t,r,n))return;for(a=e._zTime,e._zTime=t||(n?1e-8:0),n||(n=t&&!a),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=c,i=e._pt;i;)i.r(u,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&Kw(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Kw(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&fw(e,1),n||(Kw(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?Xw(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,_x&&!0!==_x.vars.overwrite)._first||Xw(this),this.parent&&n!==this.timeline.totalDuration()&&Cw(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,l,c=this._targets,h=e?Fw(e):c,f=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,h))return"all"===t&&(this._pt=0),Xw(this);for(r=this._op=this._op||[],"all"!==t&&(g_(t)&&(s={},J_(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,o,a=e[0]?$_(e[0]).harness:0,s=a&&a.aliases;if(!s)return t;for(r in n=sw({},t),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,t)),l=c.length;l--;)if(~h.indexOf(c[l]))for(s in i=f[l],"all"===t?(r[l]=t,a=i,o={}):(o=r[l]=r[l]||{},a=t),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||hw(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&d&&Xw(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Pw(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return Pw(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Db.killTweensOf(e,t,n)},t}(yx);ow(Ix.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),J_("staggerTo,staggerFrom,staggerFromTo",(function(e){Ix[e]=function(){var t=new bx,n=Nw.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var Ax=function(e,t,n){return e[t]=n},kx=function(e,t,n){return e[t](n)},Px=function(e,t,n,r){return e[t](r.fp,n)},Rx=function(e,t,n){return e.setAttribute(t,n)},Ox=function(e,t){return y_(e[t])?kx:__(e[t])&&e.setAttribute?Rx:Ax},Lx=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Nx=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Dx=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Fx=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Ux=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},zx=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?hw(this,r,"_pt"):r.dep||(t=1),r=n;return!t},jx=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Bx=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},Vx=function(){function e(e,t,n,r,i,o,a,s,u){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||Lx,this.d=a||this,this.set=s||Ax,this.pr=u||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=jx,this.m=e,this.mt=n,this.tween=t},e}();J_(X_+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return B_[e]=1})),L_.TweenMax=L_.TweenLite=Ix,L_.TimelineLite=L_.TimelineMax=bx,Db=new bx({sortChildren:!1,defaults:c_,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),l_.stringFilter=rx;var Hx={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Yw(e)}))},timeline:function(e){return new bx(e)},getTweensOf:function(e,t){return Db.getTweensOf(e,t)},getProperty:function(e,t,n,r){g_(e)&&(e=Fw(e)[0]);var i=$_(e||{}).get,o=n?iw:rw;return"native"===n&&(n=""),e?t?o((W_[t]&&W_[t].get||i)(e,t,n,r)):function(t,n,r){return o((W_[t]&&W_[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=Fw(e)).length>1){var r=e.map((function(e){return qx.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=W_[t],a=$_(e),s=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(t){var r=new o;Vb._pt=0,r.init(e,n?t+n:t,Vb,0,[e]),r.render(1,r),Vb._pt&&Fx(1,Vb)}:a.set(e,s);return o?u:function(t){return u(e,s,n?t+n:t,a,1)}},isTweening:function(e){return Db.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=fx(e.ease,c_.ease)),uw(c_,e||{})},config:function(e){return uw(l_,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!W_[e]&&!L_[e]&&U_(t+" effect requires "+e+" plugin.")})),G_[t]=function(e,t,r){return n(Fw(e),ow(t||{},i),r)},o&&(bx.prototype[t]=function(e,n,r){return this.add(G_[t](e,w_(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){ax[e]=fx(t)},parseEase:function(e,t){return arguments.length?fx(e,t):ax},getById:function(e){return Db.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new bx(e);for(i.smoothChildTiming=x_(e.smoothChildTiming),Db.remove(i),i._dp=0,i._time=i._tTime=Db._time,n=Db._first;n;)r=n._next,!t&&!n._dur&&n instanceof Ix&&n.vars.onComplete===n._targets[0]||xw(i,n,n._start-n._delay),n=r;return xw(Db,i,0),i},utils:{wrap:function e(t,n,r){var i=n-t;return M_(t)?Hw(t,e(0,t.length),n):Rw(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return M_(t)?Hw(t,e(0,t.length-1),n):Rw(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)}))},distribute:zw,random:Vw,snap:Bw,normalize:function(e,t,n){return Gw(e,t,0,1,n)},getUnit:Lw,clamp:function(e,t,n){return Rw(n,(function(n){return Ow(e,t,n)}))},splitColor:Jw,toArray:Fw,selector:function(e){return e=Fw(e)[0]||U_("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Fw(t,n.querySelectorAll?n:n===e?U_("Invalid scope")||zb.createElement("div"):e)}},mapRange:Gw,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Lw(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var a,s,u,l,c,h=g_(t),f={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(M_(t)&&!M_(n)){for(u=[],l=t.length,c=l-2,s=1;s<l;s++)u.push(e(t[s-1],t[s]));l--,o=function(e){e*=l;var t=Math.min(c,~~e);return u[t](e-t)},r=n}else i||(t=sw(M_(t)?[]:{},t));if(!u){for(a in n)xx.call(f,t,a,"get",n[a]);o=function(e){return Fx(e,f)||(h?t.p:t)}}}return Rw(r,o)},shuffle:Uw},install:D_,effects:G_,ticker:ix,updateRoot:bx.updateRoot,plugins:W_,globalTimeline:Db,core:{PropTween:Vx,globals:z_,Tween:Ix,Timeline:bx,Animation:yx,getCache:$_,_removeLinkedListItem:hw,suppressOverwrites:function(e){return Nb=e}}};J_("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Hx[e]=Ix[e]})),ix.add(bx.updateRoot),Vb=Hx.to({},{duration:0});var Wx=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Gx=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(g_(n)&&(r={},J_(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Wx(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},qx=Hx.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a;for(o in t)(a=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},Gx("roundProps",jw),Gx("modifiers"),Gx("snap",Bw))||Hx;Ix.version=bx.version=qx.version="3.7.1",jb=1,S_()&&ox(),ax.Power0,ax.Power1,ax.Power2,ax.Power3,ax.Power4,ax.Linear,ax.Quad,ax.Cubic,ax.Quart,ax.Quint,ax.Strong,ax.Elastic,ax.Back,ax.SteppedEase,ax.Bounce,ax.Sine,ax.Expo,ax.Circ;
/*!
 * CSSPlugin 3.7.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Kx,Xx,Yx,$x,Qx,Jx,Zx,eS={},tS=180/Math.PI,nS=Math.PI/180,rS=Math.atan2,iS=/([A-Z])/g,oS=/(?:left|right|width|margin|padding|x)/i,aS=/[\s,\(]\S/,sS={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},uS=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},lS=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},cS=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},hS=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},fS=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},dS=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},pS=function(e,t,n){return e.style[t]=n},mS=function(e,t,n){return e.style.setProperty(t,n)},vS=function(e,t,n){return e._gsap[t]=n},gS=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},yS=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},bS=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},_S="transform",wS=_S+"Origin",xS=function(e,t){var n=Xx.createElementNS?Xx.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Xx.createElement(e);return n.style?n:Xx.createElement(e)},SS=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(iS,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,TS(n)||n,1)||""},ES="O,Moz,ms,Ms,Webkit".split(","),TS=function(e,t,n){var r=(t||Qx).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(ES[i]+e in r););return i<0?null:(3===i?"ms":i>=0?ES[i]:"")+e},MS=function(){"undefined"!=typeof window&&window.document&&(Kx=window,Xx=Kx.document,Yx=Xx.documentElement,Qx=xS("div")||{style:{}},xS("div"),_S=TS(_S),wS=_S+"Origin",Qx.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Zx=!!TS("perspective"),$x=1)},CS=function e(t){var n,r=xS("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Yx.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(XY){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),Yx.removeChild(r),this.style.cssText=a,n},IS=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},AS=function(e){var t;try{t=e.getBBox()}catch(n){t=CS.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===CS||(t=CS.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+IS(e,["x","cx","x1"])||0,y:+IS(e,["y","cy","y1"])||0,width:0,height:0}},kS=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!AS(e))},PS=function(e,t){if(t){var n=e.style;t in eS&&t!==wS&&(t=_S),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(iS,"-$1").toLowerCase())):n.removeAttribute(t)}},RS=function(e,t,n,r,i,o){var a=new Vx(e._pt,t,n,0,1,o?dS:fS);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},OS={deg:1,rad:1,turn:1},LS=function e(t,n,r,i){var o,a,s,u,l=parseFloat(r)||0,c=(r+"").trim().substr((l+"").length)||"px",h=Qx.style,f=oS.test(n),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(f?"Width":"Height"),m=100,v="px"===i,g="%"===i;return i===c||!l||OS[i]||OS[c]?l:("px"!==c&&!v&&(l=e(t,n,r,"px")),u=t.getCTM&&kS(t),!g&&"%"!==c||!eS[n]&&!~n.indexOf("adius")?(h[f?"width":"height"]=m+(v?c:i),a=~n.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,u&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==Xx&&a.appendChild||(a=Xx.body),(s=a._gsap)&&g&&s.width&&f&&s.time===ix.time?Z_(l/s.width*m):((g||"%"===c)&&(h.position=SS(t,"position")),a===t&&(h.position="static"),a.appendChild(Qx),o=Qx[p],a.removeChild(Qx),h.position="absolute",f&&g&&((s=$_(a)).time=ix.time,s.width=a[p]),Z_(v?o*l/m:o&&l?m/o*l:0))):(o=u?t.getBBox()[f?"width":"height"]:t[p],Z_(g?l/o*m:l/100*o)))},NS=function(e,t,n,r){var i;return $x||MS(),t in sS&&"transform"!==t&&~(t=sS[t]).indexOf(",")&&(t=t.split(",")[0]),eS[t]&&"transform"!==t?(i=qS(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:KS(SS(e,wS))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=zS[t]&&zS[t](e,t,n)||SS(e,t)||Q_(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?LS(e,t,i,n)+n:i},DS=function(e,t,n,r){if(!n||"none"===n){var i=TS(t,e,1),o=i&&SS(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=SS(e,"borderTopColor"))}var a,s,u,l,c,h,f,d,p,m,v,g,y=new Vx(this._pt,e.style,t,0,1,Dx),b=0,_=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=SS(e,t)||r,e.style[t]=n),rx(a=[n,r]),r=a[1],u=(n=a[0]).match(A_)||[],(r.match(A_)||[]).length){for(;s=A_.exec(r);)f=s[0],p=r.substring(b,s.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),f!==(h=u[_++]||"")&&(l=parseFloat(h)||0,v=h.substr((l+"").length),(g="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),d=parseFloat(f),m=f.substr((d+"").length),b=A_.lastIndex-m.length,m||(m=m||l_.units[t]||v,b===r.length&&(r+=m,y.e+=m)),v!==m&&(l=LS(e,t,h,m)||0),y._pt={_next:y._pt,p:p||1===_?p:",",s:l,c:g?g*d:d-l,m:c&&c<4||"zIndex"===t?Math.round:0});y.c=b<r.length?r.substring(b,r.length):""}else y.r="display"===t&&"none"===r?dS:fS;return P_.test(r)&&(y.e=0),this._pt=y,y},FS={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},US=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,a=o.style,s=t.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],eS[n]&&(r=1,n="transformOrigin"===n?wS:_S),PS(o,n);r&&(PS(o,_S),u&&(u.svg&&o.removeAttribute("transform"),qS(o,1),u.uncache=1))}},zS={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new Vx(e._pt,t,n,0,0,US);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},jS=[1,0,0,1,0,0],BS={},VS=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},HS=function(e){var t=SS(e,_S);return VS(t)?jS:t.substr(7).match(I_).map(Z_)},WS=function(e,t){var n,r,i,o,a=e._gsap||$_(e),s=e.style,u=HS(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?jS:u:(u!==jS||e.offsetParent||e===Yx||a.svg||(i=s.display,s.display="block",(n=e.parentNode)&&e.offsetParent||(o=1,r=e.nextSibling,Yx.appendChild(e)),u=HS(e),i?s.display=i:PS(e,"display"),o&&(r?n.insertBefore(e,r):n?n.appendChild(e):Yx.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},GS=function(e,t,n,r,i,o){var a,s,u,l=e._gsap,c=i||WS(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,d=l.xOffset||0,p=l.yOffset||0,m=c[0],v=c[1],g=c[2],y=c[3],b=c[4],_=c[5],w=t.split(" "),x=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?c!==jS&&(s=m*y-v*g)&&(u=x*(-v/s)+S*(m/s)-(m*_-v*b)/s,x=x*(y/s)+S*(-g/s)+(g*_-y*b)/s,S=u):(x=(a=AS(e)).x+(~w[0].indexOf("%")?x/100*a.width:x),S=a.y+(~(w[1]||w[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&l.smooth?(b=x-h,_=S-f,l.xOffset=d+(b*m+_*g)-b,l.yOffset=p+(b*v+_*y)-_):l.xOffset=l.yOffset=0,l.xOrigin=x,l.yOrigin=S,l.smooth=!!r,l.origin=t,l.originIsAbsolute=!!n,e.style[wS]="0px 0px",o&&(RS(o,l,"xOrigin",h,x),RS(o,l,"yOrigin",f,S),RS(o,l,"xOffset",d,l.xOffset),RS(o,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},qS=function(e,t){var n=e._gsap||new gx(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,w,x,S,E,T,M,C,I,A,k,P,R,O,L,N=e.style,D=n.scaleX<0,F="px",U="deg",z=SS(e,wS)||"0";return r=i=o=u=l=c=h=f=d=0,a=s=1,n.svg=!(!e.getCTM||!kS(e)),v=WS(e,n.svg),n.svg&&(M=(!n.uncache||"0px 0px"===z)&&!t&&e.getAttribute("data-svg-origin"),GS(e,M||z,!!M||n.originIsAbsolute,!1!==n.smooth,v)),p=n.xOrigin||0,m=n.yOrigin||0,v!==jS&&(_=v[0],w=v[1],x=v[2],S=v[3],r=E=v[4],i=T=v[5],6===v.length?(a=Math.sqrt(_*_+w*w),s=Math.sqrt(S*S+x*x),u=_||w?rS(w,_)*tS:0,(h=x||S?rS(x,S)*tS+u:0)&&(s*=Math.abs(Math.cos(h*nS))),n.svg&&(r-=p-(p*_+m*x),i-=m-(p*w+m*S))):(L=v[6],R=v[7],A=v[8],k=v[9],P=v[10],O=v[11],r=v[12],i=v[13],o=v[14],l=(g=rS(L,P))*tS,g&&(M=E*(y=Math.cos(-g))+A*(b=Math.sin(-g)),C=T*y+k*b,I=L*y+P*b,A=E*-b+A*y,k=T*-b+k*y,P=L*-b+P*y,O=R*-b+O*y,E=M,T=C,L=I),c=(g=rS(-x,P))*tS,g&&(y=Math.cos(-g),O=S*(b=Math.sin(-g))+O*y,_=M=_*y-A*b,w=C=w*y-k*b,x=I=x*y-P*b),u=(g=rS(w,_))*tS,g&&(M=_*(y=Math.cos(g))+w*(b=Math.sin(g)),C=E*y+T*b,w=w*y-_*b,T=T*y-E*b,_=M,E=C),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),a=Z_(Math.sqrt(_*_+w*w+x*x)),s=Z_(Math.sqrt(T*T+L*L)),g=rS(E,T),h=Math.abs(g)>2e-4?g*tS:0,d=O?1/(O<0?-O:O):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!VS(SS(e,_S)),M&&e.setAttribute("transform",M))),Math.abs(h)>90&&Math.abs(h)<270&&(D?(a*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+F,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+F,n.z=o+F,n.scaleX=Z_(a),n.scaleY=Z_(s),n.rotation=Z_(u)+U,n.rotationX=Z_(l)+U,n.rotationY=Z_(c)+U,n.skewX=h+U,n.skewY=f+U,n.transformPerspective=d+F,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(N[wS]=KS(z)),n.xOffset=n.yOffset=0,n.force3D=l_.force3D,n.renderTransform=n.svg?QS:Zx?$S:YS,n.uncache=0,n},KS=function(e){return(e=e.split(" "))[0]+" "+e[1]},XS=function(e,t,n){var r=Lw(t);return Z_(parseFloat(t)+parseFloat(LS(e,"x",n+"px",r)))+r},YS=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$S(e,t)},$S=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,b="",_="auto"===v&&e&&1!==e||!0===v;if(y&&("0deg"!==c||"0deg"!==l)){var w,x=parseFloat(l)*nS,S=Math.sin(x),E=Math.cos(x);x=parseFloat(c)*nS,w=Math.cos(x),o=XS(g,o,S*w*-y),a=XS(g,a,-Math.sin(x)*-y),s=XS(g,s,E*w*-y+y)}"0px"!==m&&(b+="perspective("+m+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(_||"0px"!==o||"0px"!==a||"0px"!==s)&&(b+="0px"!==s||_?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+") "),"0deg"!==u&&(b+="rotate("+u+") "),"0deg"!==l&&(b+="rotateY("+l+") "),"0deg"!==c&&(b+="rotateX("+c+") "),"0deg"===h&&"0deg"===f||(b+="skew("+h+", "+f+") "),1===d&&1===p||(b+="scale("+d+", "+p+") "),g.style[_S]=b||"translate(0, 0)"},QS=function(e,t){var n,r,i,o,a,s=t||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,f=s.rotation,d=s.skewX,p=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,w=s.yOffset,x=s.forceCSS,S=parseFloat(c),E=parseFloat(h);f=parseFloat(f),d=parseFloat(d),(p=parseFloat(p))&&(d+=p=parseFloat(p),f+=p),f||d?(f*=nS,d*=nS,n=Math.cos(f)*m,r=Math.sin(f)*m,i=Math.sin(f-d)*-v,o=Math.cos(f-d)*v,d&&(p*=nS,a=Math.tan(d-p),i*=a=Math.sqrt(1+a*a),o*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),r*=a)),n=Z_(n),r=Z_(r),i=Z_(i),o=Z_(o)):(n=m,o=v,r=i=0),(S&&!~(c+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(S=LS(g,"x",c,"px"),E=LS(g,"y",h,"px")),(y||b||_||w)&&(S=Z_(S+y-(y*n+b*i)+_),E=Z_(E+b-(y*r+b*o)+w)),(u||l)&&(a=g.getBBox(),S=Z_(S+u/100*a.width),E=Z_(E+l/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+S+","+E+")",g.setAttribute("transform",a),x&&(g.style[_S]=a)},JS=function(e,t,n,r,i,o){var a,s,u=360,l=g_(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?tS:1),h=o?c*o:c-r,f=r+h+"deg";return l&&("short"===(a=i.split("_")[1])&&(h%=u)!==h%180&&(h+=h<0?u:-360),"cw"===a&&h<0?h=(h+36e9)%u-~~(h/u)*u:"ccw"===a&&h>0&&(h=(h-36e9)%u-~~(h/u)*u)),e._pt=s=new Vx(e._pt,t,n,r,h,lS),s.e=f,s.u="deg",e._props.push(n),s},ZS=function(e,t){for(var n in t)e[n]=t[n];return e},eE=function(e,t,n){var r,i,o,a,s,u,l,c=ZS({},n._gsap),h=n.style;for(i in c.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),h[_S]=t,r=qS(n,1),PS(n,_S),n.setAttribute("transform",o)):(o=getComputedStyle(n)[_S],h[_S]=t,r=qS(n,1),h[_S]=o),eS)(o=c[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Lw(o)!==(l=Lw(a))?LS(n,i,o,l):parseFloat(o),u=parseFloat(a),e._pt=new Vx(e._pt,r,i,s,u-s,uS),e._pt.u=l||0,e._props.push(i));ZS(r,c)};J_("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",o="Left",a=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return t<2?e+n:"border"+n+e}));zS[t>1?"border"+e:e]=function(e,t,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(t){return NS(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,i)}}));var tE,nE,rE,iE={name:"css",register:MS,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,w,x,S,E=this._props,T=e.style,M=n.vars.startAt;for(h in $x||MS(),t)if("autoRound"!==h&&(a=t[h],!W_[h]||!Sx(h,t,n,r,e,i)))if(l=typeof a,c=zS[h],"function"===l&&(l=typeof(a=a.call(n,r,e,i))),"string"===l&&~a.indexOf("random(")&&(a=Ww(a)),c)c(this,e,h,a,n)&&(b=1);else if("--"===h.substr(0,2))o=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",tx.lastIndex=0,tx.test(o)||(f=Lw(o),d=Lw(a)),d?f!==d&&(o=LS(e,h,o,d)+d):f&&(a+=f),this.add(T,"setProperty",o,a,r,i,0,0,h),E.push(h);else if("undefined"!==l){if(M&&h in M?(o="function"==typeof M[h]?M[h].call(n,r,e,i):M[h],h in l_.units&&!Lw(o)&&(o+=l_.units[h]),"="===(o+"").charAt(1)&&(o=NS(e,h))):o=NS(e,h),u=parseFloat(o),(p="string"===l&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),s=parseFloat(a),h in sS&&("autoAlpha"===h&&(1===u&&"hidden"===NS(e,"visibility")&&s&&(u=0),RS(this,T,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=sS[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in eS)if(v||((g=e._gsap).renderTransform&&!t.parseTransform||qS(e,t.parseTransform),y=!1!==t.smoothOrigin&&g.smooth,(v=this._pt=new Vx(this._pt,T,_S,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===h)this._pt=new Vx(this._pt,g,"scaleY",g.scaleY,(p?p*s:s-g.scaleY)||0),E.push("scaleY",h),h+="X";else{if("transformOrigin"===h){w=void 0,x=void 0,S=void 0,w=(_=a).split(" "),x=w[0],S=w[1]||"50%","top"!==x&&"bottom"!==x&&"left"!==S&&"right"!==S||(_=x,x=S,S=_),w[0]=FS[x]||x,w[1]=FS[S]||S,a=w.join(" "),g.svg?GS(e,a,0,y,0,this):((d=parseFloat(a.split(" ")[2])||0)!==g.zOrigin&&RS(this,g,"zOrigin",g.zOrigin,d),RS(this,T,h,KS(o),KS(a)));continue}if("svgOrigin"===h){GS(e,a,1,y,0,this);continue}if(h in BS){JS(this,g,h,u,a,p);continue}if("smoothOrigin"===h){RS(this,g,"smooth",g.smooth,a);continue}if("force3D"===h){g[h]=a;continue}if("transform"===h){eE(this,a,e);continue}}else h in T||(h=TS(h)||h);if(m||(s||0===s)&&(u||0===u)&&!aS.test(a)&&h in T)s||(s=0),(f=(o+"").substr((u+"").length))!==(d=Lw(a)||(h in l_.units?l_.units[h]:f))&&(u=LS(e,h,o,d)),this._pt=new Vx(this._pt,m?g:T,h,u,p?p*s:s-u,m||"px"!==d&&"zIndex"!==h||!1===t.autoRound?uS:hS),this._pt.u=d||0,f!==d&&(this._pt.b=o,this._pt.r=cS);else if(h in T)DS.call(this,e,h,o,a);else{if(!(h in e)){F_(h,a);continue}this.add(e,h,o||e[h],a,r,i)}E.push(h)}b&&Bx(this)},get:NS,aliases:sS,getSetter:function(e,t,n){var r=sS[t];return r&&r.indexOf(",")<0&&(t=r),t in eS&&t!==wS&&(e._gsap.x||NS(e,"x"))?n&&Jx===n?"scale"===t?gS:vS:(Jx=n||{})&&("scale"===t?yS:bS):e.style&&!__(e.style[t])?pS:~t.indexOf("-")?mS:Ox(e,t)},core:{_removeProperty:PS,_getMatrix:WS}};qx.utils.checkPrefix=TS,rE=J_((tE="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(nE="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){eS[e]=1})),J_(nE,(function(e){l_.units[e]="deg",BS[e]=1})),sS[rE[13]]=tE+","+nE,J_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");sS[t[1]]=rE[t[0]]})),J_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){l_.units[e]="px"})),qx.registerPlugin(iE);var oE=qx.registerPlugin(iE)||qx;oE.core.Tween;var aE={},sE={},uE={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};e.default=t}(uE);var lE=/^\s+|\s+$/g,cE=/^[-+]0x[0-9a-f]+$/i,hE=/^0b[01]+$/i,fE=/^0o[0-7]+$/i,dE=parseInt,pE="object"==typeof o&&o&&o.Object===Object&&o,mE="object"==typeof self&&self&&self.Object===Object&&self,vE=pE||mE||Function("return this")(),gE=Object.prototype.toString,yE=Math.max,bE=Math.min,_E=function(){return vE.Date.now()};function wE(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function xE(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==gE.call(e)}(e))return NaN;if(wE(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=wE(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(lE,"");var n=hE.test(e);return n||fE.test(e)?dE(e.slice(2),n?2:8):cE.test(e)?NaN:+e}var SE,EE=function(e,t,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(v,t),c?d(e):a}function m(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-l>=o}function v(){var e=_E();if(m(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-u);return h?bE(n,o-(e-l)):n}(e))}function g(e){return s=void 0,f&&r?d(e):(r=i=void 0,a)}function y(){var e=_E(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return p(u);if(h)return s=setTimeout(v,t),d(u)}return void 0===s&&(s=setTimeout(v,t)),a}return t=xE(t)||0,wE(n)&&(c=!!n.leading,o=(h="maxWait"in n)?yE(xE(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?a:g(_E())},y},TE={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
SE=TE,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var a=t.apply(null,i);a&&n.push(a)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var s in i)e.call(i,s)&&i[s]&&n.push(s);else n.push(i.toString())}}return n.join(" ")}SE.exports?(t.default=t,SE.exports=t):window.classNames=t}();var ME={};Object.defineProperty(ME,"__esModule",{value:!0}),ME.clamp=RE,ME.canUseDOM=ME.slidesOnLeft=ME.slidesOnRight=ME.siblingDirection=ME.getTotalSlides=ME.getPostClones=ME.getPreClones=ME.getTrackLeft=ME.getTrackAnimateCSS=ME.getTrackCSS=ME.checkSpecKeys=ME.getSlideCount=ME.checkNavigable=ME.getNavigableIndexes=ME.swipeEnd=ME.swipeMove=ME.swipeStart=ME.keyHandler=ME.changeSlide=ME.slideHandler=ME.initializedState=ME.extractObject=ME.canGoNext=ME.getSwipeDirection=ME.getHeight=ME.getWidth=ME.lazySlidesOnRight=ME.lazySlidesOnLeft=ME.lazyEndIndex=ME.lazyStartIndex=ME.getRequiredLazySlides=ME.getOnDemandLazySlides=ME.safePreventDefault=void 0;var CE,IE=(CE=s.exports)&&CE.__esModule?CE:{default:CE};function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AE(Object(n),!0).forEach((function(t){PE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RE(e,t,n){return Math.max(t,Math.min(e,n))}var OE=function(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()};ME.safePreventDefault=OE;var LE=function(e){for(var t=[],n=NE(e),r=DE(e),i=n;i<r;i++)e.lazyLoadedList.indexOf(i)<0&&t.push(i);return t};ME.getOnDemandLazySlides=LE;ME.getRequiredLazySlides=function(e){for(var t=[],n=NE(e),r=DE(e),i=n;i<r;i++)t.push(i);return t};var NE=function(e){return e.currentSlide-FE(e)};ME.lazyStartIndex=NE;var DE=function(e){return e.currentSlide+UE(e)};ME.lazyEndIndex=DE;var FE=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};ME.lazySlidesOnLeft=FE;var UE=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};ME.lazySlidesOnRight=UE;var zE=function(e){return e&&e.offsetWidth||0};ME.getWidth=zE;var jE=function(e){return e&&e.offsetHeight||0};ME.getHeight=jE;var BE=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),(i=Math.round(180*r/Math.PI))<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?"left":i>=135&&i<=225?"right":!0===o?i>=35&&i<=135?"up":"down":"vertical"};ME.getSwipeDirection=BE;var VE=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};ME.canGoNext=VE;ME.extractObject=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n};ME.initializedState=function(e){var t,n=IE.default.Children.count(e.children),r=e.listRef,i=Math.ceil(zE(r)),o=e.trackRef&&e.trackRef.node,a=Math.ceil(zE(o));if(e.vertical)t=i;else{var s=e.centerMode&&2*parseInt(e.centerPadding);"string"==typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(s*=i/100),t=Math.ceil((i-s)/e.slidesToShow)}var u=r&&jE(r.querySelector('[data-index="0"]')),l=u*e.slidesToShow,c=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(c=n-1-e.initialSlide);var h=e.lazyLoadedList||[],f=LE(kE(kE({},e),{},{currentSlide:c,lazyLoadedList:h})),d={slideCount:n,slideWidth:t,listWidth:i,trackWidth:a,currentSlide:c,slideHeight:u,listHeight:l,lazyLoadedList:h=h.concat(f)};return null===e.autoplaying&&e.autoplay&&(d.autoplaying="playing"),d};ME.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,i=e.infinite,o=e.index,a=e.slideCount,s=e.lazyLoad,u=e.currentSlide,l=e.centerMode,c=e.slidesToScroll,h=e.slidesToShow,f=e.useCSS,d=e.lazyLoadedList;if(t&&n)return{};var p,m,v,g=o,y={},b={},_=i?o:RE(o,0,a-1);if(r){if(!i&&(o<0||o>=a))return{};o<0?g=o+a:o>=a&&(g=o-a),s&&d.indexOf(g)<0&&(d=d.concat(g)),y={animating:!0,currentSlide:g,lazyLoadedList:d,targetSlide:g},b={animating:!1,targetSlide:g}}else p=g,g<0?(p=g+a,i?a%c!=0&&(p=a-a%c):p=0):!VE(e)&&g>u?g=p=u:l&&g>=a?(g=i?a:a-1,p=i?0:a-1):g>=a&&(p=g-a,i?a%c!=0&&(p=0):p=a-h),!i&&g+h>=a&&(p=a-h),m=YE(kE(kE({},e),{},{slideIndex:g})),v=YE(kE(kE({},e),{},{slideIndex:p})),i||(m===v&&(g=p),m=v),s&&(d=d.concat(LE(kE(kE({},e),{},{currentSlide:g})))),f?(y={animating:!0,currentSlide:p,trackStyle:XE(kE(kE({},e),{},{left:m})),lazyLoadedList:d,targetSlide:_},b={animating:!1,currentSlide:p,trackStyle:KE(kE(kE({},e),{},{left:v})),swipeLeft:null,targetSlide:_}):y={currentSlide:p,trackStyle:KE(kE(kE({},e),{},{left:v})),lazyLoadedList:d,targetSlide:_};return{state:y,nextState:b}};ME.changeSlide=function(e,t){var n,r,i,o,a=e.slidesToScroll,s=e.slidesToShow,u=e.slideCount,l=e.currentSlide,c=e.targetSlide,h=e.lazyLoad,f=e.infinite;if(n=u%a!=0?0:(u-l)%a,"previous"===t.message)o=l-(i=0===n?a:s-n),h&&!f&&(o=-1===(r=l-i)?u-1:r),f||(o=c-a);else if("next"===t.message)o=l+(i=0===n?a:n),h&&!f&&(o=(l+a)%u+n),f||(o=c+a);else if("dots"===t.message)o=t.index*t.slidesToScroll;else if("children"===t.message){if(o=t.index,f){var d=ZE(kE(kE({},e),{},{targetSlide:o}));o>t.currentSlide&&"left"===d?o-=u:o<t.currentSlide&&"right"===d&&(o+=u)}}else"index"===t.message&&(o=Number(t.index));return o};ME.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""};ME.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&OE(e),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};ME.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,i=t.vertical,o=t.swipeToSlide,a=t.verticalSwiping,s=t.rtl,u=t.currentSlide,l=t.edgeFriction,c=t.edgeDragged,h=t.onEdge,f=t.swiped,d=t.swiping,p=t.slideCount,m=t.slidesToScroll,v=t.infinite,g=t.touchObject,y=t.swipeEvent,b=t.listHeight,_=t.listWidth;if(!n){if(r)return OE(e);i&&o&&a&&OE(e);var w,x={},S=YE(t);g.curX=e.touches?e.touches[0].pageX:e.clientX,g.curY=e.touches?e.touches[0].pageY:e.clientY,g.swipeLength=Math.round(Math.sqrt(Math.pow(g.curX-g.startX,2)));var E=Math.round(Math.sqrt(Math.pow(g.curY-g.startY,2)));if(!a&&!d&&E>10)return{scrolling:!0};a&&(g.swipeLength=E);var T=(s?-1:1)*(g.curX>g.startX?1:-1);a&&(T=g.curY>g.startY?1:-1);var M=Math.ceil(p/m),C=BE(t.touchObject,a),I=g.swipeLength;return v||(0===u&&("right"===C||"down"===C)||u+1>=M&&("left"===C||"up"===C)||!VE(t)&&("left"===C||"up"===C))&&(I=g.swipeLength*l,!1===c&&h&&(h(C),x.edgeDragged=!0)),!f&&y&&(y(C),x.swiped=!0),w=i?S+I*(b/_)*T:s?S-I*T:S+I*T,a&&(w=S+I*T),x=kE(kE({},x),{},{touchObject:g,swipeLeft:w,trackStyle:KE(kE(kE({},t),{},{left:w}))}),Math.abs(g.curX-g.startX)<.8*Math.abs(g.curY-g.startY)?x:(g.swipeLength>10&&(x.swiping=!0,OE(e)),x)}};ME.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,i=t.touchObject,o=t.listWidth,a=t.touchThreshold,s=t.verticalSwiping,u=t.listHeight,l=t.swipeToSlide,c=t.scrolling,h=t.onSwipe,f=t.targetSlide,d=t.currentSlide,p=t.infinite;if(!n)return r&&OE(e),{};var m=s?u/a:o/a,v=BE(i,s),g={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(c)return g;if(!i.swipeLength)return g;if(i.swipeLength>m){var y,b;OE(e),h&&h(v);var _=p?d:f;switch(v){case"left":case"up":b=_+GE(t),y=l?WE(t,b):b,g.currentDirection=0;break;case"right":case"down":b=_-GE(t),y=l?WE(t,b):b,g.currentDirection=1;break;default:y=_}g.triggerSlideHandler=y}else{var w=YE(t);g.trackStyle=XE(kE(kE({},t),{},{left:w}))}return g};var HE=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,r=e.infinite?-1*e.slidesToShow:0,i=[];n<t;)i.push(n),n=r+e.slidesToScroll,r+=Math.min(e.slidesToScroll,e.slidesToShow);return i};ME.getNavigableIndexes=HE;var WE=function(e,t){var n=HE(e),r=0;if(t>n[n.length-1])t=n[n.length-1];else for(var i in n){if(t<n[i]){t=r;break}r=n[i]}return t};ME.checkNavigable=WE;var GE=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,r=e.listRef,i=r.querySelectorAll&&r.querySelectorAll(".slick-slide")||[];if(Array.from(i).every((function(r){if(e.vertical){if(r.offsetTop+jE(r)/2>-1*e.swipeLeft)return n=r,!1}else if(r.offsetLeft-t+zE(r)/2>-1*e.swipeLeft)return n=r,!1;return!0})),!n)return 0;var o=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-o)||1}return e.slidesToScroll};ME.getSlideCount=GE;var qE=function(e,t){return t.reduce((function(t,n){return t&&e.hasOwnProperty(n)}),!0)?null:console.error("Keys Missing:",e)};ME.checkSpecKeys=qE;var KE=function(e){var t,n;qE(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=JE(e)*e.slideWidth;var i={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";i=kE(kE({},i),{},{WebkitTransform:o,transform:a,msTransform:s})}else e.vertical?i.top=e.left:i.left=e.left;return e.fade&&(i={opacity:1}),t&&(i.width=t),n&&(i.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i};ME.getTrackCSS=KE;var XE=function(e){qE(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=KE(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};ME.getTrackAnimateCSS=XE;var YE=function(e){if(e.unslick)return 0;qE(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=e.slideIndex,i=e.trackRef,o=e.infinite,a=e.centerMode,s=e.slideCount,u=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,h=e.listWidth,f=e.variableWidth,d=e.slideHeight,p=e.fade,m=e.vertical;if(p||1===e.slideCount)return 0;var v=0;if(o?(v=-$E(e),s%l!=0&&r+l>s&&(v=-(r>s?u-(r-s):s%l)),a&&(v+=parseInt(u/2))):(s%l!=0&&r+l>s&&(v=u-s%l),a&&(v=parseInt(u/2))),t=m?r*d*-1+v*d:r*c*-1+v*c,!0===f){var g,y=i&&i.node;if(g=r+$E(e),t=(n=y&&y.childNodes[g])?-1*n.offsetLeft:0,!0===a){g=o?r+$E(e):r,n=y&&y.children[g],t=0;for(var b=0;b<g;b++)t-=y&&y.children[b]&&y.children[b].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(h-n.offsetWidth)/2}}return t};ME.getTrackLeft=YE;var $E=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};ME.getPreClones=$E;var QE=function(e){return e.unslick||!e.infinite?0:e.slideCount};ME.getPostClones=QE;var JE=function(e){return 1===e.slideCount?1:$E(e)+e.slideCount+QE(e)};ME.getTotalSlides=JE;var ZE=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+eT(e)?"left":"right":e.targetSlide<e.currentSlide-tT(e)?"right":"left"};ME.siblingDirection=ZE;var eT=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r&&t%2==0&&(o+=1),o}return r?0:t-1};ME.slidesOnRight=eT;var tT=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r||t%2!=0||(o+=1),o}return r?t-1:0};ME.slidesOnLeft=tT;ME.canUseDOM=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)};var nT={};Object.defineProperty(nT,"__esModule",{value:!0}),nT.Track=void 0;var rT=aT(s.exports),iT=aT(TE.exports),oT=ME;function aT(e){return e&&e.__esModule?e:{default:e}}function sT(e){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uT(){return(uT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hT(e,t){return(hT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}();return function(){var n,r=mT(e);if(t){var i=mT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dT(this,n)}}function dT(e,t){return!t||"object"!==sT(t)&&"function"!=typeof t?pT(e):t}function pT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mT(e){return(mT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vT(Object(n),!0).forEach((function(t){yT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bT=function(e){var t,n,r,i,o;return r=(o=e.rtl?e.slideCount-1-e.index:e.index)<0||o>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount==0,o>e.currentSlide-i-1&&o<=e.currentSlide+i&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r,"slick-current":o===(e.targetSlide<0?e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?e.targetSlide-e.slideCount:e.targetSlide)}},_T=function(e,t){return e.key||t},wT=function(e){var t,n=[],r=[],i=[],o=rT.default.Children.count(e.children),a=(0,oT.lazyStartIndex)(e),s=(0,oT.lazyEndIndex)(e);return rT.default.Children.forEach(e.children,(function(u,l){var c,h={message:"children",index:l,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};c=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(l)>=0?u:rT.default.createElement("div",null);var f=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t}(gT(gT({},e),{},{index:l})),d=c.props.className||"",p=bT(gT(gT({},e),{},{index:l}));if(n.push(rT.default.cloneElement(c,{key:"original"+_T(c,l),"data-index":l,className:(0,iT.default)(p,d),tabIndex:"-1","aria-hidden":!p["slick-active"],style:gT(gT({outline:"none"},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}})),e.infinite&&!1===e.fade){var m=o-l;m<=(0,oT.getPreClones)(e)&&o!==e.slidesToShow&&((t=-m)>=a&&(c=u),p=bT(gT(gT({},e),{},{index:t})),r.push(rT.default.cloneElement(c,{key:"precloned"+_T(c,t),"data-index":t,tabIndex:"-1",className:(0,iT.default)(p,d),"aria-hidden":!p["slick-active"],style:gT(gT({},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}}))),o!==e.slidesToShow&&((t=o+l)<s&&(c=u),p=bT(gT(gT({},e),{},{index:t})),i.push(rT.default.cloneElement(c,{key:"postcloned"+_T(c,t),"data-index":t,tabIndex:"-1",className:(0,iT.default)(p,d),"aria-hidden":!p["slick-active"],style:gT(gT({},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}})))}})),e.rtl?r.concat(n,i).reverse():r.concat(n,i)},xT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hT(e,t)}(o,rT["default"].PureComponent);var t,n,r,i=fT(o);function o(){var e;lT(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yT(pT(e=i.call.apply(i,[this].concat(n))),"node",null),yT(pT(e),"handleRef",(function(t){e.node=t})),e}return t=o,(n=[{key:"render",value:function(){var e=wT(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return rT.default.createElement("div",uT({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},n),e)}}])&&cT(t.prototype,n),r&&cT(t,r),o}();nT.Track=xT;var ST={};Object.defineProperty(ST,"__esModule",{value:!0}),ST.Dots=void 0;var ET=CT(s.exports),TT=CT(TE.exports),MT=ME;function CT(e){return e&&e.__esModule?e:{default:e}}function IT(e){return(IT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OT(e,t){return(OT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}();return function(){var n,r=DT(e);if(t){var i=DT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return NT(this,n)}}function NT(e,t){return!t||"object"!==IT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DT(e){return(DT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OT(e,t)}(o,ET["default"].PureComponent);var t,n,r,i=LT(o);function o(){return PT(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"clickHandler",value:function(e,t){t.preventDefault(),this.props.clickHandler(e)}},{key:"render",value:function(){for(var e,t=this.props,n=t.onMouseEnter,r=t.onMouseOver,i=t.onMouseLeave,o=t.infinite,a=t.slidesToScroll,s=t.slidesToShow,u=t.slideCount,l=t.currentSlide,c=(e={slideCount:u,slidesToScroll:a,slidesToShow:s,infinite:o}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,h={onMouseEnter:n,onMouseOver:r,onMouseLeave:i},f=[],d=0;d<c;d++){var p=(d+1)*a-1,m=o?p:(0,MT.clamp)(p,0,u-1),v=m-(a-1),g=o?v:(0,MT.clamp)(v,0,u-1),y=(0,TT.default)({"slick-active":o?l>=g&&l<=m:l===g}),b={message:"dots",index:d,slidesToScroll:a,currentSlide:l},_=this.clickHandler.bind(this,b);f=f.concat(ET.default.createElement("li",{key:d,className:y},ET.default.cloneElement(this.props.customPaging(d),{onClick:_})))}return ET.default.cloneElement(this.props.appendDots(f),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AT(Object(n),!0).forEach((function(t){kT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.props.dotsClass},h))}}])&&RT(t.prototype,n),r&&RT(t,r),o}();ST.Dots=FT;var UT={};Object.defineProperty(UT,"__esModule",{value:!0}),UT.NextArrow=UT.PrevArrow=void 0;var zT=VT(s.exports),jT=VT(TE.exports),BT=ME;function VT(e){return e&&e.__esModule?e:{default:e}}function HT(e){return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WT(){return(WT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GT(Object(n),!0).forEach((function(t){KT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $T(e,t,n){return t&&YT(e.prototype,t),n&&YT(e,n),e}function QT(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JT(e,t)}function JT(e,t){return(JT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}();return function(){var n,r=tM(e);if(t){var i=tM(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return eM(this,n)}}function eM(e,t){return!t||"object"!==HT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tM(e){return(tM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nM=function(e){QT(n,zT["default"].PureComponent);var t=ZT(n);function n(){return XT(this,n),t.apply(this,arguments)}return $T(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,jT.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?zT.default.cloneElement(this.props.prevArrow,qT(qT({},n),r)):zT.default.createElement("button",WT({key:"0",type:"button"},n)," ","Previous")}}]),n}();UT.PrevArrow=nM;var rM=function(e){QT(n,zT["default"].PureComponent);var t=ZT(n);function n(){return XT(this,n),t.apply(this,arguments)}return $T(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,BT.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,jT.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?zT.default.cloneElement(this.props.nextArrow,qT(qT({},n),r)):zT.default.createElement("button",WT({key:"1",type:"button"},n)," ","Next")}}]),n}();UT.NextArrow=rM;var iM=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),oM="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,aM="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),sM="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(aM):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var uM=["top","right","bottom","left","width","height","size","weight"],lM="undefined"!=typeof MutationObserver,cM=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){sM(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){oM&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),lM?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){oM&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;uM.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),hM=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},fM=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||aM},dM=bM(0,0,0,0);function pM(e){return parseFloat(e)||0}function mM(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+pM(e["border-"+n+"-width"])}),0)}function vM(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return dM;var r=fM(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=pM(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=pM(r.width),u=pM(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=mM(r,"left","right")+o),Math.round(u+a)!==n&&(u-=mM(r,"top","bottom")+a)),!function(e){return e===fM(e).document.documentElement}(e)){var l=Math.round(s+o)-t,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return bM(i.left,i.top,s,u)}var gM="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof fM(e).SVGGraphicsElement}:function(e){return e instanceof fM(e).SVGElement&&"function"==typeof e.getBBox};function yM(e){return oM?gM(e)?function(e){var t=e.getBBox();return bM(0,0,t.width,t.height)}(e):vM(e):dM}function bM(e,t,n,r){return{x:e,y:t,width:n,height:r}}var _M=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=bM(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=yM(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),wM=function(e,t){var n,r,i,o,a,s,u,l=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),hM(u,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),u);hM(this,{target:e,contentRect:l})},xM=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new iM,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof fM(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new _M(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof fM(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new wM(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),SM="undefined"!=typeof WeakMap?new WeakMap:new iM,EM=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=cM.getInstance(),r=new xM(t,n,this);SM.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){EM.prototype[e]=function(){var t;return(t=SM.get(this))[e].apply(t,arguments)}}));var TM=void 0!==aM.ResizeObserver?aM.ResizeObserver:EM,MM=a(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:TM}));Object.defineProperty(sE,"__esModule",{value:!0}),sE.InnerSlider=void 0;var CM=DM(s.exports),IM=DM(uE),AM=DM(EE),kM=DM(TE.exports),PM=ME,RM=nT,OM=ST,LM=UT,NM=DM(MM);function DM(e){return e&&e.__esModule?e:{default:e}}function FM(e){return(FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UM(){return(UM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(n),!0).forEach((function(t){XM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HM(e,t){return(HM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}();return function(){var n,r=KM(e);if(t){var i=KM(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GM(this,n)}}function GM(e,t){return!t||"object"!==FM(t)&&"function"!=typeof t?qM(e):t}function qM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KM(e){return(KM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HM(e,t)}(o,CM["default"].Component);var t,n,r,i=WM(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),XM(qM(t=i.call(this,e)),"listRefHandler",(function(e){return t.list=e})),XM(qM(t),"trackRefHandler",(function(e){return t.track=e})),XM(qM(t),"adaptHeight",(function(){if(t.props.adaptiveHeight&&t.list){var e=t.list.querySelector('[data-index="'.concat(t.state.currentSlide,'"]'));t.list.style.height=(0,PM.getHeight)(e)+"px"}})),XM(qM(t),"componentDidMount",(function(){if(t.props.onInit&&t.props.onInit(),t.props.lazyLoad){var e=(0,PM.getOnDemandLazySlides)(BM(BM({},t.props),t.state));e.length>0&&(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e))}var n=BM({listRef:t.list,trackRef:t.track},t.props);t.updateState(n,!0,(function(){t.adaptHeight(),t.props.autoplay&&t.autoPlay("update")})),"progressive"===t.props.lazyLoad&&(t.lazyLoadTimer=setInterval(t.progressiveLazyLoad,1e3)),t.ro=new NM.default((function(){t.state.animating?(t.onWindowResized(!1),t.callbackTimers.push(setTimeout((function(){return t.onWindowResized()}),t.props.speed))):t.onWindowResized()})),t.ro.observe(t.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(e){e.onfocus=t.props.pauseOnFocus?t.onSlideFocus:null,e.onblur=t.props.pauseOnFocus?t.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",t.onWindowResized):window.attachEvent("onresize",t.onWindowResized)})),XM(qM(t),"componentWillUnmount",(function(){t.animationEndCallback&&clearTimeout(t.animationEndCallback),t.lazyLoadTimer&&clearInterval(t.lazyLoadTimer),t.callbackTimers.length&&(t.callbackTimers.forEach((function(e){return clearTimeout(e)})),t.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",t.onWindowResized):window.detachEvent("onresize",t.onWindowResized),t.autoplayTimer&&clearInterval(t.autoplayTimer),t.ro.disconnect()})),XM(qM(t),"componentDidUpdate",(function(e){if(t.checkImagesLoad(),t.props.onReInit&&t.props.onReInit(),t.props.lazyLoad){var n=(0,PM.getOnDemandLazySlides)(BM(BM({},t.props),t.state));n.length>0&&(t.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(n)}})),t.props.onLazyLoad&&t.props.onLazyLoad(n))}t.adaptHeight();var r=BM(BM({listRef:t.list,trackRef:t.track},t.props),t.state),i=t.didPropsChange(e);i&&t.updateState(r,i,(function(){t.state.currentSlide>=CM.default.Children.count(t.props.children)&&t.changeSlide({message:"index",index:CM.default.Children.count(t.props.children)-t.props.slidesToShow,currentSlide:t.state.currentSlide}),t.props.autoplay?t.autoPlay("update"):t.pause("paused")}))})),XM(qM(t),"onWindowResized",(function(e){t.debouncedResize&&t.debouncedResize.cancel(),t.debouncedResize=(0,AM.default)((function(){return t.resizeWindow(e)}),50),t.debouncedResize()})),XM(qM(t),"resizeWindow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=Boolean(t.track&&t.track.node);if(n){var r=BM(BM({listRef:t.list,trackRef:t.track},t.props),t.state);t.updateState(r,e,(function(){t.props.autoplay?t.autoPlay("update"):t.pause("paused")})),t.setState({animating:!1}),clearTimeout(t.animationEndCallback),delete t.animationEndCallback}})),XM(qM(t),"updateState",(function(e,n,r){var i=(0,PM.initializedState)(e);e=BM(BM(BM({},e),i),{},{slideIndex:i.currentSlide});var o=(0,PM.getTrackLeft)(e);e=BM(BM({},e),{},{left:o});var a=(0,PM.getTrackCSS)(e);(n||CM.default.Children.count(t.props.children)!==CM.default.Children.count(e.children))&&(i.trackStyle=a),t.setState(i,r)})),XM(qM(t),"ssrInit",(function(){if(t.props.variableWidth){var e=0,n=0,r=[],i=(0,PM.getPreClones)(BM(BM(BM({},t.props),t.state),{},{slideCount:t.props.children.length})),o=(0,PM.getPostClones)(BM(BM(BM({},t.props),t.state),{},{slideCount:t.props.children.length}));t.props.children.forEach((function(t){r.push(t.props.style.width),e+=t.props.style.width}));for(var a=0;a<i;a++)n+=r[r.length-1-a],e+=r[r.length-1-a];for(var s=0;s<o;s++)e+=r[s];for(var u=0;u<t.state.currentSlide;u++)n+=r[u];var l={width:e+"px",left:-n+"px"};if(t.props.centerMode){var c="".concat(r[t.state.currentSlide],"px");l.left="calc(".concat(l.left," + (100% - ").concat(c,") / 2 ) ")}return{trackStyle:l}}var h=CM.default.Children.count(t.props.children),f=BM(BM(BM({},t.props),t.state),{},{slideCount:h}),d=(0,PM.getPreClones)(f)+(0,PM.getPostClones)(f)+h,p=100/t.props.slidesToShow*d,m=100/d,v=-m*((0,PM.getPreClones)(f)+t.state.currentSlide)*p/100;return t.props.centerMode&&(v+=(100-m*p/100)/2),{slideWidth:m+"%",trackStyle:{width:p+"%",left:v+"%"}}})),XM(qM(t),"checkImagesLoad",(function(){var e=t.list&&t.list.querySelectorAll&&t.list.querySelectorAll(".slick-slide img")||[],n=e.length,r=0;Array.prototype.forEach.call(e,(function(e){var i=function(){return++r&&r>=n&&t.onWindowResized()};if(e.onclick){var o=e.onclick;e.onclick=function(){o(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(t.props.lazyLoad?e.onload=function(){t.adaptHeight(),t.callbackTimers.push(setTimeout(t.onWindowResized,t.props.speed))}:(e.onload=i,e.onerror=function(){i(),t.props.onLazyLoadError&&t.props.onLazyLoadError()}))}))})),XM(qM(t),"progressiveLazyLoad",(function(){for(var e=[],n=BM(BM({},t.props),t.state),r=t.state.currentSlide;r<t.state.slideCount+(0,PM.getPostClones)(n);r++)if(t.state.lazyLoadedList.indexOf(r)<0){e.push(r);break}for(var i=t.state.currentSlide-1;i>=-(0,PM.getPreClones)(n);i--)if(t.state.lazyLoadedList.indexOf(i)<0){e.push(i);break}e.length>0?(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e)):t.lazyLoadTimer&&(clearInterval(t.lazyLoadTimer),delete t.lazyLoadTimer)})),XM(qM(t),"slideHandler",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,i=r.asNavFor,o=r.beforeChange,a=r.onLazyLoad,s=r.speed,u=r.afterChange,l=t.state.currentSlide,c=(0,PM.slideHandler)(BM(BM(BM({index:e},t.props),t.state),{},{trackRef:t.track,useCSS:t.props.useCSS&&!n})),h=c.state,f=c.nextState;if(h){o&&o(l,h.currentSlide);var d=h.lazyLoadedList.filter((function(e){return t.state.lazyLoadedList.indexOf(e)<0}));a&&d.length>0&&a(d),!t.props.waitForAnimate&&t.animationEndCallback&&(clearTimeout(t.animationEndCallback),u&&u(l),delete t.animationEndCallback),t.setState(h,(function(){i&&t.asNavForIndex!==e&&(t.asNavForIndex=e,i.innerSlider.slideHandler(e)),f&&(t.animationEndCallback=setTimeout((function(){var e=f.animating,n=zM(f,["animating"]);t.setState(n,(function(){t.callbackTimers.push(setTimeout((function(){return t.setState({animating:e})}),10)),u&&u(h.currentSlide),delete t.animationEndCallback}))}),s))}))}})),XM(qM(t),"changeSlide",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=BM(BM({},t.props),t.state),i=(0,PM.changeSlide)(r,e);if((0===i||i)&&(!0===n?t.slideHandler(i,n):t.slideHandler(i),t.props.autoplay&&t.autoPlay("update"),t.props.focusOnSelect)){var o=t.list.querySelectorAll(".slick-current");o[0]&&o[0].focus()}})),XM(qM(t),"clickHandler",(function(e){!1===t.clickable&&(e.stopPropagation(),e.preventDefault()),t.clickable=!0})),XM(qM(t),"keyHandler",(function(e){var n=(0,PM.keyHandler)(e,t.props.accessibility,t.props.rtl);""!==n&&t.changeSlide({message:n})})),XM(qM(t),"selectHandler",(function(e){t.changeSlide(e)})),XM(qM(t),"disableBodyScroll",(function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})),XM(qM(t),"enableBodyScroll",(function(){window.ontouchmove=null})),XM(qM(t),"swipeStart",(function(e){t.props.verticalSwiping&&t.disableBodyScroll();var n=(0,PM.swipeStart)(e,t.props.swipe,t.props.draggable);""!==n&&t.setState(n)})),XM(qM(t),"swipeMove",(function(e){var n=(0,PM.swipeMove)(e,BM(BM(BM({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));n&&(n.swiping&&(t.clickable=!1),t.setState(n))})),XM(qM(t),"swipeEnd",(function(e){var n=(0,PM.swipeEnd)(e,BM(BM(BM({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));if(n){var r=n.triggerSlideHandler;delete n.triggerSlideHandler,t.setState(n),void 0!==r&&(t.slideHandler(r),t.props.verticalSwiping&&t.enableBodyScroll())}})),XM(qM(t),"touchEnd",(function(e){t.swipeEnd(e),t.clickable=!0})),XM(qM(t),"slickPrev",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"previous"})}),0))})),XM(qM(t),"slickNext",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"next"})}),0))})),XM(qM(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"index",index:e,currentSlide:t.state.currentSlide},n)}),0))})),XM(qM(t),"play",(function(){var e;if(t.props.rtl)e=t.state.currentSlide-t.props.slidesToScroll;else{if(!(0,PM.canGoNext)(BM(BM({},t.props),t.state)))return!1;e=t.state.currentSlide+t.props.slidesToScroll}t.slideHandler(e)})),XM(qM(t),"autoPlay",(function(e){t.autoplayTimer&&clearInterval(t.autoplayTimer);var n=t.state.autoplaying;if("update"===e){if("hovered"===n||"focused"===n||"paused"===n)return}else if("leave"===e){if("paused"===n||"focused"===n)return}else if("blur"===e&&("paused"===n||"hovered"===n))return;t.autoplayTimer=setInterval(t.play,t.props.autoplaySpeed+50),t.setState({autoplaying:"playing"})})),XM(qM(t),"pause",(function(e){t.autoplayTimer&&(clearInterval(t.autoplayTimer),t.autoplayTimer=null);var n=t.state.autoplaying;"paused"===e?t.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==n&&"playing"!==n||t.setState({autoplaying:"focused"}):"playing"===n&&t.setState({autoplaying:"hovered"})})),XM(qM(t),"onDotsOver",(function(){return t.props.autoplay&&t.pause("hovered")})),XM(qM(t),"onDotsLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),XM(qM(t),"onTrackOver",(function(){return t.props.autoplay&&t.pause("hovered")})),XM(qM(t),"onTrackLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),XM(qM(t),"onSlideFocus",(function(){return t.props.autoplay&&t.pause("focused")})),XM(qM(t),"onSlideBlur",(function(){return t.props.autoplay&&"focused"===t.state.autoplaying&&t.autoPlay("blur")})),XM(qM(t),"render",(function(){var e,n,r,i=(0,kM.default)("slick-slider",t.props.className,{"slick-vertical":t.props.vertical,"slick-initialized":!0}),o=BM(BM({},t.props),t.state),a=(0,PM.extractObject)(o,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),s=t.props.pauseOnHover;if(a=BM(BM({},a),{},{onMouseEnter:s?t.onTrackOver:null,onMouseLeave:s?t.onTrackLeave:null,onMouseOver:s?t.onTrackOver:null,focusOnSelect:t.props.focusOnSelect&&t.clickable?t.selectHandler:null}),!0===t.props.dots&&t.state.slideCount>=t.props.slidesToShow){var u=(0,PM.extractObject)(o,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),l=t.props.pauseOnDotsHover;u=BM(BM({},u),{},{clickHandler:t.changeSlide,onMouseEnter:l?t.onDotsLeave:null,onMouseOver:l?t.onDotsOver:null,onMouseLeave:l?t.onDotsLeave:null}),e=CM.default.createElement(OM.Dots,u)}var c=(0,PM.extractObject)(o,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);c.clickHandler=t.changeSlide,t.props.arrows&&(n=CM.default.createElement(LM.PrevArrow,c),r=CM.default.createElement(LM.NextArrow,c));var h=null;t.props.vertical&&(h={height:t.state.listHeight});var f=null;!1===t.props.vertical?!0===t.props.centerMode&&(f={padding:"0px "+t.props.centerPadding}):!0===t.props.centerMode&&(f={padding:t.props.centerPadding+" 0px"});var d=BM(BM({},h),f),p=t.props.touchMove,m={className:"slick-list",style:d,onClick:t.clickHandler,onMouseDown:p?t.swipeStart:null,onMouseMove:t.state.dragging&&p?t.swipeMove:null,onMouseUp:p?t.swipeEnd:null,onMouseLeave:t.state.dragging&&p?t.swipeEnd:null,onTouchStart:p?t.swipeStart:null,onTouchMove:t.state.dragging&&p?t.swipeMove:null,onTouchEnd:p?t.touchEnd:null,onTouchCancel:t.state.dragging&&p?t.swipeEnd:null,onKeyDown:t.props.accessibility?t.keyHandler:null},v={className:i,dir:"ltr",style:t.props.style};return t.props.unslick&&(m={className:"slick-list"},v={className:i}),CM.default.createElement("div",v,t.props.unslick?"":n,CM.default.createElement("div",UM({ref:t.listRefHandler},m),CM.default.createElement(RM.Track,UM({ref:t.trackRefHandler},a),t.props.children)),t.props.unslick?"":r,t.props.unslick?"":e)})),t.list=null,t.track=null,t.state=BM(BM({},IM.default),{},{currentSlide:t.props.initialSlide,slideCount:CM.default.Children.count(t.props.children)}),t.callbackTimers=[],t.clickable=!0,t.debouncedResize=null;var n=t.ssrInit();return t.state=BM(BM({},t.state),n),t}return t=o,(n=[{key:"didPropsChange",value:function(e){for(var t=!1,n=0,r=Object.keys(this.props);n<r.length;n++){var i=r[n];if(!e.hasOwnProperty(i)){t=!0;break}if("object"!==FM(e[i])&&"function"!=typeof e[i]&&e[i]!==this.props[i]){t=!0;break}}return t||CM.default.Children.count(this.props.children)!==CM.default.Children.count(e.children)}}])&&VM(t.prototype,n),r&&VM(t,r),o}();sE.InnerSlider=YM;var $M=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()},QM=function(e){var t="",n=Object.keys(e);return n.forEach((function(r,i){var o=e[r];(function(e){return/[height|width]$/.test(e)})(r=$M(r))&&"number"==typeof o&&(o+="px"),t+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",i<n.length-1&&(t+=" and ")})),t},JM=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach((function(n,r){t+=QM(n),r<e.length-1&&(t+=", ")})),t):QM(e)},ZM={};function eC(e){this.options=e,!e.deferSetup&&this.setup()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(s.exports);var n={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return t.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return t.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};e.default=n}(ZM),eC.prototype={constructor:eC,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}};var tC={isFunction:function(e){return"function"==typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);}},nC=eC,rC=tC.each;function iC(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}iC.prototype={constuctor:iC,addHandler:function(e){var t=new nC(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;rC(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){rC(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";rC(this.handlers,(function(t){t[e]()}))}};var oC=iC,aC=tC.each,sC=tC.isFunction,uC=tC.isArray;function lC(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}lC.prototype={constructor:lC,register:function(e,t,n){var r=this.queries,i=n&&this.browserIsIncapable;return r[e]||(r[e]=new oC(e,i)),sC(t)&&(t={match:t}),uC(t)||(t=[t]),aC(t,(function(t){sC(t)&&(t={match:t}),r[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}};var cC=new lC;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(s.exports),n=sE,r=a(JM),i=a(ZM),o=ME;function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,o.canUseDOM)()&&cC,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var a,s,u,c=p(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),y(v(t=c.call(this,e)),"innerSliderRefHandler",(function(e){return t.innerSlider=e})),y(v(t),"slickPrev",(function(){return t.innerSlider.slickPrev()})),y(v(t),"slickNext",(function(){return t.innerSlider.slickNext()})),y(v(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.innerSlider.slickGoTo(e,n)})),y(v(t),"slickPause",(function(){return t.innerSlider.pause("paused")})),y(v(t),"slickPlay",(function(){return t.innerSlider.autoPlay("play")})),t.state={breakpoint:null},t._responsiveMediaHandlers=[],t}return a=m,(s=[{key:"media",value:function(e,t){b.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})}},{key:"componentDidMount",value:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map((function(e){return e.breakpoint}));t.sort((function(e,t){return e-t})),t.forEach((function(n,i){var a;a=0===i?(0,r.default)({minWidth:0,maxWidth:n}):(0,r.default)({minWidth:t[i-1]+1,maxWidth:n}),(0,o.canUseDOM)()&&e.media(a,(function(){e.setState({breakpoint:n})}))}));var n=(0,r.default)({minWidth:t.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(n,(function(){e.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(e){b.unregister(e.query,e.handler)}))}},{key:"render",value:function(){var e,r,o=this;(e=this.state.breakpoint?"unslick"===(r=this.props.responsive.filter((function(e){return e.breakpoint===o.state.breakpoint})))[0].settings?"unslick":h(h(h({},i.default),this.props),r[0].settings):h(h({},i.default),this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var a=t.default.Children.toArray(this.props.children);a=a.filter((function(e){return"string"==typeof e?!!e.trim():!!e})),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var s=[],u=null,c=0;c<a.length;c+=e.rows*e.slidesPerRow){for(var f=[],d=c;d<c+e.rows*e.slidesPerRow;d+=e.slidesPerRow){for(var p=[],m=d;m<d+e.slidesPerRow&&(e.variableWidth&&a[m].props.style&&(u=a[m].props.style.width),!(m>=a.length));m+=1)p.push(t.default.cloneElement(a[m],{key:100*c+10*d+m,tabIndex:-1,style:{width:"".concat(100/e.slidesPerRow,"%"),display:"inline-block"}}));f.push(t.default.createElement("div",{key:10*c+d},p))}e.variableWidth?s.push(t.default.createElement("div",{key:c,style:{width:u}},f)):s.push(t.default.createElement("div",{key:c},f))}if("unslick"===e){var v="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:v},a)}return s.length<=e.slidesToShow&&(e.unslick=!0),t.default.createElement(n.InnerSlider,l({style:this.props.style,ref:this.innerSliderRefHandler},e),s)}}])&&f(a.prototype,s),u&&f(a,u),m}(t.default.Component);e.default=_}(aE),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(aE).default;e.default=t}({});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hC=function(e,t){return(hC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function fC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}hC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var dC=function(){return(dC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function pC(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(XY){o(XY)}}function s(e){try{u(r.throw(e))}catch(XY){o(XY)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function mC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(XY){o=[6,XY],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function vC(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gC(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function yC(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bC=!1,_C="${JSCORE_VERSION}",wC=function(e,t){if(!e)throw xC(t)},xC=function(e){return new Error("Firebase Database ("+_C+") INTERNAL ASSERT FAILED: "+e)},SC=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},EC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,a||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(SC(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},TC=function(e){try{return EC.decodeString(e,!0)}catch(XY){console.error("base64Decode failed: ",XY)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MC(e){return CC(void 0,e)}function CC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=CC(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var IC=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=dC({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[EC.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),EC.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function PC(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kC())}function RC(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(XY){return!1}}function OC(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function LC(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function NC(){return!0===bC}function DC(){return"indexedDB"in self&&null!=indexedDB}function FC(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function UC(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zC=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,jC.prototype.create),o}return fC(t,e),t}(Error),jC=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?BC(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new zC(i,s,r);return u},e}();function BC(e,t){return e.replace(VC,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var VC=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(e){return JSON.parse(e)}function WC(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GC=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=HC(TC(o[0])||""),n=HC(TC(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(XY){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qC(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function KC(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function XC(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function YC(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $C=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function QC(e,t){var n=new JC(e,t);return n.subscribe.bind(n)}var JC=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ZC),void 0===r.error&&(r.error=ZC),void 0===r.complete&&(r.complete=ZC);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(XY){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(XY){"undefined"!=typeof console&&console.error&&console.error(XY)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function ZC(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eI=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tI(e,t){return e+" failed: "+t+" argument "}function nI(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tI(e,t)+"must be a valid function.")}function rI(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tI(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iI=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function oI(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(e){return e&&e._delegate?e._delegate:e}var sI=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),uI=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new IC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(XY){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(XY){if(r)return null;throw XY}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(XY){}try{for(var r=vC(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=gC(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:u});s.resolve(l)}catch(XY){}}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(yC(yC([],gC(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),gC(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=vC(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var l=gC(u.value,2),c=l[0],h=l[1];o===this.normalizeInstanceIdentifier(c)&&h.resolve(a)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=vC(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(u){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e="[DEFAULT]"),this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lI,cI=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new uI(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function hI(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fI,dI,pI=[];(dI=fI||(fI={}))[dI.DEBUG=0]="DEBUG",dI[dI.VERBOSE=1]="VERBOSE",dI[dI.INFO=2]="INFO",dI[dI.WARN=3]="WARN",dI[dI.ERROR=4]="ERROR",dI[dI.SILENT=5]="SILENT";var mI,vI={debug:fI.DEBUG,verbose:fI.VERBOSE,info:fI.INFO,warn:fI.WARN,error:fI.ERROR,silent:fI.SILENT},gI=fI.INFO,yI=((lI={})[fI.DEBUG]="log",lI[fI.VERBOSE]="log",lI[fI.INFO]="info",lI[fI.WARN]="warn",lI[fI.ERROR]="error",lI),bI=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=yI[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,hI(["["+i+"]  "+e.name+":"],n))}},_I=function(){function e(e){this.name=e,this._logLevel=gI,this._logHandler=bI,this._userLogHandler=null,pI.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in fI))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?vI[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,hI([this,fI.DEBUG],e)),this._logHandler.apply(this,hI([this,fI.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,hI([this,fI.VERBOSE],e)),this._logHandler.apply(this,hI([this,fI.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,hI([this,fI.INFO],e)),this._logHandler.apply(this,hI([this,fI.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,hI([this,fI.WARN],e)),this._logHandler.apply(this,hI([this,fI.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,hI([this,fI.ERROR],e)),this._logHandler.apply(this,hI([this,fI.ERROR],e))},e}();function wI(e){pI.forEach((function(t){t.setLogLevel(e)}))}var xI,SI=((mI={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",mI["bad-app-name"]="Illegal App name: '{$appName}",mI["duplicate-app"]="Firebase App named '{$appName}' already exists",mI["app-deleted"]="Firebase App named '{$appName}' already deleted",mI["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",mI["invalid-log-argument"]="First argument to `onLog` must be null or a function.",mI),EI=new jC("app","Firebase",SI),TI=((xI={})["@firebase/app"]="fire-core",xI["@firebase/analytics"]="fire-analytics",xI["@firebase/app-check"]="fire-app-check",xI["@firebase/auth"]="fire-auth",xI["@firebase/database"]="fire-rtdb",xI["@firebase/functions"]="fire-fn",xI["@firebase/installations"]="fire-iid",xI["@firebase/messaging"]="fire-fcm",xI["@firebase/performance"]="fire-perf",xI["@firebase/remote-config"]="fire-rc",xI["@firebase/storage"]="fire-gcs",xI["@firebase/firestore"]="fire-fst",xI["fire-js"]="fire-js",xI["firebase-wrapper"]="fire-js-all",xI),MI=new _I("@firebase/app"),CI=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=MC(e),this.container=new cI(t.name),this._addComponent(new sI("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(XY){MI.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,XY)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw EI.create("app-deleted",{appName:this.name_})},e}();CI.prototype.name&&CI.prototype.options||CI.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function II(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw EI.create("bad-app-name",{appName:String(a)});if(qC(t,a))throw EI.create("duplicate-app",{appName:a});var s=new e(n,o,r);return t[a]=s,s},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=TI[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void MI.warn(u.join(" "))}o(new sI(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:wI,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw EI.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=vI[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:fI[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=pI;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(!qC(t,e=e||"[DEFAULT]"))throw EI.create("no-app",{appName:e});return t[e]}function o(o){var a=o.name;if(n.has(a))return MI.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[a])throw EI.create("invalid-app-argument",{appName:a});return e[a]()};void 0!==o.serviceProps&&CC(s,o.serviceProps),r[a]=s,e.prototype[a]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?e:[])}}for(var u=0,l=Object.keys(t);u<l.length;u++){var c=l[u];t[c]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AI=function e(){var t=II(CI);return t.INTERNAL=dC(dC({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){CC(t,e)},createSubscribe:QC,ErrorFactory:jC,deepExtend:CC}),t}(),kI=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){MI.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var PI=self.firebase.SDK_VERSION;PI&&PI.indexOf("LITE")>=0&&MI.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var RI=AI.initializeApp;AI.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RC()&&MI.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),RI.apply(void 0,e)};var OI,LI,NI=AI;(OI=NI).INTERNAL.registerComponent(new sI("platform-logger",(function(e){return new kI(e)}),"PRIVATE")),OI.registerVersion("@firebase/app","0.6.28",LI),OI.registerVersion("fire-js",""),function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var n=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis}(this);function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=n.setTimeout;r.prototype.c=function(e){a(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new r;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ra(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""}function c(){}function h(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){return"function"==h(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function x(e){return e}function S(e,t,n){this.code=M+e,this.message=t||C[e]||"",this.a=n||null}function E(e){var t=e&&e.code;return t?new S(t.substring(M.length),e.message,e.serverResponse):null}w(S,Error),S.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},S.prototype.toJSON=function(){return this.w()};var T,M="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},I={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(e){for(var t in I)if(I[t].id===e)return{firebaseEndpoint:(e=I[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function P(e){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function R(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");P.call(this,n+e[r])}function O(e,t){throw new R("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function L(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function N(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function D(){this.b=this.a=null}T=A("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var F=new L((function(){return new z}),(function(e){e.reset()}));function U(){var e=gt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function z(){this.next=this.b=this.a=null}D.prototype.add=function(e,t){var n=F.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var V=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},H=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},W=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function G(e,t){return 0<=j(e,t)}function q(e,t){var n;return(n=0<=(t=j(e,t)))&&Array.prototype.splice.call(e,t,1),n}function K(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function X(e){return Array.prototype.concat.apply([],arguments)}function Y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var $,Q=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},J=/&/g,Z=/</g,ee=/>/g,te=/"/g,ne=/'/g,re=/\x00/g,ie=/[\x00&<>"']/;function oe(e,t){return-1!=e.indexOf(t)}function ae(e,t){return e<t?-1:e>t?1:0}e:{var se=a.navigator;if(se){var ue=se.userAgent;if(ue){$=ue;break e}}$=""}function le(e){return oe($,e)}function ce(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function he(e){for(var t in e)return!1;return!0}function fe(e){var t,n={};for(t in e)n[t]=e[t];return n}var de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<de.length;o++)n=de[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(s){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(p(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function ve(e,t){this.a=e===_e&&t||"",this.b=be}function ge(e){return e instanceof ve&&e.constructor===ve&&e.b===be?e.a:(O("expected object of type Const, got '"+e+"'"),"type_error:Const")}ve.prototype.ta=!0,ve.prototype.sa=function(){return this.a},ve.prototype.toString=function(){return"Const{"+this.a+"}"};var ye,be={},_e={};function we(){if(void 0===ye){var e=null,t=a.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:x,createScript:x,createScriptURL:x})}catch(a_){a.console&&a.console.error(a_.message)}ye=e}else ye=e}return ye}function xe(e,t){this.a=t===Ce?e:""}function Se(e){return e instanceof xe&&e.constructor===xe?e.a:(O("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function Ee(e,t){var n=ge(e);if(!Me.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=we();return new xe(e=t?t.createScriptURL(e):e,Ce)}(e=n.replace(Te,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof ve?ge(e):encodeURIComponent(String(e))})))}xe.prototype.ta=!0,xe.prototype.sa=function(){return this.a.toString()},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Te=/%{(\w+)}/g,Me=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ce={};function Ie(e,t){this.a=t===Ne?e:""}function Ae(e){return e instanceof Ie&&e.constructor===Ie?e.a:(O("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}Ie.prototype.ta=!0,Ie.prototype.sa=function(){return this.a.toString()},Ie.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ke=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Re=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Oe(e){if(e instanceof Ie)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e))e=new Ie(e,Ne);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Pe);e=t&&ke.test(t[1])?new Ie(e,Ne):null}return e}function Le(e){return e instanceof Ie?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e)||(e="about:invalid#zClosurez"),new Ie(e,Ne))}var Ne={},De=new Ie("about:invalid#zClosurez",Ne);function Fe(e,t,n){this.a=n===Ue?e:""}Fe.prototype.ta=!0,Fe.prototype.sa=function(){return this.a.toString()},Fe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ue={};function ze(e,t,n,r){return e=e instanceof Ie?e:Le(e),t=t||a,n=n instanceof ve?ge(n):n||"",t.open(Ae(e),n,r,void 0)}function je(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Be(e){return ie.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(J,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Z,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ee,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(te,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ne,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(re,"&#0;"))),e}function Ve(e){return Ve[" "](e),e}Ve[" "]=c;var He,We=le("Opera"),Ge=le("Trident")||le("MSIE"),qe=le("Edge"),Ke=qe||Ge,Xe=le("Gecko")&&!(oe($.toLowerCase(),"webkit")&&!le("Edge"))&&!(le("Trident")||le("MSIE"))&&!le("Edge"),Ye=oe($.toLowerCase(),"webkit")&&!le("Edge");function $e(){var e=a.document;return e?e.documentMode:void 0}e:{var Qe="",Je=function(){var e=$;return Xe?/rv:([^\);]+)(\)|;)/.exec(e):qe?/Edge\/([\d\.]+)/.exec(e):Ge?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ye?/WebKit\/(\S+)/.exec(e):We?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Je&&(Qe=Je?Je[1]:""),Ge){var Ze=$e();if(null!=Ze&&Ze>parseFloat(Qe)){He=String(Ze);break e}}He=Qe}var et,tt={};function nt(e){return function(e,t){var n=tt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=Q(String(He)).split("."),r=Q(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ae(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ae(0==a[2].length,0==s[2].length)||ae(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(a.document&&Ge){var rt=$e();et=rt||(parseInt(He,10)||void 0)}else et=void 0;var it=et;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ut){}var ot=!Ge||9<=Number(it);function at(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function st(e,t){ce(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ht.hasOwnProperty(n)?e.setAttribute(ht[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var lt,ct,ht={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ft(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(d(o)){a="function"==typeof o.item;break e}}a=!1}B(a?Y(o):o,r)}}}function dt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function pt(e){a.setTimeout((function(){throw e}),0)}function mt(e,t){ct||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);ct=function(){e.then(yt)}}else ct=function(){var e=yt;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!le("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(lt||(lt=function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!le("Presto")&&(e=function(){var e=dt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=b((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!le("Trident")&&!le("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){a.setTimeout(e,0)}}()),lt(e)):a.setImmediate(e)}}(),vt||(ct(),vt=!0),gt.add(e,t)}var vt=!1,gt=new D;function yt(){for(var e;e=U();){try{e.a.call(e.b)}catch(t){pt(t)}N(F,e)}vt=!1}function bt(e,t){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=c)try{var n=this;e.call(t,(function(e){Ot(n,wt,e)}),(function(e){if(!(e instanceof jt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(XY){}Ot(n,xt,e)}))}catch(r){Ot(this,xt,r)}}var _t=0,wt=2,xt=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Et=new L((function(){return new St}),(function(e){e.reset()}));function Tt(e,t,n){var r=Et.get();return r.g=e,r.b=t,r.f=n,r}function Mt(e){if(e instanceof bt)return e;var t=new bt(c);return Ot(t,wt,e),t}function Ct(e){return new bt((function(t,n){n(e)}))}function It(e,t,n){Lt(e,t,n,null)||mt(_(t,e))}function At(e){return new bt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)It(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}function kt(e,t){if(e.a==_t)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_t&&1==r?kt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Dt(n),Ft(n,i,xt,t)))}e.c=null}else Ot(e,xt,t)}function Pt(e,t){e.b||e.a!=wt&&e.a!=xt||Nt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Rt(e,t,n,r){var i=Tt(null,null,null);return i.a=new bt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof jt?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,Pt(e,i),i.a}function Ot(e,t,n){e.a==_t&&(e===n&&(t=xt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Lt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Nt(e),t!=xt||n instanceof jt||function(e,t){e.g=!0,mt((function(){e.g&&zt.call(null,t)}))}(e,n)))}function Lt(e,t,n,r){if(e instanceof bt)return Pt(e,Tt(t||c,n||null,r)),!0;if(k(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(d(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Nt(e){e.h||(e.h=!0,mt(e.gc,e))}function Dt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ft(e,t,n,r){if(n==xt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,r);else try{t.c?t.g.call(t.f):Ut(t,n,r)}catch(XY){zt.call(null,XY)}N(Et,t)}function Ut(e,t,n){t==wt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}bt.prototype.then=function(e,t,n){return Rt(this,d(e)?e:null,d(t)?t:null,n)},bt.prototype.$goog_Thenable=!0,(e=bt.prototype).oa=function(e,t){return(e=Tt(e,e,t)).c=!0,Pt(this,e),this},e.o=function(e,t){return Rt(this,null,e,t)},e.cancel=function(e){if(this.a==_t){var t=new jt(e);mt((function(){kt(this,t)}),this)}},e.$c=function(e){this.a=_t,Ot(this,wt,e)},e.ad=function(e){this.a=_t,Ot(this,xt,e)},e.gc=function(){for(var e;e=Dt(this);)Ft(this,e,this.a,this.i);this.h=!1};var zt=pt;function jt(e){P.call(this,e)}function Bt(){this.ya=this.ya,this.pa=this.pa}w(jt,P),jt.prototype.name="cancel";var Vt={};function Ht(e){if(!e.ya&&(e.ya=!0,e.Da(),0)){var t=function(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++v)}(e);delete Vt[t]}}Bt.prototype.ya=!1,Bt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Wt=Object.freeze||function(e){return e},Gt=!Ge||9<=Number(it),qt=Ge&&!nt("9"),Kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(a_){}return e}();function Xt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Yt(e,t){if(Xt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Xe){e:{try{Ve(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$t[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Xt.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Yt,Xt);var $t=Wt({2:"touch",3:"pen",4:"mouse"});Yt.prototype.preventDefault=function(){Yt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,qt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Yt.prototype.g=function(){return this.a};var Qt="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function Zt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Jt,this.wa=this.Qa=!1}function en(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function tn(e){this.src=e,this.a={},this.b=0}function nn(e,t){var n=t.type;n in e.a&&q(e.a[n],t)&&(en(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function rn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}tn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=rn(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new Zt(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var on="closure_lm_"+(1e6*Math.random()|0),an={};function sn(e,t,n,r,i){if(r&&r.once)ln(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)sn(e,t[o],n,r,i);else n=yn(n),e&&e[Qt]?_n(e,t,n,p(r)?!!r.capture:!!r,i):un(e,t,n,!1,r,i)}function un(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=vn(e);if(s||(e[on]=s=new tn(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=mn,t=Gt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function ln(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ln(e,t[o],n,r,i);else n=yn(n),e&&e[Qt]?wn(e,t,n,p(r)?!!r.capture:!!r,i):un(e,t,n,!0,r,i)}function cn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)cn(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=yn(n),e&&e[Qt]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=rn(o=e.a[t],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=vn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=rn(t,n,r,i)),(n=-1<e?t[e]:null)&&hn(n))}function hn(e){if("number"!=typeof e&&e&&!e.wa){var t=e.src;if(t&&t[Qt])nn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=vn(t))?(nn(n,e),0==n.b&&(n.src=null,t[on]=null)):en(e)}}}function fn(e){return e in an?an[e]:an[e]="on"+e}function dn(e,t,n,r){var i=!0;if((e=vn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=pn(o,r),i=i&&!1!==o)}return i}function pn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&hn(e),n.call(r,t)}function mn(e,t){if(e.wa)return!0;if(!Gt){if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Yt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=dn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=dn(r[i],e,!1,t),n=n&&o}return n}return pn(e,new Yt(t,this))}function vn(e){return(e=e[on])instanceof tn?e:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(e){return d(e)?e:(e[gn]||(e[gn]=function(t){return e.handleEvent(t)}),e[gn])}function bn(){Bt.call(this),this.v=new tn(this),this.bc=this,this.hb=null}function _n(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function wn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function xn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&nn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(e,t,n){if(d(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function En(e){var t=null;return new bt((function(n,r){-1==(t=Sn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw a.clearTimeout(t),e}))}function Tn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Mn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Cn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Cn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function In(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];An(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)An(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function An(e,t){return Object.prototype.hasOwnProperty.call(e,t)}w(bn,Bt),bn.prototype[Qt]=!0,bn.prototype.addEventListener=function(e,t,n,r){sn(this,e,t,n,r)},bn.prototype.removeEventListener=function(e,t,n,r){cn(this,e,t,n,r)},bn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"==typeof e)e=new Xt(e,n);else if(e instanceof Xt)e.target=e.target||n;else{var i=e;pe(e=new Xt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=xn(a,r,!0,e)&&i}if(i=xn(a=e.b=n,r,!0,e)&&i,i=xn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=xn(a=e.b=t[o],r,!1,e)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)en(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=Cn.prototype).X=function(){In(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return In(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return An(this.b,e)?this.b[e]:t},e.set=function(e,t){An(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Pn?(this.i=void 0!==t?t:e.i,Rn(this,e.c),this.l=e.l,this.a=e.a,On(this,e.g),this.f=e.f,Ln(this,Zn(e.b)),this.h=e.h):e&&(n=String(e).match(kn))?(this.i=!!t,Rn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),On(this,n[4]),this.f=zn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!t,this.b=new Kn(null,this.i))}function Rn(e,t,n){e.c=n?zn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function On(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Ln(e,t,n){t instanceof Kn?(e.b=t,function(e,t){t&&!e.f&&(Xn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($n(this,t),Jn(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=jn(t,Gn)),e.b=new Kn(t,e.i))}function Nn(e,t,n){e.b.set(t,n)}function Dn(e,t){return e.b.get(t)}function Fn(e){return e instanceof Pn?new Pn(e):new Pn(e,void 0)}function Un(e,t,n,r){var i=new Pn(null,void 0);return e&&Rn(i,e),t&&(i.a=t),n&&On(i,n),r&&(i.f=r),i}function zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Bn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(jn(t,Vn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(jn(t,Vn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(jn(n,"/"==n.charAt(0)?Wn:Hn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",jn(n,qn)),e.join("")},Pn.prototype.resolve=function(e){var t=new Pn(this),n=!!e.c;n?Rn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)On(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(oe(i,"./")||oe(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Ln(t,Zn(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Vn=/[#\/\?@]/g,Hn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,qn=/#/g;function Kn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Xn(e){e.a||(e.a=new Cn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Yn(e){var t=Mn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Kn(null,void 0);e=Tn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function $n(e,t){Xn(e),t=er(e,t),An(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,An((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&In(e)))}function Qn(e,t){return Xn(e),t=er(e,t),An(e.a.b,t)}function Jn(e,t,n){$n(e,t),0<n.length&&(e.c=null,e.a.set(er(e,t),Y(n)),e.b+=n.length)}function Zn(e){var t=new Kn;return t.c=e.c,e.a&&(t.a=new Cn(e.a),t.b=e.b),t}function er(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tr(e){var t=[];return rr(new nr,e,t),t.join("")}function nr(){}function rr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),rr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),ar(r,n),n.push(":"),rr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":ar(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Kn.prototype).add=function(e,t){Xn(this),this.c=null,e=er(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Xn(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Xn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){Xn(this);var t=[];if("string"==typeof e)Qn(this,e)&&(t=X(t,this.a.get(er(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=X(t,e[n])}return t},e.set=function(e,t){return Xn(this),this.c=null,Qn(this,e=er(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(e,t){t.push('"',e.replace(or,(function(e){var t=ir[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ir[e]=t),t})),'"')}function sr(){var e=Cr();return Ge&&!!it&&11==it||/Edge\/\d+/.test(e)}function ur(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function lr(e,t){t=t||a.window;var n="about:blank";e&&(n=Ae(Oe(e)||De)),t.location.href=n}function cr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<cr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function hr(e){return!!((e=(e||Cr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function fr(e){e=e||a.window;try{e.close()}catch(t){}}function dr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(t.target=r,oe(n,"crios/")&&(t.target="_blank")),Er(Cr())==xr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Ie?n:Oe(void 0!==n.href?n.href:String(n))||De,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((le("iPhone")&&!le("iPod")&&!le("iPad")||le("iPad")||le("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(me(a=dt(document,"A"),"HTMLAnchorElement"),t=t instanceof Ie?t:Le(t),a.href=Ae(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=ze("",r,n,a),e=Ae(t),a&&(Ke&&oe(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Be(e)+'">',e=new Fe(e=(r=we())?r.createHTML(e):e,null,Ue),r=a.document)&&(r.write(function(e){return e instanceof Fe&&e.constructor===Fe?e.a:(O("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")}(e)),r.close())):(a=ze(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function vr(){var e=null;return new bt((function(t){"complete"==a.document.readyState?t():(e=function(){t()},ln(window,"load",e))})).o((function(t){throw cn(window,"load",e),t}))}function gr(e){return e=e||Cr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var e=a.window;try{return!(!e||e==e.top)}catch(t){return!1}}function br(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return NI.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":NI.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function wr(){var e=_r();return"ReactNative"===e||"Node"===e}var xr="Firefox",Sr="Chrome";function Er(e){var t=e.toLowerCase();return oe(t,"opera/")||oe(t,"opr/")||oe(t,"opios/")?"Opera":oe(t,"iemobile")?"IEMobile":oe(t,"msie")||oe(t,"trident/")?"IE":oe(t,"edge/")?"Edge":oe(t,"firefox/")?xr:oe(t,"silk/")?"Silk":oe(t,"blackberry")?"Blackberry":oe(t,"webos")?"Webos":!oe(t,"safari/")||oe(t,"chrome/")||oe(t,"crios/")||oe(t,"android")?!oe(t,"chrome/")&&!oe(t,"crios/")||oe(t,"edge/")?oe(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Sr:"Safari"}var Tr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Mr(e,t){t=t||[];var n,r=[],i={};for(n in Tr)i[Tr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Er(i=Cr()):"Worker"===r&&(r=Er(i=Cr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function Ir(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Ar(){try{var e=a.localStorage,t=Fr();if(e)return e.setItem(t,"1"),e.removeItem(t),!sr()||!!a.indexedDB}catch(a_){return br()&&!!a.indexedDB}return!1}function kr(){return(Pr()||"chrome-extension:"===Rr()||gr())&&!wr()&&Ar()&&!br()}function Pr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Or(e){return!hr(e=e||Cr())&&Er(e)!=xr}function Lr(e){return void 0===e?null:tr(e)}function Nr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Dr(e){if(null!==e)return JSON.parse(e)}function Fr(e){return e||Math.floor(1e9*Math.random()).toString()}function Ur(e){return"Safari"!=Er(e=e||Cr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function jr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Cr(),t=_r(),this.b=hr(e)||"ReactNative"===t}function Br(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Vr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(a_){}return null}function Hr(){return!(!Ir("fireauth.oauthhelper",a)&&!Ir("fireauth.iframe",a))}jr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!Pr()&&"chrome-extension:"!==Rr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function qr(e){Gr[e]||(Gr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Kr={};Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Kr.abcd}catch(ut){Wr=!1}function Xr(e,t,n){Wr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Yr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Xr(e,n,t[n])}function $r(e){var t={};return Yr(t,e),t}function Qr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Xr(t,n,Qr(e[n]));return t}function Jr(e){var t=e&&(e[ri]?"phone":null);if(!(t&&e&&e[ni]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",e[ni]),Xr(this,"displayName",e[ei]||null);var n=null;e[ti]&&(n=new Date(e[ti]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",t)}function Zr(e){try{var t=new ii(e)}catch(a_){t=null}return t}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ti="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(e){Jr.call(this,e),Xr(this,"phoneNumber",e[ri])}function oi(e){var t={},n=e[li],r=e[hi],i=e[fi];if(e=Zr(e[ci]),!i||i!=si&&i!=ui&&!n||i==ui&&!r||i==ai&&!e)throw Error("Invalid checkActionCode response!");i==ui?(t[pi]=n||null,t[vi]=n||null,t[di]=r):(t[pi]=r||null,t[vi]=r||null,t[di]=n||null),t[mi]=e||null,Xr(this,yi,i),Xr(this,gi,Qr(t))}w(ii,Jr),ii.prototype.w=function(){var e=ii.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var ai="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",li="email",ci="mfaInfo",hi="newEmail",fi="requestType",di="email",pi="fromEmail",mi="multiFactorInfo",vi="previousEmail",gi="data",yi="operation";function bi(e){var t=Dn(e=Fn(e),_i)||null,n=Dn(e,wi)||null,r=Dn(e,Ei)||null;if(r=r&&Mi[r]||null,!t||!n||!r)throw new S("argument-error",_i+", "+wi+"and "+Ei+" are required in a valid action code URL.");Yr(this,{apiKey:t,operation:r,code:n,continueUrl:Dn(e,xi)||null,languageCode:Dn(e,Si)||null,tenantId:Dn(e,Ti)||null})}var _i="apiKey",wi="oobCode",xi="continueUrl",Si="languageCode",Ei="mode",Ti="tenantId",Mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:si,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function Ci(e){try{return new bi(e)}catch(t){return null}}function Ii(e){var t=e[Oi];if(void 0===t)throw new S("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new S("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Ai];if(n&&"object"==typeof n){t=n[Di];var r=n[Li];if(n=n[Ni],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Ni+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new S("argument-error",Di+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(t=e[Ri])&&"object"==typeof t){if("string"==typeof(t=t[Fi])&&t.length)this.f=t;else if(void 0!==t)throw new S("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new S("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(t=e[Pi])&&"boolean"!=typeof t)throw new S("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[ki])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new S("argument-error",ki+" property must be a non empty string when specified.");this.i=e||null}var Ai="android",ki="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",Oi="url",Li="installApp",Ni="minimumVersion",Di="packageName",Fi="bundleId";function Ui(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var zi=null;function ji(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!zi){zi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Bi(e){var t=Hi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Vi(e){try{return new Bi(e)}catch(t){return null}}function Hi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=ji(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],qi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Wi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ki(e){for(var t in qi)if(qi[t].fa==e)return qi[t];return null}function Xi(e){var t={};t["facebook.com"]=Zi,t["google.com"]=to,t["github.com"]=eo,t["twitter.com"]=no;var n=e&&e[$i];try{if(n)return t[n]?new t[n](e):new Ji(e);if(void 0!==e[Yi])return new Qi(e)}catch(r){}return null}var Yi="idToken",$i="providerId";function Qi(e){var t=e[$i];if(!t&&e[Yi]){var n=Vi(e[Yi]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Xr(this,"providerId",t),Xr(this,"isNewUser",n)}function Ji(e){Qi.call(this,e),Xr(this,"profile",Qr((e=Dr(e.rawUserInfo||"{}"))||{}))}function Zi(e){if(Ji.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(e){if(Ji.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function to(e){if(Ji.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(e){if(Ji.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",e.screenName||null)}function ro(e){var t=Fn(e),n=Dn(t,"link"),r=Dn(Fn(n),"link");return t=Dn(t,"deep_link_id"),Dn(Fn(t),"link")||t||r||n||e}function io(e,t){if(!e&&!t)throw new S("internal-error","Internal assert: no raw session string available");if(e&&t)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?oo:ao}w(Ji,Qi),w(Zi,Ji),w(eo,Ji),w(to,Ji),w(no,Ji);var oo="enroll",ao="signin";function so(){}function uo(e,t){return e.then((function(e){if(e[Qa]){var n=Vi(e[Qa]);if(!n||t!=n.i)throw new S("user-mismatch");return e}throw new S("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==M+"user-not-found"?new S("user-mismatch"):e}))}function lo(e,t){if(!t)throw new S("internal-error","failed to construct a credential");this.a=t,Xr(this,"providerId",e),Xr(this,"signInMethod",e)}function co(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function ho(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new lo(e.providerId,e.pendingToken)}catch(t){}return null}function fo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Xr(this,"idToken",t.idToken),t.accessToken&&Xr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Xr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Xr(this,"accessToken",t.oauthToken),Xr(this,"secret",t.oauthTokenSecret)}Xr(this,"providerId",e),Xr(this,"signInMethod",n)}function po(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Yn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function mo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new fo(e.providerId,t,e.signInMethod)}catch(a_){}}return null}function vo(e,t){this.Qc=t||[],Yr(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Ki(e)||{}).Ja||null,this.pb=null}function go(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,e,[])}function yo(e){vo.call(this,e,Gi),this.a=[]}function bo(){yo.call(this,"facebook.com")}function _o(e){if(!e)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new bo).credential({accessToken:t})}function wo(){yo.call(this,"github.com")}function xo(e){if(!e)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new wo).credential({accessToken:t})}function So(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new So).credential({idToken:n,accessToken:t})}function To(){vo.call(this,"twitter.com",Wi)}function Mo(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Co(e,t,n){this.a=e,this.f=t,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Io(e){return e&&e.email&&e.password?new Co(e.email,e.password,e.signInMethod):null}function Ao(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function ko(e,t){if(!(t=Po(t)))throw new S("argument-error","Invalid email link!");return new Co(e,t.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Po(e){return(e=Ci(e=ro(e)))&&e.operation===si?e:null}function Ro(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new S("internal-error");this.a=e,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function Oo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Ro(t)}return null}function Lo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function No(e){try{this.a=e||NI.auth()}catch(t){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Do(e,t){if(!e)throw new S("missing-verification-id");if(!t)throw new S("missing-verification-code");return new Ro({fb:e,eb:t})}function Fo(e){if(e.temporaryProof&&e.phoneNumber)return new Ro({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Eo(o,n);case"facebook.com":return _o(n);case"github.com":return xo(n);case"twitter.com":return Mo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new lo(t,a):new fo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new yo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Uo(e){if(!e.isOAuthProvider)throw new S("invalid-oauth-provider")}function zo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function jo(e){return(e=e||{}).type?new zo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&E(e.error),e.postBody,e.tenantId):null}function Bo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Mt(this.a):Mt(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ka=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},lo.prototype.ka=function(e){return bs(e,co(this))},lo.prototype.b=function(e,t){var n=co(this);return n.idToken=t,_s(e,n)},lo.prototype.c=function(e,t){return uo(ws(e,co(this)),t)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(e){return bs(e,po(this))},fo.prototype.b=function(e,t){var n=po(this);return n.idToken=t,_s(e,n)},fo.prototype.c=function(e,t){return uo(ws(e,po(this)),t)},fo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},vo.prototype.Ka=function(e){return this.Jb=fe(e),this},w(go,vo),w(yo,vo),yo.prototype.Ca=function(e){return G(this.a,e)||this.a.push(e),this},yo.prototype.Rb=function(){return Y(this.a)},yo.prototype.credential=function(e,t){var n;if(!(n=p(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},w(bo,yo),Xr(bo,"PROVIDER_ID","facebook.com"),Xr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(wo,yo),Xr(wo,"PROVIDER_ID","github.com"),Xr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),w(So,yo),Xr(So,"PROVIDER_ID","google.com"),Xr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),w(To,vo),Xr(To,"PROVIDER_ID","twitter.com"),Xr(To,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?nu(e,As,{email:this.a,oobCode:this.f}):nu(e,Qs,{email:this.a,password:this.f})},Co.prototype.b=function(e,t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?nu(e,ks,{idToken:t,email:this.a,oobCode:this.f}):nu(e,Hs,{idToken:t,email:this.a,password:this.f})},Co.prototype.c=function(e,t){return uo(this.ka(e),t)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Ao,{PROVIDER_ID:"password"}),Yr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(e){return e.gb(Lo(this))},Ro.prototype.b=function(e,t){var n=Lo(this);return n.idToken=t,nu(e,Zs,n)},Ro.prototype.c=function(e,t){var n=Lo(this);return n.operation="REAUTH",uo(e=nu(e,eu,n),t)},Ro.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},No.prototype.gb=function(e,t){var n=this.a.a;return Mt(t.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=p(e)?e.session:null,o=p(e)?e.phoneNumber:e;return(i&&i.type==oo?i.Ha().then((function(e){return function(e,t){return nu(e,Gs,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(t){return function(e,t){return nu(e,qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return nu(e,Bs,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(No,{PROVIDER_ID:"phone"}),Yr(No,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},zo.prototype.T=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Vo,Ho=null;function Wo(e){var t="unauthorized-domain",n=void 0,r=Fn(e);e=r.a,"chrome-extension"==(r=r.c)?n=je("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=je("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",S.call(this,t,n)}function Go(e,t,n){S.call(this,e,n),(e=t||{}).Kb&&Xr(this,"email",e.Kb),e.ea&&Xr(this,"phoneNumber",e.ea),e.credential&&Xr(this,"credential",e.credential),e.$b&&Xr(this,"tenantId",e.$b)}function qo(e){if(e.code){var t=e.code||"";0==t.indexOf(M)&&(t=t.substring(M.length));var n={credential:Fo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new S(t,e.message||void 0);return new Go(t,n,e.message)}return null}function Ko(){}function Xo(e){return e.c||(e.c=e.b())}function Yo(){}function $o(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(XY){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Qo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Zo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ea(e,t,n){this.reset(e,t,n,void 0,void 0)}function ta(e){this.f=e,this.b=this.c=this.a=null}function na(e,t){this.name=e,this.value=t}w(Wo,S),w(Go,S),Go.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&pe(e,t),e},Go.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,w(Yo,Ko),Yo.prototype.a=function(){var e=$o(this);return e?new ActiveXObject(e):new XMLHttpRequest},Yo.prototype.b=function(){var e={};return $o(this)&&(e[0]=!0,e[1]=!0),e},Vo=new Yo,w(Qo,Ko),Qo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Qo.prototype.b=function(){return{}},(e=Jo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Zo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(e,t,n,r,i){delete this.a},na.prototype.toString=function(){return this.name};var ra=new na("SEVERE",1e3),ia=new na("WARNING",900),oa=new na("CONFIG",700),aa=new na("FINE",500);function sa(e){return e.c?e.c:e.a?sa(e.a):(O("Root logger has no level set."),null)}ta.prototype.log=function(e,t,n){if(e.value>=sa(this).value)for(d(t)&&(t=t()),e=new ea(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ua={},la=null;function ca(e){var t;if(la||(la=new ta(""),ua[""]=la,la.c=oa),!(t=ua[e])){t=new ta(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ca(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,ua[e]=t}return t}function ha(e,t){e&&e.log(aa,t,void 0)}function fa(e){this.f=e}function da(e){bn.call(this),this.u=e,this.h=void 0,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ca("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(fa,Ko),fa.prototype.a=function(){return new da(this.f)},fa.prototype.b=function(e){return function(){return e}}({}),w(da,bn);var pa=0;function ma(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function va(e){e.readyState=4,e.g=null,e.c=null,e.m=null,ga(e)}function ga(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ya(e){bn.call(this),this.headers=new Cn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ba,this.u=this.S=!1}(e=da.prototype).open=function(e,t){if(this.readyState!=pa)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,ga(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,va(this)),this.readyState=pa},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,ga(this)),this.a&&(this.readyState=3,ga(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ma(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?va(this):ga(this),3==this.readyState&&ma(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,va(this))},e.sc=function(e){this.a&&(this.response=e,va(this))},e.Va=function(e){var t=this.i;t&&t.log(ia,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&va(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(ia,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(ia,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),w(ya,bn);var ba="";ya.prototype.b=ca("goog.net.XhrIo");var _a=/^https?$/i,wa=["POST","PUT"];function xa(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Vo.a(),e.C=e.D?Xo(e.D):Xo(Vo),e.a.onreadystatechange=b(e.Wb,e);try{ha(e.b,Pa(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(s){return ha(e.b,Pa(e,"Error opening Xhr: "+s.message)),void Ea(e,s)}t=r||"";var o=new Cn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)B(e,t,void 0);else for(var n=Mn(e),r=Tn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Sa,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.Y()),r=a.FormData&&t instanceof a.FormData,!G(wa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Ia(e),0<e.g&&(e.u=function(e){return Ge&&nt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),ha(e.b,Pa(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=b(e.Ma,e)):e.s=Sn(e.Ma,e.g,e)),ha(e.b,Pa(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(s){ha(e.b,Pa(e,"Send error: "+s.message)),Ea(e,s)}}function Sa(e){return"content-type"==e.toLowerCase()}function Ea(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Ta(e),Ca(e)}function Ta(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Ma(e){if(e.c&&void 0!==o)if(e.C[1]&&4==Aa(e)&&2==ka(e))ha(e.b,Pa(e,"Local request error detected and ignored"));else if(e.i&&4==Aa(e))Sn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Aa(e)){ha(e.b,Pa(e,"Request complete")),e.c=!1;try{var t,n=ka(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.l).match(kn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!_a.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var l=2<Aa(e)?e.a.statusText:""}catch(c){ha(e.b,"Can not get status: "+c.message),l=""}e.h=l+" ["+ka(e)+"]",Ta(e)}}finally{Ca(e)}}}function Ca(e,t){if(e.a){Ia(e);var n=e.a,r=e.C[0]?c:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(XY){(e=e.b)&&e.log(ra,"Problem encountered resetting onreadystatechange: "+XY.message,void 0)}}}function Ia(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(a.clearTimeout(e.s),e.s=null)}function Aa(e){return e.a?e.a.readyState:0}function ka(e){try{return 2<Aa(e)?e.a.status:-1}catch(t){return-1}}function Pa(e,t){return t+" ["+e.P+" "+e.l+" "+ka(e)+"]"}function Ra(e){var t=Ha;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Oa(e,t,n){e.a=!0,e.c=n,e.f=!t,Fa(e)}function La(e){if(e.a){if(!e.v)throw new Ua(e);e.v=!1}}function Na(e,t,n,r){e.g.push([t,n,r]),e.a&&Fa(e)}function Da(e){return W(e.g,(function(e){return d(e[1])}))}function Fa(e){if(e.h&&e.a&&Da(e)){var t=e.h,n=Ba[t];n&&(a.clearTimeout(n.a),delete Ba[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(k(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(l){t=l,e.f=!0,Da(e)||(n=!0)}}e.c=t,r&&(u=b(e.m,e,!0),r=b(e.m,e,!1),t instanceof Ra?(Na(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new ja(t),Ba[t.a]=t,e.h=t.a)}function Ua(){P.call(this)}function za(){P.call(this)}function ja(e){this.a=a.setTimeout(b(this.c,this),0),this.b=e}(e=ya.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ha(this.b,Pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ha(this.b,Pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ca(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ca(this,!0)),ya.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Ma(this):this.Jc())},e.Jc=function(){Ma(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ba:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ra,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ha(this.b,"Can not get response: "+t.message),null}},Ra.prototype.cancel=function(e){if(this.a)this.c instanceof Ra&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new za(this),La(this),Oa(this,!1,e))}},Ra.prototype.m=function(e,t){this.i=!1,Oa(this,e,t)},Ra.prototype.then=function(e,t,n){var r,i,o=new bt((function(e,t){r=e,i=t}));return Na(this,r,(function(e){e instanceof za?o.cancel():i(e)})),o.then(e,t,n)},Ra.prototype.$goog_Thenable=!0,w(Ua,P),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",w(za,P),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",ja.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Va(e){var t,n=document,r=Se(e).toString(),i=dt(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ra(o);return t=window.setTimeout((function(){Wa(i,!0);var e=new Ka(qa,"Timeout reached for loading script "+r);La(s),Oa(s,!1,e)}),5e3),o.Ma=t,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,!1,t),La(s),Oa(s,!0,null))},i.onerror=function(){Wa(i,!0,t);var e=new Ka(Ga,"Error while loading script "+r);La(s),Oa(s,!1,e)},pe(o={},{type:"text/javascript",charset:"UTF-8"}),st(i,o),function(e,t){me(e,"HTMLScriptElement"),e.src=Se(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=a?t=l(t.document):(null===u&&(u=l(a.document)),t=u),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function Ha(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Wa(e,!0,this.Ma)}}function Wa(e,t,n){null!=n&&a.clearTimeout(n),e.onload=c,e.onerror=c,e.onreadystatechange=c,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ga=0,qa=1;function Ka(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),P.call(this,n),this.code=e}function Xa(e){this.f=e}function Ya(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ja,this.g=fe(e.secureTokenHeaders||Za),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||es,this.a=fe(e.firebaseHeaders||ts),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&NI.INTERNAL.node&&NI.INTERNAL.node.XMLHttpRequest)&&!br())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new fa(self):wr()?this.f=new Xa(n):this.f=new Qo,this.b=null}w(Ka,P),w(Xa,Ko),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var $a,Qa="idToken",Ja=new jr(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},es=new jr(3e4,6e4),ts={"Content-Type":"application/json"};function ns(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function rs(e,t){t&&(e.l=is("https://securetoken.googleapis.com/v1/token",t),e.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=is("https://identitytoolkit.googleapis.com/v2/",t))}function is(e,t){return e=Fn(e),t=Fn(t.url),e.f=e.a+e.f,Rn(e,t.c),e.a=t.a,On(e,t.g),e.toString()}function os(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function as(e,t,n,r,i,o,s){(function(){var e=Cr();return!((e=Er(e)!=Sr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Ge&&it&&!(9<it))})()||br()?e=b(e.u,e):($a||($a=new bt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{a[us]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Na(e,null,t,void 0)}(Va(Ee(ss,{onload:us})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=b(e.s,e)),e(t,n,r,i,o,s)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(e,t,n,r,i,o){if(br()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ya(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ha(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),wn(s,"ready",(function(){u&&clearTimeout(u),Ht(this)})),wn(s,"timeout",(function(){u&&clearTimeout(u),Ht(this),t&&t(null)})),xa(s,e,n,r,i)};var ss=new ve(_e,"https://apis.google.com/js/client.js?onload=%{onload}"),us="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(e,t,n,r,i,o,a){var s=Fn(t+n);Nn(s,"key",e.c),a&&Nn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&Nn(s,l,i[l]);return new bt((function(t,n){as(e,s.toString(),(function(e){e?e.error?n(iu(e,o||{})):t(e):n(new S("network-request-failed"))}),r,u?void 0:tr(Nr(i)),e.a,e.v.get())}))}function cs(e){if("string"!=typeof(e=e.email)||!mr.test(e))throw new S("invalid-email")}function hs(e){"email"in e&&cs(e)}function fs(e){if(!e[Qa]){if(e.mfaPendingCredential)throw new S("multi-factor-auth-required",null,fe(e));throw new S("internal-error")}}function ds(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new S("internal-error")}else{if(!e.sessionInfo)throw new S("missing-verification-id");if(!e.code)throw new S("missing-verification-code")}}Ya.prototype.s=function(e,t,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.Ab=function(){return nu(this,Ws,{})},Ya.prototype.Cb=function(e,t){return nu(this,Vs,{idToken:e,email:t})},Ya.prototype.Db=function(e,t){return nu(this,Hs,{idToken:e,password:t})};var ps={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(e){if(!e.phoneVerificationInfo)throw new S("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new S("missing-verification-code")}function vs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new S("internal-error")}function gs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(Qn(e=new Kn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ys(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=qo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=qo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=qo(e)):e.errorMessage&&(t=ru(e.errorMessage)),t)throw t;fs(e)}function bs(e,t){return t.returnIdpCredential=!0,nu(e,Ks,t)}function _s(e,t){return t.returnIdpCredential=!0,nu(e,Ys,t)}function ws(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,nu(e,Xs,t)}function xs(e){if(!e.oobCode)throw new S("invalid-action-code")}(e=Ya.prototype).Eb=function(e,t){var n={idToken:e},r=[];return ce(ps,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,Vs,n)},e.wb=function(e,t){return pe(e={requestType:"PASSWORD_RESET",email:e},t),nu(this,Fs,e)},e.xb=function(e,t){return pe(e={requestType:"EMAIL_SIGNIN",email:e},t),nu(this,Ls,e)},e.vb=function(e,t){return pe(e={requestType:"VERIFY_EMAIL",idToken:e},t),nu(this,Ns,e)},e.Fb=function(e,t,n){return pe(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),nu(this,Ds,e)},e.gb=function(e){return nu(this,Js,e)},e.ob=function(e,t){return nu(this,js,{oobCode:e,newPassword:t})},e.Sa=function(e){return nu(this,Es,{oobCode:e})},e.kb=function(e){return nu(this,Ss,{oobCode:e})};var Ss={endpoint:"setAccountInfo",A:xs,Z:"email",B:!0},Es={endpoint:"resetPassword",A:xs,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new S("internal-error")},B:!0},Ts={endpoint:"signupNewUser",A:function(e){if(cs(e),!e.password)throw new S("weak-password")},G:fs,V:!0,B:!0},Ms={endpoint:"createAuthUri",B:!0},Cs={endpoint:"deleteAccount",O:["idToken"]},Is={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new S("internal-error")}},As={endpoint:"emailLinkSignin",O:["email","oobCode"],A:cs,G:fs,V:!0,B:!0},ks={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:cs,G:fs,V:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ms,G:fs,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:fs,B:!0,Na:!0},Os={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new S("internal-error");cs(e)},Z:"email",B:!0},Ns={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new S("internal-error")},Z:"email",B:!0},Ds={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new S("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new S("internal-error");cs(e)},Z:"email",B:!0},Us={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new S("internal-error")}},js={endpoint:"resetPassword",A:xs,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Vs={endpoint:"setAccountInfo",O:["idToken"],A:hs,V:!0},Hs={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(hs(e),!e.password)throw new S("weak-password")},G:fs,V:!0},Ws={endpoint:"signupNewUser",G:fs,V:!0,B:!0},Gs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new S("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},qs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ks={endpoint:"verifyAssertion",A:vs,Za:gs,G:ys,V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:vs,Za:gs,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new S("user-not-found");if(e.errorMessage)throw ru(e.errorMessage);fs(e)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(e){if(vs(e),!e.idToken)throw new S("internal-error")},Za:gs,G:ys,V:!0},$s={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new S("invalid-custom-token")},G:fs,V:!0,B:!0},Qs={endpoint:"verifyPassword",A:function(e){if(cs(e),!e.password)throw new S("wrong-password")},G:fs,V:!0,B:!0},Js={endpoint:"verifyPhoneNumber",A:ds,G:fs,B:!0},Zs={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new S("internal-error");ds(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",qo(e);fs(e)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:fs,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Qa]^!!e.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function nu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.O))return Ct(new S("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return Mt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),ls(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new S("internal-error");return r[t.Z]}))}function ru(e){return iu({error:{errors:[{message:e}],code:400,message:e}})}function iu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",pe(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],t);return!t&&e&&(t=Lr(e)),new S("internal-error",t)}function ou(e){this.b=e,this.a=null,this.sb=function(e){return(lu||(lu=new bt((function(e,t){function n(){zr(),Ir("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){zr(),t(Error("Network Error"))},timeout:su.get()})}if(Ir("gapi.iframes.Iframe"))e();else if(Ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ir("gapi.load")?n():t(Error("Network Error"))},Mt(Va(r=Ee(au,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw lu=null,e})))).then((function(){return new bt((function(t,n){Ir("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new ve(_e,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new jr(3e4,6e4),uu=new jr(5e3,15e3),lu=null;function cu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Un((e=Fn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Un("https",this.l,null,"/__/auth/iframe"),this.a=e,Nn(this.a,"apiKey",this.h),Nn(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(e){try{return NI.app(e).auth().Ga()}catch(t){return[]}}function du(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pu(e){var t=ur();return function(e){return nu(e,Us,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Fn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Fn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:pr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Wo(ur())}))}function mu(e){return e.m||(e.m=vr().then((function(){if(!e.u){var t=e.c,n=e.i,r=fu(e.b),i=new cu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=Y(r||[]),e.u=i.toString()}e.v=new ou(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=jo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Mt(n)}return n.status="ERROR",Mt(n)}))}(e)}))),e.m}function vu(e){return e.l||(e.C=e.c?Mr(e.c,fu(e.b)):null,e.l=new Ya(e.g,A(e.i),e.C),e.f&&rs(e.l,e.f)),e.l}function gu(e,t,n,r,i,o,a,s,u,l,c,h){return(e=new hu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=fe(u||null),e.f=l,e.zb(c).toString()}function yu(e){if(this.a=e||NI.INTERNAL.reactNative&&NI.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(e){this.b=e,this.a={},this.f=b(this.c,this)}cu.prototype.toString=function(){return this.f?Nn(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Nn(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Nn(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},hu.prototype.zb=function(e){return this.h=e,this},hu.prototype.toString=function(){if(this.v){var e=Fn(this.v.url);e=Un(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Un("https",this.u,null,"/__/auth/handler");if(Nn(e,"apiKey",this.s),Nn(e,"appName",this.c),Nn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=NI.app(this.c).auth().la()}catch(s){n=null}for(var r in t.pb=n,Nn(e,"providerId",this.a.providerId),t=Nr((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=fe(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),he(t)||Nn(e,"customParameters",Lr(t))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Nn(e,"scopes",n.join(","))),this.l?Nn(e,"redirectUrl",this.l):$n(e.b,"redirectUrl"),this.g?Nn(e,"eventId",this.g):$n(e.b,"eventId"),this.i?Nn(e,"v",this.i):$n(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Dn(e,a)&&Nn(e,a,this.b[a]);return this.h?Nn(e,"tid",this.h):$n(e.b,"tid"),this.f?Nn(e,"eid",this.f):$n(e.b,"eid"),(a=fu(this.c)).length&&Nn(e,"fw",a.join(",")),e.toString()},(e=du.prototype).Pb=function(e,t,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return mu(e).then((function(){return function(e,t){return e.sb.then((function(){return new bt((function(n){e.a.send(t.type,t,n,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&fr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new bt((function(t){return function n(){En(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return En(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Cr();return!Or(e)&&!Ur(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return Ct(new S("popup-blocked"));if(a&&!Or())return this.ma().o((function(t){fr(e),i(t)})),r(),Mt();this.a||(this.a=pu(vu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw fr(e),i(t),t}));return r(),t})).then((function(){(Uo(n),a)||lr(gu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=pu(vu(this)));var i=this;return this.a.then((function(){Uo(t),lr(gu(i.s,i.g,i.b,e,t,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return mu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new S("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){K(this.h,(function(t){return t==e}))},(e=yu.prototype).get=function(e){return Mt(this.a.getItem(e)).then((function(e){return e&&Dr(e)}))},e.set=function(e,t){return Mt(this.a.setItem(e,Lr(t)))},e.U=function(e){return Mt(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var _u,wu=[];function xu(e,t,n){he(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Su(e){this.a=e}function Eu(e){this.c=e,this.b=!1,this.a=[]}function Tu(e,t,n,r){var i,o,a,s,u=n||{},l=null;if(e.b)return Ct(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new bt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(l),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Mu(e,l),t})).o((function(t){throw Mu(e,l),t}))}function Mu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(e.a,(function(e){return e==t}))}}function Cu(){if(!Pu())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;br()&&self?(this.v=function(){var e=br()?self:null;if(B(wu,(function(n){n.b==e&&(t=n)})),!t){var t=new bu(e);wu.push(t)}return t}(),xu(this.v,"keyChanged",(function(t,n){return Du(e).then((function(t){return 0<t.length&&B(e.a,(function(e){e(t)})),{keyProcessed:G(t,n.key)}}))})),xu(this.v,"ping",(function(){return Mt(["keyChanged"])}))):function(){var e=a.navigator;return e&&e.serviceWorker?Mt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Mt(null)}().then((function(t){(e.h=t)&&(e.g=new Eu(new Su(t)),Tu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&G(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Iu(e){return new bt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new bt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Iu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Au(e){return e.i||(e.i=Iu(e)),e.i}function ku(e,t){var n=0;return new bt((function r(i,o){Au(e).then(t).then(i).o((function(t){if(!(3<++n))return Au(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Pu(){try{return!!a.indexedDB}catch(ut){return!1}}function Ru(e){return e.objectStore("firebaseLocalStorage")}function Ou(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Lu(e){return new bt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Nu(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Tu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Mt()}function Du(e){return Au(e).then((function(e){var t=Ru(Ou(e,!1));return t.getAll?Lu(t.getAll()):new bt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=cr(e.c,n),e.c=n}return r}))}function Fu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Uu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Mt().then((function(){if(Pu()){var e=Fr(),r="__sak"+e;return _u||(_u=new Cu),(n=_u).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){B(t.a,(function(t){t(e)}))})),e}))}function zu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var e="Node"==_r();if(!(e=Bu()||e&&NI.INTERNAL.node&&NI.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Bu()||NI.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var e=a.localStorage,t=Fr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(a_){return null}}function Vu(){this.type="nullStorage"}function Hu(){if(!function(){var e="Node"==_r();if(!(e=Wu()||e&&NI.INTERNAL.node&&NI.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Wu()||NI.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var e=a.sessionStorage,t=Fr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(a_){return null}}function Gu(){var e={};e.Browser=Xu,e.Node=Yu,e.ReactNative=$u,e.Worker=Qu,this.a=e[_r()]}bu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];B(r,(function(t){i.push(Mt().then((function(){return t(e.origin,e.data.data)})))})),At(i).then((function(r){var i=[];B(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),B(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Su.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Eu.prototype.close=function(){for(;0<this.a.length;)Mu(this,this.a[0]);this.b=!0},(e=Cu.prototype).set=function(e,t){var n=this,r=!1;return ku(this,(function(t){return Lu((t=Ru(Ou(t,!0))).get(e))})).then((function(i){return ku(n,(function(o){if(o=Ru(Ou(o,!0)),i)return i.value=t,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Lu(o.add(a))}))})).then((function(){return n.c[e]=t,Nu(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return ku(this,(function(t){return Lu(Ru(Ou(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return ku(this,(function(r){return n=!0,t.b++,Lu(Ru(Ou(r,!0)).delete(e))})).then((function(){return delete t.c[e],Nu(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Du(e).then((function(t){0<t.length&&B(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Fu(e),t()}(this),this.a.push(e)},e.ia=function(e){K(this.a,(function(t){return t==e})),0==this.a.length&&Fu(this)},(e=Uu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){K(this.a,(function(t){return t==e}))},(e=zu.prototype).get=function(e){return Mt(this.a[e])},e.set=function(e,t){return this.a[e]=t,Mt()},e.U=function(e){return delete this.a[e],Mt()},e.ca=function(){},e.ia=function(){},(e=ju.prototype).get=function(e){var t=this;return Mt().then((function(){return Dr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Mt().then((function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},e.ca=function(e){a.window&&sn(a.window,"storage",e)},e.ia=function(e){a.window&&cn(a.window,"storage",e)},(e=Vu.prototype).get=function(){return Mt(null)},e.set=function(){return Mt()},e.U=function(){return Mt()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(e){var t=this;return Mt().then((function(){return Dr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Mt().then((function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var qu,Ku,Xu={F:ju,cb:Hu},Yu={F:ju,cb:Hu},$u={F:yu,cb:Vu},Qu={F:ju,cb:Vu},Ju={rd:"local",NONE:"none",td:"session"};function Zu(){var e=!(Ur(Cr())||!yr()),t=Or(),n=Ar();this.m=e,this.h=t,this.l=n,this.a={},qu||(qu=new Gu),e=qu;try{this.g=!sr()&&Hr()||!a.indexedDB?new e.a.F:new Uu(br()?new zu:new e.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=b(this.Zb,this),this.b={}}function el(){return Ku||(Ku=new Zu),Ku}function tl(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function nl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function rl(e,t,n){return n=nl(t,n),"local"==t.F&&(e.b[n]=null),tl(e,t.F).U(n)}function il(e){e.c&&(clearInterval(e.c),e.c=null)}function ol(e){this.a=e,this.b=el()}(e=Zu.prototype).get=function(e,t){return tl(this,e.F).get(nl(e,t))},e.set=function(e,t,n){var r=nl(e,n),i=this,o=tl(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=nl(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),he(this.a)&&(tl(this,"local").ca(this.f),this.h||(sr()||!Hr())&&a.indexedDB||!this.l||function(e){il(e),e.c=setInterval((function(){for(var t in e.a){var n=a.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Yt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=nl(e,t),this.a[e]&&(K(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),he(this.a)&&(tl(this,"local").ia(this.f),il(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?tl(this,"local").ia(this.f):il(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.nb(t))},Ge&&it&&10==it&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else B(e,b(this.nb,this))},e.nb=function(e){this.a[e]&&B(this.a[e],(function(e){e()}))};var al,sl={name:"authEvent",F:"local"};function ul(){this.a=el()}function ll(e,t){this.b=cl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===al&&(al=a.Int32Array?new Int32Array(gl):gl),this.reset()}w(ll,(function(){this.b=-1}));for(var cl=64,hl=cl-1,fl=[],dl=0;dl<hl;dl++)fl[dl]=0;var pl=X(128,fl);function ml(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|al[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function vl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(ml(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(ml(e),i=0)}}e.c=i,e.g+=n}ll.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var gl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yl(){ll.call(this,8,bl)}w(yl,ll);var bl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _l(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new ul,this.g=new ol(this.h),this.f=null,this.b=[],this.a=this.c=null}function wl(e){return new S("invalid-cordova-configuration",e)}function xl(e){var t=new yl;vl(t,e),e=[];var n=8*t.g;56>t.c?vl(t,pl,56-t.c):vl(t,pl,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(ml(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return H(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Sl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function El(e){return e.f||(e.f=e.ma().then((function(){return new bt((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Tl(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ro(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Dr(Dn(o=Fn(i),"firebaseError")||null))?E(o):null)?new zo(r.c,r.b,null,null,o,null,r.T()):new zo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Sl(e,i)}))}var n=new zo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=En(500).then((function(){return Tl(e).then((function(){r||Sl(e,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Ir("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},Ho||(Ho=new Bo),function(e){var t=Ho;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=Ir("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Tl(e){var t=null;return function(e){return e.b.get(sl,e.a).then((function(e){return jo(e)}))}(e.g).then((function(n){return t=n,rl((n=e.g).b,sl,n.a)})).then((function(){return t}))}function Ml(e){this.a=e,this.b=el()}(e=_l.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?vr().then((function(){return new bt((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Ct(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ir("universalLinks.subscribe",a))throw wl("cordova-universal-links-plugin-fix is not installed");if(void 0===Ir("BuildInfo.packageName",a))throw wl("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ir("cordova.plugins.browsertab.openUrl",a))throw wl("cordova-plugin-browsertab is not installed");if("function"!=typeof Ir("cordova.InAppBrowser.open",a))throw wl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},e.Pb=function(e,t){return t(new S("operation-not-supported-in-this-environment")),Mt()},e.Nb=function(){return Ct(new S("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return Ct(new S("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,l=null,c=null;return this.c=Mt().then((function(){return Uo(t),El(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new zo(t,r,null,o,new S("no-auth-event"),null,i),u=Ir("BuildInfo.packageName",a);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var l=Ir("BuildInfo.displayName",a),c={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Ct(new S("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=xl(o),c.sessionId=o;var h=gu(e.v,e.i,e.l,t,n,null,r,e.m,c,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(sl,s.w(),t)})).then((function(){var t=Ir("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new S("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Ir("cordova.plugins.browsertab.openUrl",a)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ir("cordova.InAppBrowser.open",a)))throw new S("invalid-cordova-configuration");t=Cr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new bt((function(e,t){u=function(){var t=Ir("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){s||(s=En(2e3).then((function(){t(new S("redirect-cancelled-by-user"))})))},c=function(){Br()&&l()},o.addEventListener("resume",l,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return Tl(i).then((function(){throw e}))}))})).oa((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),El(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new zo("unknown",null,null,null,new S("no-auth-event")),e(t))}))},e.Ta=function(e){K(this.b,(function(t){return t==e}))};var Cl={name:"pendingRedirect",F:"session"};function Il(e){return rl(e.b,Cl,e.a)}function Al(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Wl,this.C=new Yl,this.g=new Ml(Vl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=kl(this.D,this.v,this.m,T,this.J)}function kl(e,t,n,r,i){var o=NI.SDK_VERSION||null;return gr()?new _l(e,t,n,o,r,i):new du(e,t,n,o,r,i)}function Pl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Rl(e){e.a.Yb()&&Pl(e).o((function(t){var n=new zo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Ul(t)&&e.s(n)})),e.a.Ub()||Gl(e.b)}function Ol(e,t){G(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Cl,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Il(e.g).then((function(){Pl(e).o((function(t){var n=new zo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Ul(t)&&e.s(n)}))})):Rl(e)})).o((function(){Rl(e)}))}function Ll(e,t){K(e.h,(function(e){return e==t}))}Al.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=kl(this.D,this.v,this.m,null,this.J),this.i={}},Al.prototype.s=function(e){if(!e)throw new S("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Gl(this.b),t};var Nl=new jr(2e3,1e4),Dl=new jr(3e4,6e4);function Fl(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Ul(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function zl(e,t,n,r,i){var o;return function(e){return e.b.set(Cl,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Ul(t))throw new S("operation-not-supported-in-this-environment");return o=t,Il(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new bt((function(){})):Il(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function jl(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Nl.get())}Al.prototype.ra=function(){return this.b.ra()};var Bl={};function Vl(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Hl(e,t,n,r){var i=Vl(t,n,r);return Bl[i]||(Bl[i]=new Al(e,t,n,r)),Bl[i]}function Wl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gl(e){e.g||(e.g=!0,Xl(e,!1,null,null))}function ql(e){e.g&&!e.i&&Xl(e,!1,null,null)}function Kl(e,t){if(e.b=function(){return Mt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Xl(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Ct(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Kl(e,n):Kl(e,{user:null}),e.f=[],e.c=[]}function Yl(){}function $l(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function Ql(e,t){this.a=t,Xr(this,"verificationId",e)}function Jl(e,t,n,r){return new No(e).gb(t,n).then((function(e){return new Ql(e,r)}))}function Zl(e){var t=Hi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:e,expirationTime:Vr(1e3*t.exp),authTime:Vr(1e3*t.auth_time),issuedAtTime:Vr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ec(e,t,n){var r=t&&t[nc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=fe(t),this.g=n,this.c=new io(null,r),this.b=[];var i=this;B(t[tc]||[],(function(e){(e=Zr(e))&&i.b.push(e)})),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Wl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wl.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Xl(this,!0,null,e.a),Mt()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Xl(e,s,t,null)})).o((function(t){Xl(e,s,null,t)}))}(this,e,t):Ct(new S("invalid-auth-event")):(Xl(this,!1,null,null),Mt())}else Ct(new S("invalid-auth-event"))},Wl.prototype.ra=function(){var e=this;return new bt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new S("timeout");e.a&&e.a.cancel(),e.a=En(Dl.get()).then((function(){e.b||(e.g=!0,Xl(e,!0,null,t))}))}(e))}))},Yl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Mt()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Ct(new S("invalid-auth-event"))}else Ct(new S("invalid-auth-event"))},Ql.prototype.confirm=function(e){return e=Do(this.verificationId,e),this.a(e)};var tc="mfaInfo",nc="mfaPendingCredential";function rc(e,t,n,r){S.call(this,"multi-factor-auth-required",r,t),this.b=new ec(e,t,n),Xr(this,"resolver",this.b)}function ic(e,t,n){if(e&&p(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new rc(t,e.serverResponse,n,e.message)}catch(r){}return null}function oc(){}function ac(e){Xr(this,"factorId",e.fa),this.a=e}function sc(e){if(ac.call(this,e),this.a.fa!=No.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uc(e,t){for(var n in Xt.call(this,e),t)this[n]=t[n]}function lc(e,t){this.a=e,this.b=[],this.c=b(this.yc,this),sn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&B(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ni]=e.uid),e.displayName&&(r[ei]=e.displayName),e.enrollmentTime&&(r[ti]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ri]=e.phoneNumber);try{t=new ii(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),cc(this,n)}function cc(e,t){e.b=t,Xr(e,"enrolledFactors",t)}function hc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fc(e,t){e.stop(),e.b=En(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=a.document,t=null;return Br()||!e?Mt():new bt((function(n){t=function(){Br()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){fc(e,!0)})).o((function(t){e.i(t)&&fc(e,!1)}))}function dc(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function pc(e,t){void 0===t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function mc(e,t){e.b=Vi(t[Qa]||""),e.a=t.refreshToken,pc(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function vc(e,t){return function(e,t){return new bt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?as(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(iu(e)):e.access_token&&e.refresh_token?n(e):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Yn(t).toString(),e.g,e.m.get()):r(new S("internal-error"))}))}(e.f,t).then((function(t){return e.b=Vi(t.access_token),e.a=t.refresh_token,pc(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function gc(e,t){this.a=e||null,this.b=t||null,Yr(this,{lastSignInTime:Vr(t||null),creationTime:Vr(e||null)})}function yc(e,t,n,r,i,o){Yr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function bc(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=NI.SDK_VERSION?Mr(NI.SDK_VERSION):null;this.a=new Ya(this.l,A(T),r),(this.u=e.emulatorConfig||null)&&rs(this.a,this.u),this.h=new dc(this.a),Ic(this,t[Qa]),mc(this.h,t),Xr(this,"refreshToken",this.h.a),Pc(this,n||{}),bn.call(this),this.P=!1,this.s&&kr()&&(this.b=Hl(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new hc((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){_c(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Sc(i,e.f)},this.ja=null,this.S=new lc(this,n),Xr(this,"multiFactor",this.S)}function _c(e,t){e.u=t,rs(e.a,t),e.b&&(t=e.b,e.b=Hl(e.s,e.l,e.m,e.u),e.P&&(Ll(t,e),Ol(e.b,e)))}function wc(e,t){e.qa&&cn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&sn(t,"languageCodeChanged",e.Pa)}function xc(e,t){e.$&&cn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&sn(t,"emulatorConfigChanged",e.Ba)}function Sc(e,t){e.aa=t,os(e.a,NI.SDK_VERSION?Mr(NI.SDK_VERSION,e.aa):null)}function Ec(e,t){e.ja&&cn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&sn(t,"frameworkChanged",e.Oa)}function Tc(e){try{return NI.app(e.m).auth()}catch(t){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Mc(e){e.J||e.D.b||(e.D.start(),cn(e,"tokenChanged",e.ba),sn(e,"tokenChanged",e.ba))}function Cc(e){cn(e,"tokenChanged",e.ba),e.D.stop()}function Ic(e,t){e.Aa=t,Xr(e,"_lat",t)}function Ac(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return At(t).then((function(){return e}))}function kc(e){e.b&&!e.P&&(e.P=!0,Ol(e.b,e))}function Pc(e,t){Yr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new gc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Rc(){}function Oc(e){return Mt().then((function(){if(e.J)throw new S("app-deleted")}))}function Lc(e){return H(e.providerData,(function(e){return e.providerId}))}function Nc(e,t){t&&(Dc(e,t.providerId),e.providerData.push(t))}function Dc(e,t){K(e.providerData,(function(e){return e.providerId==t}))}function Fc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Xr(e,t,n)}function Uc(e,t){e!=t&&(Yr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Xr(e,"metadata",function(e){return new gc(e.a,e.b)}(t.metadata)):Xr(e,"metadata",new gc),B(t.providerData,(function(t){Nc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Xr(e,"refreshToken",e.h.a),cc(e.S,t.S.b))}function zc(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return nu(e.a,Os,{idToken:t}).then(b(e.Kc,e))}(e,t).then((function(){return n||Fc(e,"isAnonymous",!1),t}))}))}function jc(e,t){t[Qa]&&e.Aa!=t[Qa]&&(mc(e.h,t),e.dispatchEvent(new uc("tokenChanged")),Ic(e,t[Qa]),Fc(e,"refreshToken",e.h.a))}function Bc(e,t){return zc(e).then((function(){if(G(Lc(e),t))return Ac(e).then((function(){throw new S("provider-already-linked")}))}))}function Vc(e,t,n){return $r({user:e,credential:Fo(t),additionalUserInfo:t=Xi(t),operationType:n})}function Hc(e,t){return jc(e,t),e.reload().then((function(){return e}))}function Wc(e,t,n,r,i){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));if(e.i&&!i)return Ct(e.i);var o=Ki(n.providerId),a=Fr(e.uid+":::"),s=null;(!Or()||yr())&&e.s&&n.isOAuthProvider&&(s=gu(e.s,e.l,e.m,t,n,null,a,NI.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=dr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(qc(e),!i)return e.I().then((function(){}))})).then((function(){return Fl(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new bt((function(n,r){e.na(t,null,new S("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=jl(e.b,e,t,u,a)}))})).then((function(e){return u&&fr(u),e?$r(e):null})).o((function(e){throw u&&fr(u),e})),Kc(e,r,i)}function Gc(e,t,n,r,i){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));if(e.i&&!i)return Ct(e.i);var o=null,a=Fr(e.uid+":::");return r=r().then((function(){if(qc(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Ac(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set($c,e.w(),t.a)),t})).then((function(){return zl(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Qc(e.ha);throw o})).then((function(){if(o)throw o})),Kc(e,r,i)}function qc(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Kc(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Ct(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new uc("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){q(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ic(t.w(),Tc(e),b(e.jc,e))),n||t}))}function Xc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Qa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bc(t,n,e);return e.providerData&&B(e.providerData,(function(e){e&&Nc(i,$r(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Yc(e){this.a=e,this.b=el()}ec.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=fe(t.f);return delete n[tc],delete n[nc],pe(n,e),t.g(n)}))},w(rc,S),oc.prototype.tb=function(e,t,n){return t.type==oo?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),pe(n,{phoneVerificationInfo:Lo(e.a)}),nu(t,Ps,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return pe(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(e.a)}),nu(t,Rs,n)}))}(this,e,t)},w(ac,oc),w(sc,ac),w(uc,Xt),(e=lc.prototype).yc=function(e){cc(this,function(e){var t=[];return B(e.mfaInfo||[],(function(e){(e=Zr(e))&&t.push(e)})),t}(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new io(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return jc(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return nu(r,tu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=V(t.b,(function(e){return e.uid!=n}));return cc(t,r),jc(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(e){return e.w()}))}}},hc.prototype.start=function(){this.a=this.c,fc(this,!0)},hc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ct(new S("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?vc(this,{grant_type:"refresh_token",refresh_token:this.a}):Mt(null):Mt({accessToken:this.b.toString(),refreshToken:this.a})},gc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(bc,bn),bc.prototype.xa=function(e){this.za=e,ns(this.a,e)},bc.prototype.la=function(){return this.za},bc.prototype.Ga=function(){return Y(this.aa)},bc.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Xr(bc.prototype,"providerId","firebase"),(e=bc.prototype).reload=function(){var e=this;return Kc(this,Oc(this).then((function(){return zc(e).then((function(){return Ac(e)})).then(Rc)})))},e.oc=function(e){return this.I(e).then((function(e){return new Zl(e)}))},e.I=function(e){var t=this;return Kc(this,Oc(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new S("internal-error");return e.accessToken!=t.Aa&&(Ic(t,e.accessToken),t.dispatchEvent(new uc("tokenChanged"))),Fc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new S("internal-error");Pc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?H(e,(function(e){return new yc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Nc(this,t[n]);Fc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uc("userReloaded",{hd:e}))},e.Lc=function(e){return qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return Kc(this,e.c(this.a,this.uid).then((function(e){return jc(t,e),n=Vc(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return Kc(this,Bc(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Vc(t,e,"link"),Hc(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return Kc(this,Bc(this,"phone").then((function(){return Jl(Tc(n),e,t,b(n.rb,n))})))},e.Mc=function(e,t){var n=this;return Kc(this,Mt().then((function(){return Jl(Tc(n),e,t,b(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return Kc(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return jc(t,e),t.reload()})))},e.ed=function(e){var t=this;return Kc(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return jc(t,e),t.reload()})))},e.Db=function(e){var t=this;return Kc(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return jc(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Oc(this);var t=this;return Kc(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return jc(t,e),Fc(t,"displayName",e.displayName||null),Fc(t,"photoURL",e.photoUrl||null),B(t.providerData,(function(e){"password"===e.providerId&&(Xr(e,"displayName",t.displayName),Xr(e,"photoURL",t.photoURL))})),Ac(t)})).then(Rc))},e.cd=function(e){var t=this;return Kc(this,zc(this).then((function(n){return G(Lc(t),e)?function(e,t,n){return nu(e,Is,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return B(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),B(Lc(t),(function(e){n[e]||Dc(t,e)})),n[No.PROVIDER_ID]||Xr(t,"phoneNumber",null),Ac(t)})):Ac(t).then((function(){throw new S("no-such-provider")}))})))},e.delete=function(){var e=this;return Kc(this,this.I().then((function(t){return nu(e.a,Cs,{idToken:t})})).then((function(){e.dispatchEvent(new uc("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");wc(e,null),xc(e,null),Ec(e,null),e.N=[],e.J=!0,Cc(e),Xr(e,"refreshToken",null),e.b&&Ll(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?b(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?b(this.Mb,this):null},e.Ec=function(e){var t=this;return Wc(this,"linkViaPopup",e,(function(){return Bc(t,e.providerId).then((function(){return Ac(t)}))}),!1)},e.Nc=function(e){return Wc(this,"reauthViaPopup",e,(function(){return Mt()}),!0)},e.Fc=function(e){var t=this;return Gc(this,"linkViaRedirect",e,(function(){return Bc(t,e.providerId)}),!1)},e.Oc=function(e){return Gc(this,"reauthViaRedirect",e,(function(){return Mt()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kc(this,this.I().then((function(n){return _s(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Vc(i,e,"link"),Hc(i,e)})).then((function(){return o})))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kc(this,Mt().then((function(){return uo(ws(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Vc(i,e,"reauthenticate"),jc(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return Kc(this,this.I().then((function(t){return n=t,void 0===e||he(e)?{}:Ui(new Ii(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return Kc(this,this.I().then((function(e){return r=e,void 0===t||he(t)?{}:Ui(new Ii(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return Kc(this,e=uo(Mt(e),n.uid).then((function(e){return t=Vc(n,e,"reauthenticate"),jc(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&pe(e,this.metadata.w()),B(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),pe(e,this.S.w()),e};var $c={name:"redirectUser",F:"session"};function Qc(e){return rl(e.b,$c,e.a)}function Jc(e){this.a=e,this.b=el(),this.c=null,this.f=function(e){var t=th("local"),n=th("session"),r=th("none");return function(e,t,n){var r=nl(t,n),i=tl(e,t.F);return e.get(t,n).then((function(o){var s=null;try{s=Dr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(eh,e.a).then((function(e){return e?th(e):t}))}))}))})).then((function(t){return e.c=t,Zc(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(th("local"),this.a,b(this.g,this))}function Zc(e,t){var n,r=[];for(n in Ju)Ju[n]!==t&&r.push(rl(e.b,th(Ju[n]),e.a));return r.push(rl(e.b,eh,e.a)),function(e){return new bt((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)It(e[s],_(o,s),a);else t(i)}))}(r)}Jc.prototype.g=function(){var e=this,t=th("local");oh(this,(function(){return Mt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Zc(e,"local").then((function(){e.c=t}))}))}))};var eh={name:"persistence",F:"session"};function th(e){return{name:"authUser",F:e}}function nh(e,t){return oh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function rh(e){return oh(e,(function(){return rl(e.b,e.c,e.a)}))}function ih(e,t,n){return oh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Xc(e||{})}))}))}function oh(e,t){return e.f=e.f.then(t,t),e.f}function ah(e){if(this.l=!1,Xr(this,"settings",new $l),Xr(this,"app",e),!mh(this).options||!mh(this).options.apiKey)throw new S("invalid-api-key");e=NI.SDK_VERSION?Mr(NI.SDK_VERSION):null,this.a=new Ya(mh(this).options&&mh(this).options.apiKey,A(T),e),this.P=[],this.s=[],this.N=[],this.Pa=NI.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=NI.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Jc(mh(this).options.apiKey+":"+mh(this).name),this.D=new Yc(mh(this).options.apiKey+":"+mh(this).name),this.$=bh(this,function(e){var t=mh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get($c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Xc(e||{})}))}(e.D,mh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Qc(e.D)}));return bh(e,t)}(e).then((function(){return ih(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return nh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:rh(e.i)}))):null})).then((function(t){dh(e,t||null)}));return bh(e,n)}(this)),this.h=bh(this,function(e){return e.$.then((function(){return hh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(th("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(e){var t=mh(e).options.authDomain,n=mh(e).options.apiKey;t&&kr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Hl(t,n,mh(e).name,e.R),Ol(e.b,e),vh(e)&&kc(vh(e)),e.m){kc(e.m);var r=e.m;r.xa(e.la()),wc(r,e),Sc(r=e.m,e.J),Ec(r,e),_c(r=e.m,e.R),xc(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Fn(this.R.url);e=$r({protocol:e.c,host:e.a,port:e.g,options:$r({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function sh(e){Xt.call(this,"languageCodeChanged"),this.h=e}function uh(e){Xt.call(this,"emulatorConfigChanged"),this.c=e}function lh(e){Xt.call(this,"frameworkChanged"),this.f=e}function ch(e){return e.Oa||Ct(new S("auth-domain-config-required"))}function hh(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=ch(e).then((function(){return e.b.ra()})).then((function(e){return e?$r(e):null}));return bh(e,t)}function fh(e,t){var n={};return n.apiKey=mh(e).options.apiKey,n.authDomain=mh(e).options.authDomain,n.appName=mh(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var i=new bc(e,t);return n&&(i.ha=n),r&&Sc(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return vh(e)&&t.uid==vh(e).uid?(Uc(vh(e),t),e.da(t)):(dh(e,t),kc(t),e.da(t))})).then((function(){yh(e)}))}function dh(e,t){vh(e)&&(function(e,t){K(e.W,(function(e){return e==t}))}(vh(e),e.Ba),cn(vh(e),"tokenChanged",e.qa),cn(vh(e),"userDeleted",e.za),cn(vh(e),"userInvalidated",e.Aa),Cc(vh(e))),t&&(t.W.push(e.Ba),sn(t,"tokenChanged",e.qa),sn(t,"userDeleted",e.za),sn(t,"userInvalidated",e.Aa),0<e.u&&Mc(t)),Xr(e,"currentUser",t),t&&(t.xa(e.la()),wc(t,e),Sc(t,e.J),Ec(t,e),_c(t,e.R),xc(t,e))}function ph(e,t){var n=null,r=null;return bh(e,t.then((function(t){return n=Fo(t),r=Xi(t),fh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ic(t.w(),e,b(e.kc,e))),n||t})).then((function(){return $r({user:vh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function mh(e){return e.app}function vh(e){return e.currentUser}function gh(e){return vh(e)&&vh(e)._lat||null}function yh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](gh(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](gh(e))}}function bh(e,t){return e.P.push(t),t.oa((function(){q(e.P,t)})),t}function _h(){}function wh(){this.a={},this.b=1e12}Jc.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");e:{for(r in Ju)if(Ju[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(_r()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Pu()&&"none"!==e)throw n;break;default:if(!Ar()&&"none"!==e)throw n}}(e),oh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Zc(n,e)})).then((function(){if(n.c=th(e),t)return n.b.set(n.c,t,n.a)})):Mt()}))},w(ah,bn),w(sh,Xt),w(uh,Xt),w(lh,Xt),(e=ah.prototype).yb=function(e){return bh(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,ns(this.a,this.aa),this.dispatchEvent(new sh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=a.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!e&&vr().then((function(){var e=a.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),a.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,rs(this.a,this.R),this.dispatchEvent(new uh(this.R))}},e.Gc=function(e){this.J.push(e),os(this.a,NI.SDK_VERSION?Mr(NI.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},e.Ga=function(){return Y(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:mh(this).options.apiKey,authDomain:mh(this).options.authDomain,appName:mh(this).name,currentUser:vh(this)&&vh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?b(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ph(i,bs(i.a,o))}))},e.Xc=function(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=this,n=Ki(e.providerId),r=Fr(),i=null;(!Or()||yr())&&mh(this).options.authDomain&&e.isOAuthProvider&&(i=gu(mh(this).options.authDomain,mh(this).options.apiKey,mh(this).name,"signInViaPopup",e,null,r,NI.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return bh(this,n=ch(this).then((function(n){return Fl(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new bt((function(e,n){t.na("signInViaPopup",null,new S("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=jl(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&fr(o),e?$r(e):null})).o((function(e){throw o&&fr(o),e})))},e.Yc=function(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=this;return bh(this,ch(this).then((function(){return function(e){return oh(e,(function(){return e.b.set(eh,e.c.F,e.a)}))}(t.i)})).then((function(){return zl(t.b,"signInViaRedirect",e,void 0,t.T())})))},e.ra=function(){var e=this;return hh(this).then((function(t){return e.b&&ql(e.b.b),t})).o((function(t){throw e.b&&ql(e.b.b),t}))},e.dd=function(e){if(!e)return Ct(new S("null-user"));if(this.S!=e.tenantId)return Ct(new S("tenant-id-mismatch"));var t=this,n={};n.apiKey=mh(this).options.apiKey,n.authDomain=mh(this).options.authDomain,n.appName=mh(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[Qa]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new bc(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Sc(t,r),Uc(t,e),t}(e,n,t.D,t.Ga());return bh(this,this.h.then((function(){if(mh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return vh(t)&&e.uid==vh(t).uid?(Uc(vh(t),e),t.da(e)):(dh(t,r),kc(r),t.da(r))})).then((function(){yh(t)})))},e.Bb=function(){var e=this;return bh(this,this.h.then((function(){return e.b&&ql(e.b.b),vh(e)?(dh(e,null),rh(e.i).then((function(){yh(e)}))):Mt()})))},e.Zc=function(){var e=this;return ih(this.i,mh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=vh(e)&&t){n=vh(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uc(vh(e),t),vh(e).I();(vh(e)||t)&&(dh(e,t),t&&(kc(t),t.ha=e.D),e.b&&Ol(e.b,e),yh(e))}}))},e.da=function(e){return nh(this.i,e)},e.mc=function(){yh(this),this.da(vh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return ph(t,Mt(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(vh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),bh(e,e.h.then((function(){!e.l&&G(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(gh(e)))})))}(this,(function(){e.next(vh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof e?e(vh(r)):"function"==typeof e.next&&e.next(vh(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof e?e(vh(r)):"function"==typeof e.next&&e.next(vh(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this;return bh(this,this.h.then((function(){return vh(t)?vh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return ph(t,nu(t.a,$s,{token:e}))})).then((function(e){var n=e.user;return Fc(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return ph(n,nu(n.a,Qs,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return ph(n,nu(n.a,Ts,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return ph(t,e.ka(t.a))}))},e.Sc=function(e){return qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=vh(e);if(t&&t.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ph(e,e.a.Ab()).then((function(t){var n=t.user;return Fc(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return vh(this)&&vh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&vh(this)&&Mc(vh(this))},e.Pc=function(e){var t=this;B(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&vh(this)&&Cc(vh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),bh(this,this.h.then((function(){t.l||G(t.s,e)&&e(gh(t))})))},e.removeAuthTokenListener=function(e){K(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(th("local"),e.a,this.ja),this.b&&(Ll(this.b,this),ql(this.b.b)),Promise.resolve()},e.hc=function(e){return bh(this,function(e,t){return nu(e,Ms,{identifier:t,continueUri:Pr()?ur():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Po(e)},e.xb=function(e,t){var n=this;return bh(this,Mt().then((function(){var e=new Ii(t);if(!e.c)throw new S("argument-error",Pi+" must be true when sending sign in link to email");return Ui(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return bh(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return bh(this,this.a.Sa(e).then((function(e){return new oi(e)})))},e.kb=function(e){return bh(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return bh(this,Mt().then((function(){return void 0===t||he(t)?{}:Ui(new Ii(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return bh(this,Jl(this,e,t,b(this.ab,this)))},e.Vc=function(e,t){var n=this;return bh(this,Mt().then((function(){var r=t||ur(),i=ko(e,r);if(!(r=Po(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.ab(i)})))},_h.prototype.render=function(){},_h.prototype.reset=function(){},_h.prototype.getResponse=function(){},_h.prototype.execute=function(){};var xh=null;function Sh(e,t){return(t=Eh(t))&&e.a[t]||null}function Eh(e){return(e=void 0===e?1e12:e)?e.toString():null}function Th(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=at(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():sn(this.f,"click",this.i)}function Mh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ch(){}function Ih(){}wh.prototype.render=function(e,t){return this.a[this.b.toString()]=new Th(e,t),this.b++},wh.prototype.reset=function(e){var t=Sh(this,e);e=Eh(e),t&&e&&(t.delete(),delete this.a[e])},wh.prototype.getResponse=function(e){return(e=Sh(this,e))?e.getResponse():null},wh.prototype.execute=function(e){(e=Sh(this,e))&&e.execute()},Th.prototype.getResponse=function(){return Mh(this),this.b},Th.prototype.execute=function(){Mh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Th.prototype.delete=function(){Mh(this),this.g=!0,clearTimeout(this.a),this.a=null,cn(this.f,"click",this.i)},Xr(Ch,"FACTOR_ID","phone"),Ih.prototype.g=function(){return xh||(xh=new wh),Mt(xh)},Ih.prototype.c=function(){};var Ah=null;function kh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ph=new ve(_e,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rh=new jr(3e4,6e4);kh.prototype.g=function(e){var t=this;return new bt((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),Rh.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete a[t.a]},Mt(Va(Ee(Ph,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kh.prototype.c=function(){this.b--};var Oh=null;function Lh(e,t,n,r,i,o,s){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,s?(Ah||(Ah=new Ih),s=Ah):(Oh||(Oh=new kh),s=Oh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fh])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Uh],!a.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!at(t)||!this.i&&at(t).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var l=this.a[Nh];this.a[Nh]=function(e){if(zh(u,e),"function"==typeof l)l(e);else if("string"==typeof l){var t=Ir(l,a);"function"==typeof t&&t(e)}};var c=this.a[Dh];this.a[Dh]=function(){if(zh(u,null),"function"==typeof c)c();else if("string"==typeof c){var e=Ir(c,a);"function"==typeof e&&e()}}}var Nh="callback",Dh="expired-callback",Fh="sitekey",Uh="size";function zh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function jh(e,t){return e.h.push(t),t.oa((function(){q(e.h,t)})),t}function Bh(e){if(e.J)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vh(e,t,n){var r=!1;try{this.b=n||NI.app()}catch(a){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=NI.SDK_VERSION?Mr(NI.SDK_VERSION,o):null,Lh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,A(T),r)}function Hh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Wh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=Wh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new S("argument-error",e+" failed: "+r)}(e=Lh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=jh(this,Mt().then((function(){if(Pr()&&!br())return vr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,nu(e.s,zs,{})})).then((function(t){e.a[Fh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Bh(this);var e=this;return jh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=at(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ot&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Be(a.name),'"'),a.type){o.push(' type="',Be(a.type),'"');var s={};pe(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=dt(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):st(o,a)),2<r.length&&ft(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Bh(this);var e=this;return jh(this,this.render().then((function(t){return new bt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){K(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Bh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=at(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},w(Vh,Lh);var Wh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function qh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function Kh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Xh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function Yh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function $h(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Qh(e,t){return p(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function Jh(e){return p(e)&&"string"==typeof e.uid}function Zh(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function ef(e,t){for(var n in t){var r=t[n].name;e[r]=rf(r,e[n],t[n].j)}}function tf(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:_((function(e){return this[e]}),n),set:_((function(e,t,n,r){Hh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function nf(e,t,n,r){e[t]=rf(t,n,r)}function rf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Hh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}ef(ah.prototype,{kb:{name:"applyActionCode",j:[Gh("code")]},Sa:{name:"checkActionCode",j:[Gh("code")]},ob:{name:"confirmPasswordReset",j:[Gh("code"),Gh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gh("email"),Gh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zh(Kh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zh(Kh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Gh("email"),Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Gh("email"),Kh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Gh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[$h()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[$h()]},Tc:{name:"signInWithCustomToken",j:[Gh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gh("email"),Gh("password")]},Vc:{name:"signInWithEmailLink",j:[Gh("email"),Gh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof bc)}},Yh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gh("url"),Kh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gh("code")]}}),tf(ah.prototype,{lc:{name:"languageCode",lb:Zh(Gh(),Yh(),"languageCode")},ti:{name:"tenantId",lb:Zh(Gh(),Yh(),"tenantId")}}),ah.Persistence=Ju,ah.Persistence.LOCAL="local",ah.Persistence.SESSION="session",ah.Persistence.NONE="none",ef(bc.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[$h()]},rb:{name:"linkWithCredential",j:[$h()]},Dc:{name:"linkWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$h()]},ub:{name:"reauthenticateWithCredential",j:[$h()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gh(null,!0)]},cd:{name:"unlink",j:[Gh("provider")]},Cb:{name:"updateEmail",j:[Gh("email")]},Db:{name:"updatePassword",j:[Gh("password")]},ed:{name:"updatePhoneNumber",j:[$h("phone")]},Eb:{name:"updateProfile",j:[Kh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Gh("email"),Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]}}),ef(wh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(_h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(bt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),tf($l.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:qh("appVerificationDisabledForTesting")}}),ef(Ql.prototype,{confirm:{name:"confirm",j:[Gh("verificationCode")]}}),nf(so,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[mo,Io,Oo,ho],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Zh(Gh(),Kh(),"json")]),nf(Ao,"credential",(function(e,t){return new Co(e,t)}),[Gh("email"),Gh("password")]),ef(Co.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(bo,"credential",_o,[Zh(Gh(),Kh(),"token")]),nf(Ao,"credentialWithLink",ko,[Gh("email"),Gh("emailLink")]),ef(wo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(wo,"credential",xo,[Zh(Gh(),Kh(),"token")]),ef(So.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(So,"credential",Eo,[Zh(Gh(),Zh(Kh(),Yh()),"idToken"),Zh(Gh(),Yh(),"accessToken",!0)]),ef(To.prototype,{Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(To,"credential",Mo,[Zh(Gh(),Kh(),"token"),Gh("secret",!0)]),ef(yo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},credential:{name:"credential",j:[Zh(Gh(),Zh(Kh(),Yh()),"optionsOrIdToken"),Zh(Gh(),Yh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),ef(fo.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(lo.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),nf(No,"credential",Do,[Gh("verificationId"),Gh("verificationCode")]),ef(No.prototype,{gb:{name:"verifyPhoneNumber",j:[Zh(Gh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?Qh(e.session,oo)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Qh(e.session,ao)&&Jh(e.multiFactorHint):e.session&&e.multiFactorUid?Qh(e.session,ao)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),ef(Ro.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(S.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(Go.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(Wo.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(rc.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(ec.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),ef(lc.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Gh("displayName",!0)]},bd:{name:"unenroll",j:[Zh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jh},Gh(),"multiFactorInfoIdentifier")]}}),ef(Vh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(bi,"parseLink",Ci,[Gh("link")]),nf(Ch,"assertion",(function(e){return new sc(e)}),[$h("phone")]),function(){if(void 0===NI||!NI.INTERNAL||!NI.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ah,AuthCredential:so,Error:S};nf(e,"EmailAuthProvider",Ao,[]),nf(e,"FacebookAuthProvider",bo,[]),nf(e,"GithubAuthProvider",wo,[]),nf(e,"GoogleAuthProvider",So,[]),nf(e,"TwitterAuthProvider",To,[]),nf(e,"OAuthProvider",yo,[Gh("providerId")]),nf(e,"SAMLAuthProvider",go,[Gh("providerId")]),nf(e,"PhoneAuthProvider",No,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ah)}}]),nf(e,"RecaptchaVerifier",Vh,[Zh(Gh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Kh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof NI.app.App)}}]),nf(e,"ActionCodeURL",bi,[]),nf(e,"PhoneMultiFactorGenerator",Ch,[]),NI.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ah(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),NI.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:b((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:b(e.nc,e),addAuthTokenListener:b(e.cc,e),removeAuthTokenListener:b(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),NI.registerVersion("@firebase/auth","0.16.8"),NI.INTERNAL.extendNamespace({User:bc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var DI="";function FI(e){DI=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UI,zI=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),WC(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:HC(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),jI=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return qC(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),BI=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zI(t)}}catch(XY){}return new jI},VI=BI("localStorage"),HI=BI("sessionStorage"),WI=new _I("@firebase/database"),GI=(UI=1,function(){return UI++}),qI=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,wC(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new $C;n.update(t);var r=n.digest();return EC.encodeByteArray(r)},KI=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=KI.apply(null,i):n+="object"==typeof i?WC(i):i,n+=" "}return n},XI=null,YI=!0,$I=function(e,t){wC(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(WI.logLevel=fI.VERBOSE,XI=WI.log.bind(WI),t&&HI.set("logging_enabled",!0)):"function"==typeof e?XI=e:(XI=null,HI.remove("logging_enabled"))},QI=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===YI&&(YI=!1,null===XI&&!0===HI.get("logging_enabled")&&$I(!0)),XI){var n=KI.apply(null,e);XI(n)}},JI=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];QI.apply(void 0,yC([e],gC(t)))}},ZI=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+KI.apply(void 0,yC([],gC(e)));WI.error(n)},eA=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+KI.apply(void 0,yC([],gC(e)));throw WI.error(n),new Error(n)},tA=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+KI.apply(void 0,yC([],gC(e)));WI.warn(n)},nA=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},rA="[MIN_NAME]",iA="[MAX_NAME]",oA=function(e,t){if(e===t)return 0;if(e===rA||t===iA)return-1;if(t===rA||e===iA)return 1;var n=dA(e),r=dA(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},aA=function(e,t){return e===t?0:e<t?-1:1},sA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+WC(t))},uA=function(e){if("object"!=typeof e||null===e)return WC(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=WC(t[i]),r+=":",r+=uA(e[t[i]]);return r+="}"},lA=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var hA=function(e){wC(!nA(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var fA=new RegExp("^-?(0*)\\d{1,10}$"),dA=function(e){if(fA.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},pA=function(e){try{e()}catch(XY){setTimeout((function(){var t=XY.stack||"";throw tA("Exception was thrown by user callback.",t),XY}),Math.floor(0))}},mA=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},vA=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){tA('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),gA=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(QI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tA(e)},e}(),yA=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),bA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_A=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=VI.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&VI.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function wA(e,t,n){var r;if(wC("string"==typeof t,"typeof type must == string"),wC("object"==typeof n,"typeof params must == object"),"websocket"===t)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return cA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xA=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),qC(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return MC(this.counters_)},e}(),SA={},EA={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e){var t=e.toString();return SA[t]||(SA[t]=new xA),SA[t]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MA=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&pA((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),CA=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=JI(e),this.stats_=TA(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),wA(t,"long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new MA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new IA((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=gC(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=gC(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&bA.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!!e.forceAllow_||!(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=WC(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n,r=(n=SC(t),EC.encodeByteArray(n,!0)),i=lA(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(e){var t=WC(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),IA=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=GI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(XY){QI("frame writing exception"),XY.stack&&QI(XY.stack),QI(XY)}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||QI("No IE domain setting required")}catch(XY){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){QI("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(XY){}}),Math.floor(1))},e}(),AA=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?AA=MozWebSocket:"undefined"!=typeof WebSocket&&(AA=WebSocket);var kA=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=JI(this.connId),this.stats_=TA(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&bA.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),wA(e,"websocket",i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,VI.set("previous_websocket_failure",!0);try{if(NC());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new AA(this.connURL,[],r)}}catch(XY){this.log_("Error instantiating WebSocket.");var i=XY.message||XY.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==AA&&!e.forceDisallow_},e.previouslyFailed=function(){return VI.isInMemoryStorage||!0===VI.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){VI.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=HC(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(wC(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=WC(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=lA(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(XY){this.log_("Exception thrown from WebSocket.send():",XY.message||XY.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),PA=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[CA,kA]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=kA&&kA.isAvailable(),o=i&&!kA.previouslyFailed();if(t.webSocketOnly&&(i||tA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[kA];else{var a=this.transports_=[];try{for(var s=vC(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),RA=function(){function e(e,t,n,r,i,o,a,s,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=JI("c:"+this.id+":"),this.transportManager_=new PA(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=mA((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=sA("t",e),n=sA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=sA("t",e),n=sA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=sA("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ZI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZI("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&tA("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),mA((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mA((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(VI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),OA=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),LA=function(){function e(e){this.allowedEvents_=e,this.listeners_={},wC(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=yC([],gC(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){wC(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),NA=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||PC()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return fC(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return wC("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(LA),DA=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return new DA("")}function UA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function zA(e){return e.pieces_.length-e.pieceNum_}function jA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new DA(e.pieces_,t)}function BA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function VA(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function HA(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new DA(t,0)}function WA(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof DA)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new DA(n,0)}function GA(e){return e.pieceNum_>=e.pieces_.length}function qA(e,t){var n=UA(e),r=UA(t);if(null===n)return t;if(n===r)return qA(jA(e),jA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function KA(e,t){for(var n=VA(e,0),r=VA(t,0),i=0;i<n.length&&i<r.length;i++){var o=oA(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function XA(e,t){if(zA(e)!==zA(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function YA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(zA(e)>zA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $A=function(e,t){this.errorPrefix_=t,this.parts_=VA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=iI(this.parts_[n]);QA(this)};function QA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+JA(e))}function JA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZA,ek,tk=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return fC(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return wC("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(LA),nk=function(e){function t(n,r,i,o,a,s,u,l){var c=e.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=t.nextPersistentConnectionId_++,c.log_=JI("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!NC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return tk.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&NA.getInstance().on("online",c.onOnline_,c),c}return fC(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(WC(i)),wC(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new IC,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),wC(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),wC(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&qC(e,"w")){var n=KC(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();tA("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t;(e&&40===e.length||"object"==typeof(t=GC(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e,t=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(e=GC(n).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(e){var r=e.s,i=e.d||"error";t.authToken_===n&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),wC(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+WC(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ZI("Unrecognized action received from server: "+WC(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;wC(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return pC(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,l,c,h,f,d,p,m=this;return mC(this,(function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},l=function(e){wC(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:u,sendRequest:l},c=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)])];case 2:return h=gC.apply(void 0,[v.sent(),2]),f=h[0],d=h[1],a?QI("getToken() completed but was canceled"):(QI("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new RA(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){tA(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),[3,4];case 3:return p=v.sent(),this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&tA(p),u()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){QI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){QI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],XC(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return uA(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new DA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){QI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){QI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=vC(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,vC(a.values())),u=s.next();!u.done;u=s.next()){var l=u.value;this.sendListen_(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)},t.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+DI.replace(/\./g,"-")]=1,PC()?e["framework.cordova"]=1:LC()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=NA.getInstance().currentlyOnline();return XC(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(OA),rk=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),ik=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new rk(rA,e),r=new rk(rA,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return rk.MIN},e}(),ok=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return ZA},set:function(e){ZA=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return oA(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw xC("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return rk.MIN},t.prototype.maxPost=function(){return new rk(iA,ZA)},t.prototype.makePost=function(e,t){return wC("string"==typeof e,"KeyIndex indexValue must always be a string."),new rk(e,ZA)},t.prototype.toString=function(){return".key"},t}(ik),ak=new ok,sk=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),uk=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ck.EMPTY_NODE,this.right=null!=o?o:ck.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return ck.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ck.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),lk=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new uk(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),ck=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,uk.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,uk.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new sk(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new sk(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new sk(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new sk(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new lk,e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hk(e,t){return oA(e.name,t.name)}function fk(e,t){return oA(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dk,pk,mk,vk=function(e){return"number"==typeof e?"number:"+hA(e):"string:"+e},gk=function(e){if(e.isLeafNode()){var t=e.val();wC("string"==typeof t||"number"==typeof t||"object"==typeof t&&qC(t,".sv"),"Priority must be a string or number.")}else wC(e===ek||e.isEmpty(),"priority of unexpected type.");wC(e===ek||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},yk=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,wC(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gk(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return dk},set:function(e){dk=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return GA(t)?this:".priority"===UA(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=UA(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(wC(".priority"!==r||1===zA(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(jA(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+vk(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?hA(this.value_):this.value_,this.lazyHash_=qI(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(wC(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return wC(i>=0,"Unknown leaf type: "+n),wC(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var bk,_k,wk=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?oA(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return rk.MIN},t.prototype.maxPost=function(){return new rk(iA,new yk("[PRIORITY-POST]",mk))},t.prototype.makePost=function(e,t){var n=pk(e);return new rk(t,new yk("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(ik)),xk=Math.log(2),Sk=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/xk,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Ek=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new uk(a,o.node,uk.BLACK,null,null);var u=parseInt(s/2,10)+t,l=i(t,u),c=i(u+1,r);return o=e[u],a=n?n(o):o,new uk(a,o.node,uk.BLACK,l,c)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var l=i(o+1,s),c=e[o],h=n?n(c):c;u(new uk(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,uk.BLACK):(s(h,uk.BLACK),s(h,uk.RED))}return o}(new Sk(e.length));return new ck(r||t,o)},Tk={},Mk=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return wC(Tk&&wk,"ChildrenNode.ts has not been loaded"),bk=bk||new e({".priority":Tk},{".priority":wk})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=KC(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ck?t:null},e.prototype.hasIndex=function(e){return qC(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){wC(t!==ak,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(rk.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Ek(i,t.getCompare()):Tk;var u=t.toString(),l=dC({},this.indexSet_);l[u]=t;var c=dC({},this.indexes_);return c[u]=r,new e(c,l)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(YC(this.indexes_,(function(e,i){var o=KC(r.indexSet_,i);if(wC(o,"Missing index implementation for "+i),e===Tk){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(rk.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),Ek(a,o.getCompare())}return Tk}var l=n.get(t.name),c=e;return l&&(c=c.remove(new rk(t.name,l))),c.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(YC(this.indexes_,(function(e){if(e===Tk)return e;var r=n.get(t.name);return r?e.remove(new rk(t.name,r)):e})),this.indexSet_)},e}(),Ck=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&gk(this.priorityNode_),this.children_.isEmpty()&&wC(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return _k||(_k=new e(new ck(fk),null,Mk.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||_k},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?_k:t},e.prototype.getChild=function(e){var t=UA(e);return null===t?this:this.getImmediateChild(t).getChild(jA(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(wC(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new rk(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?_k:this.priorityNode_;return new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=UA(e);if(null===n)return t;wC(".priority"!==UA(e)||1===zA(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(jA(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(wk,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+vk(this.getPriority().val())+":"),this.forEachChild(wk,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":qI(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new rk(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new rk(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new rk(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,rk.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,rk.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ik?-1:0},e.prototype.withIndex=function(t){if(t===ak||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===ak||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(wk),r=t.getIterator(wk),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===ak?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Ik=new(function(e){function t(){return e.call(this,new ck(fk),Ck.EMPTY_NODE,Mk.Default)||this}return fC(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Ck.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Ck));Object.defineProperties(rk,{MIN:{value:new rk(rA,Ck.EMPTY_NODE)},MAX:{value:new rk(iA,Ik)}}),ok.__EMPTY_NODE=Ck.EMPTY_NODE,yk.__childrenNodeConstructor=Ck,ek=Ik,function(e){mk=e}(Ik);function Ak(e,t){if(void 0===t&&(t=null),null===e)return Ck.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),wC(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new yk(e,Ak(t));if(e instanceof Array){var n=Ck.EMPTY_NODE;return cA(e,(function(t,r){if(qC(e,t)&&"."!==t.substring(0,1)){var i=Ak(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Ak(t))}var r=[],i=!1;if(cA(e,(function(e,t){if("."!==e.substring(0,1)){var n=Ak(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new rk(e,n)))}})),0===r.length)return Ck.EMPTY_NODE;var o=Ek(r,hk,(function(e){return e.name}),fk);if(i){var a=Ek(r,wk.getCompare());return new Ck(o,Ak(t),new Mk({".priority":a},{".priority":wk}))}return new Ck(o,Ak(t),Mk.Default)}!function(e){pk=e}(Ak);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kk,Pk,Rk=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,wC(!GA(t)&&".priority"!==UA(t),"Can't create PathIndex with empty path or .priority key"),n}return fC(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?oA(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=Ak(e),r=Ck.EMPTY_NODE.updateChild(this.indexPath_,n);return new rk(t,r)},t.prototype.maxPost=function(){var e=Ck.EMPTY_NODE.updateChild(this.indexPath_,Ik);return new rk(iA,e)},t.prototype.toString=function(){return VA(this.indexPath_,0).join("/")},t}(ik),Ok=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?oA(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return rk.MIN},t.prototype.maxPost=function(){return rk.MAX},t.prototype.makePost=function(e,t){var n=Ak(e);return new rk(t,n)},t.prototype.toString=function(){return".value"},t}(ik)),Lk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nk=(kk=0,Pk=[],function(e){var t,n=e===kk;kk=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=Lk.charAt(e%64),e=Math.floor(e/64);wC(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===Pk[t];t--)Pk[t]=0;Pk[t]++}else for(t=0;t<12;t++)Pk[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=Lk.charAt(Pk[t]);return wC(20===i.length,"nextPushId: Length should be 20."),i}),Dk=function(e){if("2147483647"===e)return"-";var t=dA(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return iA;var o=n[i],a=Lk.charAt(Lk.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Fk=function(e){if("-2147483648"===e)return rA;var t=dA(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Lk.charAt(Lk.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uk(e){return{type:"value",snapshotNode:e}}function zk(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function jk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Bk(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vk=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){wC(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(jk(t,a)):wC(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(zk(t,n)):o.trackChildChange(Bk(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(wk,(function(e,r){t.hasChild(e)||n.trackChildChange(jk(e,r))})),t.isLeafNode()||t.forEachChild(wk,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Bk(t,r,i))}else n.trackChildChange(zk(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Ck.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Hk=function(){function e(t){this.indexedFilter_=new Vk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new rk(t,n))||(n=Ck.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Ck.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ck.EMPTY_NODE);var i=this;return t.forEachChild(wk,(function(e,t){i.matches(new rk(e,t))||(r=r.updateImmediateChild(e,Ck.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Wk=function(){function e(e){this.rangedFilter_=new Hk(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new rk(t,n))||(n=Ck.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ck.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Ck.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(Ck.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Ck.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;wC(s.numChildren()===this.limit_,"");var u=new rk(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Bk(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(jk(t,h));var p=s.updateImmediateChild(t,Ck.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(zk(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(jk(l.name,l.node)),i.trackChildChange(zk(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Ck.EMPTY_NODE)):e},e}(),Gk=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wk}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return wC(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return wC(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rA},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return wC(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return wC(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iA},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return wC(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===wk},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Kk(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Xk(e,t){var n=e.copy();return n.index_=t,n}function Yk(e){var t,n={};return e.isDefault()||(e.index_===wk?t="$priority":e.index_===Ok?t="$value":e.index_===ak?t="$key":(wC(e.index_ instanceof Rk,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=WC(t),e.startSet_&&(n.startAt=WC(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+WC(e.indexStartName_))),e.endSet_&&(n.endAt=WC(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+WC(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function $k(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==wk&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qk=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=JI("p:rest:"),o.listens_={},o}return fC(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(wC(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var l=Yk(e._queryParams);this.restRequest_(a+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),KC(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Yk(e._queryParams),r=e._path.toString(),i=new IC;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=gC(i,2),a=o[0],s=o[1];a&&a.accessToken&&(t.auth=a.accessToken),s&&s.token&&(t.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}(t);r.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=HC(l.responseText)}catch(XY){tA("Failed to parse JSON response for "+u+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&tA("Got unsuccessful REST response for "+u+" Status: "+l.status),n(l.status);n=null}},l.open("GET",u,!0),l.send()}))},t}(OA),Jk=function(){function e(){this.rootNode_=Ck.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zk(){return{value:null,children:new Map}}function eP(e,t,n){if(GA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=UA(t);e.children.has(r)||e.children.set(r,Zk()),eP(e.children.get(r),t=jA(t),n)}}function tP(e,t){if(GA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(wk,(function(t,n){eP(e,new DA(t),n)})),tP(e,t)}if(e.children.size>0){var r=UA(t);if(t=jA(t),e.children.has(r))tP(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function nP(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,(function(e,r){nP(r,new DA(t.toString()+"/"+e),n)}))}var rP,iP,oP=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=dC({},e);return this.last_&&cA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),aP=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new oP(e);var n=1e4+2e4*Math.random();mA(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;cA(t,(function(t,i){i>0&&qC(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),mA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(iP=rP||(rP={}))[iP.OVERWRITE=0]="OVERWRITE",iP[iP.MERGE=1]="MERGE",iP[iP.ACK_USER_WRITE=2]="ACK_USER_WRITE",iP[iP.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var uP,lP=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=rP.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(GA(this.path)){if(null!=this.affectedTree.value)return wC(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new DA(t));return new e(FA(),n,this.revert)}return wC(UA(this.path)===t,"operationForChild called for unrelated child."),new e(jA(this.path),this.affectedTree,this.revert)},e}(),cP=function(){function e(e,t){this.source=e,this.path=t,this.type=rP.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return GA(this.path)?new e(this.source,FA()):new e(this.source,jA(this.path))},e}(),hP=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=rP.OVERWRITE}return e.prototype.operationForChild=function(t){return GA(this.path)?new e(this.source,FA(),this.snap.getImmediateChild(t)):new e(this.source,jA(this.path),this.snap)},e}(),fP=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=rP.MERGE}return e.prototype.operationForChild=function(t){if(GA(this.path)){var n=this.children.subtree(new DA(t));return n.isEmpty()?null:n.value?new hP(this.source,FA(),n.value):new e(this.source,FA(),n)}return wC(UA(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,jA(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),dP=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(GA(e))return this.isFullyInitialized()&&!this.filtered_;var t=UA(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),pP=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw xC("Should only compare child_ events.");var r=new rk(t.childName,t.snapshotNode),i=new rk(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function vP(e,t){return{eventCache:e,serverCache:t}}function gP(e,t,n,r){return vP(new dP(t,n,r),e.serverCache)}function yP(e,t,n,r){return vP(e.eventCache,new dP(t,n,r))}function bP(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function _P(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wP=function(){function e(e,t){void 0===t&&(uP||(uP=new ck(aA)),t=uP),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return cA(t,(function(e,t){n=n.set(new DA(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:FA(),value:this.value};if(GA(e))return null;var n=UA(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(jA(e),t);return null!=i?{path:WA(new DA(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(GA(t))return this;var n=UA(t),r=this.children.get(n);return null!==r?r.subtree(jA(t)):new e(null)},e.prototype.set=function(t,n){if(GA(t))return new e(n,this.children);var r=UA(t),i=(this.children.get(r)||new e(null)).set(jA(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(GA(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=UA(t),r=this.children.get(n);if(r){var i=r.remove(jA(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(GA(e))return this.value;var t=UA(e),n=this.children.get(t);return n?n.get(jA(e)):null},e.prototype.setTree=function(t,n){if(GA(t))return n;var r=UA(t),i=(this.children.get(r)||new e(null)).setTree(jA(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(FA(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(WA(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,FA(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(GA(e))return null;var i=UA(e),o=this.children.get(i);return o?o.findOnPath_(jA(e),WA(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,FA(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(GA(t))return this;this.value&&r(n,this.value);var i=UA(t),o=this.children.get(i);return o?o.foreachOnPath_(jA(t),WA(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(FA(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(WA(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),xP=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new wP(null))},e}();function SP(e,t,n){if(GA(t))return new xP(new wP(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=qA(i,t);return o=o.updateChild(a,n),new xP(e.writeTree_.set(i,o))}var s=new wP(n),u=e.writeTree_.setTree(t,s);return new xP(u)}function EP(e,t,n){var r=e;return cA(n,(function(e,n){r=SP(r,WA(t,e),n)})),r}function TP(e,t){if(GA(t))return xP.empty();var n=e.writeTree_.setTree(t,new wP(null));return new xP(n)}function MP(e,t){return null!=CP(e,t)}function CP(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(qA(n.path,t)):null}function IP(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(wk,(function(e,n){t.push(new rk(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new rk(e,n.value))})),t}function AP(e,t){if(GA(t))return e;var n=CP(e,t);return new xP(null!=n?new wP(n):e.writeTree_.subtree(t))}function kP(e){return e.writeTree_.isEmpty()}function PP(e,t){return RP(FA(),e.writeTree_,t)}function RP(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(wC(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=RP(WA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(WA(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(e,t){return qP(t,e)}function LP(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));wC(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&NP(s,r.path)?i=!1:YA(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=FP(e.allWrites,DP,FA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=TP(e.visibleWrites,r.path):cA(r.children,(function(t){e.visibleWrites=TP(e.visibleWrites,WA(r.path,t))}));return!0}return!1}function NP(e,t){if(e.snap)return YA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&YA(WA(e.path,n),t))return!0;return!1}function DP(e){return e.visible}function FP(e,t,n){for(var r=xP.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)YA(n,a)?r=SP(r,s=qA(n,a),o.snap):YA(a,n)&&(s=qA(a,n),r=SP(r,FA(),o.snap.getChild(s)));else{if(!o.children)throw xC("WriteRecord should have .snap or .children");if(YA(n,a))r=EP(r,s=qA(n,a),o.children);else if(YA(a,n))if(GA(s=qA(a,n)))r=EP(r,FA(),o.children);else{var u=KC(o.children,UA(s));if(u){var l=u.getChild(jA(s));r=SP(r,FA(),l)}}}}}return r}function UP(e,t,n,r,i){if(r||i){var o=AP(e.visibleWrites,t);if(!i&&kP(o))return n;if(i||null!=n||MP(o,FA())){return PP(FP(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(YA(e.path,t)||YA(t,e.path))}),t),n||Ck.EMPTY_NODE)}return null}var a=CP(e.visibleWrites,t);if(null!=a)return a;var s=AP(e.visibleWrites,t);return kP(s)?n:null!=n||MP(s,FA())?PP(s,n||Ck.EMPTY_NODE):null}function zP(e,t,n,r){return UP(e.writeTree,e.treePath,t,n,r)}function jP(e,t){return function(e,t,n){var r=Ck.EMPTY_NODE,i=CP(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wk,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=AP(e.visibleWrites,t);return n.forEachChild(wk,(function(e,t){var n=PP(AP(o,new DA(e)),t);r=r.updateImmediateChild(e,n)})),IP(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return IP(AP(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function BP(e,t,n,r){return function(e,t,n,r,i){wC(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=WA(t,n);if(MP(e.visibleWrites,o))return null;var a=AP(e.visibleWrites,o);return kP(a)?i.getChild(n):PP(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function VP(e,t){return function(e,t){return CP(e.visibleWrites,t)}(e.writeTree,WA(e.treePath,t))}function HP(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=AP(e.visibleWrites,t),l=CP(u,FA());if(null!=l)s=l;else{if(null==n)return[];s=PP(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,o)}function WP(e,t,n){return function(e,t,n,r){var i=WA(t,n),o=CP(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?PP(AP(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function GP(e,t){return qP(WA(e.treePath,t),e.writeTree)}function qP(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KP=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;wC("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),wC(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Bk(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,jk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,zk(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw xC("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Bk(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),XP=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),YP=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new dP(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return WP(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_P(this.viewCache_),i=HP(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e,t,n,r,i){var o,a,s=new KP;if(n.type===rP.OVERWRITE){var u=n;u.source.fromUser?o=ZP(e,t,u.path,u.snap,r,i,s):(wC(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!GA(u.path),o=JP(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===rP.MERGE){var l=n;l.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var l=WA(n,r);eR(t,UA(l))&&(s=ZP(e,s,l,u,i,o,a))})),r.foreach((function(r,u){var l=WA(n,r);eR(t,UA(l))||(s=ZP(e,s,l,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,s):(wC(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=nR(e,t,l.path,l.children,r,i,a,s))}else if(n.type===rP.ACK_USER_WRITE){var c=n;o=c.revert?function(e,t,n,r,i,o){var a;if(null!=VP(r,n))return t;var s=new YP(r,t,i),u=t.eventCache.getNode(),l=void 0;if(GA(n)||".priority"===UA(n)){var c=void 0;if(t.serverCache.isFullyInitialized())c=zP(r,_P(t));else{var h=t.serverCache.getNode();wC(h instanceof Ck,"serverChildren would be complete if leaf node"),c=jP(r,h)}c=c,l=e.filter.updateFullNode(u,c,o)}else{var f=UA(n),d=WP(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(l=null!=d?e.filter.updateChild(u,f,d,jA(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(u,f,Ck.EMPTY_NODE,jA(n),s,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=zP(r,_P(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,a,o))}return a=t.serverCache.isFullyInitialized()||null!=VP(r,FA()),gP(t,l,a,e.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,c.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=VP(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(GA(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return JP(e,t,n,u.getNode().getChild(n),i,o,s,a);if(GA(n)){var l=new wP(null);return u.getNode().forEachChild(ak,(function(e,t){l=l.set(new DA(e),t)})),nR(e,t,n,l,i,o,s,a)}return t}var c=new wP(null);return r.foreach((function(e,t){var r=WA(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),nR(e,t,n,c,i,o,s,a)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==rP.LISTEN_COMPLETE)throw xC("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=yP(t,o.getNode(),o.isFullyInitialized()||GA(n),o.isFiltered());return QP(e,a,n,r,XP,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bP(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Uk(bP(t)))}}(t,o,h),{viewCache:o,changes:h}}function QP(e,t,n,r,i,o){var a=t.eventCache;if(null!=VP(r,n))return t;var s=void 0,u=void 0;if(GA(n))if(wC(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=_P(t),c=jP(r,l instanceof Ck?l:Ck.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{var h=zP(r,_P(t));s=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=UA(n);if(".priority"===f){wC(1===zA(n),"Can't have a priority with additional path components");var d=a.getNode(),p=BP(r,n,d,u=t.serverCache.getNode());s=null!=p?e.filter.updatePriority(d,p):a.getNode()}else{var m=jA(n),v=void 0;if(a.isCompleteForChild(f)){u=t.serverCache.getNode();var g=BP(r,n,a.getNode(),u);v=null!=g?a.getNode().getImmediateChild(f).updateChild(m,g):a.getNode().getImmediateChild(f)}else v=WP(r,f,t.serverCache);s=null!=v?e.filter.updateChild(a.getNode(),f,v,m,i,o):a.getNode()}}return gP(t,s,a.isFullyInitialized()||GA(n),e.filter.filtersNodes())}function JP(e,t,n,r,i,o,a,s){var u,l=t.serverCache,c=a?e.filter:e.filter.getIndexedFilter();if(GA(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=UA(n);if(!l.isCompleteForPath(n)&&zA(n)>1)return t;var d=jA(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,XP,null)}var m=yP(t,u,l.isFullyInitialized()||GA(n),c.filtersNodes());return QP(e,m,n,i,new YP(i,m,o),s)}function ZP(e,t,n,r,i,o,a){var s,u,l=t.eventCache,c=new YP(i,t,o);if(GA(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=gP(t,u,!0,e.filter.filtersNodes());else{var h=UA(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=gP(t,u,l.isFullyInitialized(),l.isFiltered());else{var f=jA(n),d=l.getNode().getImmediateChild(h),p=void 0;if(GA(f))p=r;else{var m=c.getCompleteChild(h);p=null!=m?".priority"===BA(f)&&m.getChild(HA(f)).isEmpty()?m:m.updateChild(f,r):Ck.EMPTY_NODE}if(d.equals(p))s=t;else s=gP(t,e.filter.updateChild(l.getNode(),h,p,f,c,a),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function eR(e,t){return e.eventCache.isCompleteForChild(t)}function tR(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function nR(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=GA(n)?r:new wP(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=tR(0,t.serverCache.getNode().getImmediateChild(n),r);l=JP(e,l,new DA(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=tR(0,t.serverCache.getNode().getImmediateChild(n),r);l=JP(e,l,new DA(n),h,i,o,a,s)}})),l}var rR,iR=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Vk(r.getIndex()),o=(n=r).loadsAllData()?new Vk(n.getIndex()):n.hasLimit()?new Wk(n):new Hk(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(Ck.EMPTY_NODE,a.getNode(),null),l=o.updateFullNode(Ck.EMPTY_NODE,s.getNode(),null),c=new dP(u,a.isFullyInitialized(),i.filtersNodes()),h=new dP(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=vP(h,c),this.eventGenerator_=new pP(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function oR(e,t){var n=_P(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!GA(t)&&!n.getImmediateChild(UA(t)).isEmpty())?n.getChild(t):null}function aR(e){return 0===e.eventRegistrations_.length}function sR(e,t,n){var r=[];if(n){wC(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function uR(e,t,n,r){t.type===rP.MERGE&&null!==t.source.queryId&&(wC(_P(e.viewCache_),"We should always have a full cache before handling merges"),wC(bP(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=$P(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,wC(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),wC(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),wC(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,lR(e,s.changes,s.viewCache.eventCache.getNode(),null)}function lR(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),mP(e,i,"child_removed",t,r,n),mP(e,i,"child_added",t,r,n),mP(e,i,"child_moved",o,r,n),mP(e,i,"child_changed",t,r,n),mP(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cR,hR=function(){this.views=new Map};function fR(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return wC(null!=s,"SyncTree gave us an op for an invalid query."),uR(s,t,n,r)}var u=[];try{for(var l=vC(e.views.values()),c=l.next();!c.done;c=l.next()){s=c.value;u=u.concat(uR(s,t,n,r))}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return u}function dR(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=zP(n,i?r:null),u=!1;s?u=!0:r instanceof Ck?(s=jP(n,r),u=!1):(s=Ck.EMPTY_NODE,u=!1);var l=vP(new dP(s,u,!1),new dP(r,i,!1));return new iR(t,l)}return a}function pR(e,t,n,r,i,o){var a=dR(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(wk,(function(e,t){r.push(zk(e,t))})),n.isFullyInitialized()&&r.push(Uk(n.getNode())),lR(e,r,n.getNode(),t)}(a,n)}function mR(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],l=_R(e);if("default"===a)try{for(var c=vC(e.views.entries()),h=c.next();!h.done;h=c.next()){var f=gC(h.value,2),d=f[0],p=f[1];u=u.concat(sR(p,n,r)),aR(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}else(p=e.views.get(a))&&(u=u.concat(sR(p,n,r)),aR(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return l&&!_R(e)&&s.push(new(wC(rR,"Reference.ts has not been loaded"),rR)(t._repo,t._path)),{removed:s,events:u}}function vR(e){var t,n,r=[];try{for(var i=vC(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function gR(e,t){var n,r,i=null;try{for(var o=vC(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||oR(s,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function yR(e,t){if(t._queryParams.loadsAllData())return wR(e);var n=t._queryIdentifier;return e.views.get(n)}function bR(e,t){return null!=yR(e,t)}function _R(e){return null!=wR(e)}function wR(e){var t,n;try{for(var r=vC(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xR=1,SR=function(e){this.listenProvider_=e,this.syncPointTree_=new wP(null),this.pendingWriteTree_={visibleWrites:xP.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function ER(e,t,n,r,i){return function(e,t,n,r,i){wC(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=SP(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?RR(e,new hP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function TR(e,t,n,r){!function(e,t,n,r){wC(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=EP(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=wP.fromObject(n);return RR(e,new fP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function MR(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(LP(e.pendingWriteTree_,t)){var i=new wP(null);return null!=r.snap?i=i.set(FA(),!0):cA(r.children,(function(e){i=i.set(new DA(e),!0)})),RR(e,new lP(r.path,i,n))}return[]}function CR(e,t,n){return RR(e,new hP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function IR(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||bR(o,t))){var s=mR(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var l=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),c=e.syncPointTree_.findOnPath(i,(function(e,t){return _R(t)}));if(l&&!c){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&_R(t))return[wR(t)];var r=[];return t&&(r=vR(t)),cA(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],m=p.query,v=NR(e,p);e.listenProvider_.startListening(BR(m),DR(e,m),v.hashFn,v.onComplete)}}if(!c&&u.length>0&&!r)if(l){e.listenProvider_.stopListening(BR(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(FR(t));e.listenProvider_.stopListening(BR(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=FR(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function AR(e,t,n){var r=t._path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=qA(e,r);i=i||gR(t,n),o=o||_R(t)}));var a,s=e.syncPointTree_.get(r);(s?(o=o||_R(s),i=i||gR(s,FA())):(s=new hR,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=Ck.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=gR(t,FA());n&&(i=i.updateImmediateChild(e,n))})));var u=bR(s,t);if(!u&&!t._queryParams.loadsAllData()){var l=FR(t);wC(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var c=xR++;e.queryToTagMap.set(l,c),e.tagToQueryMap.set(c,l)}var h=pR(s,t,n,OP(e.pendingWriteTree_,r),i,a);if(!u&&!o){var f=yR(s,t);h=h.concat(function(e,t,n){var r=t._path,i=DR(e,t),o=NR(e,n),a=e.listenProvider_.startListening(BR(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)wC(!_R(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!GA(e)&&t&&_R(t))return[wR(t).query];var r=[];return t&&(r=r.concat(vR(t).map((function(e){return e.query})))),cA(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(BR(c),DR(e,c))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,f))}return h}function kR(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=gR(n,qA(e,t));if(r)return r}));return UP(r,t,i,n,!0)}function PR(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=qA(e,n);r=r||gR(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||gR(i,FA()):(i=new hR,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new dP(r,!0,!1):null;return function(e){return bP(e.viewCache_)}(dR(i,t,OP(e.pendingWriteTree_,t._path),o?a.getNode():Ck.EMPTY_NODE,o))}function RR(e,t){return OR(t,e.syncPointTree_,null,OP(e.pendingWriteTree_,FA()))}function OR(e,t,n,r){if(GA(e.path))return LR(e,t,n,r);var i=t.get(FA());null==n&&null!=i&&(n=gR(i,FA()));var o=[],a=UA(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=GP(r,a);o=o.concat(OR(s,u,l,c))}return i&&(o=o.concat(fR(i,e,r,n))),o}function LR(e,t,n,r){var i=t.get(FA());null==n&&null!=i&&(n=gR(i,FA()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=GP(r,t),u=e.operationForChild(t);u&&(o=o.concat(LR(u,i,a,s)))})),i&&(o=o.concat(fR(i,e,r,n))),o}function NR(e,t){var n=t.query,r=DR(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||Ck.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=UR(e,n);if(r){var i=zR(r),o=i.path,a=i.queryId,s=qA(o,t);return jR(e,o,new cP(sP(a),s))}return[]}(e,n._path,r):function(e,t){return RR(e,new cP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return IR(e,n,null,i)}}}function DR(e,t){var n=FR(t);return e.queryToTagMap.get(n)}function FR(e){return e._path.toString()+"$"+e._queryIdentifier}function UR(e,t){return e.tagToQueryMap.get(t)}function zR(e){var t=e.indexOf("$");return wC(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new DA(e.substr(0,t))}}function jR(e,t,n){var r=e.syncPointTree_.get(t);return wC(r,"Missing sync point for query tag that we're tracking"),fR(r,n,OP(e.pendingWriteTree_,t),null)}function BR(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(wC(cR,"Reference.ts has not been loaded"),cR)(e._repo,e._path):e}var VR=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),HR=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=WA(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return kR(this.syncTree_,this.path_)},e}(),WR=function(e,t,n){return e&&"object"==typeof e?(wC(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?GR(e[".sv"],t,n):"object"==typeof e[".sv"]?qR(e[".sv"],t):void wC(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},GR=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:wC(!1,"Unexpected server value: "+e)}},qR=function(e,t,n){e.hasOwnProperty("increment")||wC(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&wC(!1,"Unexpected increment value: "+r);var i=t.node();if(wC(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},KR=function(e,t,n,r){return YR(t,new HR(n,e),r)},XR=function(e,t,n){return YR(e,new VR(t),n)};function YR(e,t,n){var r,i=e.getPriority().val(),o=WR(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=WR(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new yk(s,Ak(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new yk(o))),u.forEachChild(wk,(function(e,i){var o=YR(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $R=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function QR(e,t){for(var n=t instanceof DA?t:new DA(t),r=e,i=UA(n);null!==i;){var o=KC(r.node.children,i)||{children:{},childCount:0};r=new $R(i,r,o),i=UA(n=jA(n))}return r}function JR(e){return e.node.value}function ZR(e,t){e.node.value=t,iO(e)}function eO(e){return e.node.childCount>0}function tO(e,t){cA(e.node.children,(function(n,r){t(new $R(n,e,r))}))}function nO(e,t,n,r){n&&!r&&t(e),tO(e,(function(e){nO(e,t,!0,r)})),n&&r&&t(e)}function rO(e){return new DA(null===e.parent?e.name:rO(e.parent)+"/"+e.name)}function iO(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===JR(e)&&!eO(e)}(n),i=qC(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,iO(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,iO(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.parent,e.name,e)}var oO=/[\[\].#$\/\u0000-\u001F\u007F]/,aO=/[\[\].#$\u0000-\u001F\u007F]/,sO=function(e){return"string"==typeof e&&0!==e.length&&!oO.test(e)},uO=function(e){return"string"==typeof e&&0!==e.length&&!aO.test(e)},lO=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!nA(e)||e&&"object"==typeof e&&qC(e,".sv")},cO=function(e,t,n,r){r&&void 0===t||hO(tI(e,"value"),t,n)},hO=function(e,t,n){var r=n instanceof DA?new $A(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+JA(r));if("function"==typeof t)throw new Error(e+"contains a function "+JA(r)+" with contents = "+t.toString());if(nA(t))throw new Error(e+"contains "+t.toString()+" "+JA(r));if("string"==typeof t&&t.length>10485760/3&&iI(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+JA(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(cA(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!sO(t)))throw new Error(e+" contains an invalid key ("+t+") "+JA(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=t,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=iI(s),QA(a),hO(e,n,r),function(e){var t=e.parts_.pop();e.byteLength_-=iI(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),i&&o)throw new Error(e+' contains ".value" child '+JA(r)+" in addition to actual children.")}},fO=function(e,t,n,r){if(!r||void 0!==t){var i=tI(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];cA(t,(function(e,t){var r=new DA(e);if(hO(i,t,WA(n,r)),".priority"===BA(r)&&!lO(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=VA(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!sO(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(KA);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&YA(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},dO=function(e,t,n){if(!n||void 0!==t){if(nA(t))throw new Error(tI(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lO(t))throw new Error(tI(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pO=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(tI(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},mO=function(e,t,n,r){if(!(r&&void 0===n||sO(n)))throw new Error(tI(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vO=function(e,t,n,r){if(!(r&&void 0===n||uO(n)))throw new Error(tI(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gO=function(e,t){if(".info"===UA(t))throw new Error(e+" failed = Can't modify data under /.info/")},yO=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!sO(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),uO(e)}(n))throw new Error(tI(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bO=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(tI(e,t)+"must be a boolean.")},_O=function(){this.eventLists_=[],this.recursionDepth_=0};function wO(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||XA(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function xO(e,t,n){wO(e,n),EO(e,(function(e){return XA(e,t)}))}function SO(e,t,n){wO(e,n),EO(e,(function(e){return YA(e,t)||YA(t,e)}))}function EO(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(TO(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function TO(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();XI&&QI("event: "+n.toString()),pA(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MO=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _O,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zk(),this.transactionQueueTree_=new $R,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function CO(e,t,n){if(e.stats_=TA(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Qk(e.repoInfo_,(function(t,n,r,i){kO(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return PO(e,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{WC(n)}catch(XY){throw new Error("Invalid authOverride provided: "+XY)}}e.persistentConnection_=new nk(e.repoInfo_,t,(function(t,n,r,i){kO(e,t,n,r,i)}),(function(t){PO(e,t)}),(function(t){!function(e,t){cA(t,(function(t,n){RO(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}var r,i,o;e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=(r=e.repoInfo_,i=function(){return new aP(e.stats_,e.server_)},o=r.toString(),EA[o]||(EA[o]=i()),EA[o]),e.infoData_=new Jk,e.infoSyncTree_=new SR({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=CR(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),RO(e,"connected",!1),e.serverSyncTree_=new SR({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);SO(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function IO(e){var t=e.infoData_.getNode(new DA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function AO(e){return(t=(t={timestamp:IO(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function kO(e,t,n,r,i){e.dataUpdateCount++;var o=new DA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=YC(n,(function(e){return Ak(e)}));a=function(e,t,n,r){var i=UR(e,r);if(i){var o=zR(i),a=o.path,s=o.queryId,u=qA(a,t),l=wP.fromObject(n);return jR(e,a,new fP(sP(s),u,l))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=Ak(n);a=function(e,t,n,r){var i=UR(e,r);if(null!=i){var o=zR(i),a=o.path,s=o.queryId,u=qA(a,t);return jR(e,a,new hP(sP(s),u,n))}return[]}(e.serverSyncTree_,o,u,i)}else if(r){var l=YC(n,(function(e){return Ak(e)}));a=function(e,t,n){var r=wP.fromObject(n);return RR(e,new fP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,l)}else{var c=Ak(n);a=CR(e.serverSyncTree_,o,c)}var h=o;a.length>0&&(h=HO(e,o)),SO(e.eventQueue_,h,a)}function PO(e,t){RO(e,"connected",t),!1===t&&function(e){zO(e,"onDisconnectEvents");var t=AO(e),n=Zk();nP(e.onDisconnect_,FA(),(function(r,i){var o=KR(r,i,e.serverSyncTree_,t);eP(n,r,o)}));var r=[];nP(n,FA(),(function(t,n){r=r.concat(CR(e.serverSyncTree_,t,n));var i=XO(e,t);HO(e,i)})),e.onDisconnect_=Zk(),SO(e.eventQueue_,FA(),r)}(e)}function RO(e,t,n){var r=new DA("/.info/"+t),i=Ak(n);e.infoData_.updateSnapshot(r,i);var o=CR(e.infoSyncTree_,r,i);SO(e.eventQueue_,r,o)}function OO(e){return e.nextWriteId_++}function LO(e,t,n,r,i){zO(e,"set",{path:t.toString(),value:n,priority:r});var o=AO(e),a=Ak(n,r),s=kR(e.serverSyncTree_,t),u=XR(a,s,o),l=OO(e),c=ER(e.serverSyncTree_,t,u,l,!0);wO(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||tA("set at "+t+" failed: "+n);var a=MR(e.serverSyncTree_,l,!o);SO(e.eventQueue_,t,a),jO(e,i,n,r)}));var h=XO(e,t);HO(e,h),SO(e.eventQueue_,h,[])}function NO(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&tP(e.onDisconnect_,t),jO(e,n,r,i)}))}function DO(e,t,n,r){var i=Ak(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&eP(e.onDisconnect_,t,i),jO(e,r,n,o)}))}function FO(e,t,n){var r;r=".info"===UA(t._path)?IR(e.infoSyncTree_,t,n):IR(e.serverSyncTree_,t,n),xO(e.eventQueue_,t._path,r)}function UO(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}function zO(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),QI.apply(void 0,yC([r],gC(t)))}function jO(e,t,n,r){t&&pA((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function BO(e,t,n){return kR(e.serverSyncTree_,t,n)||Ck.EMPTY_NODE}function VO(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||KO(e,t),JR(t)){var n=GO(e,t);wC(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=BO(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];wC(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=qA(t,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){zO(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(MR(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);KO(e,QR(e.transactionQueueTree_,t)),VO(e,e.transactionQueueTree_),SO(e.eventQueue_,t,i);for(s=0;s<o.length;s++)pA(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{tA("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}HO(e,t)}}),a)}(e,rO(t),n)}else eO(t)&&tO(t,(function(t){VO(e,t)}))}function HO(e,t){var n=WO(e,t),r=rO(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),a=function(a){var s,u,l=t[a],c=qA(n,l.path),h=!1;if(wC(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,s=l.abortReason,i=i.concat(MR(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,s="maxretry",i=i.concat(MR(e.serverSyncTree_,l.currentWriteId,!0));else{var f=BO(e,l.path,o);l.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){hO("transaction failed: Data returned ",d,l.path);var p=Ak(d);"object"==typeof d&&null!=d&&qC(d,".priority")||(p=p.updatePriority(f.getPriority()));var m=l.currentWriteId,v=AO(e),g=XR(p,f,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=OO(e),o.splice(o.indexOf(m),1),i=(i=i.concat(ER(e.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally))).concat(MR(e.serverSyncTree_,m,!0))}else h=!0,s="nodata",i=i.concat(MR(e.serverSyncTree_,l.currentWriteId,!0))}SO(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},s=0;s<t.length;s++)a(s);KO(e,e.transactionQueueTree_);for(s=0;s<r.length;s++)pA(r[s]);VO(e,e.transactionQueueTree_)}(e,GO(e,n),r),r}function WO(e,t){var n,r=e.transactionQueueTree_;for(n=UA(t);null!==n&&void 0===JR(r);)r=QR(r,n),n=UA(t=jA(t));return r}function GO(e,t){var n=[];return qO(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function qO(e,t,n){var r=JR(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);tO(t,(function(t){qO(e,t,n)}))}function KO(e,t){var n=JR(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ZR(t,n.length>0?n:void 0)}tO(t,(function(t){KO(e,t)}))}function XO(e,t){var n=rO(WO(e,t)),r=QR(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){YO(e,t)})),YO(e,r),nO(r,(function(t){YO(e,t)})),n}function YO(e,t){var n=JR(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(wC(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(wC(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(MR(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?ZR(t,void 0):n.length=o+1,SO(e.eventQueue_,rO(t),i);for(a=0;a<r.length;a++)pA(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $O=function(e,t){var n=QO(e),r=n.namespace;"firebase.com"===n.domain&&eA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||eA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new _A(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new DA(n.pathString)}},QO=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(XY){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=vC(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):tA("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},JO=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+WC(this.snapshot.exportVal())},e}(),ZO=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),eL=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return wC(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),tL=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new IC;return NO(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){gO("OnDisconnect.remove",this._path);var e=new IC;return DO(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){gO("OnDisconnect.set",this._path),cO("OnDisconnect.set",e,this._path,!1);var t=new IC;return DO(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){gO("OnDisconnect.setWithPriority",this._path),cO("OnDisconnect.setWithPriority",e,this._path,!1),dO("OnDisconnect.setWithPriority",t,!1);var n=new IC;return function(e,t,n,r,i){var o=Ak(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&eP(e.onDisconnect_,t,o),jO(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){gO("OnDisconnect.update",this._path),fO("OnDisconnect.update",e,this._path,!1);var t=new IC;return function(e,t,n,r){if(XC(n))return QI("onDisconnect().update() called with empty data.  Don't do anything."),void jO(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&cA(n,(function(n,r){var i=Ak(r);eP(e.onDisconnect_,WA(t,n),i)})),jO(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),nL=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return GA(this._path)?null:BA(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new aL(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=$k(this._queryParams),t=uA(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return $k(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=aI(t))instanceof e))return!1;var n=this._repo===t._repo,r=XA(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function rL(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function iL(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ak){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==rA)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==iA)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===wk){if(null!=t&&!lO(t)||null!=n&&!lO(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(wC(e.getIndex()instanceof Rk||e.getIndex()===Ok,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function oL(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var aL=function(e){function t(t,n){return e.call(this,t,n,new Gk,!1)||this}return fC(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=HA(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(nL),sL=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new DA(t),r=cL(this.ref,t);return new e(this._node.getChild(n),r,wk)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,cL(n.ref,r),wk))}))},e.prototype.hasChild=function(e){var t=new DA(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function uL(e,t){return(e=aI(e))._checkNotDeleted("ref"),void 0!==t?cL(e._root,t):e._root}function lL(e,t){(e=aI(e))._checkNotDeleted("refFromURL");var n=$O(t,e._repo.repoInfo_.nodeAdmin);yO("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||eA("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),uL(e,n.path.toString())}function cL(e,t){var n,r,i,o;return null===UA((e=aI(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),vO(n,r,i,o)):vO("child","path",t,!1),new aL(e._repo,WA(e._path,t))}function hL(e,t){e=aI(e),gO("push",e._path),cO("push",t,e._path,!0);var n,r=IO(e._repo),i=Nk(r),o=cL(e,i),a=cL(e,i);return n=null!=t?dL(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function fL(e){return gO("remove",e._path),dL(e,null)}function dL(e,t){e=aI(e),gO("set",e._path),cO("set",t,e._path,!1);var n=new IC;return LO(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function pL(e,t){e=aI(e),gO("setPriority",e._path),dO("setPriority",t,!1);var n=new IC;return LO(e._repo,WA(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function mL(e,t,n){if(gO("setWithPriority",e._path),cO("setWithPriority",t,e._path,!1),dO("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new IC;return LO(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function vL(e,t){fO("update",t,e._path,!1);var n=new IC;return function(e,t,n,r){zO(e,"update",{path:t.toString(),value:n});var i=!0,o=AO(e),a={};if(cA(n,(function(n,r){i=!1,a[n]=KR(WA(t,n),Ak(r),e.serverSyncTree_,o)})),i)QI("update() called with empty data.  Don't do anything."),jO(0,r,"ok",void 0);else{var s=OO(e),u=TR(e.serverSyncTree_,t,a,s);wO(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||tA("update at "+t+" failed: "+n);var a=MR(e.serverSyncTree_,s,!o),u=a.length>0?HO(e,t):t;SO(e.eventQueue_,u,a),jO(0,r,n,i)})),cA(n,(function(n){var r=XO(e,WA(t,n));HO(e,r)})),SO(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function gL(e){return function(e,t){var n=PR(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=Ak(n).withIndex(t._queryParams.getIndex()),i=CR(e.serverSyncTree_,t._path,r);return xO(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return zO(e,"get for query "+WC(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=aI(e))._repo,e).then((function(t){return new sL(t,new aL(e._repo,e._path),e._queryParams.getIndex())}))}var yL=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new JO("value",this,new sL(e.snapshotNode,new aL(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ZO(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),bL=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ZO(this,e,t):null},e.prototype.createEvent=function(e,t){wC(null!=e.childName,"Child events should have a childName.");var n=cL(new aL(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new JO(e.type,this,new sL(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function _L(e,t,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){FO(e._repo,e,l),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new eL(n,o||void 0),l="value"===t?new yL(u):new bL(t,u);return function(e,t,n){var r;r=".info"===UA(t._path)?AR(e.infoSyncTree_,t,n):AR(e.serverSyncTree_,t,n),xO(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return FO(e._repo,e,l)}}function wL(e,t,n,r){return _L(e,"value",t,n,r)}function xL(e,t,n,r){return _L(e,"child_added",t,n,r)}function SL(e,t,n,r){return _L(e,"child_changed",t,n,r)}function EL(e,t,n,r){return _L(e,"child_moved",t,n,r)}function TL(e,t,n,r){return _L(e,"child_removed",t,n,r)}function ML(e,t,n){var r=null,i=n?new eL(n):null;"value"===t?r=new yL(i):t&&(r=new bL(t,i)),FO(e._repo,e,r)}var CL=function(){},IL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return fC(t,e),t.prototype._apply=function(e){cO("endAt",this._value,e._path,!0);var t=Kk(e._queryParams,this._value,this._key);if(oL(t),iL(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)},t}(CL);function AL(e,t){return mO("endAt","key",t,!0),new IL(e,t)}var kL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return fC(t,e),t.prototype._apply=function(e){cO("endBefore",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===ak?("string"==typeof n&&(n=Fk(n)),i=Kk(t,n,r)):i=Kk(t,n,null==r?rA:Fk(r)),i.endBeforeSet_=!0,i);if(oL(o),iL(o),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nL(e._repo,e._path,o,e._orderByCalled)},t}(CL);function PL(e,t){return mO("endBefore","key",t,!0),new kL(e,t)}var RL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return fC(t,e),t.prototype._apply=function(e){cO("startAt",this._value,e._path,!0);var t=qk(e._queryParams,this._value,this._key);if(oL(t),iL(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)},t}(CL);function OL(e,t){return void 0===e&&(e=null),mO("startAt","key",t,!0),new RL(e,t)}var LL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return fC(t,e),t.prototype._apply=function(e){cO("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;e.index_===ak?("string"==typeof t&&(t=Dk(t)),r=qk(e,t,n)):r=qk(e,t,null==n?iA:Dk(n));return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(oL(t),iL(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)},t}(CL);function NL(e,t){return mO("startAfter","key",t,!0),new LL(e,t)}var DL=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return fC(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new nL(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled);var t,n,r},t}(CL);function FL(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new DL(e)}var UL=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return fC(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new nL(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled);var t,n,r},t}(CL);function zL(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new UL(e)}var jL=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return fC(t,e),t.prototype._apply=function(e){rL(e,"orderByChild");var t=new DA(this._path);if(GA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Rk(t),r=Xk(e._queryParams,n);return iL(r),new nL(e._repo,e._path,r,!0)},t}(CL);function BL(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vO("orderByChild","path",e,!1),new jL(e)}var VL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype._apply=function(e){rL(e,"orderByKey");var t=Xk(e._queryParams,ak);return iL(t),new nL(e._repo,e._path,t,!0)},t}(CL);function HL(){return new VL}var WL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype._apply=function(e){rL(e,"orderByPriority");var t=Xk(e._queryParams,wk);return iL(t),new nL(e._repo,e._path,t,!0)},t}(CL);function GL(){return new WL}var qL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype._apply=function(e){rL(e,"orderByValue");var t=Xk(e._queryParams,Ok);return iL(t),new nL(e._repo,e._path,t,!0)},t}(CL);function KL(){return new qL}var XL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return fC(t,e),t.prototype._apply=function(e){if(cO("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IL(this._value,this._key)._apply(new RL(this._value,this._key)._apply(e))},t}(CL);function YL(e,t){return mO("equalTo","key",t,!0),new XL(e,t)}function $L(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=aI(e);try{for(var a=vC(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}!function(e){wC(!rR,"__referenceConstructor has already been defined"),rR=e}(aL),function(e){wC(!cR,"__referenceConstructor has already been defined"),cR=e}(aL);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QL={},JL=!1;function ZL(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||eA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),QI("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=$O(o,i),u=s.repoInfo,l=void 0;"undefined"!=typeof process&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,o="http://"+l+"?ns="+u.namespace,u=(s=$O(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new yA(yA.OWNER):new gA(e.name,e.options,t);yO("Invalid Firebase Database URL",s),GA(s.path)||eA("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=QL[t.name];i||(i={},QL[t.name]=i);var o=i[e.toURLString()];o&&eA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new MO(e,JL,n,r),i[e.toURLString()]=o,o}(u,e,c,new vA(e.name,n));return new eN(h,e)}var eN=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(CO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new aL(this._repo,FA())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return this._checkNotDeleted("delete"),e=this._repo,t=this.app.name,(n=QL[t])&&n[e.key]===e||eA("Database "+t+"("+e.repoInfo_+") has already been deleted."),UO(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&eA("Cannot call "+e+" on a deleted database.")},e}();function tN(e,t,n,r){void 0===r&&(r={}),(e=aI(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&eA("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&eA('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new yA(yA.OWNER);else if(r.mockUserToken){var a=AC(r.mockUserToken,e.app.options.projectId);o=new yA(a)}!function(e,t,n,r){e.repoInfo_=new _A(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function nN(e){(e=aI(e))._checkNotDeleted("goOffline"),UO(e._repo)}function rN(e){var t;(e=aI(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iN={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oN=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function aN(e,t,n){var r;if(e=aI(e),gO("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new IC,a=wL(e,(function(){}));return function(e,t,n,r,i,o){zO(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:GI(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=BO(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{hO("transaction failed: Data returned ",u,a.path),a.status=0;var l=QR(e.transactionQueueTree_,t),c=JR(l)||[];c.push(a),ZR(l,c);var h=void 0;"object"==typeof u&&null!==u&&qC(u,".priority")?(h=KC(u,".priority"),wC(lO(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(kR(e.serverSyncTree_,t)||Ck.EMPTY_NODE).getPriority().val();var f=AO(e),d=Ak(u,h),p=XR(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=OO(e);var m=ER(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);SO(e.eventQueue_,t,m),VO(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new sL(r,new aL(e._repo,e._path),wk),o.resolve(new oN(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sN=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){eI("OnDisconnect.cancel",0,1,arguments.length),nI("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){eI("OnDisconnect.remove",0,1,arguments.length),nI("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){eI("OnDisconnect.set",1,2,arguments.length),nI("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){eI("OnDisconnect.setWithPriority",2,3,arguments.length),nI("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if(eI("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,tA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nI("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),uN=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return eI("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),lN=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return eI("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return eI("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return eI("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return eI("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return eI("DataSnapshot.child",0,1,arguments.length),t=String(t),vO("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return eI("DataSnapshot.hasChild",1,1,arguments.length),vO("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return eI("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return eI("DataSnapshot.forEach",1,1,arguments.length),nI("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return eI("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return eI("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return eI("DataSnapshot.ref",0,0,arguments.length),new hN(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),cN=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var o,a=this;eI("Query.on",2,4,arguments.length),nI("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new lN(a.database,e),t)};u.userCallback=n,u.context=s.context;var l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return wL(this._delegate,u,l),n;case"child_added":return xL(this._delegate,u,l),n;case"child_removed":return TL(this._delegate,u,l),n;case"child_changed":return SL(this._delegate,u,l),n;case"child_moved":return EL(this._delegate,u,l),n;default:throw new Error(tI("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if(eI("Query.off",0,3,arguments.length),pO("Query.off",e,!0),nI("Query.off","callback",t,!0),rI("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,ML(this._delegate,e,r)}else ML(this._delegate,e)},e.prototype.get=function(){var e=this;return gL(this._delegate).then((function(t){return new lN(e.database,t)}))},e.prototype.once=function(t,n,r,i){var o=this;eI("Query.once",1,4,arguments.length),nI("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new IC,u=function(e,t){var r=new lN(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var l=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":wL(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":xL(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":TL(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":SL(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":EL(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(tI("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},e.prototype.limitToFirst=function(t){return eI("Query.limitToFirst",1,1,arguments.length),new e(this.database,$L(this._delegate,FL(t)))},e.prototype.limitToLast=function(t){return eI("Query.limitToLast",1,1,arguments.length),new e(this.database,$L(this._delegate,zL(t)))},e.prototype.orderByChild=function(t){return eI("Query.orderByChild",1,1,arguments.length),new e(this.database,$L(this._delegate,BL(t)))},e.prototype.orderByKey=function(){return eI("Query.orderByKey",0,0,arguments.length),new e(this.database,$L(this._delegate,HL()))},e.prototype.orderByPriority=function(){return eI("Query.orderByPriority",0,0,arguments.length),new e(this.database,$L(this._delegate,GL()))},e.prototype.orderByValue=function(){return eI("Query.orderByValue",0,0,arguments.length),new e(this.database,$L(this._delegate,KL()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),eI("Query.startAt",0,2,arguments.length),new e(this.database,$L(this._delegate,OL(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),eI("Query.startAfter",0,2,arguments.length),new e(this.database,$L(this._delegate,NL(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),eI("Query.endAt",0,2,arguments.length),new e(this.database,$L(this._delegate,AL(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),eI("Query.endBefore",0,2,arguments.length),new e(this.database,$L(this._delegate,PL(t,n)))},e.prototype.equalTo=function(t,n){return eI("Query.equalTo",1,2,arguments.length),new e(this.database,$L(this._delegate,YL(t,n)))},e.prototype.toString=function(){return eI("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return eI("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(eI("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,nI(e,"cancel",r.cancel,!0),r.context=n,rI(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(tI(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new hN(this.database,new aL(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),hN=function(e){function t(t,n){var r=e.call(this,t,new nL(n._repo,n._path,new Gk,!1))||this;return r.database=t,r._delegate=n,r}return fC(t,e),t.prototype.getKey=function(){return eI("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return eI("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,cL(this._delegate,e))},t.prototype.getParent=function(){eI("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return eI("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){eI("Reference.set",1,2,arguments.length),nI("Reference.set","onComplete",t,!0);var n=dL(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if(eI("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,tA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gO("Reference.update",this._delegate._path),nI("Reference.update","onComplete",t,!0);var i=vL(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){eI("Reference.setWithPriority",2,3,arguments.length),nI("Reference.setWithPriority","onComplete",n,!0);var r=mL(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){eI("Reference.remove",0,1,arguments.length),nI("Reference.remove","onComplete",e,!0);var t=fL(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;eI("Reference.transaction",1,3,arguments.length),nI("Reference.transaction","transactionUpdate",e,!1),nI("Reference.transaction","onComplete",t,!0),bO("Reference.transaction","applyLocally",n,!0);var i=aN(this._delegate,e,{applyLocally:n}).then((function(e){return new uN(e.committed,new lN(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){eI("Reference.setPriority",1,2,arguments.length),nI("Reference.setPriority","onComplete",t,!0);var n=pL(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;eI("Reference.push",0,2,arguments.length),nI("Reference.push","onComplete",n,!0);var i=hL(this._delegate,e),o=i.then((function(e){return new t(r.database,e)}));n&&o.then((function(){return n(null)}),(function(e){return n(e)}));var a=new t(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},t.prototype.onDisconnect=function(){return gO("Reference.onDisconnect",this._delegate._path),new sN(new tL(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(cN),fN=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),tN(this._delegate,e,t,n)},e.prototype.ref=function(e){if(eI("database.ref",0,1,arguments.length),e instanceof hN){var t=lL(this._delegate,e.toString());return new hN(this,t)}t=uL(this._delegate,e);return new hN(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";eI(t,1,1,arguments.length);var n=lL(this._delegate,e);return new hN(this,n)},e.prototype.goOffline=function(){return eI("database.goOffline",0,0,arguments.length),nN(this._delegate)},e.prototype.goOnline=function(){return eI("database.goOnline",0,0,arguments.length),rN(this._delegate)},e.ServerValue={TIMESTAMP:iN,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dN=Object.freeze({__proto__:null,forceLongPolling:function(){kA.forceDisallow(),CA.forceAllow()},forceWebSockets:function(){CA.forceDisallow()},isWebSocketsAvailable:function(){return kA.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var n;t?(e.statsListener_||(e.statsListener_=new oP(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);cA(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;FI(r);var u=new uI("auth-internal",new cI("database-standalone"));return u.setComponent(new sI("auth-internal",(function(){return i}),"PRIVATE")),{instance:new fN(ZL(t,u,void 0,n,s),t),namespace:o}}}),pN=nk;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nk.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},nk.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var mN,vN=RA,gN=_A,yN=Object.freeze({__proto__:null,DataConnection:pN,RealTimeConnection:vN,hijackHash:function(e){var t=nk.prototype.put;return nk.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){nk.prototype.put=t}},ConnectionTarget:gN,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){JL=e}(e)}}),bN=fN.ServerValue;FI((mN=NI).SDK_VERSION),mN.INTERNAL.registerComponent(new sI("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new fN(ZL(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:hN,Query:cN,Database:fN,DataSnapshot:lN,enableLogging:$I,INTERNAL:dN,ServerValue:bN,TEST_ACCESS:yN}).setMultipleInstances(!0)),mN.registerVersion("@firebase/database","0.10.7");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var _N=function(e,t){return(_N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function wN(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var xN,SN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},EN=EN||{},TN=SN||self;function MN(){}function CN(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function IN(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var AN="closure_uid_"+(1e9*Math.random()>>>0),kN=0;function PN(e,t,n){return e.call.apply(e.bind,arguments)}function RN(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ON(e,t,n){return(ON=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?PN:RN).apply(null,arguments)}function LN(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function NN(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function DN(){this.s=this.s,this.o=this.o}var FN={};DN.prototype.s=!1,DN.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,AN)&&e[AN]||(e[AN]=++kN)}(this);delete FN[e]}},DN.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var UN=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},zN=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function jN(e){return Array.prototype.concat.apply([],arguments)}function BN(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function VN(e){return/^[\s\xa0]*$/.test(e)}var HN,WN=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function GN(e,t){return-1!=e.indexOf(t)}function qN(e,t){return e<t?-1:e>t?1:0}e:{var KN=TN.navigator;if(KN){var XN=KN.userAgent;if(XN){HN=XN;break e}}HN=""}function YN(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function $N(e){var t={};for(var n in e)t[n]=e[n];return t}var QN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JN(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<QN.length;o++)n=QN[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ZN(e){return ZN[" "](e),e}ZN[" "]=MN;var eD,tD=GN(HN,"Opera"),nD=GN(HN,"Trident")||GN(HN,"MSIE"),rD=GN(HN,"Edge"),iD=rD||nD,oD=GN(HN,"Gecko")&&!(GN(HN.toLowerCase(),"webkit")&&!GN(HN,"Edge"))&&!(GN(HN,"Trident")||GN(HN,"MSIE"))&&!GN(HN,"Edge"),aD=GN(HN.toLowerCase(),"webkit")&&!GN(HN,"Edge");function sD(){var e=TN.document;return e?e.documentMode:void 0}e:{var uD="",lD=function(){var e=HN;return oD?/rv:([^\);]+)(\)|;)/.exec(e):rD?/Edge\/([\d\.]+)/.exec(e):nD?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):aD?/WebKit\/(\S+)/.exec(e):tD?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lD&&(uD=lD?lD[1]:""),nD){var cD=sD();if(null!=cD&&cD>parseFloat(uD)){eD=String(cD);break e}}eD=uD}var hD,fD={};function dD(){return function(e){var t=fD;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=WN(String(eD)).split("."),n=WN("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=qN(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||qN(0==o[2].length,0==a[2].length)||qN(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(TN.document&&nD){var pD=sD();hD=pD||(parseInt(eD,10)||void 0)}else hD=void 0;var mD=hD,vD=function(){if(!TN.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{TN.addEventListener("test",MN,t),TN.removeEventListener("test",MN,t)}catch(a_){}return e}();function gD(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function yD(e,t){if(gD.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(oD){e:{try{ZN(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:bD[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yD.Z.h.call(this)}}gD.prototype.h=function(){this.defaultPrevented=!0},NN(yD,gD);var bD={2:"touch",3:"pen",4:"mouse"};yD.prototype.h=function(){yD.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _D="closure_listenable_"+(1e6*Math.random()|0),wD=0;function xD(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++wD,this.ca=this.fa=!1}function SD(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ED(e){this.src=e,this.g={},this.h=0}function TD(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=UN(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(SD(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function MD(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}ED.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=MD(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new xD(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var CD="closure_lm_"+(1e6*Math.random()|0),ID={};function AD(e,t,n,r,i){if(r&&r.once)return PD(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)AD(e,t[o],n,r,i);return null}return n=UD(n),e&&e[_D]?e.N(t,n,IN(r)?!!r.capture:!!r,i):kD(e,t,n,!1,r,i)}function kD(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=IN(i)?!!i.capture:!!i,s=DD(e);if(s||(e[CD]=s=new ED(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ND;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vD||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(LD(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function PD(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)PD(e,t[o],n,r,i);return null}return n=UD(n),e&&e[_D]?e.O(t,n,IN(r)?!!r.capture:!!r,i):kD(e,t,n,!0,r,i)}function RD(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)RD(e,t[o],n,r,i);else r=IN(r)?!!r.capture:!!r,n=UD(n),e&&e[_D]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=MD(o=e.g[t],n,r,i))&&(SD(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=DD(e))&&(t=e.g[t.toString()],e=-1,t&&(e=MD(t,n,r,i)),(n=-1<e?t[e]:null)&&OD(n))}function OD(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[_D])TD(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(LD(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=DD(t))?(TD(n,e),0==n.h&&(n.src=null,t[CD]=null)):SD(e)}}}function LD(e){return e in ID?ID[e]:ID[e]="on"+e}function ND(e,t){if(e.ca)e=!0;else{t=new yD(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&OD(e),e=n.call(r,t)}return e}function DD(e){return(e=e[CD])instanceof ED?e:null}var FD="__closure_events_fn_"+(1e9*Math.random()>>>0);function UD(e){return"function"==typeof e?e:(e[FD]||(e[FD]=function(t){return e.handleEvent(t)}),e[FD])}function zD(){DN.call(this),this.i=new ED(this),this.P=this,this.I=null}function jD(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new gD(t,e);else if(t instanceof gD)t.target=t.target||e;else{var i=t;JN(t=new gD(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=BD(a,r,!0,t)&&i}if(i=BD(a=t.g=e,r,!0,t)&&i,i=BD(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=BD(a=t.g=n[o],r,!1,t)&&i}function BD(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&TD(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}NN(zD,DN),zD.prototype[_D]=!0,zD.prototype.removeEventListener=function(e,t,n,r){RD(this,e,t,n,r)},zD.prototype.M=function(){if(zD.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)SD(n[r]);delete t.g[e],t.h--}}this.I=null},zD.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zD.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var VD=TN.JSON.stringify;function HD(){var e=QD,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var WD,GD=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=qD.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),qD=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new KD}),(function(e){return e.reset()})),KD=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function XD(e){TN.setTimeout((function(){throw e}),0)}function YD(e,t){WD||function(){var e=TN.Promise.resolve(void 0);WD=function(){e.then(JD)}}(),$D||(WD(),$D=!0),QD.add(e,t)}var $D=!1,QD=new GD;function JD(){for(var e;e=HD();){try{e.h.call(e.g)}catch(a_){XD(a_)}var t=qD;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$D=!1}function ZD(e,t){zD.call(this),this.h=e||1,this.g=t||TN,this.j=ON(this.kb,this),this.l=Date.now()}function eF(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function tF(e,t,n){if("function"==typeof e)n&&(e=ON(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ON(e.handleEvent,e)}return 2147483647<Number(t)?-1:TN.setTimeout(e,t||0)}function nF(e){e.g=tF((function(){e.g=null,e.i&&(e.i=!1,nF(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}NN(ZD,zD),(xN=ZD.prototype).da=!1,xN.S=null,xN.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jD(this,"tick"),this.da&&(eF(this),this.start()))}},xN.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xN.M=function(){ZD.Z.M.call(this),eF(this),delete this.g};var rF=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:nF(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(TN.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(DN);function iF(e){DN.call(this),this.h=e,this.g={}}NN(iF,DN);var oF=[];function aF(e,t,n,r){Array.isArray(n)||(n&&(oF[0]=n.toString()),n=oF);for(var i=0;i<n.length;i++){var o=AD(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function sF(e){YN(e.g,(function(e,t){this.g.hasOwnProperty(t)&&OD(e)}),e),e.g={}}function uF(){this.g=!0}function lF(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return VD(n)}catch(o_){return t}}(e,n)+(r?" "+r:"")}))}iF.prototype.M=function(){iF.Z.M.call(this),sF(this)},iF.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uF.prototype.Aa=function(){this.g=!1},uF.prototype.info=function(){};var cF={},hF=null;function fF(){return hF=hF||new zD}function dF(e){gD.call(this,cF.Ma,e)}function pF(e){var t=fF();jD(t,new dF(t,e))}function mF(e,t){gD.call(this,cF.STAT_EVENT,e),this.stat=t}function vF(e){var t=fF();jD(t,new mF(t,e))}function gF(e,t){gD.call(this,cF.Na,e),this.size=t}function yF(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return TN.setTimeout((function(){e()}),t)}cF.Ma="serverreachability",NN(dF,gD),cF.STAT_EVENT="statevent",NN(mF,gD),cF.Na="timingevent",NN(gF,gD);var bF={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_F={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wF(){}function xF(e){return e.h||(e.h=e.i())}function SF(){}wF.prototype.h=null;var EF,TF={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function MF(){gD.call(this,"d")}function CF(){gD.call(this,"c")}function IF(){}function AF(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new iF(this),this.P=PF,e=iD?125:void 0,this.W=new ZD(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kF}function kF(){this.i=null,this.g="",this.h=!1}NN(MF,gD),NN(CF,gD),NN(IF,wF),IF.prototype.g=function(){return new XMLHttpRequest},IF.prototype.i=function(){return{}},EF=new IF;var PF=45e3,RF={},OF={};function LF(e,t,n){e.K=1,e.v=rU(QF(t)),e.s=n,e.U=!0,NF(e,null)}function NF(e,t){e.F=Date.now(),zF(e),e.A=QF(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),vU(n.h,"t",r),e.C=0,n=e.l.H,e.h=new kF,e.g=gz(e.l,n?t:null,!e.s),0<e.O&&(e.L=new rF(ON(e.Ia,e,e.g),e.O)),aF(e.V,e.g,"readystatechange",e.gb),t=e.H?$N(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),pF(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function DF(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function FF(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=UF(e,n))==OF){4==t&&(e.o=4,vF(14),i=!1),lF(e.j,e.m,null,"[Incomplete Response]");break}if(r==RF){e.o=4,vF(15),lF(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}lF(e.j,e.m,r,null),WF(e,r)}DF(e)&&r!=OF&&r!=RF&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vF(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),lz(t),t.L=!0,vF(11))):(lF(e.j,e.m,n,"[Invalid Chunked Response]"),HF(e),VF(e))}function UF(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?OF:(n=Number(t.substring(n,r)),isNaN(n)?RF:(r+=1)+n>t.length?OF:(t=t.substr(r,n),e.C=r+n,t))}function zF(e){e.Y=Date.now()+e.P,jF(e,e.P)}function jF(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yF(ON(e.eb,e),t)}function BF(e){e.B&&(TN.clearTimeout(e.B),e.B=null)}function VF(e){0==e.l.G||e.I||fz(e.l,e)}function HF(e){BF(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,eF(e.W),sF(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function WF(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||SU(n.i,e)))if(n.I=e.N,!e.J&&SU(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hz(n),ez(n)}uz(n),vF(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=yF(ON(n.ab,n),6e3));if(1>=xU(n.i)&&n.ka){try{n.ka()}catch(v){}n.ka=void 0}}else pz(n,11)}else if((e.J||n.g==e)&&hz(n),!VN(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(GN(c,"spdy")||GN(c,"quic")||GN(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(EU(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,nU(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=vz(r,r.H?r.la:null,r.W),d.J){TU(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(BF(p),zF(p)),r.g=d}else sz(r);0<n.l.length&&rz(n)}else"stop"!=o[0]&&"close"!=o[0]||pz(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?pz(n,7):ZU(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}pF(4)}catch(v){}}function GF(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(CN(e)||"string"==typeof e)zN(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(CN(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(CN(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function qF(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof qF)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function KF(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];XF(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)XF(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function XF(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(xN=AF.prototype).setTimeout=function(e){this.P=e},xN.gb=function(e){e=e.target;var t=this.L;t&&3==XU(e)?t.l():this.Ia(e)},xN.Ia=function(e){try{if(e==this.g)e:{var t=XU(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||iD||this.g&&(this.h.h||this.g.ga()||YU(this.g)))){this.I||4!=t||7==n||pF(8==n||0>=r?3:2),BF(this);var i=this.g.ba();this.N=i;t:if(DF(this)){var o=YU(this.g);e="";var a=o.length,s=4==XU(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){HF(this),VF(this);var u="";break t}this.h.i=new TN.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!VN(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,vF(12),HF(this),VF(this);break e}lF(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,WF(this,i)}this.U?(FF(this,t,u),iD&&this.i&&3==t&&(aF(this.V,this.W,"tick",this.fb),this.W.start())):(lF(this.j,this.m,u,null),WF(this,u)),4==t&&HF(this),this.i&&!this.I&&(4==t?fz(this.l,this):(this.i=!1,zF(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,vF(12)):(this.o=0,vF(13)),HF(this),VF(this)}}}catch(f){}},xN.fb=function(){if(this.g){var e=XU(this.g),t=this.g.ga();this.C<t.length&&(BF(this),FF(this,e,t),this.i&&4!=e&&zF(this))}},xN.cancel=function(){this.I=!0,HF(this)},xN.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(pF(3),vF(17)),HF(this),this.o=2,VF(this)):jF(this,this.Y-e)},(xN=qF.prototype).R=function(){KF(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},xN.T=function(){return KF(this),this.g.concat()},xN.get=function(e,t){return XF(this.h,e)?this.h[e]:t},xN.set=function(e,t){XF(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},xN.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var YF=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $F(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof $F){this.g=void 0!==t?t:e.g,JF(this,e.j),this.s=e.s,ZF(this,e.i),eU(this,e.m),this.l=e.l,t=e.h;var n=new fU;n.i=t.i,t.g&&(n.g=new qF(t.g),n.h=t.h),tU(this,n),this.o=e.o}else e&&(n=String(e).match(YF))?(this.g=!!t,JF(this,n[1]||"",!0),this.s=iU(n[2]||""),ZF(this,n[3]||"",!0),eU(this,n[4]),this.l=iU(n[5]||"",!0),tU(this,n[6]||"",!0),this.o=iU(n[7]||"")):(this.g=!!t,this.h=new fU(null,this.g))}function QF(e){return new $F(e)}function JF(e,t,n){e.j=n?iU(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ZF(e,t,n){e.i=n?iU(t,!0):t}function eU(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tU(e,t,n){t instanceof fU?(e.h=t,function(e,t){t&&!e.j&&(dU(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(pU(this,t),vU(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=oU(t,cU)),e.h=new fU(t,e.g))}function nU(e,t,n){e.h.set(t,n)}function rU(e){return nU(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function iU(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function oU(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,aU),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function aU(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$F.prototype.toString=function(){var e=[],t=this.j;t&&e.push(oU(t,sU,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(oU(t,sU,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(oU(n,"/"==n.charAt(0)?lU:uU,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",oU(n,hU)),e.join("")};var sU=/[#\/\?@]/g,uU=/[#\?:]/g,lU=/[#\?]/g,cU=/[#\?@]/g,hU=/#/g;function fU(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dU(e){e.g||(e.g=new qF,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function pU(e,t){dU(e),t=gU(e,t),XF(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,XF((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&KF(e)))}function mU(e,t){return dU(e),t=gU(e,t),XF(e.g.h,t)}function vU(e,t,n){pU(e,t),0<n.length&&(e.i=null,e.g.set(gU(e,t),BN(n)),e.h+=n.length)}function gU(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(xN=fU.prototype).add=function(e,t){dU(this),this.i=null,e=gU(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xN.forEach=function(e,t){dU(this),this.g.forEach((function(n,r){zN(n,(function(n){e.call(t,n,r,this)}),this)}),this)},xN.T=function(){dU(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},xN.R=function(e){dU(this);var t=[];if("string"==typeof e)mU(this,e)&&(t=jN(t,this.g.get(gU(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=jN(t,e[n])}return t},xN.set=function(e,t){return dU(this),this.i=null,mU(this,e=gU(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xN.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},xN.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var yU=function(e,t){this.h=e,this.g=t};function bU(e){this.l=e||_U,TN.PerformanceNavigationTiming?e=0<(e=TN.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(TN.g&&TN.g.Ea&&TN.g.Ea()&&TN.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _U=10;function wU(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xU(e){return e.h?1:e.g?e.g.size:0}function SU(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function EU(e,t){e.g?e.g.add(t):e.h=t}function TU(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function MU(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=wN(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return BN(e.i)}function CU(){}function IU(){this.g=new CU}function AU(e,t,n){var r=n||"";try{GF(e,(function(e,n){var i=e;IN(e)&&(i=VD(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(XY){throw t.push(r+"type="+encodeURIComponent("_badmap")),XY}}function kU(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function PU(e){this.l=e.$b||null,this.j=e.ib||!1}function RU(e,t){zD.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=OU,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bU.prototype.cancel=function(){var e,t;if(this.i=MU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=wN(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},CU.prototype.stringify=function(e){return TN.JSON.stringify(e,void 0)},CU.prototype.parse=function(e){return TN.JSON.parse(e,void 0)},NN(PU,wF),PU.prototype.g=function(){return new RU(this.l,this.j)},PU.prototype.i=function(e){return function(){return e}}({}),NN(RU,zD);var OU=0;function LU(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function NU(e){e.readyState=4,e.l=null,e.j=null,e.A=null,DU(e)}function DU(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xN=RU.prototype).open=function(e,t){if(this.readyState!=OU)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,DU(this)},xN.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||TN).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},xN.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,NU(this)),this.readyState=OU},xN.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,DU(this)),this.g&&(this.readyState=3,DU(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==TN.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LU(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},xN.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?NU(this):DU(this),3==this.readyState&&LU(this)}},xN.Ua=function(e){this.g&&(this.response=this.responseText=e,NU(this))},xN.Ta=function(e){this.g&&(this.response=e,NU(this))},xN.ha=function(){this.g&&NU(this)},xN.setRequestHeader=function(e,t){this.v.append(e,t)},xN.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xN.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(RU.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var FU=TN.JSON.parse;function UU(e){zD.call(this),this.headers=new qF,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zU,this.K=this.L=!1}NN(UU,zD);var zU="",jU=/^https?$/i,BU=["POST","PUT"];function VU(e){return"content-type"==e.toLowerCase()}function HU(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,WU(e),qU(e)}function WU(e){e.D||(e.D=!0,jD(e,"complete"),jD(e,"error"))}function GU(e){if(e.h&&void 0!==EN&&(!e.C[1]||4!=XU(e)||2!=e.ba()))if(e.v&&4==XU(e))tF(e.Fa,0,e);else if(jD(e,"readystatechange"),4==XU(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(YF)[1]||null;if(!o&&TN.self&&TN.self.location){var a=TN.self.location.protocol;o=a.substr(0,a.length-1)}i=!jU.test(o?o.toLowerCase():"")}t=i}if(t)jD(e,"complete"),jD(e,"success");else{e.m=6;try{var s=2<XU(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",WU(e)}}finally{qU(e)}}}function qU(e,t){if(e.g){KU(e);var n=e.g,r=e.C[0]?MN:null;e.g=null,e.C=null,t||jD(e,"ready");try{n.onreadystatechange=r}catch(XY){}}}function KU(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(TN.clearTimeout(e.A),e.A=null)}function XU(e){return e.g?e.g.readyState:0}function YU(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case zU:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $U(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return YN(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):nU(e,t,n))}function QU(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function JU(e){this.za=0,this.l=[],this.h=new uF,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=QU("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=QU("baseRetryDelayMs",5e3,e),this.$a=QU("retryDelaySeedMs",1e4,e),this.Ya=QU("forwardChannelMaxRetries",2,e),this.ra=QU("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new bU(e&&e.concurrentRequestLimit),this.Ca=new IU,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ZU(e){if(tz(e),3==e.G){var t=e.V++,n=QF(e.F);nU(n,"SID",e.J),nU(n,"RID",t),nU(n,"TYPE","terminate"),oz(e,n),(t=new AF(e,e.h,t,void 0)).K=2,t.v=rU(QF(n)),n=!1,TN.navigator&&TN.navigator.sendBeacon&&(n=TN.navigator.sendBeacon(t.v.toString(),"")),!n&&TN.Image&&((new Image).src=t.v,n=!0),n||(t.g=gz(t.l,null),t.g.ea(t.v)),t.F=Date.now(),zF(t)}mz(e)}function ez(e){e.g&&(lz(e),e.g.cancel(),e.g=null)}function tz(e){ez(e),e.u&&(TN.clearTimeout(e.u),e.u=null),hz(e),e.i.cancel(),e.m&&("number"==typeof e.m&&TN.clearTimeout(e.m),e.m=null)}function nz(e,t){e.l.push(new yU(e.Za++,t)),3==e.G&&rz(e)}function rz(e){wU(e.i)||e.m||(e.m=!0,YD(e.Ha,e),e.C=0)}function iz(e,t){var n;n=t?t.m:e.V++;var r=QF(e.F);nU(r,"SID",e.J),nU(r,"RID",n),nU(r,"AID",e.U),oz(e,r),e.o&&e.s&&$U(r,e.o,e.s),n=new AF(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=az(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),EU(e.i,n),LF(n,r,t)}function oz(e,t){e.j&&GF({},(function(e,n){nU(t,n,e)}))}function az(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ON(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=o))o=Math.max(0,i[u].h-100),s=!1;else try{AU(c,a,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function sz(e){e.g||e.u||(e.Y=1,YD(e.Ga,e),e.A=0)}function uz(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=yF(ON(e.Ga,e),dz(e,e.A)),e.A++,!0)}function lz(e){null!=e.B&&(TN.clearTimeout(e.B),e.B=null)}function cz(e){e.g=new AF(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=QF(e.oa);nU(t,"RID","rpc"),nU(t,"SID",e.J),nU(t,"CI",e.N?"0":"1"),nU(t,"AID",e.U),oz(e,t),nU(t,"TYPE","xmlhttp"),e.o&&e.s&&$U(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=rU(QF(t)),n.s=null,n.U=!0,NF(n,e)}function hz(e){null!=e.v&&(TN.clearTimeout(e.v),e.v=null)}function fz(e,t){var n=null;if(e.g==t){hz(e),lz(e),e.g=null;var r=2}else{if(!SU(e.i,t))return;n=t.D,TU(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;jD(r=fF(),new gF(r,n,t,i)),rz(e)}else sz(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(xU(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=yF(ON(e.Ha,e,t),dz(e,e.C)),e.C++,0)))}(e,t)||2==r&&uz(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:pz(e,5);break;case 4:pz(e,10);break;case 3:pz(e,6);break;default:pz(e,2)}}function dz(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function pz(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ON(e.jb,e);n||(n=new $F("//www.google.com/images/cleardot.gif"),TN.location&&"http"==TN.location.protocol||JF(n,"https"),rU(n)),function(e,t){var n=new uF;if(TN.Image){var r=new Image;r.onload=LN(kU,n,r,"TestLoadImage: loaded",!0,t),r.onerror=LN(kU,n,r,"TestLoadImage: error",!1,t),r.onabort=LN(kU,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=LN(kU,n,r,"TestLoadImage: timeout",!1,t),TN.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vF(2);e.G=0,e.j&&e.j.va(t),mz(e),tz(e)}function mz(e){e.G=0,e.I=-1,e.j&&(0==MU(e.i).length&&0==e.l.length||(e.i.i.length=0,BN(e.l),e.l.length=0),e.j.ua())}function vz(e,t,n){var r=function(e){return e instanceof $F?QF(e):new $F(e,void 0)}(n);if(""!=r.i)t&&ZF(r,t+"."+r.i),eU(r,r.m);else{var i=TN.location;r=function(e,t,n,r){var i=new $F(null,void 0);return e&&JF(i,e),t&&ZF(i,t),n&&eU(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&YN(e.aa,(function(e,t){nU(r,t,e)})),t=e.D,n=e.sa,t&&n&&nU(r,t,n),nU(r,"VER",e.ma),oz(e,r),r}function gz(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new UU(new PU({ib:!0})):new UU(e.qa)).L=e.H,t}function yz(){}function bz(){if(nD&&!(10<=Number(mD)))throw Error("Environmental error: no available transport.")}function _z(e,t){zD.call(this),this.g=new JU(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!VN(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!VN(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sz(this)}function wz(e){MF.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xz(){CF.call(this),this.status=1}function Sz(e){this.g=e}(xN=UU.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():EF.g(),this.C=this.u?xF(this.u):xF(EF),this.g.onreadystatechange=ON(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void HU(this,o)}e=n||"";var i=new qF(this.headers);r&&GF(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=VU,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=TN.FormData&&e instanceof TN.FormData,!(0<=UN(BU,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{KU(this),0<this.B&&((this.K=function(e){return nD&&dD()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ON(this.pa,this)):this.A=tF(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){HU(this,o)}},xN.pa=function(){void 0!==EN&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jD(this,"timeout"),this.abort(8))},xN.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jD(this,"complete"),jD(this,"abort"),qU(this))},xN.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qU(this,!0)),UU.Z.M.call(this)},xN.Fa=function(){this.s||(this.F||this.v||this.l?GU(this):this.cb())},xN.cb=function(){GU(this)},xN.ba=function(){try{return 2<XU(this)?this.g.status:-1}catch(ut){return-1}},xN.ga=function(){try{return this.g?this.g.responseText:""}catch(ut){return""}},xN.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),FU(t)}},xN.Da=function(){return this.m},xN.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(xN=JU.prototype).ma=8,xN.G=1,xN.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},xN.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new AF(this,this.h,e,void 0),n=this.s;if(this.P&&(n?JN(n=$N(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=az(this,t,r),nU(i=QF(this.F),"RID",e),nU(i,"CVER",22),this.D&&nU(i,"X-HTTP-Session-Id",this.D),oz(this,i),this.o&&n&&$U(i,this.o,n),EU(this.i,t),this.Ra&&nU(i,"TYPE","init"),this.ja?(nU(i,"$req",r),nU(i,"SID","null"),t.$=!0,LF(t,i,null)):LF(t,i,r),this.G=2}}else 3==this.G&&(e?iz(this,e):0==this.l.length||wU(this.i)||iz(this))},xN.Ga=function(){if(this.u=null,cz(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=yF(ON(this.bb,this),e)}},xN.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vF(10),ez(this),cz(this))},xN.ab=function(){null!=this.v&&(this.v=null,ez(this),uz(this),vF(19))},xN.jb=function(e){e?(this.h.info("Successfully pinged google.com"),vF(2)):(this.h.info("Failed to ping google.com"),vF(1))},(xN=yz.prototype).xa=function(){},xN.wa=function(){},xN.va=function(){},xN.ua=function(){},xN.Oa=function(){},bz.prototype.g=function(e,t){return new _z(e,t)},NN(_z,zD),_z.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),YD(ON(e.hb,e,t))),vF(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=vz(e,null,e.W),rz(e)},_z.prototype.close=function(){ZU(this.g)},_z.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,nz(this.g,t)}else this.v?((t={}).__data__=VD(e),nz(this.g,t)):nz(this.g,e)},_z.prototype.M=function(){this.g.j=null,delete this.j,ZU(this.g),delete this.g,_z.Z.M.call(this)},NN(wz,MF),NN(xz,CF),NN(Sz,yz),Sz.prototype.xa=function(){jD(this.g,"a")},Sz.prototype.wa=function(e){jD(this.g,new wz(e))},Sz.prototype.va=function(e){jD(this.g,new xz(e))},Sz.prototype.ua=function(){jD(this.g,"b")},bz.prototype.createWebChannel=bz.prototype.g,_z.prototype.send=_z.prototype.u,_z.prototype.open=_z.prototype.m,_z.prototype.close=_z.prototype.close,bF.NO_ERROR=0,bF.TIMEOUT=8,bF.HTTP_ERROR=6,_F.COMPLETE="complete",SF.EventType=TF,TF.OPEN="a",TF.CLOSE="b",TF.ERROR="c",TF.MESSAGE="d",zD.prototype.listen=zD.prototype.N,UU.prototype.listenOnce=UU.prototype.O,UU.prototype.getLastError=UU.prototype.La,UU.prototype.getLastErrorCode=UU.prototype.Da,UU.prototype.getStatus=UU.prototype.ba,UU.prototype.getResponseJson=UU.prototype.Qa,UU.prototype.getResponseText=UU.prototype.ga,UU.prototype.send=UU.prototype.ea;var Ez=bF,Tz=_F,Mz=cF,Cz=10,Iz=11,Az=PU,kz=SF,Pz=UU,Rz=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();Rz.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oz={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lz=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return fC(t,e),t}(Error),Nz=new _I("@firebase/firestore");function Dz(){return Nz.logLevel}function Fz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nz.logLevel<=fI.DEBUG){var r=t.map(jz);Nz.debug.apply(Nz,yC(["Firestore (8.7.0): "+e],r))}}function Uz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nz.logLevel<=fI.ERROR){var r=t.map(jz);Nz.error.apply(Nz,yC(["Firestore (8.7.0): "+e],r))}}function zz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nz.logLevel<=fI.WARN){var r=t.map(jz);Nz.warn.apply(Nz,yC(["Firestore (8.7.0): "+e],r))}}function jz(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+e;throw Uz(t),new Error(t)}function Vz(e,t){e||Bz()}function Hz(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gz=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Wz(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function qz(e,t){return e<t?-1:e>t?1:0}function Kz(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Xz(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yz=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lz(Oz.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lz(Oz.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Lz(Oz.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lz(Oz.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?qz(this.nanoseconds,e.nanoseconds):qz(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),$z=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Yz(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jz(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zz(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ej=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Bz(),void 0===n?n=e.length-t:n>e.length-t&&Bz(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),tj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(ej),nj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return nj.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Lz(Oz.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Lz(Oz.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Lz(Oz.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(ej),ij=function(){function e(e){this.fields=e,e.sort(rj.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return Kz(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),oj=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return qz(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();oj.EMPTY_BYTE_STRING=new oj("");var aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sj(e){if(Vz(!!e),"string"==typeof e){var t=0,n=aj.exec(e);if(Vz(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:uj(e.seconds),nanos:uj(e.nanos)}}function uj(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lj(e){return"string"==typeof e?oj.fromBase64String(e):oj.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hj(e){var t=e.mapValue.fields.__previous_value__;return cj(t)?hj(t):t}function fj(e){var t=sj(e.mapValue.fields.__local_write_time__.timestampValue);return new Yz(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(e){return null==e}function pj(e){return 0===e&&1/e==-1/0}function mj(e){return"number"==typeof e&&Number.isInteger(e)&&!pj(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vj=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(tj.fromString(t))},e.fromName=function(t){return new e(tj.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===tj.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return tj.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new tj(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cj(e)?4:10:Bz()}function yj(e,t){var n,r=gj(e);if(r!==gj(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fj(e).isEqual(fj(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sj(e.timestampValue),r=sj(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,lj(e.bytesValue).isEqual(lj(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uj(e.geoPointValue.latitude)===uj(t.geoPointValue.latitude)&&uj(e.geoPointValue.longitude)===uj(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return uj(e.integerValue)===uj(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=uj(e.doubleValue),r=uj(t.doubleValue);return n===r?pj(n)===pj(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kz(e.arrayValue.values||[],t.arrayValue.values||[],yj);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qz(n)!==Qz(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yj(n[i],r[i])))return!1;return!0}(e,t);default:return Bz()}}function bj(e,t){return void 0!==(e.values||[]).find((function(e){return yj(e,t)}))}function _j(e,t){var n,r,i,o,a=gj(e),s=gj(t);if(a!==s)return qz(a,s);switch(a){case 0:return 0;case 1:return qz(e.booleanValue,t.booleanValue);case 2:return r=t,i=uj((n=e).integerValue||n.doubleValue),o=uj(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return wj(e.timestampValue,t.timestampValue);case 4:return wj(fj(e),fj(t));case 5:return qz(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lj(e),r=lj(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qz(n[i],r[i]);if(0!==o)return o}return qz(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=qz(uj(e.latitude),uj(t.latitude));return 0!==n?n:qz(uj(e.longitude),uj(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=_j(n[i],r[i]);if(o)return o}return qz(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=qz(r[a],o[a]);if(0!==s)return s;var u=_j(n[r[a]],i[o[a]]);if(0!==u)return u}return qz(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Bz()}}function wj(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qz(e,t);var n=sj(e),r=sj(t),i=qz(n.seconds,r.seconds);return 0!==i?i:qz(n.nanos,r.nanos)}function xj(e){return Sj(e)}function Sj(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,"time("+(n=sj(t)).seconds+","+n.nanos+")"):"stringValue"in e?e.stringValue:"bytesValue"in e?lj(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,vj.fromName(i).toString()):"geoPointValue"in e?"geo("+(r=e.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=Sj(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+Sj(e.fields[o])}return t+"}"}(e.mapValue):Bz();var t,n,r,i}function Ej(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Tj(e){return!!e&&"integerValue"in e}function Mj(e){return!!e&&"arrayValue"in e}function Cj(e){return!!e&&"nullValue"in e}function Ij(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Aj(e){return!!e&&"mapValue"in e}function kj(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue)return{timestampValue:Object.assign({},sj(e.timestampValue))};if(e.mapValue){var t={mapValue:{fields:{}}};return Jz(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=kj(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=kj(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pj=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Aj(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kj(t)},e.prototype.setAll=function(e){var t=this,n=rj.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=kj(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());Aj(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return yj(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Aj(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){Jz(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(kj(this.value))},e}();function Rj(e){var t=[];return Jz(e.fields,(function(e,n){var r=new rj([e]);if(Aj(n)){var i=Rj(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new ij(t)}var Oj=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,$z.min(),Pj.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Pj.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Pj.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Pj.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Pj.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Lj=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Lj(e,t,n,r,i,o,a)}function Dj(e){var t=Hz(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+xj(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),dj(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Yj(t.startAt)),t.endAt&&(n+="|ub:",n+=Yj(t.endAt)),t.h=n}return t.h}function Fj(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Qj(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!yj(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zj(e.startAt,t.startAt)&&Zj(e.endAt,t.endAt)}function Uj(e){return vj.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var zj=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return fC(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new jj(e,n,r):"array-contains"===n?new Wj(e,r):"in"===n?new Gj(e,r):"not-in"===n?new qj(e,r):"array-contains-any"===n?new Kj(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new Bj(e,n):new Vj(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(_j(t,this.value)):null!==t&&gj(this.value)===gj(t)&&this.m(_j(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bz()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),jj=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=vj.fromName(r.referenceValue),i}return fC(t,e),t.prototype.matches=function(e){var t=vj.comparator(e.key,this.key);return this.m(t)},t}(zj),Bj=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=Hj("in",n),r}return fC(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(zj),Vj=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=Hj("not-in",n),r}return fC(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(zj);function Hj(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vj.fromName(e.referenceValue)}))}var Wj=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return fC(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return Mj(t)&&bj(t.arrayValue,this.value)},t}(zj),Gj=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return fC(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&bj(this.value.arrayValue,t)},t}(zj),qj=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return fC(t,e),t.prototype.matches=function(e){if(bj(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!bj(this.value.arrayValue,t)},t}(zj),Kj=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return fC(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!Mj(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return bj(t.value.arrayValue,e)}))},t}(zj),Xj=function(e,t){this.position=e,this.before=t};function Yj(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return xj(e)})).join(",")}var $j=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Qj(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Jj(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?vj.comparator(vj.fromName(a.referenceValue),n.key):_j(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Zj(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yj(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eB=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function tB(e,t,n,r,i,o,a,s){return new eB(e,t,n,r,i,o,a,s)}function nB(e){return new eB(e)}function rB(e){return!dj(e.limit)&&"F"===e.limitType}function iB(e){return!dj(e.limit)&&"L"===e.limitType}function oB(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function aB(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function sB(e){return null!==e.collectionGroup}function uB(e){var t=Hz(e);if(null===t.p){t.p=[];var n=aB(t),r=oB(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new $j(n)),t.p.push(new $j(rj.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new $j(rj.keyField(),u))}}}return t.p}function lB(e){var t=Hz(e);if(!t.T)if("F"===t.limitType)t.T=Nj(t.path,t.collectionGroup,uB(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=uB(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new $j(o.field,a))}var s=t.endAt?new Xj(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Xj(t.startAt.position,!t.startAt.before):null;t.T=Nj(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function cB(e,t,n){return new eB(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hB(e,t){return Fj(lB(e),lB(t))&&e.limitType===t.limitType}function fB(e){return Dj(lB(e))+"|lt:"+e.limitType}function dB(e){return"Query(target="+(t=lB(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+xj(t.value);var t})).join(", ")+"]"),dj(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map((function(e){return(t=e).field.canonicalString()+" ("+t.dir+")";var t})).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Yj(t.startAt)),t.endAt&&(n+=", endAt: "+Yj(t.endAt)),"Target("+n+"); limitType=")+e.limitType+")";var t,n}function pB(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vj.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!Jj(n.startAt,uB(n),r)||n.endAt&&Jj(n.endAt,uB(n),r)));var n,r}function mB(e){return function(t,n){for(var r=!1,i=0,o=uB(e);i<o.length;i++){var a=o[i],s=vB(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function vB(e,t,n){var r,i,o,a,s=e.field.isKeyField()?vj.comparator(t.key,n.key):(r=e.field,i=n,o=t.data.field(r),a=i.data.field(r),null!==o&&null!==a?_j(o,a):Bz());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Bz()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pj(t)?"-0":t}}function yB(e){return{integerValue:""+e}}function bB(e,t){return mj(t)?yB(t):gB(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _B=function(){this._=void 0};function wB(e,t,n){return e instanceof EB?(i=t,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof TB?MB(e,t):e instanceof CB?IB(e,t):function(e,t){var n=SB(e,t),r=kB(n)+kB(e.A);return Tj(n)&&Tj(e.A)?yB(r):gB(e.R,r)}(e,t);var r,i,o}function xB(e,t,n){return e instanceof TB?MB(e,t):e instanceof CB?IB(e,t):n}function SB(e,t){return e instanceof AB?Tj(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var EB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t}(_B),TB=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return fC(t,e),t}(_B);function MB(e,t){for(var n=PB(t),r=function(e){n.some((function(t){return yj(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var CB=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return fC(t,e),t}(_B);function IB(e,t){for(var n=PB(t),r=function(e){n=n.filter((function(t){return!yj(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var AB=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return fC(t,e),t}(_B);function kB(e){return uj(e.integerValue||e.doubleValue)}function PB(e){return Mj(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RB=function(e,t){this.field=e,this.transform=t},OB=function(e,t){this.version=e,this.transformResults=t},LB=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function NB(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var DB=function(){};function FB(e,t,n){var r,i,o,a,s;e instanceof VB?(i=t,o=n,a=(r=e).value.clone(),s=GB(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof HB?function(e,t,n){if(NB(e.precondition,t)){var r=GB(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(WB(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function UB(e,t,n){var r;e instanceof VB?function(e,t,n){if(NB(e.precondition,t)){var r=e.value.clone(),i=qB(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(BB(t),r).setHasLocalMutations()}}(e,t,n):e instanceof HB?function(e,t,n){if(NB(e.precondition,t)){var r=qB(e.fieldTransforms,n,t),i=t.data;i.setAll(WB(e)),i.setAll(r),t.convertToFoundDocument(BB(t),i).setHasLocalMutations()}}(e,t,n):(r=t,NB(e.precondition,r)&&r.convertToNoDocument($z.min()))}function zB(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=SB(o.transform,a||null);null!=s&&(null==n&&(n=Pj.empty()),n.set(o.field,s))}return n||null}function jB(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Kz(n,r,(function(e,t){return r=t,(n=e).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof TB&&o instanceof TB||i instanceof CB&&o instanceof CB?Kz(i.elements,o.elements,yj):i instanceof AB&&o instanceof AB?yj(i.A,o.A):i instanceof EB&&o instanceof EB);var n,r,i,o}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function BB(e){return e.isFoundDocument()?e.version:$z.min()}var VB=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return fC(t,e),t}(DB),HB=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return fC(t,e),t}(DB);function WB(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function GB(e,t,n){var r=new Map;Vz(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,xB(a,s,n[i]))}return r}function qB(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,wB(s,u,t))}return r}var KB,XB,YB=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return fC(t,e),t}(DB),$B=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return fC(t,e),t}(DB),QB=function(e){this.count=e};function JB(e){switch(e){case Oz.OK:return Bz();case Oz.CANCELLED:case Oz.UNKNOWN:case Oz.DEADLINE_EXCEEDED:case Oz.RESOURCE_EXHAUSTED:case Oz.INTERNAL:case Oz.UNAVAILABLE:case Oz.UNAUTHENTICATED:return!1;case Oz.INVALID_ARGUMENT:case Oz.NOT_FOUND:case Oz.ALREADY_EXISTS:case Oz.PERMISSION_DENIED:case Oz.FAILED_PRECONDITION:case Oz.ABORTED:case Oz.OUT_OF_RANGE:case Oz.UNIMPLEMENTED:case Oz.DATA_LOSS:return!0;default:return Bz()}}function ZB(e){if(void 0===e)return Uz("GRPC error has no .code"),Oz.UNKNOWN;switch(e){case KB.OK:return Oz.OK;case KB.CANCELLED:return Oz.CANCELLED;case KB.UNKNOWN:return Oz.UNKNOWN;case KB.DEADLINE_EXCEEDED:return Oz.DEADLINE_EXCEEDED;case KB.RESOURCE_EXHAUSTED:return Oz.RESOURCE_EXHAUSTED;case KB.INTERNAL:return Oz.INTERNAL;case KB.UNAVAILABLE:return Oz.UNAVAILABLE;case KB.UNAUTHENTICATED:return Oz.UNAUTHENTICATED;case KB.INVALID_ARGUMENT:return Oz.INVALID_ARGUMENT;case KB.NOT_FOUND:return Oz.NOT_FOUND;case KB.ALREADY_EXISTS:return Oz.ALREADY_EXISTS;case KB.PERMISSION_DENIED:return Oz.PERMISSION_DENIED;case KB.FAILED_PRECONDITION:return Oz.FAILED_PRECONDITION;case KB.ABORTED:return Oz.ABORTED;case KB.OUT_OF_RANGE:return Oz.OUT_OF_RANGE;case KB.UNIMPLEMENTED:return Oz.UNIMPLEMENTED;case KB.DATA_LOSS:return Oz.DATA_LOSS;default:return Bz()}}(XB=KB||(KB={}))[XB.OK=0]="OK",XB[XB.CANCELLED=1]="CANCELLED",XB[XB.UNKNOWN=2]="UNKNOWN",XB[XB.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",XB[XB.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",XB[XB.NOT_FOUND=5]="NOT_FOUND",XB[XB.ALREADY_EXISTS=6]="ALREADY_EXISTS",XB[XB.PERMISSION_DENIED=7]="PERMISSION_DENIED",XB[XB.UNAUTHENTICATED=16]="UNAUTHENTICATED",XB[XB.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",XB[XB.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",XB[XB.ABORTED=10]="ABORTED",XB[XB.OUT_OF_RANGE=11]="OUT_OF_RANGE",XB[XB.UNIMPLEMENTED=12]="UNIMPLEMENTED",XB[XB.INTERNAL=13]="INTERNAL",XB[XB.UNAVAILABLE=14]="UNAVAILABLE",XB[XB.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var eV=function(){function e(e,t){this.comparator=e,this.root=t||nV.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nV.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nV.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new tV(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new tV(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new tV(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new tV(this.root,e,this.comparator,!0)},e}(),tV=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),nV=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Bz();if(this.right.isRed())throw Bz();var e=this.left.check();if(e!==this.right.check())throw Bz();return e+(this.isRed()?0:1)},e}();nV.EMPTY=null,nV.RED=!0,nV.BLACK=!1,nV.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Bz()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Bz()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Bz()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Bz()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Bz()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new nV(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rV=function(){function e(e){this.comparator=e,this.data=new eV(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new iV(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new iV(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),iV=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),oV=new eV(vj.comparator);function aV(){return oV}var sV=new eV(vj.comparator);function uV(){return sV}var lV=new eV(vj.comparator);function cV(){return lV}var hV=new rV(vj.comparator);function fV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=hV,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var dV=new rV(qz);function pV(){return dV}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mV=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,vV.createSynthesizedTargetChangeForCurrentChange(t,n)),new e($z.min(),r,pV(),aV(),fV())},e}(),vV=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(oj.EMPTY_BYTE_STRING,n,fV(),fV(),fV())},e}(),gV=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},yV=function(e,t){this.targetId=e,this.V=t},bV=function(e,t,n,r){void 0===n&&(n=oj.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},_V=function(){function e(){this.S=0,this.D=SV(),this.C=oj.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=fV(),t=fV(),n=fV();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bz()}})),new vV(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=SV()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),wV=function(){function e(e){this.W=e,this.G=new Map,this.H=aV(),this.J=xV(),this.Y=new rV(qz)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:Bz()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(Uj(i))if(0===n){var o=new vj(i.path);this.tt(t,o,Oj.newNoDocument(o,$z.min()))}else Vz(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&Uj(o.target)){var a=new vj(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,Oj.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=fV();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new mV(e,n,this.Y,this.H,r);return this.H=aV(),this.J=xV(),this.Y=new rV(qz),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new _V,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new rV(qz),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||Fz("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new _V),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function xV(){return new eV(vj.comparator)}function SV(){return new eV(vj.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EV={asc:"ASCENDING",desc:"DESCENDING"},TV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MV=function(e,t){this.databaseId=e,this.I=t};function CV(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function IV(e,t){return e.I?t.toBase64():t.toUint8Array()}function AV(e,t){return CV(e,t.toTimestamp())}function kV(e){return Vz(!!e),$z.fromTimestamp((t=sj(e),new Yz(t.seconds,t.nanos)));var t}function PV(e,t){return(n=e,new tj(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function RV(e){var t=tj.fromString(e);return Vz(nH(t)),t}function OV(e,t){return PV(e.databaseId,t.path)}function LV(e,t){var n=RV(t);if(n.get(1)!==e.databaseId.projectId)throw new Lz(Oz.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lz(Oz.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vj(UV(n))}function NV(e,t){return PV(e.databaseId,t)}function DV(e){var t=RV(e);return 4===t.length?tj.emptyPath():UV(t)}function FV(e){return new tj(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function UV(e){return Vz(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zV(e,t,n){return{name:OV(e,t),fields:n.value.mapValue.fields}}function jV(e,t,n){var r=LV(e,t.name),i=kV(t.updateTime),o=new Pj({mapValue:{fields:t.fields}}),a=Oj.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function BV(e,t){var n,r,i;if(t instanceof VB)n={update:zV(e,t.key,t.value)};else if(t instanceof YB)n={delete:OV(e,t.key)};else if(t instanceof HB)n={update:zV(e,t.key,t.data),updateMask:tH(t.fieldMask)};else{if(!(t instanceof $B))return Bz();n={verify:OV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof EB)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof TB)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof CB)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof AB)return{fieldPath:t.field.canonicalString(),increment:n.A};throw Bz()}(0,e)}))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:AV(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Bz())),n}function VV(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?LB.updateTime(kV(n.updateTime)):void 0!==n.exists?LB.exists(n.exists):LB.none():LB.none(),i=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Vz("REQUEST_TIME"===t.setToServerValue),n=new EB;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new TB(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new CB(i)}else"increment"in t?n=new AB(e,t.increment):Bz();var o=rj.fromServerFormat(t.fieldPath);return new RB(o,n)}(e,t)})):[];if(t.update){t.update.name;var o=LV(e,t.update.name),a=new Pj({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(e){var t=e.fieldPaths||[];return new ij(t.map((function(e){return rj.fromServerFormat(e)})))}(t.updateMask);return new HB(o,a,s,r,i)}return new VB(o,a,r,i)}if(t.delete){var u=LV(e,t.delete);return new YB(u,r)}if(t.verify){var l=LV(e,t.verify);return new $B(l,r)}return Bz()}function HV(e,t){return{documents:[NV(e,t.path)]}}function WV(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=NV(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=NV(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ij(e.value))return{unaryFilter:{field:QV(e.field),op:"IS_NAN"}};if(Cj(e.value))return{unaryFilter:{field:QV(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ij(e.value))return{unaryFilter:{field:QV(e.field),op:"IS_NOT_NAN"}};if(Cj(e.value))return{unaryFilter:{field:QV(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:QV(e.field),op:$V(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return{field:QV((t=e).field),direction:YV(t.dir)};var t}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u=(a=e,s=t.limit,a.I||dj(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=KV(t.startAt)),t.endAt&&(n.structuredQuery.endAt=KV(t.endAt)),n}function GV(e){var t=DV(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Vz(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=qV(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return new $j(JV((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var u,l,c=null;n.limit&&(u=n.limit,c=dj(l="object"==typeof u?u.value:u)?null:l);var h=null;n.startAt&&(h=XV(n.startAt));var f=null;return n.endAt&&(f=XV(n.endAt)),tB(t,i,s,a,c,"F",h,f)}function qV(e){return e?void 0!==e.unaryFilter?[eH(e)]:void 0!==e.fieldFilter?[ZV(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return qV(e)})).reduce((function(e,t){return e.concat(t)})):Bz():[]}function KV(e){return{before:e.before,values:e.position}}function XV(e){var t=!!e.before,n=e.values||[];return new Xj(n,t)}function YV(e){return EV[e]}function $V(e){return TV[e]}function QV(e){return{fieldPath:e.canonicalString()}}function JV(e){return rj.fromServerFormat(e.fieldPath)}function ZV(e){return zj.create(JV(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bz()}}(e.fieldFilter.op),e.fieldFilter.value)}function eH(e){switch(e.unaryFilter.op){case"IS_NAN":var t=JV(e.unaryFilter.field);return zj.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=JV(e.unaryFilter.field);return zj.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=JV(e.unaryFilter.field);return zj.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=JV(e.unaryFilter.field);return zj.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bz()}}function tH(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nH(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=oH(t)),t=iH(e.get(n),t);return oH(t)}function iH(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function oH(e){return e+""}function aH(e){var t=e.length;if(Vz(t>=2),2===t)return Vz(""===e.charAt(0)&&""===e.charAt(1)),tj.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&Bz(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:Bz()}o=a+2}return new tj(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sH=function(e,t){this.seconds=e,this.nanoseconds=t},uH=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};uH.store="owner",uH.key="owner";var lH=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};lH.store="mutationQueues",lH.keyPath="userId";var cH=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};cH.store="mutations",cH.keyPath="batchId",cH.userMutationsIndex="userMutationsIndex",cH.userMutationsKeyPath=["userId","batchId"];var hH=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,rH(t)]},e.key=function(e,t,n){return[e,rH(t),n]},e}();hH.store="documentMutations",hH.PLACEHOLDER=new hH;var fH=function(e,t){this.path=e,this.readTime=t},dH=function(e,t){this.path=e,this.version=t},pH=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pH.store="remoteDocuments",pH.readTimeIndex="readTimeIndex",pH.readTimeIndexPath="readTime",pH.collectionReadTimeIndex="collectionReadTimeIndex",pH.collectionReadTimeIndexPath=["parentPath","readTime"];var mH=function(e){this.byteSize=e};mH.store="remoteDocumentGlobal",mH.key="remoteDocumentGlobalKey";var vH=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};vH.store="targets",vH.keyPath="targetId",vH.queryTargetsIndexName="queryTargetsIndex",vH.queryTargetsKeyPath=["canonicalId","targetId"];var gH=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};gH.store="targetDocuments",gH.keyPath=["targetId","path"],gH.documentTargetsIndex="documentTargetsIndex",gH.documentTargetsKeyPath=["path","targetId"];var yH=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};yH.key="targetGlobalKey",yH.store="targetGlobal";var bH=function(e,t){this.collectionId=e,this.parent=t};bH.store="collectionParents",bH.keyPath=["collectionId","parent"];var _H=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};_H.store="clientMetadata",_H.keyPath="clientId";var wH=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};wH.store="bundles",wH.keyPath="bundleId";var xH=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};xH.store="namedQueries",xH.keyPath="name";var SH=yC(yC([],yC(yC([],yC(yC([],yC(yC([],[lH.store,cH.store,hH.store,pH.store,vH.store,uH.store,yH.store,gH.store]),[_H.store])),[mH.store])),[bH.store])),[wH.store,xH.store]),EH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",TH=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),MH=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},CH=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Bz(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),IH=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new MH,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new PH(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=DH(t.target.error);n.ft.reject(new PH(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new PH(n,o)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Fz("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new OH(t)},e}(),AH=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(kC())&&Uz("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return Fz("SimpleDb","Removing database:",e),LH(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=kC(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return pC(this,void 0,void 0,(function(){var t,n=this;return mC(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Fz("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new PH(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new Lz(Oz.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new PH(e,n))},i.onupgradeneeded=function(e){Fz("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){Fz("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,l,c;return mC(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=IH.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),CH.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return l=h.sent(),c="FirebaseError"!==l.name&&o<3,Fz("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),s.close(),c?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),kH=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return LH(this.Pt.delete())},e}(),PH=function(e){function t(t,n){var r=this;return(r=e.call(this,Oz.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return fC(t,e),t}(Lz);function RH(e){return"IndexedDbTransactionError"===e.name}var OH=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(Fz("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fz("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),LH(n)},e.prototype.add=function(e){return Fz("SimpleDb","ADD",this.store.name,e,e),LH(this.store.add(e))},e.prototype.get=function(e){var t=this;return LH(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Fz("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return Fz("SimpleDb","DELETE",this.store.name,e),LH(this.store.delete(e))},e.prototype.count=function(){return Fz("SimpleDb","COUNT",this.store.name),LH(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){Fz("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new CH((function(n,r){t.onerror=function(e){var t=DH(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new CH((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new kH(i),a=t(i.primaryKey,i.value,o);if(a instanceof CH){var s=a.catch((function(e){return o.done(),CH.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return CH.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function LH(e){return new CH((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=DH(e.target.error);n(t)}}))}var NH=!1;function DH(e){var t=AH._t(kC());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Lz("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return NH||(NH=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FH=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return fC(t,e),t}(TH);function UH(e,t){var n=Hz(e);return AH.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zH=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&FB(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&UB(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&UB(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument($z.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fV())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Kz(this.mutations,e.mutations,(function(e,t){return jB(e,t)}))&&Kz(this.baseMutations,e.baseMutations,(function(e,t){return jB(e,t)}))},e}(),jH=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Vz(t.mutations.length===r.length);for(var i=cV(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),BH=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=$z.min()),void 0===o&&(o=$z.min()),void 0===a&&(a=oj.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),VH=function(e){this.Lt=e};function HH(e,t){if(t.document)return jV(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=vj.fromSegments(t.noDocument.path),r=XH(t.noDocument.readTime),i=Oj.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=vj.fromSegments(t.unknownDocument.path);return r=XH(t.unknownDocument.version),Oj.newUnknownDocument(o,r)}return Bz()}function WH(e,t,n){var r,i,o=GH(n),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s={name:OV(r=e.Lt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:CV(r,i.version.toTimestamp())},u=t.hasCommittedMutations;return new pH(null,null,s,u,o,a)}if(t.isNoDocument()){var l=t.key.path.toArray(),c=KH(t.version);return u=t.hasCommittedMutations,new pH(null,new fH(l,c),null,u,o,a)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=KH(t.version);return new pH(new dH(h,f),null,null,!0,o,a)}return Bz()}function GH(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qH(e){var t=new Yz(e[0],e[1]);return $z.fromTimestamp(t)}function KH(e){var t=e.toTimestamp();return new sH(t.seconds,t.nanoseconds)}function XH(e){var t=new Yz(e.seconds,e.nanoseconds);return $z.fromTimestamp(t)}function YH(e,t){for(var n=(t.baseMutations||[]).map((function(t){return VV(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return VV(e.Lt,t)})),s=Yz.fromMillis(t.localWriteTimeMs);return new zH(t.batchId,s,n,a)}function $H(e){var t,n,r=XH(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?XH(e.lastLimboFreeSnapshotVersion):$z.min();return void 0!==e.query.documents?(Vz(1===(n=e.query).documents.length),t=lB(nB(DV(n.documents[0])))):t=lB(GV(e.query)),new BH(t,e.targetId,0,e.lastListenSequenceNumber,r,i,oj.fromBase64String(e.resumeToken))}function QH(e,t){var n,r=KH(t.snapshotVersion),i=KH(t.lastLimboFreeSnapshotVersion);n=Uj(t.target)?HV(e.Lt,t.target):WV(e.Lt,t.target);var o=t.resumeToken.toBase64();return new vH(t.targetId,Dj(t.target),r,o,t.sequenceNumber,i,n)}function JH(e){var t=GV({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cB(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZH=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return eW(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:XH(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return eW(e).put({bundleId:(n=t).id,createTime:KH(kV(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return tW(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:JH(t.bundledQuery),readTime:XH(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return tW(e).put({name:(n=t).name,readTime:KH(kV(n.readTime)),bundledQuery:n.bundledQuery});var n},e}();function eW(e){return UH(e,wH.store)}function tW(e){return UH(e,xH.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nW=function(){function e(){this.Bt=new rW}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),CH.resolve()},e.prototype.getCollectionParents=function(e,t){return CH.resolve(this.Bt.getEntries(t))},e}(),rW=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rV(tj.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new rV(tj.comparator)).toArray()},e}(),iW=function(){function e(){this.qt=new rW}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:rH(i)};return oW(e).put(o)}return CH.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Xz(t),""],!1,!0);return oW(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(aH(o.parent))}return n}))},e}();function oW(e){return UH(e,bH.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sW=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(e,t,n){var r=e.store(cH.store),i=e.store(hH.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Vz(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],d=hH.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return CH.waitFor(o).next((function(){return l}))}function lW(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Bz();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sW.DEFAULT_COLLECTION_PERCENTILE=10,sW.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sW.DEFAULT=new sW(41943040,sW.DEFAULT_COLLECTION_PERCENTILE,sW.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sW.DISABLED=new sW(-1,0,0);var cW=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return Vz(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fW(e).$t({index:cH.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=dW(e),a=fW(e);return a.add({}).next((function(s){Vz("number"==typeof s);for(var u=new zH(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return BV(e.Lt,t)})),i=n.mutations.map((function(t){return BV(e.Lt,t)}));return new cH(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),c=[],h=new rV((function(e,t){return qz(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=hH.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),c.push(a.put(l)),c.push(o.put(m,hH.PLACEHOLDER))}return h.forEach((function(t){c.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),CH.waitFor(c).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return fW(e).get(t).next((function(e){return e?(Vz(e.userId===n.userId),YH(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?CH.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fW(e).$t({index:cH.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Vz(t.batchId>=r),o=YH(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fW(e).$t({index:cH.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fW(e).Nt(cH.userMutationsIndex,n).next((function(e){return e.map((function(e){return YH(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=hH.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return dW(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=aH(u);if(s===n.userId&&t.path.isEqual(c))return fW(e).get(l).next((function(e){if(!e)throw Bz();Vz(e.userId===n.userId),o.push(YH(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new rV(qz),i=[];return t.forEach((function(t){var o=hH.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=dW(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],l=aH(s);a===n.userId&&t.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),CH.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=hH.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new rV(qz);return dW(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],l=e[2],c=aH(u);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(fW(e).get(t).next((function(e){if(null===e)throw Bz();Vz(e.userId===n.userId),r.push(YH(n.R,e))})))})),CH.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return uW(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),CH.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return CH.resolve();var r=IDBKeyRange.lowerBound(hH.prefixForUser(t.userId)),i=[];return dW(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=aH(e[1]);i.push(o)}else r.done()})).next((function(){Vz(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return hW(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return pW(e).get(this.userId).next((function(e){return e||new lH(t.userId,-1,"")}))},e}();function hW(e,t,n){var r=hH.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return dW(e).$t({range:o,kt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function fW(e){return UH(e,cH.store)}function dW(e){return UH(e,hH.store)}function pW(e){return UH(e,lH.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mW=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),vW=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new mW(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return $z.fromTimestamp(new Yz(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return gW(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Vz(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return gW(e).$t((function(a,s){var u=$H(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return CH.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return gW(e).$t((function(e,n){var r=$H(n);t(r)}))},e.prototype.Xt=function(e){return yW(e).get(yH.key).next((function(e){return Vz(null!==e),e}))},e.prototype.Zt=function(e,t){return yW(e).put(yH.key,t)},e.prototype.te=function(e,t){return gW(e).put(QH(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Dj(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gW(e).$t({range:r,index:vH.queryTargetsIndexName},(function(e,n,r){var o=$H(n);Fj(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=bW(e);return t.forEach((function(t){var a=rH(t.path);i.push(o.put(new gH(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),CH.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=bW(e);return CH.forEach(t,(function(t){var o=rH(t.path);return CH.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=bW(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bW(e),i=fV();return r.$t({range:n,kt:!0},(function(e,t,n){var r=aH(e[1]),o=new vj(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=rH(t.path),r=IDBKeyRange.bound([n],[Xz(n)],!1,!0),i=0;return bW(e).$t({index:gH.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return gW(e).get(t).next((function(e){return e?$H(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(e){return UH(e,vH.store)}function yW(e){return UH(e,yH.store)}function bW(e){return UH(e,gH.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){if(e.code!==Oz.FAILED_PRECONDITION||e.message!==EH)throw e;return Fz("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=qz(n,i);return 0===a?qz(r,o):a}var xW=function(){function e(e){this.ne=e,this.buffer=new rV(wW),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();wW(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),SW=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;Fz("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return pC(t,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return RH(t=n.sent())?(Fz("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,_W(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),EW=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return CH.resolve(Rz.o);var r=new xW(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Fz("LruGarbageCollector","Garbage collection skipped; disabled"),CH.resolve(aW)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Fz("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),aW):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(Fz("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Dz()<=fI.DEBUG&&Fz("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-c)+"ms"),CH.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),TW=function(){function e(e,t){this.db=e,this.garbageCollector=new EW(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return MW(e,n)},e.prototype.removeReference=function(e,t,n){return MW(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return MW(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return pW(e).Ot((function(r){return hW(e,r,t).next((function(e){return e&&(n=!0),CH.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),bW(e).delete([0,rH(a.path)])}))}));i.push(u)}})).next((function(){return CH.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return MW(e,t)},e.prototype.we=function(e,t){var n,r=bW(e),i=Rz.o;return r.$t({index:gH.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Rz.o&&t(new vj(aH(n)),i),i=s,n=a):i=Rz.o})).next((function(){i!==Rz.o&&t(new vj(aH(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function MW(e,t){return bW(e).put((n=t,r=e.currentSequenceNumber,new gH(0,rH(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CW=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Jz(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Zz(this.inner)},e}(),IW=function(){function e(){this.changes=new CW((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:$z.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:Oj.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?CH.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),AW=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return RW(e).put(OW(t),n)},e.prototype.removeEntry=function(e,t){var n=RW(e),r=OW(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return RW(e).get(OW(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return RW(e).get(OW(t)).next((function(e){return{document:n.ye(t,e),size:lW(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=aV();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=aV(),i=new eV(vj.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,lW(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return CH.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return RW(e).$t({range:r},(function(e,t,r){for(var a=vj.fromSegments(e);o&&vj.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=aV(),o=t.path.length+1,a={};if(n.isEqual($z.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),l=GH(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=pH.collectionReadTimeIndex}return RW(e).$t(a,(function(e,n,a){if(e.length===o){var s=HH(r.R,n);t.path.isPrefixOf(s.key.path)?pB(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new kW(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return PW(e).get(mH.key).next((function(e){return Vz(!!e),e}))},e.prototype.me=function(e,t){return PW(e).put(mH.key,t)},e.prototype.ye=function(e,t){if(t){var n=HH(this.R,t);if(!n.isNoDocument()||!n.version.isEqual($z.min()))return n}return Oj.newInvalidDocument(e)},e}(),kW=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new CW((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return fC(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new rV((function(e,t){return qz(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=WH(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var l=lW(u);r+=l-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var c=WH(t.Ie.R,Oj.newNoDocument(o,$z.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,c))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),CH.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(IW);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(e){return UH(e,mH.store)}function RW(e){return UH(e,pH.store)}function OW(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LW=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Vz(n<r&&n>=0&&r<=11);var o=new IH("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(uH.store),function(e){e.createObjectStore(lH.store,{keyPath:lH.keyPath}),e.createObjectStore(cH.store,{keyPath:cH.keyPath,autoIncrement:!0}).createIndex(cH.userMutationsIndex,cH.userMutationsKeyPath,{unique:!0}),e.createObjectStore(hH.store)}(e),NW(e),function(e){e.createObjectStore(pH.store)}(e));var a=CH.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(gH.store),e.deleteObjectStore(vH.store),e.deleteObjectStore(yH.store)}(e),NW(e)),a=a.next((function(){return function(e){var t=e.store(yH.store),n=new yH(0,0,$z.min().toTimestamp(),0);return t.put(yH.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(cH.store).Nt().next((function(n){e.deleteObjectStore(cH.store),e.createObjectStore(cH.store,{keyPath:cH.keyPath,autoIncrement:!0}).createIndex(cH.userMutationsIndex,cH.userMutationsKeyPath,{unique:!0});var r=t.store(cH.store),i=n.map((function(e){return r.put(e)}));return CH.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(_H.store,{keyPath:_H.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(mH.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(pH.store);t.createIndex(pH.readTimeIndex,pH.readTimeIndexPath,{unique:!1}),t.createIndex(pH.collectionReadTimeIndex,pH.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(wH.store,{keyPath:wH.keyPath})}(e),function(e){e.createObjectStore(xH.store,{keyPath:xH.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(pH.store).$t((function(e,n){t+=lW(n)})).next((function(){var n=new mH(t);return e.store(mH.store).put(mH.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(lH.store),r=e.store(cH.store);return n.Nt().next((function(n){return CH.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(cH.userMutationsIndex,i).next((function(r){return CH.forEach(r,(function(r){Vz(r.userId===n.userId);var i=YH(t.R,r);return uW(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(gH.store),n=e.store(pH.store);return e.store(yH.store).get(yH.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new tj(n),a=[0,rH(o)];r.push(t.get(a).next((function(n){return n?CH.resolve():(r=o,t.put(new gH(0,rH(r),e.highestListenSequenceNumber)));var r})))})).next((function(){return CH.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(bH.store,{keyPath:bH.keyPath});var n=t.store(bH.store),r=new rW,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:rH(i)})}};return t.store(pH.store).$t({kt:!0},(function(e,t){var n=new tj(e);return i(n.popLast())})).next((function(){return t.store(hH.store).$t({kt:!0},(function(e,t){e[0];var n=e[1];e[2];var r=aH(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(vH.store);return n.$t((function(e,r){var i=$H(r),o=QH(t.R,i);return n.put(o)}))},e}();function NW(e){e.createObjectStore(gH.store,{keyPath:gH.keyPath}).createIndex(gH.documentTargetsIndex,gH.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(vH.store,{keyPath:vH.keyPath}).createIndex(vH.queryTargetsIndexName,vH.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yH.store)}var DW="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FW=function(){function e(t,n,r,i,o,a,s,u,l,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=l,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new Lz(Oz.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new TW(this,i),this.Le=n+"main",this.R=new VH(u),this.Be=new AH(this.Le,11,new LW(this.R)),this.qe=new vW(this.referenceDelegate,this.R),this.Ut=new iW,this.Ue=(h=this.R,f=this.Ut,new AW(h,f)),this.Ke=new ZH,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&Uz("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Lz(Oz.FAILED_PRECONDITION,DW);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new Rz(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return pC(t,void 0,void 0,(function(){return mC(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return pC(t,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return pC(t,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return zW(t).put(new _H(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(RH(t))return Fz("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Fz("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return UW(e).get(uH.key).next((function(e){return CH.resolve(t.tn(e))}))},e.prototype.en=function(e){return zW(e).delete(this.clientId)},e.prototype.nn=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r,i=this;return mC(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=UH(e,_H.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return CH.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?CH.resolve(!0):UW(e).get(uH.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new Lz(Oz.FAILED_PRECONDITION,DW);return!1}}return!(!t.networkEnabled||!t.inForeground)||zW(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Fz("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return pC(this,void 0,void 0,(function(){var e=this;return mC(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[uH.store,_H.store],(function(t){var n=new FH(t,Rz.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return zW(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return cW.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;Fz("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,SH,(function(o){return i=new FH(o,r.Ne?r.Ne.next():Rz.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw Uz("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Lz(Oz.FAILED_PRECONDITION,EH);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return UW(e).get(uH.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Lz(Oz.FAILED_PRECONDITION,DW)}))},e.prototype.Ze=function(e){var t=new uH(this.clientId,this.allowTabSynchronization,Date.now());return UW(e).put(uH.key,t)},e.yt=function(){return AH.yt()},e.prototype.Xe=function(e){var t=this,n=UW(e);return n.get(uH.key).next((function(e){return t.tn(e)?(Fz("IndexedDbPersistence","Releasing primary lease."),n.delete(uH.key)):CH.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Uz("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return Fz("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Uz("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Uz("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function UW(e){return UH(e,uH.store)}function zW(e){return UH(e,_H.store)}function jW(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var BW=function(e,t){this.progress=e,this.wn=t},VW=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return r=t,vj.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(e,t.path):sB(t)?this.In(e,t,n):this.An(e,t,n);var r},e.prototype.Tn=function(e,t){return this.mn(e,new vj(t)).next((function(e){var t=uV();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=uV();return this.Ut.getCollectionParents(e,i).next((function(a){return CH.forEach(a,(function(a){var s,u,l=(s=t,u=a.child(i),new eB(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(e,l,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l);null==c&&(c=Oj.newInvalidDocument(l),r=r.insert(l,c)),UB(u,c,o.localWriteTime),c.isFoundDocument()||(r=r.remove(l))}}))})).next((function(){return r.forEach((function(e,n){pB(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=fV(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof HB&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))})),l}))},e}(),HW=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=fV(),i=fV(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),WW=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i,o=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual($z.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(i){var a=o.Cn(t,i);return(rB(t)||iB(t))&&o.Nn(t.limitType,a,r,n)?o.Dn(e,t):(Dz()<=fI.DEBUG&&Fz("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),dB(t)),o.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new rV(mB(e));return t.forEach((function(t,r){pB(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return Dz()<=fI.DEBUG&&Fz("QueryEngine","Using full collection scan to execute query:",dB(t)),this.Sn.getDocumentsMatchingQuery(e,t,$z.min())},e}(),GW=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new eV(qz),this.kn=new CW((function(e){return Dj(e)}),Fj),this.$n=$z.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new VW(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(e,t,n,r){return new GW(e,t,n,r)}function KW(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:return n=Hz(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new VW(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=fV(),s=0,u=o;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var f=h[c];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var v=0,g=m.mutations;v<g.length;v++){var y=g[v];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function XW(e,t){var n=Hz(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,o,a,s,u,l,c=t.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,o=t,a=h,s=o.batch,u=s.keys(),l=CH.resolve(),u.forEach((function(e){l=l.next((function(){return a.getEntry(i,e)})).next((function(t){var n=o.docVersions.get(e);Vz(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,o),t.isValidDocument()&&a.addEntry(t,o.commitVersion))}))})),l.next((function(){return r._n.removeMutationBatch(i,s)}))).next((function(){return h.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,c)}))}))}function YW(e){var t=Hz(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function $W(e,t){var n=Hz(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];t.targetChanges.forEach((function(t,o){var s,u,l,c=i.get(o);if(c){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var h=t.resumeToken;if(h.approximateByteSize()>0){var f=c.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,f),s=c,l=t,Vz((u=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&a.push(n.qe.updateTargetData(e,f))}}}));var s=aV();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(QW(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual($z.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return CH.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function QW(e,t,n,r,i){var o=fV();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=aV();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual($z.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):Fz("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function JW(e,t){var n=Hz(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function ZW(e,t){var n=Hz(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,CH.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new BH(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function eG(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:r=Hz(e),i=r.Fn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!RH(a=s.sent()))throw a;return Fz("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}}))}))}function tG(e,t,n){var r=Hz(e),i=$z.min(),o=fV();return r.persistence.runTransaction("Execute query","readonly",(function(e){return(a=r,s=e,u=lB(t),l=Hz(a),c=l.kn.get(u),void 0!==c?CH.resolve(l.Fn.get(c)):l.qe.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:$z.min(),n?o:fV())})).next((function(e){return{documents:e,Bn:o}}));var a,s,u,l,c}))}function nG(e,t){var n=Hz(e),r=Hz(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function rG(e){var t=Hz(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Hz(e),i=aV(),o=GH(n),a=RW(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:pH.readTimeIndex,range:s},(function(e,t){var n=HH(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:qH(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function iG(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){return[2,(t=Hz(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return t=RW(e),n=$z.min(),t.$t({index:pH.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=qH(t.readTime)),r.done()})).next((function(){return n}));var t,n})).then((function(e){t.$n=e}))]}))}))}function oG(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a,s,u,l,c,h,f,d;return mC(this,(function(p){switch(p.label){case 0:for(i=Hz(e),o=fV(),a=aV(),s=cV(),u=0,l=n;u<l.length;u++)c=l[u],h=t.qn(c.metadata.name),c.document&&(o=o.add(h)),a=a.insert(h,t.Un(c)),s=s.insert(h,t.Kn(c.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,ZW(i,(m=r,lB(nB(tj.fromString("__bundle__/docs/"+m)))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return QW(e,f,a,$z.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.qe.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}var m}))}))}function aG(e,t,n){return void 0===n&&(n=fV()),pC(this,void 0,void 0,(function(){var r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,ZW(e,lB(JH(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Hz(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=kV(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(oj.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var sG=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return CH.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:kV(n.createTime)}),CH.resolve()},e.prototype.getNamedQuery=function(e,t){return CH.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(n=t).name,query:JH(n.bundledQuery),readTime:kV(n.readTime)}),CH.resolve();var n},e}(),uG=function(){function e(){this.Wn=new rV(lG.Gn),this.zn=new rV(lG.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new lG(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new lG(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new vj(new tj([])),r=new lG(n,e),i=new lG(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new vj(new tj([])),n=new lG(t,e),r=new lG(t,e+1),i=fV();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new lG(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),lG=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return vj.comparator(e.key,t.key)||qz(e.ns,t.ns)},e.Hn=function(e,t){return qz(e.ns,t.ns)||vj.comparator(e.key,t.key)},e}(),cG=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new rV(lG.Gn)}return e.prototype.checkEmpty=function(e){return CH.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new zH(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new lG(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return CH.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return CH.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return CH.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return CH.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return CH.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new lG(t,0),i=new lG(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),CH.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new rV(qz);return t.forEach((function(e){var t=new lG(e,0),i=new lG(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),CH.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;vj.isDocumentKey(i)||(i=i.child(""));var o=new lG(new vj(i),0),a=new rV(qz);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),CH.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Vz(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return CH.forEach(t.mutations,(function(i){var o=new lG(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new lG(t,0),r=this.rs.firstAfterOrEqual(n);return CH.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,CH.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),hG=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new eV(vj.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return CH.resolve(n?n.document.clone():Oj.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=aV();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Oj.newInvalidDocument(e))})),CH.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=aV(),i=new vj(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,l=u.document,c=u.readTime;if(!t.path.isPrefixOf(s.path))break;c.compareTo(n)<=0||pB(t,l)&&(r=r.insert(l.key,l.clone()))}return CH.resolve(r)},e.prototype.fs=function(e,t){return CH.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new fG(this)},e.prototype.getSize=function(e){return CH.resolve(this.size)},e}(),fG=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return fC(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),CH.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(IW),dG=function(){function e(e){this.persistence=e,this.ds=new CW((function(e){return Dj(e)}),Fj),this.lastRemoteSnapshotVersion=$z.min(),this.highestTargetId=0,this.ws=0,this._s=new uG,this.targetCount=0,this.ys=mW.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),CH.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return CH.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return CH.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),CH.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),CH.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new mW(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,CH.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),CH.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,CH.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),CH.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return CH.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return CH.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),CH.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),CH.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),CH.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return CH.resolve(n)},e.prototype.containsKey=function(e,t){return CH.resolve(this._s.containsKey(t))},e}(),pG=function(){function e(e,t){var n,r=this;this.gs={},this.Ne=new Rz(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new dG(this),this.Ut=new nW,this.Ue=(n=this.Ut,new hG(n,(function(e){return r.referenceDelegate.ps(e)}))),this.R=new VH(t),this.Ke=new sG(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new cG(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;Fz("MemoryPersistence","Starting transaction:",e);var i=new mG(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return CH.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),mG=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return fC(t,e),t}(TH),vG=function(){function e(e){this.persistence=e,this.As=new uG,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Bz()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),CH.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),CH.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),CH.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return CH.forEach(this.vs,(function(r){var i=vj.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return CH.or([function(){return CH.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),gG=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(e,t){return"firestore_clients_"+e+"_"+t}function bG(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function _G(e,t){return"firestore_targets_"+e+"_"+t}gG.UNAUTHENTICATED=new gG(null),gG.GOOGLE_CREDENTIALS=new gG("google-credentials-uid"),gG.FIRST_PARTY=new gG("first-party-uid");var wG=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Lz(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Uz("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),xG=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lz(i.error.code,i.error.message)),o?new e(t,i.state,r):(Uz("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),SG=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pV(),a=0;i&&a<r.activeTargetIds.length;++a)i=mj(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Uz("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),EG=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Uz("SharedClientState","Failed to parse online state: "+t),null)},e}(),TG=function(){function e(){this.activeTargetIds=pV()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),MG=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new eV(qz),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=yG(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new TG),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,c,h=this;return mC(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(yG(this.persistenceKey,r)))&&(o=SG.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,l=this.$s;u<l.length;u++)c=l[u],this.Fs(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(_G(this.persistenceKey,e));if(n){var r=xG.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(_G(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return Fz("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){Fz("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){Fz("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Fz("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Uz("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return pC(t,void 0,void 0,(function(){var e,t,r,i,o,a;return mC(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=Rz.o;if(null!=e)try{var n=JSON.parse(e);Vz("number"==typeof n),t=n}catch(r){Uz("SharedClientState","Failed to read sequence number from WebStorage",r)}return t}(n.newValue))!==Rz.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new wG(this.currentUser,e,t,n),i=bG(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=bG(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=_G(this.persistenceKey,e),i=new xG(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return SG.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return wG.Vs(new gG(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return xG.Vs(r,t)},e.prototype.js=function(e){return EG.Vs(e)},e.prototype.ii=function(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Fz("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=pV();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),CG=function(){function e(){this.li=new TG,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new TG,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),IG=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),AG=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Fz("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){Fz("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),kG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},PG=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),RG=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return fC(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,o){var a=new Pz;a.listenOnce(Tz.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Ez.NO_ERROR:var t=a.getResponseJson();Fz("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ez.TIMEOUT:Fz("Connection",'RPC "'+e+'" timed out'),o(new Lz(Oz.DEADLINE_EXCEEDED,"Request time out"));break;case Ez.HTTP_ERROR:var n=a.getStatus();if(Fz("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,l=u.toLowerCase().replace(/_/g,"-"),Object.values(Oz).indexOf(l)>=0?l:Oz.UNKNOWN);o(new Lz(s,r.message))}else o(new Lz(Oz.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Lz(Oz.UNAVAILABLE,"Connection failed."));break;default:Bz()}}finally{Fz("Connection",'RPC "'+e+'" completed.')}var u,l}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new bz,o=fF(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Az({})),this.Fi(a.initMessageHeaders,t),PC()||LC()||kC().indexOf("Electron/")>=0||((n=kC()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||kC().indexOf("MSAppHost/")>=0||OC()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Fz("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),l=!1,c=!1,h=new PG({Ei:function(e){c?Fz("Connection","Not sending because WebChannel is closed:",e):(l||(Fz("Connection","Opening WebChannel transport."),u.open(),l=!0),Fz("Connection","WebChannel sending:",e),u.send(e))},Ti:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,kz.EventType.OPEN,(function(){c||Fz("Connection","WebChannel transport opened.")})),f(u,kz.EventType.CLOSE,(function(){c||(c=!0,Fz("Connection","WebChannel transport closed"),h.Vi())})),f(u,kz.EventType.ERROR,(function(e){c||(c=!0,zz("Connection","WebChannel transport errored:",e),h.Vi(new Lz(Oz.UNAVAILABLE,"The operation could not be completed")))})),f(u,kz.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Vz(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fz("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=KB[e];if(void 0!==t)return ZB(t)}(o),s=i.message;void 0===a&&(a=Oz.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new Lz(a,s)),u.close()}else Fz("Connection","WebChannel received:",n),h.Si(n)}})),f(o,Mz.STAT_EVENT,(function(e){e.stat===Cz?Fz("Connection","Detected buffering proxy"):e.stat===Iz&&Fz("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);Fz("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then((function(e){return Fz("RestConnection","Received: ",e),e}),(function(t){throw zz("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=kG[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(){return"undefined"!=typeof window?window:null}function LG(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NG(e){return new MV(e,!0)}var DG=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Fz("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),FG=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new DG(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return pC(this,void 0,void 0,(function(){return mC(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===Oz.RESOURCE_EXHAUSTED?(Uz(t.toString()),Uz("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===Oz.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new Lz(Oz.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return pC(e,void 0,void 0,(function(){return mC(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return Fz("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(Fz("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),UG=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return fC(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Bz(),o=t.targetChange.targetIds||[],a=function(e,t){return e.I?(Vz(void 0===t||"string"==typeof t),oj.fromBase64String(t||"")):(Vz(void 0===t||t instanceof Uint8Array),oj.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=(u=t.targetChange.cause)&&function(e){var t=void 0===e.code?Oz.UNKNOWN:ZB(e.code);return new Lz(t,e.message||"")}(u);n=new bV(i,o,a,s||null)}else if("documentChange"in t){t.documentChange,(i=t.documentChange).document,i.document.name,i.document.updateTime,o=LV(e,i.document.name),a=kV(i.document.updateTime);var u=new Pj({mapValue:{fields:i.document.fields}}),l=(s=Oj.newFoundDocument(o,a,u),i.targetIds||[]),c=i.removedTargetIds||[];n=new gV(l,c,s.key,s)}else if("documentDelete"in t)t.documentDelete,(i=t.documentDelete).document,o=LV(e,i.document),a=i.readTime?kV(i.readTime):$z.min(),u=Oj.newNoDocument(o,a),s=i.removedTargetIds||[],n=new gV([],s,u.key,u);else if("documentRemove"in t)t.documentRemove,(i=t.documentRemove).document,o=LV(e,i.document),a=i.removedTargetIds||[],n=new gV([],a,o,null);else{if(!("filter"in t))return Bz();t.filter;var h=t.filter;h.targetId,i=h.count||0,o=new QB(i),a=h.targetId,n=new yV(a,o)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return $z.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$z.min():t.readTime?kV(t.readTime):$z.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t,n,r,i,o={};o.database=FV(this.R),o.addTarget=(t=this.R,i=(n=e).target,(r=Uj(i)?{documents:HV(t,i)}:{query:WV(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=IV(t,n.resumeToken):n.snapshotVersion.compareTo($z.min())>0&&(r.readTime=CV(t,n.snapshotVersion.toTimestamp())),r);var a=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bz()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);a&&(o.labels=a),this.cr(o)},t.prototype.yr=function(e){var t={};t.database=FV(this.R),t.removeTarget=e,this.cr(t)},t}(FG),zG=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return fC(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Vz(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(Vz(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?kV(t.updateTime):kV(n)).isEqual($z.min())&&(r=kV(n)),new OB(r,t.transformResults||[]);var t,n,r}))):[]),n=kV(e.commitTime);return this.listener.Tr(n,t)}var r,i;return Vz(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=FV(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return BV(t.R,e)}))};this.cr(n)},t}(FG),jG=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return fC(t,e),t.prototype.br=function(){if(this.Rr)throw new Lz(Oz.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Oz.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Lz(Oz.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Oz.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Lz(Oz.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),BG=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Uz(t),this.Vr=!1):Fz("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),VG=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return pC(o,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return QG(this)?(Fz("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return(t=Hz(e)).Or.add(4),[4,WG(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,HG(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new BG(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HG(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:if(!QG(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function WG(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function GG(e,t){var n=Hz(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),$G(n)?YG(n):fq(n).er()&&KG(n,t))}function qG(e,t){var n=Hz(e),r=fq(n);n.$r.delete(t),r.er()&&XG(n,t),0===n.$r.size&&(r.er()?r.ir():QG(n)&&n.Br.set("Unknown"))}function KG(e,t){e.qr.U(t.targetId),fq(e).mr(t)}function XG(e,t){e.qr.U(t),fq(e).yr(t)}function YG(e){e.qr=new wV({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),fq(e).start(),e.Br.Sr()}function $G(e){return QG(e)&&!fq(e).tr()&&e.$r.size>0}function QG(e){return 0===Hz(e).Or.size}function JG(e){e.qr=void 0}function ZG(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){return e.$r.forEach((function(t,n){KG(e,t)})),[2]}))}))}function eq(e,t){return pC(this,void 0,void 0,(function(){return mC(this,(function(n){return JG(e),$G(e)?(e.Br.Nr(t),YG(e)):e.Br.set("Unknown"),[2]}))}))}function tq(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o;return mC(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof bV&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Fz("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,nq(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof gV?e.qr.X(t):t instanceof yV?e.qr.rt(t):e.qr.et(t),n.isEqual($z.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,YW(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(oj.EMPTY_BYTE_STRING,n.snapshotVersion)),XG(e,t);var r=new BH(n.target,t,1,n.sequenceNumber);KG(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Fz("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,nq(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function nq(e,t,n){return pC(this,void 0,void 0,(function(){var r=this;return mC(this,(function(i){switch(i.label){case 0:if(!RH(t))throw t;return e.Or.add(1),[4,WG(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return YW(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return pC(r,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return Fz("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,HG(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function rq(e,t){return t().catch((function(n){return nq(e,n,t)}))}function iq(e){return pC(this,void 0,void 0,(function(){var t,n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:t=Hz(e),n=dq(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!(QG(s=t)&&s.kr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,JW(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=dq(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,nq(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return oq(t)&&aq(t),[2]}var s}))}))}function oq(e){return QG(e)&&!dq(e).tr()&&e.kr.length>0}function aq(e){dq(e).start()}function sq(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){return dq(e).Ar(),[2]}))}))}function uq(e){return pC(this,void 0,void 0,(function(){var t,n,r,i;return mC(this,(function(o){for(t=dq(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function lq(e,t,n){return pC(this,void 0,void 0,(function(){var r,i;return mC(this,(function(o){switch(o.label){case 0:return r=e.kr.shift(),i=jH.from(r,t,n),[4,rq(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,iq(e)];case 2:return o.sent(),[2]}}))}))}function cq(e,t){return pC(this,void 0,void 0,(function(){return mC(this,(function(n){switch(n.label){case 0:return t&&dq(e).pr?[4,function(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return JB(r=t.code)&&r!==Oz.ABORTED?(n=e.kr.shift(),dq(e).sr(),[4,rq(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,iq(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return oq(e)&&aq(e),[2]}}))}))}function hq(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return n=Hz(e),t?(n.Or.delete(2),[4,HG(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,WG(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function fq(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=Hz(e);return r.br(),new UG(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:ZG.bind(null,e),Ri:eq.bind(null,e),_r:tq.bind(null,e)}),e.Mr.push((function(n){return pC(t,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),$G(e)?YG(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),JG(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function dq(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=Hz(e);return r.br(),new zG(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:sq.bind(null,e),Ri:cq.bind(null,e),Ir:uq.bind(null,e),Tr:lq.bind(null,e)}),e.Mr.push((function(n){return pC(t,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,iq(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.kr.length>0&&(Fz("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr}var pq=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new MH,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lz(Oz.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function mq(e,t){if(Uz("AsyncQueue",t+": "+e),RH(e))return new Lz(Oz.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vq=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||vj.comparator(t.key,n.key)}:function(e,t){return vj.comparator(e.key,t.key)},this.keyedMap=uV(),this.sortedSet=new eV(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),gq=function(){function e(){this.Qr=new eV(vj.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):Bz():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),yq=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,vq.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hB(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),bq=function(){this.Wr=void 0,this.listeners=[]},_q=function(){this.queries=new CW((function(e){return fB(e)}),hB),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:if(n=Hz(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new bq),!i)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=l.sent(),[3,4];case 3:return s=l.sent(),u=mq(s,"Initialization of query '"+dB(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Tq(n),[2]}}))}))}function xq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a;return mC(this,(function(s){return n=Hz(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Sq(e,t){for(var n=Hz(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var l=0,c=u.listeners;l<c.length;l++)c[l].Hr(a)&&(r=!0);u.Wr=a}}r&&Tq(n)}function Eq(e,t,n){var r=Hz(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function Tq(e){e.Gr.forEach((function(e){e.next()}))}var Mq=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new yq(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=yq.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),Cq=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Iq=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return LV(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?jV(this.R,e.document,!1):Oj.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return kV(e)},e}(),Aq=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=kq(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new Iq(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var l=u[s],c=(t.get(l)||fV()).add(a);t.set(l,c)}}return t},e.prototype.complete=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,oG(this.localStore,new Iq(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,aG(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new BW(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pq=function(e){this.key=e},Rq=function(e){this.key=e},Oq=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=fV(),this.mutatedKeys=fV(),this.lo=mB(e),this.fo=new vq(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new gq,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=rB(this.query)&&i.size===this.query.limit?i.last():null,l=iB(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=pB(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||l&&n.lo(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),rB(this.query)||iB(this.query))for(;a.size>this.query.limit;){var c=rB(this.query)?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bz()}})(n)-o(i)||r.lo(e.doc,t.doc);var n,i,o})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new yq(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new gq,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=fV(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new Rq(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new Pq(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=fV();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return yq.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),Lq=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Nq=function(e){this.key=e,this.bo=!1},Dq=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new CW((function(e){return fB(e)}),hB),this.Vo=new Map,this.So=new Set,this.Do=new eV(vj.comparator),this.Co=new Map,this.No=new uG,this.xo={},this.Fo=new Map,this.ko=mW.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function Fq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return n=fK(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ZW(n.localStore,lB(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Uq(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&GG(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Uq(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a,s,u,l;return mC(this,(function(c){switch(c.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a;return mC(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,tG(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(Qq(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,tG(e.localStore,t,!0)];case 1:return i=c.sent(),o=new Oq(t,i.Bn),a=o._o(i.documents),s=vV.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),Qq(e,n,u.To),l=new Lq(t,n,o),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function zq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return n=Hz(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!hB(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,eG(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),qG(n.remoteStore,r.targetId),Yq(n,r.targetId)})).catch(_W)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Yq(n,r.targetId),[4,eG(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function jq(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:r=dK(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(u=r.localStore,l=t,h=Hz(u),f=Yz.now(),d=l.reduce((function(e,t){return e.add(t.key)}),fV()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return h.Mn.pn(e,d).next((function(t){c=t;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=zB(o,c.get(o.key));null!=a&&n.push(new HB(o.key,a,Rj(a.value.mapValue),LB.exists(!0)))}return h._n.addMutationBatch(e,f,n,l)}))})).then((function(e){return e.applyToLocalDocumentSet(c),{batchId:e.batchId,changes:c}})))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new eV(qz)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,eK(r,i.changes)];case 3:return s.sent(),[4,iq(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=mq(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var u,l,c,h,f,d}))}))}function Bq(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:n=Hz(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$W(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Vz(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Vz(r.bo):e.removedDocuments.size>0&&(Vz(r.bo),r.bo=!1))})),[4,eK(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,_W(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Vq(e,t,n){var r=Hz(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Hz(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&Tq(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Hq(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:return(r=Hz(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new eV(vj.comparator)).insert(o,Oj.newNoDocument(o,$z.min())),s=fV().add(o),u=new mV($z.min(),new Map,new rV(qz),a,s),[4,Bq(r,u)]):[3,2];case 1:return l.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),Zq(r),[3,4];case 2:return[4,eG(r.localStore,t,!1).then((function(){return Yq(r,t,n)})).catch(_W)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))}function Wq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:n=Hz(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,XW(n.localStore,t)];case 2:return i=o.sent(),Xq(n,r,null),Kq(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,eK(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,_W(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Gq(e,t,n){return pC(this,void 0,void 0,(function(){var r,i;return mC(this,(function(o){switch(o.label){case 0:r=Hz(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=t,u=Hz(a),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var t;return u._n.lookupMutationBatch(e,s).next((function(n){return Vz(null!==n),t=n.keys(),u._n.removeMutationBatch(e,n)})).next((function(){return u._n.performConsistencyCheck(e)})).next((function(){return u.Mn.pn(e,t)}))})))];case 2:return i=o.sent(),Xq(r,t,n),Kq(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,eK(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,_W(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function qq(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:QG((n=Hz(e)).remoteStore)||Fz("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(u=n.localStore,l=Hz(u),l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return l._n.getHighestUnacknowledgedBatchId(e)})))];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=mq(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}var u,l}))}))}function Kq(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function Xq(e,t,n){var r=Hz(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Yq(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||$q(e,t)}))}function $q(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(qG(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Zq(e))}function Qq(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Pq?(e.No.addReference(o.key,t),Jq(e,o)):o instanceof Rq?(Fz("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||$q(e,o.key)):Bz()}}function Jq(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Fz("SyncEngine","New document in limbo: "+n),e.So.add(r),Zq(e))}function Zq(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new vj(tj.fromString(t)),r=e.ko.next();e.Co.set(r,new Nq(n)),e.Do=e.Do.insert(n,r),GG(e.remoteStore,new BH(lB(nB(n.path)),r,2,Rz.o))}}function eK(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:return r=Hz(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=HW.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c;return mC(this,(function(h){switch(h.label){case 0:n=Hz(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return CH.forEach(t,(function(t){return CH.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return CH.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!RH(r=h.sent()))throw r;return Fz("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function tK(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return(n=Hz(e)).currentUser.isEqual(t)?[3,3]:(Fz("SyncEngine","User change. New user:",t.toKey()),[4,KW(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).Fo.forEach((function(e){e.forEach((function(e){e.reject(new Lz(Oz.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,eK(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function nK(e,t){var n=Hz(e),r=n.Co.get(t);if(r&&r.bo)return fV().add(r.key);var i=fV(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],l=n.Po.get(u);i=i.unionWith(l.view.wo)}return i}function rK(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,tG((n=Hz(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&Qq(n,t.targetId,i.To),i)]}}))}))}function iK(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){return[2,rG((t=Hz(e)).localStore).then((function(e){return eK(t,e)}))]}))}))}function oK(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o;return mC(this,(function(a){switch(a.label){case 0:return[4,(s=(i=Hz(e)).localStore,u=t,l=Hz(s),c=Hz(l._n),l.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return c.jt(e,u).next((function(t){return t?l.Mn.pn(e,t):CH.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,iq(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Xq(i,t,r||null),Kq(i,t),function(e,t){Hz(Hz(e)._n).Gt(t)}(i.localStore,t)):Bz(),a.label=4;case 4:return[4,eK(i,o)];case 5:return a.sent(),[3,7];case 6:Fz("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}var s,u,l,c}))}))}function aK(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l;return mC(this,(function(c){switch(c.label){case 0:return fK(n=Hz(e)),dK(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,sK(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,hq(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)s=a[o],GG(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):l=l.then((function(){return Yq(n,t),eG(n.localStore,t,!0)})),qG(n.remoteStore,t)})),[4,l]);case 4:return c.sent(),[4,sK(n,u)];case 5:return c.sent(),(h=Hz(n)).Co.forEach((function(e,t){qG(h.remoteStore,t)})),h.No.ts(),h.Co=new Map,h.Do=new eV(vj.comparator),n.$o=!1,[4,hq(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}var h}))}))}function sK(e,t,n){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,h,f,d,p,m;return mC(this,(function(v){switch(v.label){case 0:n=Hz(e),r=[],i=[],o=0,a=t,v.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(l=n.Vo.get(s))&&0!==l.length?[4,ZW(n.localStore,lB(l[0]))]:[3,7]):[3,13];case 2:u=v.sent(),c=0,h=l,v.label=3;case 3:return c<h.length?(f=h[c],d=n.Po.get(f),[4,rK(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,nG(n.localStore,s)];case 8:return m=v.sent(),[4,ZW(n.localStore,m)];case 9:return u=v.sent(),[4,Uq(n,uK(m),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function uK(e){return tB(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function lK(e){var t=Hz(e);return Hz(Hz(t.localStore).persistence).fn()}function cK(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a;return mC(this,(function(s){switch(s.label){case 0:return(i=Hz(e)).$o?(Fz("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rG(i.localStore)];case 3:return o=s.sent(),a=mV.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,eK(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,eG(i.localStore,t,!0)];case 6:return s.sent(),Yq(i,t,r),[3,8];case 7:Bz(),s.label=8;case 8:return[2]}}))}))}function hK(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f;return mC(this,(function(d){switch(d.label){case 0:if(!(r=fK(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Fz("SyncEngine","Adding an already active target "+a),[3,5]):[4,nG(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,ZW(r.localStore,s)];case 3:return u=d.sent(),[4,Uq(r,uK(s),u.targetId,!1)];case 4:d.sent(),GG(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:l=function(e){return mC(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,eG(r.localStore,e,!1).then((function(){qG(r.remoteStore,e),Yq(r,e)})).catch(_W)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},c=0,h=n,d.label=7;case 7:return c<h.length?(f=h[c],[5,l(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}function fK(e){var t=Hz(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bq.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nK.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hq.bind(null,t),t.vo._r=Sq.bind(null,t.eventManager),t.vo.Mo=Eq.bind(null,t.eventManager),t}function dK(e){var t=Hz(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wq.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gq.bind(null,t),t}function pK(e,t,n){var r=Hz(e);(function(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:return l.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=l.sent(),[4,(c=e.localStore,h=r,f=Hz(c),d=kV(h.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return f.Ke.getBundleMetadata(e,h.id)})).then((function(e){return!!e&&e.createTime.compareTo(d)>=0})))];case 2:return l.sent()?[4,t.close()]:[3,4];case 3:return[2,(l.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(kq(r)),i=new Aq(r,e.localStore,t.R),[4,t.Lo()];case 5:o=l.sent(),l.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=l.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=l.sent(),l.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=l.sent(),[4,eK(e,s.wn,void 0)];case 12:return l.sent(),[4,function(e,t){var n=Hz(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return l.sent(),n._completeWith(s.progress),[3,15];case 14:return zz("SyncEngine","Loading bundle failed with "+(u=l.sent())),n._failWith(u),[3,15];case 15:return[2]}var c,h,f,d}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var mK=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return this.R=NG(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return qW(this.persistence,new WW,e.initialUser,this.R)},e.prototype.qo=function(e){return new pG(vG.bs,this.R)},e.prototype.Bo=function(e){return new CG},e.prototype.terminate=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),vK=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return fC(t,e),t.prototype.initialize=function(t){return pC(this,void 0,void 0,(function(){return mC(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,iG(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,t)];case 3:return n.sent(),[4,dK(this.Qo.syncEngine)];case 4:return n.sent(),[4,iq(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ko=function(e){return qW(this.persistence,new WW,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new SW(t,e.asyncQueue)},t.prototype.qo=function(e){var t=jW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sW.withCacheSize(this.cacheSizeBytes):sW.DEFAULT;return new FW(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,OG(),LG(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new CG},t}(mK),gK=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return fC(t,e),t.prototype.initialize=function(t){return pC(this,void 0,void 0,(function(){var n,r=this;return mC(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof MG?(this.sharedClientState.syncEngine={ui:oK.bind(null,n),ai:cK.bind(null,n),hi:hK.bind(null,n),fn:lK.bind(null,n),ci:iK.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return pC(r,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return[4,aK(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=OG();if(!MG.yt(t))throw new Lz(Oz.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MG(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(vK),yK=function(){function e(){}return e.prototype.initialize=function(e,t){return pC(this,void 0,void 0,(function(){var n=this;return mC(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Vq(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tK.bind(null,this.syncEngine),[4,hq(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new _q},e.prototype.createDatastore=function(e){var t,n,r=NG(e.databaseInfo.databaseId),i=(t=e.databaseInfo,new RG(t));return n=e.credentials,new jG(n,i,r)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vq(a.syncEngine,e,0)},o=AG.yt()?new AG:new IG,new VG(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new Dq(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=Hz(e),Fz("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,WG(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return pC(this,void 0,void 0,(function(){var r;return mC(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _K=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),wK=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new MH,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Cq(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),xK=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return pC(this,void 0,void 0,(function(){var t,n=this;return mC(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lz(Oz.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return n=Hz(e),r=FV(n.R)+"/documents",i={documents:t.map((function(e){return OV(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t,r,i=(t=n.R,"found"in(r=e)?function(e,t){Vz(!!t.found),t.found.name,t.found.updateTime;var n=LV(e,t.found.name),r=kV(t.found.updateTime),i=new Pj({mapValue:{fields:t.found.fields}});return Oj.newFoundDocument(n,r,i)}(t,r):"missing"in r?function(e,t){Vz(!!t.missing),Vz(!!t.readTime);var n=LV(e,t.missing),r=kV(t.readTime);return Oj.newNoDocument(n,r)}(t,r):Bz());a.set(i.key.toString(),i)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Vz(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new YB(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return pC(this,void 0,void 0,(function(){var e,t=this;return mC(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=vj.fromPath(n);t.mutations.push(new $B(r,t.precondition(r)))})),[4,function(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return n=Hz(e),r=FV(n.R)+"/documents",i={writes:t.map((function(e){return BV(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bz();t=$z.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lz(Oz.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?LB.updateTime(t):LB.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($z.min()))throw new Lz(Oz.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return LB.updateTime(t)}return LB.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),SK=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new DG(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return pC(e,void 0,void 0,(function(){var e,t,n=this;return mC(this,(function(r){return e=new xK(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!dj(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!JB(t)}return!1},e}(),EK=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=gG.UNAUTHENTICATED,this.clientId=Gz.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return pC(r,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return Fz("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lz(Oz.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new MH;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return pC(e,void 0,void 0,(function(){var e,n;return mC(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=mq(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(e,t){return pC(this,void 0,void 0,(function(){var n,r,i=this;return mC(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Fz("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return pC(i,void 0,void 0,(function(){return mC(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,KW(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function MK(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,CK(e)];case 1:return n=i.sent(),Fz("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return(n=Hz(e)).asyncQueue.verifyOperationInProgress(),Fz("RemoteStore","RemoteStore received new credentials"),r=QG(n),n.Or.add(3),[4,WG(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,HG(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function CK(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Fz("FirestoreClient","Using default OfflineComponentProvider"),[4,TK(e,new mK)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function IK(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Fz("FirestoreClient","Using default OnlineComponentProvider"),[4,MK(e,new yK)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function AK(e){return CK(e).then((function(e){return e.persistence}))}function kK(e){return CK(e).then((function(e){return e.localStore}))}function PK(e){return IK(e).then((function(e){return e.remoteStore}))}function RK(e){return IK(e).then((function(e){return e.syncEngine}))}function OK(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:return[4,IK(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Fq.bind(null,t.syncEngine),n.onUnlisten=zq.bind(null,t.syncEngine),n)]}}))}))}function LK(e,t,n){var r=this;void 0===n&&(n={});var i=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(r,void 0,void 0,(function(){var r;return mC(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new _K({next:function(o){t.enqueueAndForget((function(){return xq(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Lz(Oz.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Lz(Oz.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Mq(nB(n.path),o,{includeMetadataChanges:!0,so:!0});return wq(e,a)},[4,OK(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function NK(e,t,n){var r=this;void 0===n&&(n={});var i=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(r,void 0,void 0,(function(){var r;return mC(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new _K({next:function(n){t.enqueueAndForget((function(){return xq(e,a)})),n.fromCache&&"server"===r.source?i.reject(new Lz(Oz.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Mq(n,o,{includeMetadataChanges:!0,so:!0});return wq(e,a)},[4,OK(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var DK=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},FK=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),UK=new Map,zK=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},jK=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(gG.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),BK=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),VK=function(){function e(e){var t=this;this.currentUser=gG.UNAUTHENTICATED,this.oc=new MH,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){Fz("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(Fz("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(Fz("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Vz("string"==typeof n.accessToken),new zK(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return pC(n,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Vz(null===e||"string"==typeof e),new gG(e)},e}(),HK=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=gG.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),WK=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new HK(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(gG.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GK(e,t,n){if(!n)throw new Lz(Oz.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function qK(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function KK(e,t,n,r){if(!0===t&&!0===r)throw new Lz(Oz.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function XK(e){if(!vj.isDocumentKey(e))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function YK(e){if(vj.isDocumentKey(e))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function $K(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Bz()}function QK(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lz(Oz.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$K(e);throw new Lz(Oz.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function JK(e,t){if(t<=0)throw new Lz(Oz.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZK=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Lz(Oz.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lz(Oz.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,KK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),eX=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZK({}),this._settingsFrozen=!1,e instanceof FK?(this._databaseId=e,this._credentials=new jK):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lz(Oz.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new FK(e.options.projectId)}(e),this._credentials=new VK(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Lz(Oz.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Lz(Oz.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZK(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new jK;switch(e.type){case"gapi":var t=e.client;return Vz(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new WK(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Lz(Oz.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=UK.get(this))&&(Fz("ComponentProvider","Removing Datastore"),UK.delete(this),e.terminate()),Promise.resolve();var e},e}(),tX=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new rX(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),nX=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),rX=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,nB(r))||this)._path=r,i.type="collection",i}return fC(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new tX(this.firestore,null,new vj(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(nX);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=aI(e),GK("collection","path",t),e instanceof eX)return YK(n=tj.fromString.apply(tj,yC([t],r))),new rX(e,null,n);if(!(e instanceof tX||e instanceof rX))throw new Lz(Oz.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return YK(n=tj.fromString.apply(tj,yC([e.path],r)).child(tj.fromString(t))),new rX(e.firestore,null,n)}function oX(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=aI(e),1===arguments.length&&(t=Gz.u()),GK("doc","path",t),e instanceof eX)return XK(n=tj.fromString.apply(tj,yC([t],r))),new tX(e,null,new vj(n));if(!(e instanceof tX||e instanceof rX))throw new Lz(Oz.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return XK(n=e._path.child(tj.fromString.apply(tj,yC([t],r)))),new tX(e.firestore,e instanceof rX?e.converter:null,new vj(n))}function aX(e,t){return e=aI(e),t=aI(t),(e instanceof tX||e instanceof rX)&&(t instanceof tX||t instanceof rX)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sX(e,t){return e=aI(e),t=aI(t),e instanceof nX&&t instanceof nX&&e.firestore===t.firestore&&hB(e._query,t._query)&&e.converter===t.converter}var uX=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new DG(this,"async_queue_retry"),this.Tc=function(){var t=LG();t&&Fz("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=LG();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ic(),this.Ac(e)},e.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var e=LG();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Tc)}},e.prototype.enqueue=function(e){return this.Ic(),this._c?new Promise((function(e){})):this.Ac(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.Rc()}))},e.prototype.Rc=function(){return pC(this,void 0,void 0,(function(){var e,t=this;return mC(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!RH(e=n.sent()))throw e;return Fz("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.Rc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Ac=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,Uz("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ic(),this.Ec.indexOf(e)>-1&&(t=0);var i=pq.createAndSchedule(this,e,t,n,(function(e){return r.bc(e)}));return this.mc.push(i),i},e.prototype.Ic=function(){this.yc&&Bz()},e.prototype.verifyOperationInProgress=function(){},e.prototype.vc=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Pc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Vc=function(e){var t=this;return this.vc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.vc()}))},e.prototype.Sc=function(e){this.Ec.push(e)},e.prototype.bc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function lX(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var cX=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new MH,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),hX=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new uX,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return fC(t,e),t.prototype._terminate=function(){return this._firestoreClient||dX(this),this._firestoreClient.terminate()},t}(eX);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fX(e){return e._firestoreClient||dX(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dX(e){var t,n,r,i,o,a=e._freezeSettings(),s=(n=e._databaseId,r=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",i=e._persistenceKey,new DK(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));e._firestoreClient=new EK(e._credentials,e._queue,s)}function pX(e,t,n){var r=this,i=new MH;return e.asyncQueue.enqueue((function(){return pC(r,void 0,void 0,(function(){var r;return mC(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,TK(e,n)];case 1:return o.sent(),[4,MK(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===Oz.FAILED_PRECONDITION||a.code===Oz.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function mX(e){if(e._initialized||e._terminated)throw new Lz(Oz.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vX=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rj(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),gX=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(oj.fromBase64String(t))}catch(n){throw new Lz(Oz.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(oj.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),yX=function(e){this._methodName=e},bX=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lz(Oz.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lz(Oz.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return qz(this._lat,e._lat)||qz(this._long,e._long)},e}(),_X=/^__.*__$/,wX=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new HB(e,this.data,this.fieldMask,t,this.fieldTransforms):new VB(e,this.data,t,this.fieldTransforms)},e}(),xX=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new HB(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SX(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bz()}}var EX=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),e.prototype.Nc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.xc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Nc({path:n,Fc:!1});return r.kc(e),r},e.prototype.$c=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},e.prototype.Oc=function(e){return this.Nc({path:void 0,Fc:!0})},e.prototype.Mc=function(e){return WX(e,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Dc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.kc(this.path.get(e))},e.prototype.kc=function(e){if(0===e.length)throw this.Mc("Document fields must not be empty");if(SX(this.Cc)&&_X.test(e))throw this.Mc('Document fields cannot begin and end with "__"')},e}(),TX=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||NG(e)}return e.prototype.qc=function(e,t,n,r){return void 0===r&&(r=!1),new EX({Cc:e,methodName:t,Bc:n,path:rj.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function MX(e){var t=e._freezeSettings(),n=NG(e._databaseId);return new TX(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CX(e,t,n,r,i,o){void 0===o&&(o={});var a=e.qc(o.merge||o.mergeFields?2:0,t,n,i);jX("Data must be an object, but it was:",a,r);var s,u,l=UX(r,a);if(o.merge)s=new ij(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var d=BX(t,f[h],n);if(!a.contains(d))throw new Lz(Oz.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");GX(c,d)||c.push(d)}s=new ij(c),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new wX(new Pj(l),s,u)}var IX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Cc)throw 1===e.Cc?e.Mc(this._methodName+"() can only appear at the top level of your update data"):e.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(yX);function AX(e,t,n){return new EX({Cc:3,Bc:t.settings.Bc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var kX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype._toFieldTransform=function(e){return new RB(e.path,new EB)},t.prototype.isEqual=function(e){return e instanceof t},t}(yX),PX=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Uc=n,r}return fC(t,e),t.prototype._toFieldTransform=function(e){var t=AX(this,e,!0),n=this.Uc.map((function(e){return FX(e,t)})),r=new TB(n);return new RB(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(yX),RX=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Uc=n,r}return fC(t,e),t.prototype._toFieldTransform=function(e){var t=AX(this,e,!0),n=this.Uc.map((function(e){return FX(e,t)})),r=new CB(n);return new RB(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(yX),OX=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return fC(t,e),t.prototype._toFieldTransform=function(e){var t=new AB(e.R,bB(e.R,this.Kc));return new RB(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(yX);function LX(e,t,n,r){var i=e.qc(1,t,n);jX("Data must be an object, but it was:",i,r);var o=[],a=Pj.empty();Jz(r,(function(e,r){var s=HX(t,e,n);r=aI(r);var u=i.$c(s);if(r instanceof IX)o.push(s);else{var l=FX(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new ij(o);return new xX(a,s,i.fieldTransforms)}function NX(e,t,n,r,i,o){var a=e.qc(1,t,n),s=[BX(t,r,n)],u=[i];if(o.length%2!=0)throw new Lz(Oz.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(BX(t,o[l])),u.push(o[l+1]);for(var c=[],h=Pj.empty(),f=s.length-1;f>=0;--f)if(!GX(c,s[f])){var d=s[f],p=u[f];p=aI(p);var m=a.$c(d);if(p instanceof IX)c.push(d);else{var v=FX(p,m);null!=v&&(c.push(d),h.set(d,v))}}var g=new ij(c);return new xX(h,g,a.fieldTransforms)}function DX(e,t,n,r){return void 0===r&&(r=!1),FX(n,e.qc(r?4:3,t))}function FX(e,t){if(zX(e=aI(e)))return jX("Unsupported field value:",t,e),UX(e,t);if(e instanceof yX)return function(e,t){if(!SX(t.Cc))throw t.Mc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Mc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Cc)throw t.Mc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=FX(o[i],t.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=aI(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bB(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Yz.fromDate(e);return{timestampValue:CV(t.R,n)}}if(e instanceof Yz)return n=new Yz(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:CV(t.R,n)};if(e instanceof bX)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gX)return{bytesValue:IV(t.R,e._byteString)};if(e instanceof tX){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:PV(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Mc("Unsupported field value: "+$K(e))}(e,t)}function UX(e,t){var n={};return Zz(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jz(e,(function(e,r){var i=FX(r,t.xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zX(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yz||e instanceof bX||e instanceof gX||e instanceof tX||e instanceof yX)}function jX(e,t,n){if(!zX(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=$K(n);throw"an object"===r?t.Mc(e+" a custom object"):t.Mc(e+" "+r)}var i}function BX(e,t,n){if((t=aI(t))instanceof vX)return t._internalPath;if("string"==typeof t)return HX(e,t);throw WX("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var VX=new RegExp("[~\\*/\\[\\]]");function HX(e,t,n){if(t.search(VX)>=0)throw WX("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(vX.bind.apply(vX,yC([void 0],t.split(".")))))._internalPath}catch(XY){throw WX("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function WX(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Lz(Oz.INVALID_ARGUMENT,(s+=". ")+e+u)}function GX(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qX=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new tX(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new KX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(XX("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),KX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(qX);function XX(e,t){return"string"==typeof t?HX(e,t):t instanceof vX?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YX=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),$X=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return fC(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new QX(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(XX("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(qX),QX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}($X),JX=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new YX(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new QX(n._firestore,n._userDataWriter,r.key,r,new YX(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lz(Oz.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new QX(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YX(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new QX(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YX(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ZX(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function ZX(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bz()}}function eY(e,t){return e instanceof $X&&t instanceof $X?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof JX&&t instanceof JX&&e._firestore===t._firestore&&sX(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(e){if(iB(e)&&0===e.explicitOrderBy.length)throw new Lz(Oz.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nY=function(){};function rY(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var iY=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qc=t,i.jc=n,i.Wc=r,i.type="where",i}return fC(t,e),t.prototype._apply=function(e){var t,n,r,i=MX(e.firestore),o=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){hY(a,o);for(var u=[],l=0,c=a;l<c.length;l++){var h=c[l];u.push(cY(r,e,h))}s={arrayValue:{values:u}}}else s=cY(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hY(a,o),s=DX(n,"where",a,"in"===o||"not-in"===o);var f=zj.create(i,o,s);return function(e,t){if(t.g()){var n=aB(e);if(null!==n&&!n.isEqual(t.field))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=oB(e);null!==r&&fY(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,i,e.firestore._databaseId,this.Qc,this.jc,this.Wc);return new nX(e.firestore,e.converter,(t=e._query,n=o,r=t.filters.concat([n]),new eB(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))},t}(nY),oY=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Qc=t,r.Gc=n,r.type="orderBy",r}return fC(t,e),t.prototype._apply=function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $j(t,n);return function(e,t){if(null===oB(e)){var n=aB(e);null!==n&&fY(e,n,t.field)}}(e,r),r}(e._query,this.Qc,this.Gc);return new nX(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new eB(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},t}(nY),aY=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.zc=n,i.Hc=r,i}return fC(t,e),t.prototype._apply=function(e){return new nX(e.firestore,e.converter,cB(e._query,this.zc,this.Hc))},t}(nY),sY=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return fC(t,e),t.prototype._apply=function(e){var t,n,r=lY(e,this.type,this.Jc,this.Yc);return new nX(e.firestore,e.converter,(t=e._query,n=r,new eB(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))},t}(nY),uY=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return fC(t,e),t.prototype._apply=function(e){var t,n,r=lY(e,this.type,this.Jc,this.Yc);return new nX(e.firestore,e.converter,(t=e._query,n=r,new eB(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))},t}(nY);function lY(e,t,n,r){if(n[0]=aI(n[0]),n[0]instanceof qX)return function(e,t,n,r,i){if(!r)throw new Lz(Oz.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=uB(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Ej(t,r.key));else{var l=r.data.field(u.field);if(cj(l))throw new Lz(Oz.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=u.field.canonicalString();throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}o.push(l)}}return new Xj(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MX(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Lz(Oz.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.isKeyField()){if("string"!=typeof l)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!sB(e)&&-1!==l.indexOf("/"))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var c=e.path.child(tj.fromString(l));if(!vj.isDocumentKey(c))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var h=new vj(c);s.push(Ej(t,h))}else{var f=DX(n,r,l);s.push(f)}}return new Xj(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function cY(e,t,n){if("string"==typeof(n=aI(n))){if(""===n)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sB(t)&&-1!==n.indexOf("/"))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(tj.fromString(n));if(!vj.isDocumentKey(r))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ej(e,new vj(r))}if(n instanceof tX)return Ej(e,n._key);throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$K(n)+".")}function hY(e,t){if(!Array.isArray(e)||0===e.length)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function fY(e,t,n){if(!n.isEqual(t))throw new Lz(Oz.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dY=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),gj(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uj(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lj(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bz()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Jz(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new bX(uj(e.latitude),uj(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=hj(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fj(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=sj(e);return new Yz(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=tj.fromString(e);Vz(nH(n));var r=new FK(n.get(1),n.get(3)),i=new vj(n.popFirst(5));return r.isEqual(t)||Uz("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var mY=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return fC(t,e),t.prototype.convertBytes=function(e){return new gX(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tX(this.firestore,null,t)},t}(dY),vY=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=MX(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=gY(e,this._firestore),i=pY(r.converter,t,n),o=CX(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,LB.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=gY(e,this._firestore);return o="string"==typeof(t=aI(t))||t instanceof vX?NX(this._dataReader,"WriteBatch.update",a._key,t,n,r):LX(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,LB.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=gY(e,this._firestore);return this._mutations=this._mutations.concat(new YB(t._key,LB.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lz(Oz.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(e,t){if((e=aI(e)).firestore!==t)throw new Lz(Oz.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yY=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return fC(t,e),t.prototype.convertBytes=function(e){return new gX(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tX(this.firestore,null,t)},t}(dY);function bY(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=QK(e,tX);var o=QK(e.firestore,hX),a=MX(o);return wY(o,[("string"==typeof(t=aI(t))||t instanceof vX?NX(a,"updateDoc",e._key,t,n,r):LX(a,"updateDoc",e._key,t)).toMutation(e._key,LB.exists(!0))])}function _Y(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=aI(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||lX(i[s])||(a=i[s],s++);var u,l,c,h={includeMetadataChanges:a.includeMetadataChanges};if(lX(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof tX)l=QK(e.firestore,hX),c=nB(e._key.path),u={next:function(t){i[s]&&i[s](xY(l,e,t))},error:i[s+1],complete:i[s+2]};else{var d=QK(e,nX);l=QK(d.firestore,hX),c=d._query;var p=new yY(l);u={next:function(e){i[s]&&i[s](new JX(l,p,d,e))},error:i[s+1],complete:i[s+2]},tY(e._query)}return function(e,t,n,r){var i=this,o=new _K(r),a=new Mq(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return pC(i,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=wq,[4,OK(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return pC(i,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=xq,[4,OK(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(fX(l),c,h,u)}function wY(e,t){return function(e,t){var n=this,r=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(i){switch(i.label){case 0:return n=jq,[4,RK(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(fX(e),t)}function xY(e,t,n){var r=n.docs.get(t._key),i=new yY(e);return new $X(e,i,t._key,r,new YX(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SY=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return fC(t,e),t.prototype.get=function(t){var n=this,r=gY(t,this._firestore),i=new yY(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new $X(n._firestore,i,r._key,e._document,new YX(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=MX(e)}return e.prototype.get=function(e){var t=this,n=gY(e,this._firestore),r=new mY(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Bz();var i=e[0];if(i.isFoundDocument())return new qX(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new qX(t._firestore,r,n._key,null,n.converter);throw Bz()}))},e.prototype.set=function(e,t,n){var r=gY(e,this._firestore),i=pY(r.converter,t,n),o=CX(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=gY(e,this._firestore);return o="string"==typeof(t=aI(t))||t instanceof vX?NX(this._dataReader,"Transaction.update",a._key,t,n,r):LX(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=gY(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EY(){if("undefined"==typeof Uint8Array)throw new Lz(Oz.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function TY(){if("undefined"==typeof atob)throw new Lz(Oz.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var MY=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return TY(),new e(gX.fromBase64String(t))},e.fromUint8Array=function(t){return EY(),new e(gX.fromUint8Array(t))},e.prototype.toBase64=function(){return TY(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return EY(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),CY=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){mX(e=QK(e,hX));var n=fX(e),r=e._freezeSettings(),i=new yK;return pX(n,i,new vK(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){mX(e=QK(e,hX));var t=fX(e),n=e._freezeSettings(),r=new yK;return pX(t,r,new gK(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Lz(Oz.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new MH;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return pC(t,void 0,void 0,(function(){var t;return mC(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return AH.yt()?(t=e+"main",[4,AH.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(jW(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),IY=function(){function e(e,t,n){var r=this;this._delegate=t,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof FK||(this.Zc=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||zz("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var i=(e=QK(e,eX))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&zz("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:t+":"+n,ssl:!1})),r.mockUserToken){var o=AC(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Lz(Oz.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new BK(new zK(o,new gG(a)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return pC(t,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:return[4,AK(e)];case 1:return t=r.sent(),[4,PK(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),i=n,o=Hz(i),o.Or.delete(0),HG(o))]}var i,o}))}))}))}(fX(QK(this._delegate,hX)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return pC(t,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:return[4,AK(e)];case 1:return t=r.sent(),[4,PK(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return(t=Hz(e)).Or.add(0),[4,WG(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(fX(QK(this._delegate,hX)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&KK("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(t,void 0,void 0,(function(){var t;return mC(this,(function(r){switch(r.label){case 0:return t=qq,[4,RK(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(fX(QK(this._delegate,hX)))},e.prototype.onSnapshotsInSync=function(e){return t=this._delegate,n=e,function(e,t){var n=this,r=new _K(t);return e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=function(e,t){Hz(e).Gr.add(t),t.next()},[4,OK(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=function(e,t){Hz(e).Gr.delete(t)},[4,OK(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(fX(t=QK(t,hX)),lX(n)?n:{next:n});var t,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Zc)throw new Lz(Oz.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new VY(this,iX(this._delegate,e))}catch(t){throw LY(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new OY(this,oX(this._delegate,e))}catch(t){throw LY(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new zY(this,function(e,t){if(e=QK(e,eX),GK("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new nX(e,null,(n=t,new eB(tj.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw LY(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t,n=this;return function(e,t){var n=this,r=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(i){switch(i.label){case 0:return[4,(o=e,IK(o).then((function(e){return e.datastore})))];case 1:return n=i.sent(),new SK(e.asyncQueue,n,t,r).run(),[2]}var o}))}))})),r.promise}(fX(t=this._delegate),(function(r){return function(t){return e(new kY(n,t))}(new SY(t,r))}))},e.prototype.batch=function(){var e=this;return fX(this._delegate),new PY(new vY(this._delegate,(function(t){return wY(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new Lz(Oz.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new Lz(Oz.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),AY=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return fC(t,e),t.prototype.convertBytes=function(e){return new MY(new gX(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return OY.tu(t,this.firestore,null)},t}(dY);var kY=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AY(e)}return e.prototype.get=function(e){var t=this,n=HY(e);return this._delegate.get(n).then((function(e){return new FY(t._firestore,new $X(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=HY(e);return n?(qK("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=HY(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,yC([a,t,n],i)),this},e.prototype.delete=function(e){var t=HY(e);return this._delegate.delete(t),this},e}(),PY=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=HY(e);return n?(qK("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=HY(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,yC([a,t,n],i)),this},e.prototype.delete=function(e){var t=HY(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),RY=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new QX(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UY(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.eu=function(t,n){var r=e.nu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new AY(t),n),i.set(n,o)),o},e}();RY.nu=new WeakMap;var OY=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AY(e)}return e.su=function(t,n,r){if(t.length%2!=0)throw new Lz(Oz.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new tX(n._delegate,r,new vj(t)))},e.tu=function(t,n,r){return new e(n,new tX(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new VY(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new VY(this.firestore,iX(this._delegate,e))}catch(t){throw LY(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=aI(e))instanceof tX&&aX(this._delegate,e)},e.prototype.set=function(e,t){t=qK("DocumentReference.set",t);try{return function(e,t,n){e=QK(e,tX);var r=QK(e.firestore,hX),i=pY(e.converter,t,n);return wY(r,[CX(MX(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,LB.none())])}(this._delegate,e,t)}catch(n){throw LY(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?bY(this._delegate,e):bY.apply(void 0,yC([this._delegate,e,t],n))}catch(i){throw LY(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return wY(QK((e=this._delegate).firestore,hX),[new YB(e._key,LB.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=NY(t),i=DY(t,(function(t){return new FY(e.firestore,new $X(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return _Y(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=QK(e,tX);var t=QK(e.firestore,hX),n=fX(t),r=new yY(t);return function(e,t){var n=this,r=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return pC(this,void 0,void 0,(function(){var r,i;return mC(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,s=t,u=Hz(a),u.persistence.runTransaction("read document","readonly",(function(e){return u.Mn.mn(e,s)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Lz(Oz.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=mq(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s,u}))}))},[4,kK(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new $X(t,r,e._key,n,new YX(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=QK(e,tX);var t=QK(e.firestore,hX);return LK(fX(t),e._key,{source:"server"}).then((function(n){return xY(t,e,n)}))}(this._delegate):function(e){e=QK(e,tX);var t=QK(e.firestore,hX);return LK(fX(t),e._key).then((function(n){return xY(t,e,n)}))}(this._delegate)).then((function(e){return new FY(t.firestore,new $X(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(RY.eu(this.firestore,t)):this._delegate.withConverter(null))},e}();function LY(e,t,n){return e.message=e.message.replace(t,n),e}function NY(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!lX(r))return r}return{}}function DY(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=lX(e[0])?e[0]:lX(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var FY=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new OY(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return eY(this._delegate,e._delegate)},e}(),UY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fC(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(FY),zY=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AY(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,rY(this._delegate,(o=r,a=i=n,s=XX("where",t),new iY(s,a,o))))}catch(i){throw LY(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,a,s},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,rY(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=XX("orderBy",e);return new oY(r,n)}(t,n)))}catch(r){throw LY(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,rY(this._delegate,(JK("limit",n=t),new aY("limit",n,"F"))))}catch(r){throw LY(r,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,rY(this._delegate,(JK("limitToLast",n=t),new aY("limitToLast",n,"L"))))}catch(r){throw LY(r,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rY(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new sY("startAt",e,!0)}.apply(void 0,t)))}catch(r){throw LY(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rY(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new sY("startAfter",e,!1)}.apply(void 0,t)))}catch(r){throw LY(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rY(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new uY("endBefore",e,!0)}.apply(void 0,t)))}catch(r){throw LY(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,rY(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new uY("endAt",e,!1)}.apply(void 0,t)))}catch(r){throw LY(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return sX(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=QK(e,nX);var t=QK(e.firestore,hX),n=fX(t),r=new yY(t);return function(e,t){var n=this,r=new MH;return e.asyncQueue.enqueueAndForget((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,tG(e,t,!0)];case 1:return s=u.sent(),r=new Oq(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=mq(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,kK(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new JX(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=QK(e,nX);var t=QK(e.firestore,hX),n=fX(t),r=new yY(t);return NK(n,e._query,{source:"server"}).then((function(n){return new JX(t,r,e,n)}))}(this._delegate):function(e){e=QK(e,nX);var t=QK(e.firestore,hX),n=fX(t),r=new yY(t);return tY(e._query),NK(n,e._query).then((function(n){return new JX(t,r,e,n)}))}(this._delegate)).then((function(e){return new BY(t.firestore,new JX(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=NY(t),i=DY(t,(function(t){return new BY(e.firestore,new JX(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return _Y(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(RY.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(),jY=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new UY(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),BY=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new zY(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new UY(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new jY(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new UY(n._firestore,r))}))},e.prototype.isEqual=function(e){return eY(this._delegate,e._delegate)},e}(),VY=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return fC(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new OY(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new OY(this.firestore,void 0===e?oX(this._delegate):oX(this._delegate,e))}catch(t){throw LY(t,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t,n,r,i,o,a=this;return(t=this._delegate,n=e,r=QK(t.firestore,hX),i=oX(t),o=pY(t.converter,n),wY(r,[CX(MX(t.firestore),"addDoc",i._key,o,null!==t.converter,{}).toMutation(i._key,LB.exists(!1))]).then((function(){return i}))).then((function(e){return new OY(a.firestore,e)}))},t.prototype.isEqual=function(e){return aX(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(RY.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(zY);function HY(e){return QK(e,tX)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WY=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(vX.bind.apply(vX,yC([void 0],e)))}return e.documentId=function(){return new e(rj.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=aI(e))instanceof vX&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),GY=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new kX("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new IX("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new PX("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new RX("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new OX("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(e){return t=this._delegate,n=e,r=fX(t=QK(t,hX)),i=new cX,function(e,t,n,r){var i,o,a,s=this,u=(i=n,o=NG(t),a=function(e,t){if(e instanceof Uint8Array)return bK(e,t);if(e instanceof ArrayBuffer)return bK(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new wK(a,o));e.asyncQueue.enqueueAndForget((function(){return pC(s,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return t=pK,[4,RK(e)];case 1:return t.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,t._databaseId,n,i),i;var t,n,r,i}function KY(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=Hz(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,kK(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(fX(t=QK(t,hX)),n).then((function(e){return e?new nX(t,null,e.query):null}))).then((function(e){return e?new zY(r,e):null}))}var XY,YY,$Y={Firestore:IY,GeoPoint:bX,Timestamp:Yz,Blob:MY,Transaction:kY,WriteBatch:PY,DocumentReference:OY,DocumentSnapshot:FY,Query:zY,QueryDocumentSnapshot:UY,QuerySnapshot:BY,CollectionReference:VY,FieldPath:WY,FieldValue:GY,setLogLevel:function(e){var t;t=e,Nz.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(XY=NI).INTERNAL.registerComponent(new sI("firestore",(function(e){return function(e,t){return new IY(e,new hX(e,t),new CY)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},$Y))),XY.registerVersion("@firebase/firestore","2.3.8"),(YY=IY).prototype.loadBundle=qY,YY.prototype.namedQuery=KY;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QY={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},JY=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return fC(t,e),t}(Error);var ZY=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var t$=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return e$(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?e$(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n$=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new t$,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new ZY(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(XY){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o;return mC(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f,d;return mC(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new JY("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),l=u.timer,c=u.promise,[4,Promise.race([r$(l,this.postJSON(r,i,o)),c,r$(l,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new JY("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!QY[s])return new JY("internal","internal");r=QY[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(XY){}return"ok"===r?null:new JY(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new JY("internal","Response is not valid JSON object.");if(void 0===(d=h.json.data)&&(d=h.json.result),void 0===d)throw new JY("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function r$(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(e){return Array.prototype.slice.call(e)}function o$(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function a$(e,t,n){var r,i=new Promise((function(i,o){o$(r=e[t].apply(e,n)).then(i,o)}));return i.request=r,i}function s$(e,t,n){var r=a$(e,t,n);return r.then((function(e){if(e)return new d$(e,r.request)}))}function u$(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function l$(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return a$(this[t],r,arguments)})}))}function c$(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function h$(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return s$(this[t],r,arguments)})}))}function f$(e){this._index=e}function d$(e,t){this._cursor=e,this._request=t}function p$(e){this._store=e}function m$(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function v$(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new m$(n)}function g$(e){this._db=e}function y$(e,t,n){var r=a$(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new v$(i.result,e.oldVersion,i.transaction))}),r.then((function(e){return new g$(e)}))}function b$(e){return a$(indexedDB,"deleteDatabase",[e])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){var n={Functions:n$};e.INTERNAL.registerComponent(new sI("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new n$(i,o,s,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(NI,fetch.bind(self)),NI.registerVersion("@firebase/functions","0.6.13"),u$(f$,"_index",["name","keyPath","multiEntry","unique"]),l$(f$,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),h$(f$,"_index",IDBIndex,["openCursor","openKeyCursor"]),u$(d$,"_cursor",["direction","key","primaryKey","value"]),l$(d$,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(d$.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),o$(t._request).then((function(e){if(e)return new d$(e,t._request)}))}))})})),p$.prototype.createIndex=function(){return new f$(this._store.createIndex.apply(this._store,arguments))},p$.prototype.index=function(){return new f$(this._store.index.apply(this._store,arguments))},u$(p$,"_store",["name","keyPath","indexNames","autoIncrement"]),l$(p$,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),h$(p$,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),c$(p$,"_store",IDBObjectStore,["deleteIndex"]),m$.prototype.objectStore=function(){return new p$(this._tx.objectStore.apply(this._tx,arguments))},u$(m$,"_tx",["objectStoreNames","mode"]),c$(m$,"_tx",IDBTransaction,["abort"]),v$.prototype.createObjectStore=function(){return new p$(this._db.createObjectStore.apply(this._db,arguments))},u$(v$,"_db",["name","version","objectStoreNames"]),c$(v$,"_db",IDBDatabase,["deleteObjectStore","close"]),g$.prototype.transaction=function(){return new m$(this._db.transaction.apply(this._db,arguments))},u$(g$,"_db",["name","version","objectStoreNames"]),c$(g$,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[p$,f$].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=i$(arguments),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[f$,p$].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})}));var _$,w$=((_$={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',_$["not-registered"]="Firebase Installation is not registered.",_$["installation-not-found"]="Firebase Installation not found.",_$["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',_$["app-offline"]="Could not process request. Application offline.",_$["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",_$),x$=new jC("installations","Installations",w$);function S$(e){return e instanceof zC&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function T$(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function M$(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,x$.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function C$(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I$(e,t){var n=t.refreshToken,r=C$(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function A$(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function k$(e,t){var n=t.fid;return pC(this,void 0,void 0,(function(){var t,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return t=E$(e),r=C$(e),i={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.4.30"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,A$((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:T$(s.authToken)}];case 3:return[4,M$("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R$=/^[cdef][\w-]{21}$/;function O$(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,yC([],gC(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return R$.test(t)?t:""}catch(n){return""}}function L$(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N$=new Map;function D$(e,t){var n=L$(e);F$(n,t),function(e,t){var n=z$();n&&n.postMessage({key:e,fid:t});j$()}(n,t)}function F$(e,t){var n,r,i=N$.get(e);if(i)try{for(var o=vC(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var U$=null;function z$(){return!U$&&"BroadcastChannel"in self&&((U$=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){F$(e.data.key,e.data.fid)}),U$}function j$(){0===N$.size&&U$&&(U$.close(),U$=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B$,V$="firebase-installations-store",H$=null;function W$(){return H$||(H$=y$("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(V$)}}))),H$}function G$(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:return n=L$(e),[4,W$()];case 1:return r=s.sent(),i=r.transaction(V$,"readwrite"),[4,(o=i.objectStore(V$)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||D$(e,t.fid),[2,t]}}))}))}function q$(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return t=L$(e),[4,W$()];case 1:return n=i.sent(),[4,(r=n.transaction(V$,"readwrite")).objectStore(V$).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function K$(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return n=L$(e),[4,W$()];case 1:return r=u.sent(),i=r.transaction(V$,"readwrite"),[4,(o=i.objectStore(V$)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||D$(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,K$(e,(function(n){var r=function(e){return Q$(e||{fid:O$(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(x$.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,k$(e,t)];case 1:return n=i.sent(),[2,G$(e,n)];case 2:return S$(r=i.sent())&&409===r.customData.serverCode?[4,q$(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,G$(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Y$(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Y$(e){return pC(this,void 0,void 0,(function(){var t,n,r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,$$(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,P$(100)];case 3:return o.sent(),[4,$$(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,X$(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function $$(e){return K$(e,(function(e){if(!e)throw x$.create("installation-not-found");return Q$(e)}))}function Q$(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function J$(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return pC(this,void 0,void 0,(function(){var e,i,o,a,s,u,l;return mC(this,(function(c){switch(c.label){case 0:return e=function(e,t){var n=t.fid;return E$(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=I$(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.30"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,A$((function(){return fetch(e,s)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return l=c.sent(),[2,T$(l)];case 3:return[4,M$("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function Z$(e,t){return void 0===t&&(t=!1),pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,K$(e.appConfig,(function(r){if(!tQ(r))throw x$.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,eQ(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,P$(100)];case 3:return i.sent(),[4,eQ(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Z$(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw x$.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return dC(dC({},e),{authToken:t})}(r);return n=function(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,J$(e,t)];case 1:return n=o.sent(),i=dC(dC({},t),{authToken:n}),[4,G$(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!S$(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,q$(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=dC(dC({},t),{authToken:{requestStatus:0}}),[4,G$(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function eQ(e){return K$(e,(function(e){if(!tQ(e))throw x$.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+1e4<Date.now()?dC(dC({},e),{authToken:{requestStatus:0}}):e}))}function tQ(e){return void 0!==e&&2===e.registrationStatus}function nQ(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return[4,X$(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rQ(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return E$(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=I$(e,t),i={method:"DELETE",headers:r},[4,A$((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,M$("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function iQ(e,t){var n=e.appConfig;return function(e,t){z$();var n=L$(e),r=N$.get(n);r||(r=new Set,N$.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=L$(e),r=N$.get(n);r&&(r.delete(t),0===r.size&&N$.delete(n),j$())}(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(e){return x$.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.INTERNAL.registerComponent(new sI("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw oQ("App Configuration");if(!e.name)throw oQ("App Name");try{for(var r=vC(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw oQ(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,X$(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Z$(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),pC(this,void 0,void 0,(function(){return mC(this,(function(n){switch(n.label){case 0:return[4,nQ(e.appConfig)];case 1:return n.sent(),[4,Z$(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:return[4,K$(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw x$.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw x$.create("app-offline");case 3:return[4,rQ(t,n)];case 4:return r.sent(),[4,q$(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return iQ(n,e)}}}),"PUBLIC")),e.registerVersion("@firebase/installations","0.4.30")}(NI);var aQ,sQ,uQ=((B$={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',B$["only-available-in-window"]="This method is available in a Window context.",B$["only-available-in-sw"]="This method is available in a service worker context.",B$["permission-default"]="The notification permission was not granted and dismissed instead.",B$["permission-blocked"]="The notification permission was not granted and blocked instead.",B$["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",B$["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",B$["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",B$["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",B$["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",B$["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",B$["token-update-no-token"]="FCM returned no token when updating the user to push.",B$["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",B$["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",B$["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",B$["invalid-vapid-key"]="The public VAPID key must be a string.",B$["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",B$),lQ=new jC("messaging","Messaging",uQ),cQ="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hQ(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,yC([],gC(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fQ(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(sQ=aQ||(aQ={})).PUSH_RECEIVED="push-received",sQ.NOTIFICATION_CLICKED="notification-clicked";function dQ(e){return pC(this,void 0,void 0,(function(){var t,n,r=this;return mC(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,y$("fcm_token_details_db",5,(function(t){return pC(r,void 0,void 0,(function(){var r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=t.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:hQ(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:hQ(o.auth),p256dh:hQ(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:hQ(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,b$("fcm_token_details_db")];case 4:return i.sent(),[4,b$("fcm_vapid_details_db")];case 5:return i.sent(),[4,b$("undefined")];case 6:return i.sent(),[2,pQ(n)?n:null]}}))}))}function pQ(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mQ="firebase-messaging-store",vQ=null;function gQ(){return vQ||(vQ=y$("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(mQ)}}))),vQ}function yQ(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return t=wQ(e),[4,gQ()];case 1:return[4,i.sent().transaction(mQ).objectStore(mQ).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,dQ(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,bQ(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function bQ(e,t){return pC(this,void 0,void 0,(function(){var n,r,i;return mC(this,(function(o){switch(o.label){case 0:return n=wQ(e),[4,gQ()];case 1:return r=o.sent(),[4,(i=r.transaction(mQ,"readwrite")).objectStore(mQ).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function _Q(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return t=wQ(e),[4,gQ()];case 1:return n=i.sent(),[4,(r=n.transaction(mQ,"readwrite")).objectStore(mQ).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function wQ(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return[4,MQ(e)];case 1:n=u.sent(),r=CQ(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(TQ(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),lQ.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,lQ.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw lQ.create("token-subscribe-no-token");return[2,o.token]}}))}))}function SQ(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return[4,MQ(e)];case 1:n=u.sent(),r=CQ(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(TQ(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),lQ.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,lQ.create("token-update-failed",{errorInfo:s});if(!o.token)throw lQ.create("token-update-no-token");return[2,o.token]}}))}))}function EQ(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:return[4,MQ(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(TQ(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,lQ.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),lQ.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function TQ(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function MQ(e){var t=e.appConfig,n=e.installations;return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function CQ(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==cQ&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o,a;return mC(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw lQ.create("permission-blocked");return[4,RQ(t,n)];case 1:return r=s.sent(),[4,yQ(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:hQ(r.getKey("auth")),p256dh:hQ(r.getKey("p256dh"))},i?[3,3]:[2,PQ(e,o)];case 3:if(u=i.subscriptionOptions,c=(l=o).vapidKey===u.vapidKey,h=l.endpoint===u.endpoint,f=l.auth===u.auth,d=l.p256dh===u.p256dh,c&&h&&f&&d)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,EQ(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,PQ(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,kQ({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}var u,l,c,h,f,d;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function AQ(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,yQ(e)];case 1:return(n=i.sent())?[4,EQ(e,n.token)]:[3,4];case 2:return i.sent(),[4,_Q(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function kQ(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o;return mC(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,SQ(t,e)];case 1:return r=a.sent(),i=dC(dC({},e),{token:r,createTime:Date.now()}),[4,bQ(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,AQ(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function PQ(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,xQ(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,bQ(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function RQ(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fQ(t)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function OQ(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NQ=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw lQ.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,yQ(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:cQ,r.label=2;case 2:return[2,IQ(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return AQ(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw lQ.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw lQ.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw lQ.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw lQ.create("only-available-in-window")},e.prototype.onMessage=function(){throw lQ.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw lQ.create("only-available-in-window")},e.prototype.onPush=function(e){return pC(this,void 0,void 0,(function(){var t,n,r,i;return mC(this,(function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,zQ()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,UQ(n,t)]:(r=!1,t.notification?[4,jQ(DQ(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,LQ(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return pC(this,void 0,void 0,(function(){var r;return mC(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,AQ(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,yQ(this.firebaseDependencies)];case 3:return r=i.sent(),[4,AQ(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,IQ(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:cQ)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return pC(this,void 0,void 0,(function(){var r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return OQ(e.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,FQ(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,LQ(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=aQ.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function DQ(e){var t,n=dC({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function FQ(e){return pC(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return mC(this,(function(u){switch(u.label){case 0:return[4,zQ()];case 1:t=u.sent();try{for(n=vC(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function UQ(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=aQ.PUSH_RECEIVED;try{for(var i=vC(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function zQ(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function jQ(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var BQ=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===aQ.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),OQ(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw lQ.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,IQ(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=cQ),[2]}))}))},e.prototype.updateSwReg=function(e){return pC(this,void 0,void 0,(function(){return mC(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw lQ.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),lQ.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,AQ(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?lQ.create("permission-blocked"):lQ.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw lQ.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw lQ.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw lQ.create("invalid-sw-registration");if(this.swRegistration)throw lQ.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw lQ.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw lQ.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case aQ.NOTIFICATION_CLICKED:return"notification_open";case aQ.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function VQ(e){return lQ.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HQ={isSupported:WQ};function WQ(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}NI.INTERNAL.registerComponent(new sI("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw VQ("App Configuration Object");if(!e.name)throw VQ("App Name");var r=e.options;try{for(var i=vC(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw VQ(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!WQ())throw lQ.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new NQ(n):new BQ(n)}),"PUBLIC").setServiceProps(HQ));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var GQ=function(e){function t(n,r){var i=e.call(this,qQ(n),"Firebase Storage: "+r+" ("+qQ(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return fC(t,e),t.prototype._codeEquals=function(e){return qQ(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(zC);function qQ(e){return"storage/"+e}function KQ(){return new GQ("unknown","An unknown error occurred, please check the error payload for server response.")}function XQ(){return new GQ("canceled","User canceled the upload/download.")}function YQ(){return new GQ("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $Q(e){return new GQ("invalid-argument",e)}function QQ(){return new GQ("app-deleted","The Firebase app was deleted.")}function JQ(e){return new GQ("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ZQ(e,t){return new GQ("invalid-format","String does not match format '"+e+"': "+t)}function eJ(e){throw new GQ("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tJ={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nJ=function(e,t){this.data=e,this.contentType=t||null};function rJ(e,t){switch(e){case tJ.RAW:return new nJ(iJ(t));case tJ.BASE64:case tJ.BASE64URL:return new nJ(oJ(e,t));case tJ.DATA_URL:return new nJ((n=new aJ(t)).base64?oJ(tJ.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(XY){throw ZQ(tJ.DATA_URL,"Malformed data URL.")}return iJ(t)}(n.rest),function(e){return new aJ(e).contentType}(t))}var n;throw KQ()}function iJ(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function oJ(e,t){switch(e){case tJ.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ZQ(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case tJ.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw ZQ(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(XY){throw ZQ(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var aJ=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw ZQ(tJ.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var sJ,uJ,lJ={STATE_CHANGED:"state_changed"},cJ={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hJ(e){switch(e){case"running":case"pausing":case"canceling":return cJ.RUNNING;case"paused":return cJ.PAUSED;case"success":return cJ.SUCCESS;case"canceled":return cJ.CANCELED;case"error":default:return cJ.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(uJ=sJ||(sJ={}))[uJ.NO_ERROR=0]="NO_ERROR",uJ[uJ.NETWORK_ERROR=1]="NETWORK_ERROR",uJ[uJ.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fJ=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=sJ.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=sJ.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=sJ.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw eJ("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw eJ("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw eJ("cannot .getStatus() before sending");try{return this.xhr_.status}catch(XY){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw eJ("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dJ=function(){function e(){}return e.prototype.createConnection=function(){return new fJ},e}(),pJ=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(XY){return new e(t,"")}if(""===r.path)return r;throw new GQ("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var f=h[c.indices.bucket],d=h[c.indices.path];d||(d=""),r=new e(f,d),c.postModify(r);break}}if(null==r)throw function(e){return new GQ("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),mJ=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(e){return"string"==typeof e||e instanceof String}function gJ(e){return yJ()&&e instanceof Blob}function yJ(){return"undefined"!=typeof Blob}function bJ(e,t,n,r){if(r<t)throw $Q("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw $Q("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function wJ(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xJ=function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(XY){o(XY)}else null!==a?((r=KQ()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?QQ():XQ()):o(r=new GQ("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new SJ(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function c(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)l.call.apply(l,yC([null,e],t));else{var i;s()||o?l.call.apply(l,yC([null,e],t)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),c(i))}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),c(0)):e||(a=1)))}return c(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new SJ(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===sJ.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new SJ(a,r))}else{var s=r.getErrorCode()===sJ.ABORT;t(!1,new SJ(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),SJ=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function EJ(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function TJ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=EJ();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(yJ())return new Blob(e);throw new GQ("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MJ=function(){function e(e,t){var n=0,r="";gJ(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(gJ(this.data_)){var r=this.data_,i=(a=t,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new e(i)}var o,a,s;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(yJ()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(TJ.apply(null,r))}var i=t.map((function(e){return vJ(e)?rJ(tJ.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJ(e){var t,n;try{t=JSON.parse(e)}catch(XY){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(e,t){return t}var kJ=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||AJ},PJ=null;function RJ(){if(PJ)return PJ;var e=[];e.push(new kJ("bucket")),e.push(new kJ("generation")),e.push(new kJ("metageneration")),e.push(new kJ("name","fullPath",!0));var t=new kJ("name");t.xform=function(e,t){return function(e){return!vJ(e)||e.length<2?e:IJ(e)}(t)},e.push(t);var n=new kJ("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kJ("timeCreated")),e.push(new kJ("updated")),e.push(new kJ("md5Hash",null,!0)),e.push(new kJ("cacheControl",null,!0)),e.push(new kJ("contentDisposition",null,!0)),e.push(new kJ("contentEncoding",null,!0)),e.push(new kJ("contentLanguage",null,!0)),e.push(new kJ("contentType",null,!0)),e.push(new kJ("metadata","customMetadata",!0)),PJ=e}function OJ(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new pJ(n,r);return t._makeStorageReference(i)}})}(r,e),r}function LJ(e,t,n){var r=CJ(t);return null===r?null:OJ(e,r,n)}function NJ(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(e,t,n){var r=CJ(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new pJ(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,l=n.items;u<l.length;u++){var c=l[u];s=e._makeStorageReference(new pJ(t,c.name)),r.items.push(s)}return r}(e,t,r)}var FJ=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UJ(e){if(!e)throw KQ()}function zJ(e,t){return function(n,r){var i=LJ(e,r,t);return UJ(null!==i),i}}function jJ(e,t){return function(n,r){var i=LJ(e,r,t);return UJ(null!==i),function(e,t,n){var r=CJ(t);if(null===r)return null;if(!vJ(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return _J("/b/"+o(r)+"/o/"+o(i),n)+wJ({alt:"media",token:t})}))[0]}(i,r,e.host)}}function BJ(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new GQ("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new GQ("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new GQ("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new GQ("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function VJ(e){var t=BJ(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new GQ("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function HJ(e,t,n){var r=_J(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new FJ(r,"GET",zJ(e,n),i);return o.errorHandler=VJ(t),o}function WJ(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=_J(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new FJ(a,"GET",function(e,t){return function(n,r){var i=DJ(e,t,r);return UJ(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=BJ(t),u}function GJ(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var qJ=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function KJ(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(XY){UJ(!1)}return UJ(!!n&&-1!==(t||["active"]).indexOf(n)),n}function XJ(e,t,n,r,i,o,a,s){var u=new qJ(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new GQ("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,f=h+c,d={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw YQ();var m=t.maxUploadRetryTime,v=new FJ(n,"POST",(function(e,n){var i,a=KJ(e,["active","final"]),s=u.current+c,l=r.size();return i="final"===a?zJ(t,o)(e,n):null,new qJ(s,l,"final"===a,i)}),m);return v.headers=d,v.body=p.uploadData(),v.progressCallback=s||null,v.errorHandler=BJ(e),v}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YJ=function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $J(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QJ=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=RJ(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=GJ(t,r,i),s={name:a.fullPath},u=_J(o,e.host),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=NJ(a,n),h=e.maxUploadRetryTime,f=new FJ(u,"POST",(function(e){var t;KJ(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(XY){UJ(!1)}return UJ(vJ(t)),t}),h);return f.urlParams=s,f.headers=l,f.body=c,f.errorHandler=BJ(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new FJ(n,"POST",(function(e){var t=KJ(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(XY){UJ(!1)}n||UJ(!1);var i=Number(n);return UJ(!isNaN(i)),new qJ(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=BJ(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new qJ(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=XJ(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(XY){return e._error=XY,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=HJ(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=GJ(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+NJ(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=MJ.getBlob(l,r,c);if(null===h)throw YQ();var f={name:u.fullPath},d=_J(o,e.host),p=e.maxUploadRetryTime,m=new FJ(d,"POST",zJ(e,n),p);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=BJ(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=XQ(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=hJ(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new YJ(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(hJ(this._state)){case cJ.SUCCESS:$J(this._resolve.bind(null,this.snapshot))();break;case cJ.CANCELED:case cJ.ERROR:$J(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(hJ(this._state)){case cJ.RUNNING:case cJ.PAUSED:e.next&&$J(e.next.bind(e,this.snapshot))();break;case cJ.SUCCESS:e.complete&&$J(e.complete.bind(e))();break;case cJ.CANCELED:case cJ.ERROR:e.error&&$J(e.error.bind(e,this._error))();break;default:e.error&&$J(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),JJ=function(){function e(e,t){this._service=e,this._location=t instanceof pJ?t:pJ.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new pJ(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return IJ(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new pJ(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw JQ(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(e){var t={prefixes:[],items:[]};return eZ(e,t).then((function(){return t}))}function eZ(e,t,n){return pC(this,void 0,void 0,(function(){var r,i,o;return mC(this,(function(a){switch(a.label){case 0:return[4,tZ(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,eZ(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function tZ(e,t){return pC(this,void 0,void 0,(function(){var n,r;return mC(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&bJ("options.maxResults",1,1e3,t.maxResults),n=t||{},r=WJ(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function nZ(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=_J(t.fullServerUrl(),e.host),o=NJ(n,r),a=e.maxOperationRetryTime,s=new FJ(i,"PATCH",zJ(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=VJ(t),s}(e.storage,e._location,t,RJ()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function rZ(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=_J(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new FJ(r,"GET",jJ(e,n),i);return o.errorHandler=VJ(t),o}(e.storage,e._location,RJ()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new GQ("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function iZ(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=_J(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new FJ(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=VJ(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function oZ(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new pJ(e._location.bucket,n);return new JJ(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(e){return/^[A-Za-z]+:\/\//.test(e)}function sZ(e,t){if(e instanceof cZ){var n=e;if(null==n._bucket)throw new GQ("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new JJ(n,n._bucket);return null!=t?sZ(r,t):r}if(void 0!==t){if(t.includes(".."))throw $Q('`path` param cannot contain ".."');return oZ(e,t)}return e}function uZ(e,t){if(t&&aZ(t)){if(e instanceof cZ)return new JJ(e,t);throw $Q("To use ref(service, url), the first argument must be a Storage instance.")}return sZ(e,t)}function lZ(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:pJ.makeFromBucketSpec(n,e)}var cZ=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?pJ.makeFromBucketSpec(i,this._host):lZ(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=pJ.makeFromBucketSpec(this._url,e):this._bucket=lZ(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){bJ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){bJ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new JJ(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new mJ(QQ());var i=function(e,t,n,r,i,o){var a=wJ(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new xJ(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return pC(this,void 0,void 0,(function(){var t,n,r;return mC(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hZ(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new QJ(e,new MJ(t),n)}(e=aI(e),t,n)}function fZ(e){return function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=HJ(e.storage,e._location,RJ()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=aI(e))}function dZ(e,t){return uZ(e=aI(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pZ=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),mZ=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new pZ(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new pZ(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new pZ(e,i,i._ref))}:{next:t.next?function(e){return t.next(new pZ(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),vZ=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new gZ(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new gZ(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),gZ=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return oZ(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new mZ(hZ(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=tJ.RAW),this._throwIfRoot("putString");var r=rJ(t,e),i=dC({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new mZ(new QJ(this._delegate,new MJ(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,ZJ(e=aI(e))).then((function(e){return new vZ(e,t.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return tZ(e=aI(e),t)}(this._delegate,e||void 0).then((function(e){return new vZ(e,t.storage)}))},e.prototype.getMetadata=function(){return fZ(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return nZ(e=aI(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return rZ(aI(this._delegate))},e.prototype.delete=function(){return this._throwIfRoot("delete"),iZ(aI(this._delegate))},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw JQ(e)},e}(),yZ=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(aZ(e))throw $Q("ref() expected a child path but got a URL, use refFromURL instead.");return new gZ(dZ(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!aZ(e))throw $Q("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pJ.makeFromUrl(e,this._delegate.host)}catch(XY){throw $Q("refFromUrl() expected a valid full URL but got an invalid one.")}return new gZ(dZ(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){!function(e,t,n){e.host="http://"+t+":"+n}(this._delegate,e,t)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new yZ(r,new cZ(r,i,o,new dJ,n,NI.SDK_VERSION))}!function(e){var t={TaskState:cJ,TaskEvent:lJ,StringFormat:tJ,Storage:cZ,Reference:gZ};e.INTERNAL.registerComponent(new sI("storage",bZ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.5.6")}(NI);var _Z,wZ,xZ,SZ=((_Z={})["trace started"]="Trace {$traceName} was started before.",_Z["trace stopped"]="Trace {$traceName} is not running.",_Z["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",_Z["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",_Z["no window"]="Window is not available.",_Z["no app id"]="App id is not available.",_Z["no project id"]="Project id is not available.",_Z["no api key"]="Api key is not available.",_Z["invalid cc log"]="Attempted to queue invalid cc event",_Z["FB not default"]="Performance can only start when Firebase app instance is the default one.",_Z["RC response not ok"]="RC response is not ok",_Z["invalid attribute name"]="Attribute name {$attributeName} is invalid.",_Z["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",_Z["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",_Z["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",_Z),EZ=new jC("performance","Performance",SZ),TZ=new _I("Performance");TZ.logLevel=fI.INFO;var MZ,CZ=function(){function e(e){if(this.window=e,!e)throw EZ.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!DC()||(TZ.info("IndexedDB is not supported by current browswer"),!1):(TZ.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===wZ&&(wZ=new e(xZ)),wZ},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function IZ(e,t){var n=e.length-t.length;if(n<0||n>1)throw EZ.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AZ,kZ,PZ,RZ=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=IZ("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=IZ("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw EZ.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw EZ.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw EZ.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===MZ&&(MZ=new e),MZ},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(){return AZ}(PZ=kZ||(kZ={}))[PZ.UNKNOWN=0]="UNKNOWN",PZ[PZ.VISIBLE=1]="VISIBLE",PZ[PZ.HIDDEN=2]="HIDDEN";var LZ=["firebase_","google_","ga_"],NZ=new RegExp("^[a-zA-Z]\\w*$");function DZ(){switch(CZ.getInstance().document.visibilityState){case"visible":return kZ.VISIBLE;case"hidden":return kZ.HIDDEN;default:return kZ.UNKNOWN}}function FZ(){var e=CZ.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UZ=!0;function zZ(e){var t=function(){var e=CZ.getInstance().localStorage;if(!e)return;var t=e.getItem("@firebase/performance/configexpire");if(!(t&&(n=t,Number(n)>Date.now())))return;var n;var r=e.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return t?(jZ(t),Promise.resolve()):function(e){return(t=RZ.getInstance().installationsService.getToken(),t.then((function(e){})),t).then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+RZ.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+RZ.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:RZ.getInstance().getAppId(),app_version:"0.4.16",sdk_version:"0.0.1"})});return fetch(r).then((function(e){if(e.ok)return e.json();throw EZ.create("RC response not ok")}))})).catch((function(){TZ.info("Could not fetch config, will use default configs")}));var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e).then(jZ).then((function(e){return function(e){var t=CZ.getInstance().localStorage;if(!e||!t)return;t.setItem("@firebase/performance/config",JSON.stringify(e)),t.setItem("@firebase/performance/configexpire",String(Date.now()+60*RZ.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}function jZ(e){if(!e)return e;var t=RZ.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=UZ,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=BZ(t.tracesSamplingRate),t.logNetworkAfterSampling=BZ(t.networkRequestsSamplingRate),e}function BZ(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VZ,HZ=1;function WZ(){var e;return HZ=2,VZ=VZ||(e=CZ.getInstance().document,new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))).then((function(){return(e=RZ.getInstance().installationsService.getId()).then((function(e){AZ=e})),e;var e})).then((function(e){return zZ(e)})).then((function(){return GZ()}),(function(){return GZ()}))}function GZ(){HZ=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qZ,KZ=3,XZ=[],YZ=!1;function $Z(e){setTimeout((function(){var e,t;if(0!==KZ)return XZ.length?(e=XZ.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),void function(e,t){return function(e){var t=RZ.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||TZ.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(XZ=yC(yC([],t),XZ),TZ.info("Retry transport request later.")),KZ=3,$Z(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:RZ.getInstance().logSource,log_event:t},e).catch((function(){XZ=yC(yC([],e),XZ),KZ--,TZ.info("Tries left: "+KZ+"."),$Z(1e4)}))):$Z(1e4)}),e)}function QZ(e){if(!e.eventTime||!e.message)throw EZ.create("invalid cc log");XZ=yC(yC([],XZ),[e])}function JZ(e,t){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qZ||(n=t0,qZ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];QZ({message:n.apply(void 0,e),eventTime:Date.now()})}),qZ(e,t)}function ZZ(e){var t=RZ.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&CZ.getInstance().requiredApisAvailable()&&(e.isAuto&&DZ()!==kZ.VISIBLE||(3===HZ?e0(e):WZ().then((function(){return e0(e)}),(function(){return e0(e)}))))}function e0(e){if(OZ()){var t=RZ.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return JZ(e,1)}),0)}}function t0(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:n0(),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:n0(),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function n0(){return{google_app_id:RZ.getInstance().getAppId(),app_instance_id:OZ(),web_app_info:{sdk_version:"0.4.16",page_url:CZ.getInstance().getUrl(),service_worker_status:(e=CZ.getInstance().navigator,"serviceWorker"in e?e.serviceWorker.controller?2:3:1),visibility_state:DZ(),effective_connection_type:FZ()},application_process_state:0};var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r0=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i0=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=CZ.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw EZ.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw EZ.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ZZ(this)},e.prototype.record=function(e,t,n){if(e<=0)throw EZ.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw EZ.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=dC({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ZZ(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(i=e,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&r0.indexOf(i)>-1)&&i.startsWith("_"))throw EZ.create("invalid custom metric name",{customMetricName:e});var n,r,i,o;this.counters[e]=(n=t,(r=Math.floor(n))<n&&TZ.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40||LZ.some((function(e){return n.startsWith(e)}))||!n.match(NZ)),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw EZ.create("invalid attribute name",{attributeName:e});if(!i)throw EZ.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return dC({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=CZ.getInstance().getUrl();if(i){var o=new e("_wt_"+i,!0),a=Math.floor(1e3*CZ.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}ZZ(o)}},e.createUserTimingTrace=function(t){ZZ(new e(t,!1,t))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(e){var t=e;if(t&&void 0!==t.responseStart){var n=CZ.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=RZ.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return JZ(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(){OZ()&&(setTimeout((function(){return function(){var e=CZ.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){i0.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),i0.createOobTrace(t,n,e))}))}else i0.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=CZ.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){o0(r[n])}e.setupObserver("resource",o0)}()}),0),setTimeout((function(){return function(){for(var e=CZ.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){s0(r[n])}e.setupObserver("measure",s0)}()}),0))}function s0(e){var t=e.name;"FB-PERF-TRACE-MEASURE"!==t.substring(0,"FB-PERF-TRACE-MEASURE".length)&&i0.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u0=function(){function e(e){this.app=e,CZ.getInstance().requiredApisAvailable()&&FC().then((function(e){e&&(YZ||($Z(5500),YZ=!0),WZ().then(a0,a0))})).catch((function(e){TZ.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new i0(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return RZ.getInstance().instrumentationEnabled},set:function(e){RZ.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return RZ.getInstance().dataCollectionEnabled},set:function(e){RZ.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw EZ.create("FB not default");if("undefined"==typeof window)throw EZ.create("no window");var n;return n=window,xZ=n,RZ.getInstance().firebaseAppInstance=e,RZ.getInstance().installationsService=t,new u0(e)};e.INTERNAL.registerComponent(new sI("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance","0.4.16")}(NI);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var l0,c0,h0,f0,d0="https://www.googletagmanager.com/gtag/js";(c0=l0||(l0={})).EVENT="event",c0.SET="set",c0.CONFIG="config",(f0=h0||(h0={})).ADD_SHIPPING_INFO="add_shipping_info",f0.ADD_PAYMENT_INFO="add_payment_info",f0.ADD_TO_CART="add_to_cart",f0.ADD_TO_WISHLIST="add_to_wishlist",f0.BEGIN_CHECKOUT="begin_checkout",f0.CHECKOUT_PROGRESS="checkout_progress",f0.EXCEPTION="exception",f0.GENERATE_LEAD="generate_lead",f0.LOGIN="login",f0.PAGE_VIEW="page_view",f0.PURCHASE="purchase",f0.REFUND="refund",f0.REMOVE_FROM_CART="remove_from_cart",f0.SCREEN_VIEW="screen_view",f0.SEARCH="search",f0.SELECT_CONTENT="select_content",f0.SELECT_ITEM="select_item",f0.SELECT_PROMOTION="select_promotion",f0.SET_CHECKOUT_OPTION="set_checkout_option",f0.SHARE="share",f0.SIGN_UP="sign_up",f0.TIMING_COMPLETE="timing_complete",f0.VIEW_CART="view_cart",f0.VIEW_ITEM="view_item",f0.VIEW_ITEM_LIST="view_item_list",f0.VIEW_PROMOTION="view_promotion",f0.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p0,m0=new _I("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(e,t,n,r,i,o){return pC(this,void 0,void 0,(function(){var a,s,u,l;return mC(this,(function(c){switch(c.label){case 0:a=r[i],c.label=1;case 1:return c.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=c.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return l=c.sent(),m0.error(l),[3,8];case 8:return e(l0.CONFIG,i,o),[2]}}))}))}function g0(e,t,n,r,i){return pC(this,void 0,void 0,(function(){var o,a,s,u,l,c,h,f;return mC(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=0,c=a;l<c.length&&(h=c[l],"break"!==u(h));l++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(l0.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),m0.error(f),[3,5];case 5:return[2]}}))}))}function y0(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return pC(this,void 0,void 0,(function(){var s;return mC(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==l0.EVENT?[3,2]:[4,g0(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==l0.CONFIG?[3,4]:[4,v0(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(l0.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),m0.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var b0=((p0={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",p0["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",p0["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",p0["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",p0["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",p0["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",p0["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",p0["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',p0["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',p0),_0=new jC("analytics","Analytics",b0),w0=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function x0(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function S0(e){var t;return pC(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:x0(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=l.sent()).status||304===a.status)return[3,6];s="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,a.json()];case 3:return u=l.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return l.sent(),[3,5];case 5:throw _0.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function E0(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=w0),pC(this,void 0,void 0,(function(){var t,a,s,u,l,c,h;return mC(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,T0(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return m0.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,S0(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof zC&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=f.sent())){if(r.deleteThrottleMetadata(t),a)return m0.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:t,measurementId:a}];throw l}return c=503===Number(l.customData.httpStatus)?oI(o,r.intervalMillis,30):oI(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:o+1},r.setThrottleMetadata(t,h),m0.debug("Calling attemptFetch again in "+c+" millis"),[2,E0(e,h,n,r)];case 7:return[2]}}))}))}function T0(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(_0.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var M0=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(e,t,n,r,i,o){return pC(this,void 0,void 0,(function(){var a,s,u,l,c,h,f;return mC(this,(function(d){switch(d.label){case 0:return(a=function(e,t,n){return void 0===t&&(t=w0),pC(this,void 0,void 0,(function(){var r,i,o,a,s,u,l=this;return mC(this,(function(c){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw _0.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw _0.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new M0,setTimeout((function(){return pC(l,void 0,void 0,(function(){return mC(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,E0({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&m0.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return m0.error(e)})),t.push(a),s=function(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){switch(t.label){case 0:return DC()?[3,1]:(m0.warn(_0.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,FC()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),m0.warn(_0.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),l=u[0],c=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(d0))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(e,t){var n=document.createElement("script");n.src=d0+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=c&&(h.firebase_id=c),i(l0.CONFIG,l.measurementId,h),[2,l.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I0,A0,k0={},P0=[],R0={},O0="dataLayer",L0="gtag",N0=!1;function D0(e){if(N0)throw _0.create("already-initialized");e.dataLayerName&&(O0=e.dataLayerName),e.gtagName&&(L0=e.gtagName)}function F0(e,t){!function(){var e=[];if(OC()&&e.push("This is a browser extension environment."),UC()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=_0.create("invalid-analytics-context",{errorInfo:t});m0.warn(n.message)}}();var n,r,i=e.options.appId;if(!i)throw _0.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw _0.create("no-api-key");m0.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=k0[i])throw _0.create("already-exists",{id:i});if(!N0){n=O0,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=y0(k0,P0,R0,O0,L0),a=o.wrappedGtag,s=o.gtagCore;A0=a,I0=s,N0=!0}return k0[i]=C0(e,P0,R0,t,I0,O0),{app:e,logEvent:function(e,t,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n,r,i){return pC(this,void 0,void 0,(function(){var o,a;return mC(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(l0.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=dC(dC({},r),{send_to:o}),e(l0.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(A0,k0[i],e,t,n).catch((function(e){return m0.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return pC(this,void 0,void 0,(function(){var i;return mC(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(l0.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(l0.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(A0,k0[i],e,t).catch((function(e){return m0.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return pC(this,void 0,void 0,(function(){var i;return mC(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(l0.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(l0.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(A0,k0[i],e,t).catch((function(e){return m0.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return pC(this,void 0,void 0,(function(){var i,o,a,s,u;return mC(this,(function(l){switch(l.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(l0.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=l.sent(),e(l0.CONFIG,u,{update:!0,user_properties:n}),l.label=3;case 3:return[2]}}))}))})(A0,k0[i],e,t).catch((function(e){return m0.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return pC(this,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(k0[i],e).catch((function(e){return m0.error(e)}))},INTERNAL:{delete:function(){return delete k0[i],Promise.resolve()}}}}function U0(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:if(OC())return[2,!1];if(!UC())return[2,!1];if(!DC())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,FC()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.INTERNAL.registerComponent(new sI("analytics",(function(e){return F0(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:D0,EventName:h0,isSupported:U0})),e.INTERNAL.registerComponent(new sI("analytics-internal",(function(e){try{return{logEvent:e.getProvider("analytics").getImmediate().logEvent}}catch(XY){throw _0.create("interop-component-reg-failed",{reason:XY})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.14")}(NI);var z0,j0=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return pC(this,void 0,void 0,(function(){var t,n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),B0=((z0={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",z0["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",z0["registration-api-key"]="Undefined API key. Check Firebase app initialization.",z0["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",z0["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",z0["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",z0["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",z0["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",z0["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",z0["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',z0["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',z0["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",z0["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",z0),V0=new jC("remoteconfig","Remote Config",B0);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var H0=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return pC(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b;return mC(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=_.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},l=fetch(o,u),c=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([l,c])];case 3:return _.sent(),[4,l];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),V0.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,m=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),V0.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:v=y.entries,g=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?p=500:"NO_CHANGE"===g?p=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(v={}),304!==p&&200!==p)throw V0.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:m,config:v}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},e}(),W0=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),G0=["1","true","t","yes","y","on"],q0=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&G0.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),K0=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=fI.DEBUG;break;case"silent":this._logger.logLevel=fI.SILENT;break;default:this._logger.logLevel=fI.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return pC(this,void 0,void 0,(function(){var e,t,n;return mC(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r=this;return mC(this,(function(i){switch(i.label){case 0:e=new W0,setTimeout((function(){return pC(r,void 0,void 0,(function(){return mC(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof zC&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return pC(this,void 0,void 0,(function(){return mC(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(dC(dC({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new q0("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new q0("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new q0("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(e,t){var n=e.target.error||void 0;return V0.create(t,{originalErrorMessage:n&&n.message})}var Y0=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(X0(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return pC(this,void 0,void 0,(function(){var t,n=this;return mC(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(X0(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(XY){i(V0.create("storage-get",{originalErrorMessage:XY&&XY.message}))}}))]}}))}))},e.prototype.set=function(e,t){return pC(this,void 0,void 0,(function(){var n,r=this;return mC(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(X0(e,"storage-set"))},u.onsuccess=function(){i()}}catch(XY){o(V0.create("storage-set",{originalErrorMessage:XY&&XY.message}))}}))]}}))}))},e.prototype.delete=function(e){return pC(this,void 0,void 0,(function(){var t,n=this;return mC(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(X0(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(XY){i(V0.create("storage-delete",{originalErrorMessage:XY&&XY.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),$0=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return pC(this,void 0,void 0,(function(){var e,t,n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Q0(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(V0.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var J0,Z0,e1=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return pC(this,void 0,void 0,(function(){var t,i,o;return mC(this,(function(a){switch(a.label){case 0:return[4,Q0(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof zC&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+oI(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),t1="@firebase/remote-config";(J0=NI).INTERNAL.registerComponent(new sI("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw V0.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw V0.create("registration-project-id");if(!s)throw V0.create("registration-api-key");if(!u)throw V0.create("registration-app-id");n=n||"firebase";var l=new Y0(u,r.name,n),c=new $0(l),h=new _I(t1);h.logLevel=fI.ERROR;var f=new H0(i,J0.SDK_VERSION,n,a,s,u),d=new e1(f,l),p=new j0(d,l,c,h),m=new K0(r,p,c,l,h);return m.ensureInitialized(),m}),"PUBLIC").setMultipleInstances(!0)),J0.registerVersion(t1,"0.1.41");var n1=((Z0={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Z0["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Z0["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Z0["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Z0["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Z0["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Z0["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Z0["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Z0["recaptcha-error"]="ReCAPTCHA error.",Z0),r1=new jC("appCheck","AppCheck",n1),i1=new Map,o1={activated:!1,tokenObservers:[]},a1={enabled:!1};function s1(e){return i1.get(e)||o1}function u1(e,t){i1.set(e,t)}function l1(){return a1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){return self.grecaptcha}function h1(e){if(!s1(e).activated)throw r1.create("use-before-activation",{appName:e.name})}function f1(e,t){var n=s1(e),r=new IC;u1(e,dC(dC({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=c1();return u?u.ready((function(){p1(e,t,u,i),r.resolve(u)})):(a=function(){var n=c1();if(!n)throw new Error("no recaptcha");n.ready((function(){p1(e,t,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function d1(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:return h1(e),[4,s1(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=s1(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function p1(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),o=s1(e);u1(e,dC(dC({},o),{reCAPTCHAState:dC(dC({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var m1="https://content-firebaseappcheck.googleapis.com/v1beta",v1=3e4,g1=96e4,y1=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return pC(this,void 0,void 0,(function(){var t;return mC(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new IC,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new IC,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function b1(e,t){var n=e.url,r=e.body;return pC(this,void 0,void 0,(function(){var e,i,o,a,s,u,l,c,h,f;return mC(this,(function(d){switch(d.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:e},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=d.sent(),[3,4];case 3:throw s=d.sent(),r1.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw r1.create("fetch-status-error",{httpStatus:a.status});d.label=5;case 5:return d.trys.push([5,7,,8]),[4,a.json()];case 6:return u=d.sent(),[3,8];case 7:throw l=d.sent(),r1.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(c=u.ttl.match(/^([\d.]+)(s)$/))||!c[2]||isNaN(Number(c[1])))throw r1.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(c[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function _1(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:m1+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:t}}}function w1(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:m1+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x1="firebase-app-check-store",S1=null;function E1(){return S1||(S1=new Promise((function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(r1.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(x1,{keyPath:"compositeKey"})}}}catch(XY){t(r1.create("storage-open",{originalErrorMessage:XY.message}))}})))}function T1(e){return C1(I1(e))}function M1(e,t){return pC(this,void 0,void 0,(function(){var n,r,i,o;return mC(this,(function(a){switch(a.label){case 0:return[4,E1()];case 1:return n=a.sent(),r=n.transaction(x1,"readwrite"),i=r.objectStore(x1),o=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){o.onsuccess=function(t){e()},r.onerror=function(e){var n;t(r1.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function C1(e){return pC(this,void 0,void 0,(function(){var t,n,r,i;return mC(this,(function(o){switch(o.label){case 0:return[4,E1()];case 1:return t=o.sent(),n=t.transaction(x1,"readonly"),r=n.objectStore(x1),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(r1.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function I1(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A1=new _I("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(e){return pC(this,void 0,void 0,(function(){var t,n;return mC(this,(function(r){switch(r.label){case 0:if(!DC())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,T1(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),A1.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function P1(e,t){return DC()?function(e,t){return M1(I1(e),t)}(e,t).catch((function(e){A1.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function R1(){return pC(this,void 0,void 0,(function(){var e,t;return mC(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,C1("debug-token")];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),(r=t,M1("debug-token",r)).catch((function(e){return A1.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return pC(this,void 0,void 0,(function(){var e;return mC(this,(function(t){if((e=l1()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var L1={error:"UNKNOWN_ERROR"};function N1(e){return EC.encodeString(JSON.stringify(e),!1)}function D1(e,t,n){return void 0===n&&(n=!1),pC(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f,d,p,m,v;return mC(this,(function(g){switch(g.label){case 0:return h1(e),r=s1(e),i=r.token,o=void 0,i?[3,2]:[4,k1(e)];case 1:(a=g.sent())&&j1(a)&&(i=a,u1(e,dC(dC({},r),{token:i})),z1(e,{token:i.token})),g.label=2;case 2:return!n&&i&&j1(i)?[2,{token:i.token}]:l1().enabled?(u=b1,l=w1,c=[e],[4,O1()]):[3,6];case 3:return[4,u.apply(void 0,[l.apply(void 0,c.concat([g.sent()])),t])];case 4:return s=g.sent(),[4,P1(e,s)];case 5:return g.sent(),u1(e,dC(dC({},r),{token:s})),[2,{token:s.token}];case 6:return g.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return h=g.sent(),f=function(e){var t=GC(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null}(h.token),d=null!==f&&f<Date.now()&&f>0?1e3*f:Date.now(),i=dC(dC({},h),{issuedAtTimeMillis:d}),[3,11];case 8:return[4,d1(e).catch((function(e){throw r1.create("recaptcha-error")}))];case 9:return p=g.sent(),[4,b1(_1(e,p),t)];case 10:i=g.sent(),g.label=11;case 11:return[3,13];case 12:return m=g.sent(),A1.error(m),o=m,[3,13];case 13:return i?[3,14]:(v=function(e){return{token:N1(L1),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,16]);case 14:return v={token:i.token},u1(e,dC(dC({},r),{token:i})),[4,P1(e,i)];case 15:g.sent(),g.label=16;case 16:return z1(e,v),[2,v]}}))}))}function F1(e,t,n,r,i){var o=s1(e),a={next:r,error:i,type:n},s=dC(dC({},o),{tokenObservers:yC(yC([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(e,t){var n=this;return new y1((function(){return pC(n,void 0,void 0,(function(){var n;return mC(this,(function(r){switch(r.label){case 0:return s1(e).token?[3,2]:[4,D1(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,D1(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=s1(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),v1,g1)}(e,t);s.tokenRefresher=u}if(s.tokenRefresher.isRunning()||!0!==o.isTokenAutoRefreshEnabled||s.tokenRefresher.start(),o.token&&j1(o.token)){var l=o.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}u1(e,s)}function U1(e,t){var n=s1(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),u1(e,dC(dC({},n),{tokenObservers:r}))}function z1(e,t){for(var n=0,r=s1(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}function j1(e){return e.expireTimeMillis-Date.now()>0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function B1(e,t){return{app:e,activate:function(t,n){return function(e,t,n){var r=s1(e);if(r.activated)throw r1.create("already-activated",{appName:e.name});var i=dC(dC({},r),{activated:!0});"string"==typeof t?i.siteKey=t:i.customProvider=t,i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,u1(e,i),i.siteKey&&f1(e,i.siteKey).catch((function(){}))}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(e,t){var n=s1(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),u1(e,dC(dC({},n),{isTokenAutoRefreshEnabled:t}))}(e,t)},getToken:function(n){return function(e,t,n){return pC(this,void 0,void 0,(function(){var r;return mC(this,(function(i){switch(i.label){case 0:return[4,D1(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return function(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),F1(e,t,"EXTERNAL",o,a),function(){return U1(e,o)}}(e,t,n,r)},INTERNAL:{delete:function(){for(var t=0,n=s1(e).tokenObservers;t<n.length;t++){var r=n[t];U1(e,r.next)}return Promise.resolve()}}}}!function(e){e.INTERNAL.registerComponent(new sI("appCheck",(function(e){return B1(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("app-check-internal").initialize()}))),e.INTERNAL.registerComponent(new sI("app-check-internal",(function(e){return function(e,t){return{getToken:function(n){return D1(e,t,n)},addTokenListener:function(n){return F1(e,t,"INTERNAL",n)},removeTokenListener:function(t){return U1(e,t)}}}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion("@firebase/app-check","0.2.0")}(NI),function(){var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=l1();t.enabled=!0;var n=new IC;t.token=n,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(R1())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
NI.registerVersion("firebase","8.7.1","app"),NI.SDK_VERSION="8.7.1";function V1(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function H1(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:V1(t[n])&&V1(e[n])&&Object.keys(t[n]).length>0&&H1(e[n],t[n])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),NI.registerVersion("firebase","8.7.1");var W1={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function G1(){var e="undefined"!=typeof document?document:{};return H1(e,W1),e}var q1={document:W1,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function K1(){var e="undefined"!=typeof window?window:{};return H1(e,q1),e}function X1(e){return(X1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y1(e,t){return(Y1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(XY){return!1}}function Q1(e,t,n){return(Q1=$1()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Y1(i,n.prototype),i}).apply(null,arguments)}function J1(e){var t="function"==typeof Map?new Map:void 0;return(J1=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Q1(e,arguments,X1(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Y1(r,e)})(e)}var Z1=function(e){var t,n;function r(t){var n;return function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=e.call.apply(e,[this].concat(t))||this)),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(J1(Array));function e2(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,e2(e)):t.push(e)})),t}function t2(e,t){return Array.prototype.filter.call(e,t)}function n2(e,t){var n=K1(),r=G1(),i=[];if(!t&&e instanceof Z1)return e;if(!e)return new Z1(i);if("string"==typeof e){var o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var a="div";0===o.indexOf("<li")&&(a="ul"),0===o.indexOf("<tr")&&(a="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(a="tr"),0===o.indexOf("<tbody")&&(a="table"),0===o.indexOf("<option")&&(a="select");var s=r.createElement(a);s.innerHTML=o;for(var u=0;u<s.childNodes.length;u+=1)i.push(s.childNodes[u])}else i=function(e,t){if("string"!=typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof Z1)return e;i=e}return new Z1(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}n2.fn=Z1.prototype;var r2,i2,o2,a2={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=e2(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,r)})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=e2(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,r)})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=e2(t.map((function(e){return e.split(" ")})));return t2(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=e2(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),n2(t).is(i))o.apply(t,n);else for(var r=n2(t).parents(),a=0;a<r.length;a+=1)n2(r[a]).is(i)&&o.apply(r[a],n)}}function u(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),o.apply(this,t)}"function"==typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var l,c=r.split(" "),h=0;h<this.length;h+=1){var f=this[h];if(i)for(l=0;l<c.length;l+=1){var d=c[l];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[d]||(f.dom7LiveListeners[d]=[]),f.dom7LiveListeners[d].push({listener:o,proxyListener:s}),f.addEventListener(d,s,a)}else for(l=0;l<c.length;l+=1){var p=c[l];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[p]||(f.dom7Listeners[p]=[]),f.dom7Listeners[p].push({listener:o,proxyListener:u}),f.addEventListener(p,u,a)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];"function"==typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var s=r.split(" "),u=0;u<s.length;u+=1)for(var l=s[u],c=0;c<this.length;c+=1){var h=this[c],f=void 0;if(!i&&h.dom7Listeners?f=h.dom7Listeners[l]:i&&h.dom7LiveListeners&&(f=h.dom7LiveListeners[l]),f&&f.length)for(var d=f.length-1;d>=0;d-=1){var p=f[d];o&&p.listener===o||o&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===o?(h.removeEventListener(l,p.proxyListener,a),f.splice(d,1)):o||(h.removeEventListener(l,p.proxyListener,a),f.splice(d,1))}}return this},trigger:function(){for(var e=K1(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n[0].split(" "),o=n[1],a=0;a<i.length;a+=1)for(var s=i[a],u=0;u<this.length;u+=1){var l=this[u];if(e.CustomEvent){var c=new e.CustomEvent(s,{detail:o,bubbles:!0,cancelable:!0});l.dom7EventData=n.filter((function(e,t){return t>0})),l.dispatchEvent(c),l.dom7EventData=[],delete l.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=K1();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=K1(),t=G1(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+u-a}}return null},css:function(e,t){var n,r=K1();if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var i in e)this[n].style[i]=e[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=K1(),i=G1(),o=this[0];if(!o||void 0===e)return!1;if("string"==typeof e){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(t=n2(e),n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}if(e===i)return o===i;if(e===r)return o===r;if(e.nodeType||e instanceof Z1){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return n2([]);if(e<0){var n=t+e;return n2(n<0?[]:[this[n]])}return n2([this[e]])},append:function(){for(var e,t=G1(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"==typeof e){var i=t.createElement("div");for(i.innerHTML=e;i.firstChild;)this[r].appendChild(i.firstChild)}else if(e instanceof Z1)for(var o=0;o<e.length;o+=1)this[r].appendChild(e[o]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=G1();for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=r.createElement("div");for(i.innerHTML=e,n=i.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(i.childNodes[n],this[t].childNodes[0])}else if(e instanceof Z1)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&n2(this[0].nextElementSibling).is(e)?n2([this[0].nextElementSibling]):n2([]):this[0].nextElementSibling?n2([this[0].nextElementSibling]):n2([]):n2([])},nextAll:function(e){var t=[],n=this[0];if(!n)return n2([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?n2(r).is(e)&&t.push(r):t.push(r),n=r}return n2(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&n2(t.previousElementSibling).is(e)?n2([t.previousElementSibling]):n2([]):t.previousElementSibling?n2([t.previousElementSibling]):n2([])}return n2([])},prevAll:function(e){var t=[],n=this[0];if(!n)return n2([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?n2(r).is(e)&&t.push(r):t.push(r),n=r}return n2(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?n2(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return n2(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?n2(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return n2(t)},closest:function(e){var t=this;return void 0===e?n2([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return n2(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)e&&!n2(r[i]).is(e)||t.push(r[i]);return n2(t)},filter:function(e){return n2(t2(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function s2(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function u2(){return Date.now()}function l2(e,t){void 0===t&&(t="x");var n,r,i,o=K1(),a=function(e){var t,n=K1();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return o.WebKitCSSMatrix?((r=a.transform||a.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new o.WebKitCSSMatrix("none"===r?"":r)):n=(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=o.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=o.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function c2(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function h2(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n="undefined"!=typeof window?window.HTMLElement:void 0,r=1;r<arguments.length;r+=1){var i=r<0||arguments.length<=r?void 0:arguments[r];if(null!=i&&!(n&&i instanceof n))for(var o=Object.keys(Object(i)).filter((function(e){return t.indexOf(e)<0})),a=0,s=o.length;a<s;a+=1){var u=o[a],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(c2(e[u])&&c2(i[u])?i[u].__swiper__?e[u]=i[u]:h2(e[u],i[u]):!c2(e[u])&&c2(i[u])?(e[u]={},i[u].__swiper__?e[u]=i[u]:h2(e[u],i[u])):e[u]=i[u])}}return e}function f2(e,t){Object.keys(t).forEach((function(n){c2(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function d2(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:\/])/g,"\\$1").replace(/ /g,".")}function p2(e,t,n,r){var i=G1();return n&&Object.keys(r).forEach((function(n){if(!t[n]&&!0===t.auto){var o=i.createElement("div");o.className=r[n],e.append(o),t[n]=o}})),t}function m2(){var e,t;return r2||(e=K1(),t=G1(),r2={touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(XY){}return t}(),gestures:"ongesturestart"in e}),r2}function v2(e){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m;return void 0===e&&(e={}),i2||(n=(void 0===(t=e)?{}:t).userAgent,r=m2(),i=K1(),o=i.navigator.platform,a=n||i.navigator.userAgent,s={ios:!1,android:!1},u=i.screen.width,l=i.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),f=a.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===o,m="MacIntel"===o,!h&&m&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(u+"x"+l)>=0&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),m=!1),c&&!p&&(s.os="android",s.android=!0),(h||d||f)&&(s.os="ios",s.ios=!0),i2=s),i2}function g2(){var e,t;return o2||(t=K1(),o2={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}),o2}Object.keys(a2).forEach((function(e){Object.defineProperty(n2.fn,e,{value:a2[e],writable:!0})}));var y2={name:"resize",create:function(){var e=this;h2(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var n=e.width,r=e.height,i=n,o=r;t.forEach((function(t){var n=t.contentBoxSize,r=t.contentRect,a=t.target;a&&a!==e.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)})),i===n&&o===r||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=K1();e.params.resizeObserver&&void 0!==K1().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=K1();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function b2(){return(b2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _2={attach:function(e,t){void 0===t&&(t={});var n=K1(),r=this,i=new(n.MutationObserver||n.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){r.emit("observerUpdate",e[0])};n.requestAnimationFrame?n.requestAnimationFrame(t):n.setTimeout(t,0)}else r.emit("observerUpdate",e[0])}));i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),r.observer.observers.push(i)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),n=0;n<t.length;n+=1)e.observer.attach(t[n]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},w2={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){f2(this,{observer:b2({},_2,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};function x2(e){var t=this,n=G1(),r=K1(),i=t.touchEventsData,o=t.params,a=t.touches;if(t.enabled&&(!t.animating||!o.preventInteractionOnTransition)){var s=e;s.originalEvent&&(s=s.originalEvent);var u=n2(s.target);if("wrapper"!==o.touchEventsTarget||u.closest(t.wrapperEl).length)if(i.isTouchEvent="touchstart"===s.type,i.isTouchEvent||!("which"in s)||3!==s.which)if(!(!i.isTouchEvent&&"button"in s&&s.button>0))if(!i.isTouched||!i.isMoved)if(!!o.noSwipingClass&&""!==o.noSwipingClass&&s.target&&s.target.shadowRoot&&e.path&&e.path[0]&&(u=n2(e.path[0])),o.noSwiping&&u.closest(o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass)[0])t.allowClick=!0;else if(!o.swipeHandler||u.closest(o.swipeHandler)[0]){a.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,a.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var l=a.currentX,c=a.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,f=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(h&&(l<=f||l>=r.innerWidth-f)){if("prevent"!==h)return;e.preventDefault()}if(h2(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=l,a.startY=c,i.touchStartTime=u2(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==s.type){var d=!0;u.is(i.focusableElements)&&(d=!1),n.activeElement&&n2(n.activeElement).is(i.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();var p=d&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!p||u[0].isContentEditable||s.preventDefault()}t.emit("touchStart",s)}}}function S2(e){var t=G1(),n=this,r=n.touchEventsData,i=n.params,o=n.touches,a=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===s.type){var u="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),l="touchmove"===s.type?u.pageX:s.pageX,c="touchmove"===s.type?u.pageY:s.pageY;if(s.preventedByNestedSwiper)return o.startX=l,void(o.startY=c);if(!n.allowTouchMove)return n.allowClick=!1,void(r.isTouched&&(h2(o,{startX:l,startY:c,currentX:l,currentY:c}),r.touchStartTime=u2()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(c<o.startY&&n.translate<=n.maxTranslate()||c>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(l<o.startX&&n.translate<=n.maxTranslate()||l>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&n2(s.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){o.currentX=l,o.currentY=c;var h=o.currentX-o.startX,f=o.currentY-o.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(f,2))<n.params.threshold)){var d;if(void 0===r.isScrolling)n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:h*h+f*f>=25&&(d=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?d>i.touchAngle:90-d>i.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",s),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!i.cssMode&&s.cancelable&&s.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&s.stopPropagation(),r.isMoved||(i.loop&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),r.isMoved=!0;var p=n.isHorizontal()?h:f;o.diff=p,p*=i.touchRatio,a&&(p=-p),n.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var m=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),p>0&&r.currentTranslate>n.minTranslate()?(m=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+p,v))):p<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-p,v))),m&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(p)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&(0===r.velocities.length&&r.velocities.push({position:o[n.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:o[n.isHorizontal()?"currentX":"currentY"],time:u2()})),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",s)}}function E2(e){var t=this,n=t.touchEventsData,r=t.params,i=t.touches,o=t.rtlTranslate,a=t.$wrapperEl,s=t.slidesGrid,u=t.snapGrid;if(t.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c,h=u2(),f=h-n.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(l),t.emit("tap click",l),f<300&&h-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)),n.lastClickTime=u2(),s2((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(r.freeMode){if(c<-t.minTranslate())return void t.slideTo(t.activeIndex);if(c>-t.maxTranslate())return void(t.slides.length<u.length?t.slideTo(u.length-1):t.slideTo(t.slides.length-1));if(r.freeModeMomentum){if(n.velocities.length>1){var d=n.velocities.pop(),p=n.velocities.pop(),m=d.position-p.position,v=d.time-p.time;t.velocity=m/v,t.velocity/=2,Math.abs(t.velocity)<r.freeModeMinimumVelocity&&(t.velocity=0),(v>150||u2()-d.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=r.freeModeMomentumVelocityRatio,n.velocities.length=0;var g=1e3*r.freeModeMomentumRatio,y=t.velocity*g,b=t.translate+y;o&&(b=-b);var _,w,x=!1,S=20*Math.abs(t.velocity)*r.freeModeMomentumBounceRatio;if(b<t.maxTranslate())r.freeModeMomentumBounce?(b+t.maxTranslate()<-S&&(b=t.maxTranslate()-S),_=t.maxTranslate(),x=!0,n.allowMomentumBounce=!0):b=t.maxTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(b>t.minTranslate())r.freeModeMomentumBounce?(b-t.minTranslate()>S&&(b=t.minTranslate()+S),_=t.minTranslate(),x=!0,n.allowMomentumBounce=!0):b=t.minTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(r.freeModeSticky){for(var E,T=0;T<u.length;T+=1)if(u[T]>-b){E=T;break}b=-(b=Math.abs(u[E]-b)<Math.abs(u[E-1]-b)||"next"===t.swipeDirection?u[E]:u[E-1])}if(w&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(g=o?Math.abs((-b-t.translate)/t.velocity):Math.abs((b-t.translate)/t.velocity),r.freeModeSticky){var M=Math.abs((o?-b:b)-t.translate),C=t.slidesSizesGrid[t.activeIndex];g=M<C?r.speed:M<2*C?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky)return void t.slideToClosest();r.freeModeMomentumBounce&&x?(t.updateProgress(_),t.setTransition(g),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&n.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(r.speed),setTimeout((function(){t.setTranslate(_),a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(b),t.setTransition(g),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(b)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(r.freeModeSticky)return void t.slideToClosest();r.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!r.freeModeMomentum||f>=r.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var I=0,A=t.slidesSizesGrid[0],k=0;k<s.length;k+=k<r.slidesPerGroupSkip?1:r.slidesPerGroup){var P=k<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==s[k+P]?c>=s[k]&&c<s[k+P]&&(I=k,A=s[k+P]-s[k]):c>=s[k]&&(I=k,A=s[s.length-1]-s[s.length-2])}var R=(c-s[I])/A,O=I<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(f>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(R>=r.longSwipesRatio?t.slideTo(I+O):t.slideTo(I)),"prev"===t.swipeDirection&&(R>1-r.longSwipesRatio?t.slideTo(I+O):t.slideTo(I))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(I+O):t.slideTo(I):("next"===t.swipeDirection&&t.slideTo(I+O),"prev"===t.swipeDirection&&t.slideTo(I))}}}}function T2(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,i=e.allowSlidePrev,o=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}}function M2(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function C2(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=n?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var I2=!1;function A2(){}var k2={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function P2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R2={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&h2(e,r.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n],i=e[n]||{};r.on&&t.on&&Object.keys(r.on).forEach((function(e){t.on(e,r.on[e])})),r.create&&r.create.bind(t)(i)}))}},eventsEmitter:{on:function(e,t,n){var r=this;if("function"!=typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once:function(e,t,n){var r=this;if("function"!=typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny:function(e,t){var n=this;if("function"!=typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners)return r;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=r):(e=o[0].events,t=o[0].data,n=o[0].context||r),t.unshift(n);var s=Array.isArray(e)?e:e.split(" ");return s.forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(t))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}},update:{updateSize:function(){var e,t,n=this,r=n.$el;e=void 0!==n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t=void 0!==n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),h2(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,i=e.$wrapperEl,o=e.size,a=e.rtlTranslate,s=e.wrongRTL,u=e.virtual&&r.virtual.enabled,l=u?e.virtual.slides.length:e.slides.length,c=i.children("."+e.params.slideClass),h=u?e.virtual.slides.length:c.length,f=[],d=[],p=[],m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));var v=r.slidesOffsetAfter;"function"==typeof v&&(v=r.slidesOffsetAfter.call(e));var g=e.snapGrid.length,y=e.slidesGrid.length,b=r.spaceBetween,_=-m,w=0,x=0;if(void 0!==o){var S,E;"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*o),e.virtualSize=-b,a?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),r.slidesPerColumn>1&&(S=Math.floor(h/r.slidesPerColumn)===h/e.params.slidesPerColumn?h:Math.ceil(h/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(S=Math.max(S,r.slidesPerView*r.slidesPerColumn)));for(var T,M,C,I=r.slidesPerColumn,A=S/I,k=Math.floor(h/r.slidesPerColumn),P=0;P<h;P+=1){E=0;var R=c.eq(P);if(r.slidesPerColumn>1){var O=void 0,L=void 0,N=void 0;if("row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){var D=Math.floor(P/(r.slidesPerGroup*r.slidesPerColumn)),F=P-r.slidesPerColumn*r.slidesPerGroup*D,U=0===D?r.slidesPerGroup:Math.min(Math.ceil((h-D*I*r.slidesPerGroup)/I),r.slidesPerGroup);O=(L=F-(N=Math.floor(F/U))*U+D*r.slidesPerGroup)+N*S/I,R.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})}else"column"===r.slidesPerColumnFill?(N=P-(L=Math.floor(P/I))*I,(L>k||L===k&&N===I-1)&&(N+=1)>=I&&(N=0,L+=1)):L=P-(N=Math.floor(P/A))*A;R.css(t("margin-top"),0!==N?r.spaceBetween&&r.spaceBetween+"px":"")}if("none"!==R.css("display")){if("auto"===r.slidesPerView){var z=getComputedStyle(R[0]),j=R[0].style.transform,B=R[0].style.webkitTransform;if(j&&(R[0].style.transform="none"),B&&(R[0].style.webkitTransform="none"),r.roundLengths)E=e.isHorizontal()?R.outerWidth(!0):R.outerHeight(!0);else{var V=n(z,"width"),H=n(z,"padding-left"),W=n(z,"padding-right"),G=n(z,"margin-left"),q=n(z,"margin-right"),K=z.getPropertyValue("box-sizing");if(K&&"border-box"===K)E=V+G+q;else{var X=R[0],Y=X.clientWidth;E=V+H+W+G+q+(X.offsetWidth-Y)}}j&&(R[0].style.transform=j),B&&(R[0].style.webkitTransform=B),r.roundLengths&&(E=Math.floor(E))}else E=(o-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(E=Math.floor(E)),c[P]&&(c[P].style[t("width")]=E+"px");c[P]&&(c[P].swiperSlideSize=E),p.push(E),r.centeredSlides?(_=_+E/2+w/2+b,0===w&&0!==P&&(_=_-o/2-b),0===P&&(_=_-o/2-b),Math.abs(_)<.001&&(_=0),r.roundLengths&&(_=Math.floor(_)),x%r.slidesPerGroup==0&&f.push(_),d.push(_)):(r.roundLengths&&(_=Math.floor(_)),(x-Math.min(e.params.slidesPerGroupSkip,x))%e.params.slidesPerGroup==0&&f.push(_),d.push(_),_=_+E+b),e.virtualSize+=E+b,w=E,x+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+v,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:e.virtualSize+r.spaceBetween+"px"}),r.setWrapperSize)i.css(((M={})[t("width")]=e.virtualSize+r.spaceBetween+"px",M));if(r.slidesPerColumn>1)if(e.virtualSize=(E+r.spaceBetween)*S,e.virtualSize=Math.ceil(e.virtualSize/r.slidesPerColumn)-r.spaceBetween,i.css(((C={})[t("width")]=e.virtualSize+r.spaceBetween+"px",C)),r.centeredSlides){T=[];for(var $=0;$<f.length;$+=1){var Q=f[$];r.roundLengths&&(Q=Math.floor(Q)),f[$]<e.virtualSize+f[0]&&T.push(Q)}f=T}if(!r.centeredSlides){T=[];for(var J=0;J<f.length;J+=1){var Z=f[J];r.roundLengths&&(Z=Math.floor(Z)),f[J]<=e.virtualSize-o&&T.push(Z)}f=T,Math.floor(e.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-o)}if(0===f.length&&(f=[0]),0!==r.spaceBetween){var ee,te=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css(((ee={})[te]=b+"px",ee))}if(r.centeredSlides&&r.centeredSlidesBounds){var ne=0;p.forEach((function(e){ne+=e+(r.spaceBetween?r.spaceBetween:0)}));var re=(ne-=r.spaceBetween)-o;f=f.map((function(e){return e<0?-m:e>re?re+v:e}))}if(r.centerInsufficientSlides){var ie=0;if(p.forEach((function(e){ie+=e+(r.spaceBetween?r.spaceBetween:0)})),(ie-=r.spaceBetween)<o){var oe=(o-ie)/2;f.forEach((function(e,t){f[t]=e-oe})),d.forEach((function(e,t){d[t]=e+oe}))}}h2(e,{slides:c,snapGrid:f,slidesGrid:d,slidesSizesGrid:p}),h!==l&&e.emit("slidesLengthChange"),f.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),d.length!==y&&e.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,n=this,r=[],i=n.virtual&&n.params.virtual.enabled,o=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var a=function(e){return i?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!i)break;r.push(a(s))}else r.push(a(n.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){var u=r[t].offsetHeight;o=u>o?u:o}o&&n.$wrapperEl.css("height",o+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,i=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;i&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var a=0;a<r.length;a+=1){var s=r[a],u=(o+(n.centeredSlides?t.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var l=-(o-s.swiperSlideOffset),c=l+t.slidesSizesGrid[a];(l>=0&&l<t.size-1||c>1&&c<=t.size||l<=0&&c>=t.size)&&(t.visibleSlides.push(s),t.visibleSlidesIndexes.push(a),r.eq(a).addClass(n.slideVisibleClass))}s.progress=i?-u:u}t.visibleSlides=n2(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,i=t.maxTranslate()-t.minTranslate(),o=t.progress,a=t.isBeginning,s=t.isEnd,u=a,l=s;0===i?(o=0,a=!0,s=!0):(a=(o=(e-t.minTranslate())/i)<=0,s=o>=1),h2(t,{progress:o,isBeginning:a,isEnd:s}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),a&&!u&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(u&&!a||l&&!s)&&t.emit("fromEdge"),t.emit("progress",o)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,i=t.$wrapperEl,o=t.activeIndex,a=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(e=s?t.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+o+'"]'):n.eq(o)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass));var u=e.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===u.length&&(u=n.eq(0)).addClass(r.slideNextClass);var l=e.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===l.length&&(l=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(u.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),l.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,i=n.slidesGrid,o=n.snapGrid,a=n.params,s=n.activeIndex,u=n.realIndex,l=n.snapIndex,c=e;if(void 0===c){for(var h=0;h<i.length;h+=1)void 0!==i[h+1]?r>=i[h]&&r<i[h+1]-(i[h+1]-i[h])/2?c=h:r>=i[h]&&r<i[h+1]&&(c=h+1):r>=i[h]&&(c=h);a.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(o.indexOf(r)>=0)t=o.indexOf(r);else{var f=Math.min(a.slidesPerGroupSkip,c);t=f+Math.floor((c-f)/a.slidesPerGroup)}if(t>=o.length&&(t=o.length-1),c!==s){var d=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);h2(n,{snapIndex:t,realIndex:d,previousIndex:s,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),u!==d&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==l&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,i=n2(e.target).closest("."+r.slideClass)[0],o=!1;if(i)for(var a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){o=!0,t=a;break}if(!i||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(n2(i).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,i=t.translate,o=t.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var a=l2(o[0],e);return r&&(a=-a),a||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,i=n.params,o=n.$wrapperEl,a=n.wrapperEl,s=n.progress,u=0,l=0;n.isHorizontal()?u=r?-e:e:l=e,i.roundLengths&&(u=Math.floor(u),l=Math.floor(l)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-l:i.virtualTranslate||o.transform("translate3d("+u+"px, "+l+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:l;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this,a=o.params,s=o.wrapperEl;if(o.animating&&a.preventInteractionOnTransition)return!1;var u,l=o.minTranslate(),c=o.maxTranslate();if(u=r&&e>l?l:r&&e<c?c:e,o.updateProgress(u),a.cssMode){var h,f=o.isHorizontal();if(0===t)s[f?"scrollLeft":"scrollTop"]=-u;else if(s.scrollTo)s.scrollTo(((h={})[f?"left":"top"]=-u,h.behavior="smooth",h));else s[f?"scrollLeft":"scrollTop"]=-u;return!0}return 0===t?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.params,o=n.previousIndex;if(!i.cssMode){i.autoHeight&&n.updateAutoHeight();var a=t;if(a||(a=r>o?"next":r<o?"prev":"reset"),n.emit("transitionStart"),e&&r!==o){if("reset"===a)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===a?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.previousIndex,o=n.params;if(n.animating=!1,!o.cssMode){n.setTransition(0);var a=t;if(a||(a=r>i?"next":r<i?"prev":"reset"),n.emit("transitionEnd"),e&&r!==i){if("reset"===a)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===a?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,n,r,i){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var o=parseInt(e,10);if(!isFinite(o))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=o}var a=this,s=e;s<0&&(s=0);var u=a.params,l=a.snapGrid,c=a.slidesGrid,h=a.previousIndex,f=a.activeIndex,d=a.rtlTranslate,p=a.wrapperEl,m=a.enabled;if(a.animating&&u.preventInteractionOnTransition||!m&&!r&&!i)return!1;var v=Math.min(a.params.slidesPerGroupSkip,s),g=v+Math.floor((s-v)/a.params.slidesPerGroup);g>=l.length&&(g=l.length-1),(f||u.initialSlide||0)===(h||0)&&n&&a.emit("beforeSlideChangeStart");var y,b=-l[g];if(a.updateProgress(b),u.normalizeSlideIndex)for(var _=0;_<c.length;_+=1){var w=-Math.floor(100*b),x=Math.floor(100*c[_]),S=Math.floor(100*c[_+1]);void 0!==c[_+1]?w>=x&&w<S-(S-x)/2?s=_:w>=x&&w<S&&(s=_+1):w>=x&&(s=_)}if(a.initialized&&s!==f){if(!a.allowSlideNext&&b<a.translate&&b<a.minTranslate())return!1;if(!a.allowSlidePrev&&b>a.translate&&b>a.maxTranslate()&&(f||0)!==s)return!1}if(y=s>f?"next":s<f?"prev":"reset",d&&-b===a.translate||!d&&b===a.translate)return a.updateActiveIndex(s),u.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==u.effect&&a.setTranslate(b),"reset"!==y&&(a.transitionStart(n,y),a.transitionEnd(n,y)),!1;if(u.cssMode){var E,T=a.isHorizontal(),M=-b;if(d&&(M=p.scrollWidth-p.offsetWidth-M),0===t)p[T?"scrollLeft":"scrollTop"]=M;else if(p.scrollTo)p.scrollTo(((E={})[T?"left":"top"]=M,E.behavior="smooth",E));else p[T?"scrollLeft":"scrollTop"]=M;return!0}return 0===t?(a.setTransition(0),a.setTranslate(b),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(n,y),a.transitionEnd(n,y)):(a.setTransition(t),a.setTranslate(b),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(n,y),a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,y))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var i=this,o=e;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,o=r.animating;if(!r.enabled)return r;var a=r.activeIndex<i.slidesPerGroupSkip?1:i.slidesPerGroup;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return r.slideTo(r.activeIndex+a,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,o=r.animating,a=r.snapGrid,s=r.slidesGrid,u=r.rtlTranslate;if(!r.enabled)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,h=l(u?r.translate:-r.translate),f=a.map((function(e){return l(e)})),d=a[f.indexOf(h)-1];return void 0===d&&i.cssMode&&a.forEach((function(e){!d&&h>=e&&(d=e)})),void 0!==d&&(c=s.indexOf(d))<0&&(c=r.activeIndex-1),r.slideTo(c,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var i=this,o=i.activeIndex,a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){var l=i.snapGrid[s];u-l>(i.snapGrid[s+1]-l)*r&&(o+=i.params.slidesPerGroup)}else{var c=i.snapGrid[s-1];u-c<=(i.snapGrid[s]-c)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,o=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(n2(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<t.loopedSlides-i/2||o>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),o=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),s2((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-i?(t.loopFix(),o=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),s2((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}},loop:{loopCreate:function(){var e=this,t=G1(),n=e.params,r=e.$wrapperEl;r.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var i=r.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-i.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var a=0;a<o;a+=1){var s=n2(t.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);r.append(s)}i=r.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var u=[],l=[];i.each((function(t,n){var r=n2(t);n<e.loopedSlides&&l.push(t),n<i.length&&n>=i.length-e.loopedSlides&&u.push(t),r.attr("data-swiper-slide-index",n)}));for(var c=0;c<l.length;c+=1)r.append(n2(l[c].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var h=u.length-1;h>=0;h-=1)r.prepend(n2(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,i=e.loopedSlides,o=e.allowSlidePrev,a=e.allowSlideNext,s=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var l=-s[n]-e.getTranslate();if(n<i)t=r.length-3*i+n,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l);else if(n>=r.length-i){t=-r.length+n+i,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l)}e.allowSlidePrev=o,e.allowSlideNext=a,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n=t.el;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this,n=t.$wrapperEl,r=t.params;if(r.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var i=0;i<e.length;i+=1)e[i]&&n.append(e[i]);else n.append(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&t.loopDestroy();var o=i+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&r.prepend(e[a]);o=i+e.length}else r.prepend(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),t.slideTo(o,0,!1)},addSlide:function(e,t){var n=this,r=n.$wrapperEl,i=n.params,o=n.activeIndex;i.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.slides=r.children("."+i.slideClass));var a=n.slides.length;if(e<=0)n.prependSlide(t);else if(e>=a)n.appendSlide(t);else{for(var s=o>e?o+1:o,u=[],l=a-1;l>=e;l-=1){var c=n.slides.eq(l);c.remove(),u.unshift(c)}if("object"==typeof t&&"length"in t){for(var h=0;h<t.length;h+=1)t[h]&&r.append(t[h]);s=o>e?o+t.length:o}else r.append(t);for(var f=0;f<u.length;f+=1)r.append(u[f]);i.loop&&n.loopCreate(),i.observer&&n.support.observer||n.update(),i.loop?n.slideTo(s+n.loopedSlides,0,!1):n.slideTo(s,0,!1)}},removeSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&(i-=t.loopedSlides,t.loopDestroy(),t.slides=r.children("."+n.slideClass));var o,a=i;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)o=e[s],t.slides[o]&&t.slides.eq(o).remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=e,t.slides[o]&&t.slides.eq(o).remove(),o<a&&(a-=1),a=Math.max(a,0);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),n.loop?t.slideTo(a+t.loopedSlides,0,!1):t.slideTo(a,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=this,t=G1(),n=e.params,r=e.touchEvents,i=e.el,o=e.wrapperEl,a=e.device,s=e.support;e.onTouchStart=x2.bind(e),e.onTouchMove=S2.bind(e),e.onTouchEnd=E2.bind(e),n.cssMode&&(e.onScroll=C2.bind(e)),e.onClick=M2.bind(e);var u=!!n.nested;if(!s.touch&&s.pointerEvents)i.addEventListener(r.start,e.onTouchStart,!1),t.addEventListener(r.move,e.onTouchMove,u),t.addEventListener(r.end,e.onTouchEnd,!1);else{if(s.touch){var l=!("touchstart"!==r.start||!s.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.addEventListener(r.start,e.onTouchStart,l),i.addEventListener(r.move,e.onTouchMove,s.passiveListener?{passive:!1,capture:u}:u),i.addEventListener(r.end,e.onTouchEnd,l),r.cancel&&i.addEventListener(r.cancel,e.onTouchEnd,l),I2||(t.addEventListener("touchstart",A2),I2=!0)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!s.touch&&a.ios)&&(i.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,u),t.addEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.addEventListener("click",e.onClick,!0),n.cssMode&&o.addEventListener("scroll",e.onScroll),n.updateOnWindowResize?e.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",T2,!0):e.on("observerUpdate",T2,!0)},detachEvents:function(){var e=this,t=G1(),n=e.params,r=e.touchEvents,i=e.el,o=e.wrapperEl,a=e.device,s=e.support,u=!!n.nested;if(!s.touch&&s.pointerEvents)i.removeEventListener(r.start,e.onTouchStart,!1),t.removeEventListener(r.move,e.onTouchMove,u),t.removeEventListener(r.end,e.onTouchEnd,!1);else{if(s.touch){var l=!("onTouchStart"!==r.start||!s.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.removeEventListener(r.start,e.onTouchStart,l),i.removeEventListener(r.move,e.onTouchMove,u),i.removeEventListener(r.end,e.onTouchEnd,l),r.cancel&&i.removeEventListener(r.cancel,e.onTouchEnd,l)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!s.touch&&a.ios)&&(i.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,u),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.removeEventListener("click",e.onClick,!0),n.cssMode&&o.removeEventListener("scroll",e.onScroll),e.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",T2)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,i=void 0===r?0:r,o=e.params,a=e.$el,s=o.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var u=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(u&&e.currentBreakpoint!==u){var l=u in s?s[u]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=l||e.originalParams,h=o.slidesPerColumn>1,f=c.slidesPerColumn>1,d=o.enabled;h&&!f?(a.removeClass(o.containerModifierClass+"multirow "+o.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!h&&f&&(a.addClass(o.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&a.addClass(o.containerModifierClass+"multirow-column"),e.emitContainerClasses());var p=c.direction&&c.direction!==o.direction,m=o.loop&&(c.slidesPerView!==o.slidesPerView||p);p&&n&&e.changeDirection(),h2(e.params,c);var v=e.params.enabled;h2(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!v?e.disable():!d&&v&&e.enable(),e.currentBreakpoint=u,e.emit("_beforeBreakpoint",c),m&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,i=K1(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<a.length;s+=1){var u=a[s],l=u.point,c=u.value;"window"===t?i.matchMedia("(min-width: "+c+"px)").matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.params,n=e.isLocked,r=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&r?e.isLocked=r<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,n!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),n&&n!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:{addClasses:function(){var e,t,n,r=this,i=r.classNames,o=r.params,a=r.rtl,s=r.$el,u=r.device,l=r.support,c=(e=["initialized",o.direction,{"pointer-events":l.pointerEvents&&!l.touch},{"free-mode":o.freeMode},{autoheight:o.autoHeight},{rtl:a},{multirow:o.slidesPerColumn>1},{"multirow-column":o.slidesPerColumn>1&&"column"===o.slidesPerColumnFill},{android:u.android},{ios:u.ios},{"css-mode":o.cssMode}],t=o.containerModifierClass,n=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n);i.push.apply(i,c),s.addClass([].concat(i).join(" ")),r.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}},images:{loadImage:function(e,t,n,r,i,o){var a,s=K1();function u(){o&&o()}n2(e).parent("picture")[0]||e.complete&&i?u():t?((a=new s.Image).onload=u,a.onerror=u,r&&(a.sizes=r),n&&(a.srcset=n),t&&(a.src=t)):u()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},O2={},L2=function(){function e(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?n=i[0]:(t=i[0],n=i[1]),n||(n={}),n=h2({},n),t&&!n.el&&(n.el=t),n.el&&n2(n.el).length>1){var a=[];return n2(n.el).each((function(t){var r=h2({},n,{el:t});a.push(new e(r))})),a}var s=this;s.__swiper__=!0,s.support=m2(),s.device=v2({userAgent:n.userAgent}),s.browser=g2(),s.eventsListeners={},s.eventsAnyListeners=[],void 0===s.modules&&(s.modules={}),Object.keys(s.modules).forEach((function(e){var t=s.modules[e];if(t.params){var r=Object.keys(t.params)[0],i=t.params[r];if("object"!=typeof i||null===i)return;if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===n[r]&&(n[r]={auto:!0}),!(r in n)||!("enabled"in i))return;!0===n[r]&&(n[r]={enabled:!0}),"object"!=typeof n[r]||"enabled"in n[r]||(n[r].enabled=!0),n[r]||(n[r]={enabled:!1})}}));var u,l,c=h2({},k2);return s.useParams(c),s.params=h2({},c,O2,n),s.originalParams=h2({},s.params),s.passedParams=h2({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach((function(e){s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),s.$=n2,h2(s,{enabled:s.params.enabled,el:t,classNames:[],slides:n2(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===s.params.direction},isVertical:function(){return"vertical"===s.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:(u=["touchstart","touchmove","touchend","touchcancel"],l=["mousedown","mousemove","mouseup"],s.support.pointerEvents&&(l=["pointerdown","pointermove","pointerup"]),s.touchEventsTouch={start:u[0],move:u[1],end:u[2],cancel:u[3]},s.touchEventsDesktop={start:l[0],move:l[1],end:l[2]},s.support.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:u2(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.useModules(),s.emit("_swiper"),s.params.init&&s.init(),s}var t,n,r,i=e.prototype;return i.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},i.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},i.setProgress=function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()},i.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},i.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},i.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}},i.slidesPerViewDynamic=function(){var e=this,t=e.params,n=e.slides,r=e.slidesGrid,i=e.size,o=e.activeIndex,a=1;if(t.centeredSlides){for(var s,u=n[o].swiperSlideSize,l=o+1;l<n.length;l+=1)n[l]&&!s&&(a+=1,(u+=n[l].swiperSlideSize)>i&&(s=!0));for(var c=o-1;c>=0;c-=1)n[c]&&!s&&(a+=1,(u+=n[c].swiperSlideSize)>i&&(s=!0))}else for(var h=o+1;h<n.length;h+=1)r[h]-r[o]<i&&(a+=1);return a},i.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}},i.changeDirection=function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(""+n.params.containerModifierClass+r).addClass(""+n.params.containerModifierClass+e),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n},i.mount=function(e){var t=this;if(t.mounted)return!0;var n=n2(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=n2(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===i.length&&t.params.createElements){var o=G1().createElement("div");i=n2(o),o.className=t.params.wrapperClass,n.append(o),n.children("."+t.params.slideClass).each((function(e){i.append(e)}))}return h2(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0},i.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},i.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=this,r=n.params,i=n.$el,o=n.$wrapperEl,a=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(XY){}try{delete t[e]}catch(XY){}}))}(n)),n.destroyed=!0),null},e.extendDefaults=function(e){h2(O2,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+u2();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,r=[{key:"extendedDefaults",get:function(){return O2}},{key:"defaults",get:function(){return k2}}],(n=null)&&P2(t.prototype,n),r&&P2(t,r),e}();function N2(){return(N2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Object.keys(R2).forEach((function(e){Object.keys(R2[e]).forEach((function(t){L2.prototype[t]=R2[e][t]}))})),L2.use([y2,w2]);var D2={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,n=e.navigation.toggleEl;if(!e.params.loop){var r=e.navigation,i=r.$nextEl,o=r.$prevEl;o&&o.length>0&&(e.isBeginning?n(o,!0):n(o,!1),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(e.isEnd?n(i,!0):n(i,!1),e.params.watchOverflow&&e.enabled&&i[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,n=this,r=n.params.navigation;(n.params.navigation=p2(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),r.nextEl||r.prevEl)&&(r.nextEl&&(e=n2(r.nextEl),n.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===n.$el.find(r.nextEl).length&&(e=n.$el.find(r.nextEl))),r.prevEl&&(t=n2(r.prevEl),n.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===n.$el.find(r.prevEl).length&&(t=n.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",n.navigation.onNextClick),t&&t.length>0&&t.on("click",n.navigation.onPrevClick),h2(n.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),n.enabled||(e&&e.addClass(r.lockClass),t&&t.addClass(r.lockClass)))},destroy:function(){var e=this,t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n.length&&(n.off("click",e.navigation.onNextClick),n.removeClass(e.params.navigation.disabledClass)),r&&r.length&&(r.off("click",e.navigation.onPrevClick),r.removeClass(e.params.navigation.disabledClass))}},F2={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){f2(this,{navigation:N2({},D2)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var n=e.navigation,r=n.$nextEl,i=n.$prevEl,o=t.target;if(e.params.navigation.hideOnClick&&!n2(o).is(i)&&!n2(o).is(r)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;var a;r?a=r.hasClass(e.params.navigation.hiddenClass):i&&(a=i.hasClass(e.params.navigation.hiddenClass)),!0===a?e.emit("navigationShow"):e.emit("navigationHide"),r&&r.toggleClass(e.params.navigation.hiddenClass),i&&i.toggleClass(e.params.navigation.hiddenClass)}}}};function U2(){return(U2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z2={update:function(){var e=this,t=e.rtl,n=e.params.pagination;if(n.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,o=e.pagination.$el,a=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>i-1-2*e.loopedSlides&&(r-=i-2*e.loopedSlides),r>a-1&&(r-=a),r<0&&"bullets"!==e.params.paginationType&&(r=a+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var s,u,l,c=e.pagination.bullets;if(n.dynamicBullets&&(e.pagination.bulletSize=c.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),s=r-e.pagination.dynamicBulletIndex,l=((u=s+(Math.min(c.length,n.dynamicMainBullets)-1))+s)/2),c.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),o.length>1)c.each((function(e){var t=n2(e),i=t.index();i===r&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(i>=s&&i<=u&&t.addClass(n.bulletActiveClass+"-main"),i===s&&t.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),i===u&&t.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var h=c.eq(r),f=h.index();if(h.addClass(n.bulletActiveClass),n.dynamicBullets){for(var d=c.eq(s),p=c.eq(u),m=s;m<=u;m+=1)c.eq(m).addClass(n.bulletActiveClass+"-main");if(e.params.loop)if(f>=c.length-n.dynamicMainBullets){for(var v=n.dynamicMainBullets;v>=0;v-=1)c.eq(c.length-v).addClass(n.bulletActiveClass+"-main");c.eq(c.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else d.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else d.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var g=Math.min(c.length,n.dynamicMainBullets+4),y=(e.pagination.bulletSize*g-e.pagination.bulletSize)/2-l*e.pagination.bulletSize,b=t?"right":"left";c.css(e.isHorizontal()?b:"top",y+"px")}}if("fraction"===n.type&&(o.find(d2(n.currentClass)).text(n.formatFractionCurrent(r+1)),o.find(d2(n.totalClass)).text(n.formatFractionTotal(a))),"progressbar"===n.type){var _;_=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var w=(r+1)/a,x=1,S=1;"horizontal"===_?x=w:S=w,o.find(d2(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+x+") scaleY("+S+")").transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(o.html(n.renderCustom(e,r+1,a)),e.emit("paginationRender",o[0])):e.emit("paginationUpdate",o[0]),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el,i="";if("bullets"===t.type){var o=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&o>n&&(o=n);for(var a=0;a<o;a+=1)t.renderBullet?i+=t.renderBullet.call(e,a,t.bulletClass):i+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";r.html(i),e.pagination.bullets=r.find(d2(t.bulletClass))}"fraction"===t.type&&(i=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',r.html(i)),"progressbar"===t.type&&(i=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',r.html(i)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=p2(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var n=n2(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",d2(t.bulletClass),(function(t){t.preventDefault();var n=n2(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),h2(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",d2(t.bulletClass))}}},j2={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){f2(this,{pagination:U2({dynamicBulletIndex:0},z2)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var n=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!n2(n).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};function B2(){return(B2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V2={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=s2((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),n)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=G1();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}},H2={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){f2(this,{autoplay:B2({},V2,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),G1().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),G1().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};function W2(){return(W2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G2={setTranslate:function(){for(var e=this,t=e.width,n=e.height,r=e.slides,i=e.slidesSizesGrid,o=e.params.coverflowEffect,a=e.isHorizontal(),s=e.translate,u=a?t/2-s:n/2-s,l=a?o.rotate:-o.rotate,c=o.depth,h=0,f=r.length;h<f;h+=1){var d=r.eq(h),p=i[h],m=(u-d[0].swiperSlideOffset-p/2)/p*o.modifier,v=a?l*m:0,g=a?0:l*m,y=-c*Math.abs(m),b=o.stretch;"string"==typeof b&&-1!==b.indexOf("%")&&(b=parseFloat(o.stretch)/100*p);var _=a?0:b*m,w=a?b*m:0,x=1-(1-o.scale)*Math.abs(m);Math.abs(w)<.001&&(w=0),Math.abs(_)<.001&&(_=0),Math.abs(y)<.001&&(y=0),Math.abs(v)<.001&&(v=0),Math.abs(g)<.001&&(g=0),Math.abs(x)<.001&&(x=0);var S="translate3d("+w+"px,"+_+"px,"+y+"px)  rotateX("+g+"deg) rotateY("+v+"deg) scale("+x+")";if(d.transform(S),d[0].style.zIndex=1-Math.abs(Math.round(m)),o.slideShadows){var E=a?d.find(".swiper-slide-shadow-left"):d.find(".swiper-slide-shadow-top"),T=a?d.find(".swiper-slide-shadow-right"):d.find(".swiper-slide-shadow-bottom");0===E.length&&(E=n2('<div class="swiper-slide-shadow-'+(a?"left":"top")+'"></div>'),d.append(E)),0===T.length&&(T=n2('<div class="swiper-slide-shadow-'+(a?"right":"bottom")+'"></div>'),d.append(T)),E.length&&(E[0].style.opacity=m>0?m:0),T.length&&(T[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},q2={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){f2(this,{coverflowEffect:W2({},G2)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}};function K2(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function X2(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){void 0===e[n]?e[n]=t[n]:K2(t[n])&&K2(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:X2(e[n],t[n]):e[n]=t[n]}))}function Y2(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function $2(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function Q2(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function J2(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var Z2=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function e3(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=L2.prototype.getBreakpoint(t.breakpoints),i=r in t.breakpoints?t.breakpoints[r]:void 0;i&&i.slidesPerView&&(n=i.slidesPerView)}var o=Math.ceil(parseFloat(t.loopedSlides||n,10));return(o+=t.loopAdditionalSlides)>e.length&&(o=e.length),o}function t3(e){var t=[];return W.Children.toArray(e).forEach((function(e){e.type&&"SwiperSlide"===e.type.displayName?t.push(e):e.props&&e.props.children&&t3(e.props.children).forEach((function(e){return t.push(e)}))})),t}function n3(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return W.Children.toArray(e).forEach((function(e){if(e.type&&"SwiperSlide"===e.type.displayName)t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var r=t3(e.props.children);r.length>0?r.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function r3(e){var t,n,r,i,o,a=e.swiper,s=e.slides,u=e.passedParams,l=e.changedParams,c=e.nextEl,h=e.prevEl,f=e.scrollbarEl,d=e.paginationEl,p=l.filter((function(e){return"children"!==e&&"direction"!==e})),m=a.params,v=a.pagination,g=a.navigation,y=a.scrollbar,b=a.virtual,_=a.thumbs;l.includes("thumbs")&&u.thumbs&&u.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),l.includes("controller")&&u.controller&&u.controller.control&&m.controller&&!m.controller.control&&(n=!0),l.includes("pagination")&&u.pagination&&(u.pagination.el||d)&&(m.pagination||!1===m.pagination)&&v&&!v.el&&(r=!0),l.includes("scrollbar")&&u.scrollbar&&(u.scrollbar.el||f)&&(m.scrollbar||!1===m.scrollbar)&&y&&!y.el&&(i=!0),l.includes("navigation")&&u.navigation&&(u.navigation.prevEl||h)&&(u.navigation.nextEl||c)&&(m.navigation||!1===m.navigation)&&g&&!g.prevEl&&!g.nextEl&&(o=!0);(p.forEach((function(e){if(K2(m[e])&&K2(u[e]))X2(m[e],u[e]);else{var t=u[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=u[e]:!1===t&&a[n=e]&&(a[n].destroy(),"navigation"===n?(m[n].prevEl=void 0,m[n].nextEl=void 0,a[n].prevEl=void 0,a[n].nextEl=void 0):(m[n].el=void 0,a[n].el=void 0))}var n})),l.includes("children")&&b&&m.virtual.enabled?(b.slides=s,b.update(!0)):l.includes("children")&&a.lazy&&a.params.lazy.enabled&&a.lazy.load(),t)&&(_.init()&&_.update(!0));n&&(a.controller.control=m.controller.control),r&&(d&&(m.pagination.el=d),v.init(),v.render(),v.update()),i&&(f&&(m.scrollbar.el=f),y.init(),y.updateSize(),y.setTranslate()),o&&(c&&(m.navigation.nextEl=c),h&&(m.navigation.prevEl=h),g.init(),g.update()),l.includes("allowSlideNext")&&(a.allowSlideNext=u.allowSlideNext),l.includes("allowSlidePrev")&&(a.allowSlidePrev=u.allowSlidePrev),l.includes("direction")&&a.changeDirection(u.direction,!1),a.update()}function i3(e,t){return"undefined"==typeof window?s.exports.useEffect(e,t):s.exports.useLayoutEffect(e,t)}var o3=["className","tag","wrapperTag","children","onSwiper"];function a3(){return(a3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s3=s.exports.forwardRef((function(e,t){var n=void 0===e?{}:e,r=n.className,i=n.tag,o=void 0===i?"div":i,a=n.wrapperTag,u=void 0===a?"div":a,l=n.children,c=n.onSwiper,h=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,o3),f=!1,d=s.exports.useState("swiper-container"),p=d[0],m=d[1],v=s.exports.useState(null),g=v[0],y=v[1],b=s.exports.useState(!1),_=b[0],w=b[1],x=s.exports.useRef(!1),S=s.exports.useRef(null),E=s.exports.useRef(null),T=s.exports.useRef(null),M=s.exports.useRef(null),C=s.exports.useRef(null),I=s.exports.useRef(null),A=s.exports.useRef(null),k=s.exports.useRef(null),P=function(e){void 0===e&&(e={});var t={on:{}},n={},r={};X2(t,L2.defaults),X2(t,L2.extendedDefaults),t._emitClasses=!0,t.init=!1;var i={},o=Z2.map((function(e){return e.replace(/_/,"")}));return Object.keys(e).forEach((function(a){o.indexOf(a)>=0?K2(e[a])?(t[a]={},r[a]={},X2(t[a],e[a]),X2(r[a],e[a])):(t[a]=e[a],r[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"==typeof e[a]?n[""+a[2].toLowerCase()+a.substr(3)]=e[a]:i[a]=e[a]})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:r,rest:i,events:n}}(h),R=P.params,O=P.passedParams,L=P.rest,N=P.events,D=n3(l),F=D.slides,U=D.slots,z=function(){w(!_)};if(Object.assign(R.on,{_containerClasses:function(e,t){m(t)}}),!S.current&&(Object.assign(R.on,N),f=!0,E.current=function(e){return new L2(e)}(R),E.current.loopCreate=function(){},E.current.loopDestroy=function(){},R.loop&&(E.current.loopedSlides=e3(F,R)),E.current.virtual&&E.current.params.virtual.enabled)){E.current.virtual.slides=F;var j={cache:!1,renderExternal:y,renderExternalUpdate:!1};X2(E.current.params.virtual,j),X2(E.current.originalParams.virtual,j)}E.current&&E.current.on("_beforeBreakpoint",z);return s.exports.useEffect((function(){return function(){E.current&&E.current.off("_beforeBreakpoint",z)}})),s.exports.useEffect((function(){!x.current&&E.current&&(E.current.emitSlidesClasses(),x.current=!0)})),i3((function(){if(t&&(t.current=S.current),S.current)return function(e,t){var n=e.el,r=e.nextEl,i=e.prevEl,o=e.paginationEl,a=e.scrollbarEl,s=e.swiper;Y2(t)&&r&&i&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),$2(t)&&o&&(s.params.pagination.el=o,s.originalParams.pagination.el=o),Q2(t)&&a&&(s.params.scrollbar.el=a,s.originalParams.scrollbar.el=a),s.init(n)}({el:S.current,nextEl:C.current,prevEl:I.current,paginationEl:A.current,scrollbarEl:k.current,swiper:E.current},R),c&&c(E.current),function(){E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),i3((function(){!f&&N&&E.current&&Object.keys(N).forEach((function(e){E.current.on(e,N[e])}));var e=function(e,t,n,r){var i=[];if(!t)return i;var o=function(e){i.indexOf(e)<0&&i.push(e)},a=r.map((function(e){return e.key})),s=n.map((function(e){return e.key}));return a.join("")!==s.join("")&&o("children"),r.length!==n.length&&o("children"),Z2.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(K2(e[n])&&K2(t[n])){var r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?o(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})),i.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})))}else e[n]!==t[n]&&o(n)})),i}(O,T.current,F,M.current);return T.current=O,M.current=F,e.length&&E.current&&!E.current.destroyed&&r3({swiper:E.current,slides:F,passedParams:O,changedParams:e,nextEl:C.current,prevEl:I.current,scrollbarEl:k.current,paginationEl:A.current}),function(){N&&E.current&&Object.keys(N).forEach((function(e){E.current.off(e,N[e])}))}})),i3((function(){var e;!(e=E.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[g]),W.createElement(o,a3({ref:S,className:J2(p+(r?" "+r:""))},L),U["container-start"],Y2(R)&&W.createElement(W.Fragment,null,W.createElement("div",{ref:I,className:"swiper-button-prev"}),W.createElement("div",{ref:C,className:"swiper-button-next"})),Q2(R)&&W.createElement("div",{ref:k,className:"swiper-scrollbar"}),$2(R)&&W.createElement("div",{ref:A,className:"swiper-pagination"}),W.createElement(u,{className:"swiper-wrapper"},U["wrapper-start"],R.virtual?function(e,t,n){var r;if(!n)return null;var i=e.isHorizontal()?((r={})[e.rtlTranslate?"right":"left"]=n.offset+"px",r):{top:n.offset+"px"};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return W.cloneElement(t,{swiper:e,style:i})}))}(E.current,F,g):!R.loop||E.current&&E.current.destroyed?F.map((function(e){return W.cloneElement(e,{swiper:E.current})})):function(e,t,n){var r=t.map((function(t,n){return W.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function i(e,t,r){return W.cloneElement(e,{key:e.key+"-duplicate-"+t+"-"+r,className:(e.props.className||"")+" "+n.slideDuplicateClass})}if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-r.length%n.slidesPerGroup;if(o!==n.slidesPerGroup)for(var a=0;a<o;a+=1){var s=W.createElement("div",{className:n.slideClass+" "+n.slideBlankClass});r.push(s)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);var u=e3(r,n),l=[],c=[];return r.forEach((function(e,t){t<u&&c.push(i(e,t,"prepend")),t<r.length&&t>=r.length-u&&l.push(i(e,t,"append"))})),e&&(e.loopedSlides=u),[].concat(l,r,c)}(E.current,F,R),U["wrapper-end"]),U["container-end"])}));s3.displayName="Swiper";var u3=["tag","children","className","swiper","zoom","virtualIndex"];function l3(){return(l3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c3=s.exports.forwardRef((function(e,t){var n,r=void 0===e?{}:e,i=r.tag,o=void 0===i?"div":i,a=r.children,u=r.className,l=void 0===u?"":u,c=r.swiper,h=r.zoom,f=r.virtualIndex,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,u3),p=s.exports.useRef(null),m=s.exports.useState("swiper-slide"),v=m[0],g=m[1];function y(e,t,n){t===p.current&&g(n)}i3((function(){if(t&&(t.current=p.current),p.current&&c){if(!c.destroyed)return c.on("_slideClass",y),function(){c&&c.off("_slideClass",y)};"swiper-slide"!==v&&g("swiper-slide")}})),i3((function(){c&&p.current&&g(c.getSlideClasses(p.current))}),[c]),"function"==typeof a&&(n={isActive:v.indexOf("swiper-slide-active")>=0||v.indexOf("swiper-slide-duplicate-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isDuplicate:v.indexOf("swiper-slide-duplicate")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0||v.indexOf("swiper-slide-duplicate-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0||v.indexOf("swiper-slide-duplicate-next")>=0});var b=function(){return"function"==typeof a?a(n):a};return W.createElement(o,l3({ref:p,className:J2(v+(l?" "+l:"")),"data-swiper-slide-index":f},d),h?W.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof h?h:void 0},b()):b())}));c3.displayName="SwiperSlide";var h3=Array.isArray,f3=Object.keys,d3=Object.prototype.hasOwnProperty,p3="undefined"!=typeof Element;function m3(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=h3(e),a=h3(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!m3(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=e instanceof Date,u=t instanceof Date;if(s!=u)return!1;if(s&&u)return e.getTime()==t.getTime();var l=e instanceof RegExp,c=t instanceof RegExp;if(l!=c)return!1;if(l&&c)return e.toString()==t.toString();var h=f3(e);if((r=h.length)!==f3(t).length)return!1;for(n=r;0!=n--;)if(!d3.call(t,h[n]))return!1;if(p3&&e instanceof Element&&t instanceof Element)return e===t;for(n=r;0!=n--;)if(!("_owner"===(i=h[n])&&e.$$typeof||m3(e[i],t[i])))return!1;return!0}return e!=e&&t!=t}var v3=function(e,t){try{return m3(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}},g3=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===y3}(e)}(e)};var y3="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function b3(e,t){return!1!==t.clone&&t.isMergeableObject(e)?w3(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function _3(e,t,n){return e.concat(t).map((function(e){return b3(e,n)}))}function w3(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||_3,n.isMergeableObject=n.isMergeableObject||g3;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=b3(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=w3(e[i],t[i],n):r[i]=b3(t[i],n)})),r}(e,t,n):b3(t,n)}w3.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return w3(e,n,t)}),{})};var x3=w3,S3="object"==typeof global&&global&&global.Object===Object&&global,E3="object"==typeof self&&self&&self.Object===Object&&self,T3=S3||E3||Function("return this")(),M3=T3.Symbol,C3=Object.prototype,I3=C3.hasOwnProperty,A3=C3.toString,k3=M3?M3.toStringTag:void 0;var P3=Object.prototype.toString;var R3=M3?M3.toStringTag:void 0;function O3(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R3&&R3 in Object(e)?function(e){var t=I3.call(e,k3),n=e[k3];try{e[k3]=void 0;var r=!0}catch(XY){}var i=A3.call(e);return r&&(t?e[k3]=n:delete e[k3]),i}(e):function(e){return P3.call(e)}(e)}function L3(e,t){return function(n){return e(t(n))}}var N3=L3(Object.getPrototypeOf,Object);function D3(e){return null!=e&&"object"==typeof e}var F3=Function.prototype,U3=Object.prototype,z3=F3.toString,j3=U3.hasOwnProperty,B3=z3.call(Object);function V3(e){if(!D3(e)||"[object Object]"!=O3(e))return!1;var t=N3(e);if(null===t)return!0;var n=j3.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&z3.call(n)==B3}function H3(e,t){return e===t||e!=e&&t!=t}function W3(e,t){for(var n=e.length;n--;)if(H3(e[n][0],t))return n;return-1}var G3=Array.prototype.splice;function q3(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function K3(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}q3.prototype.clear=function(){this.__data__=[],this.size=0},q3.prototype.delete=function(e){var t=this.__data__,n=W3(t,e);return!(n<0)&&(n==t.length-1?t.pop():G3.call(t,n,1),--this.size,!0)},q3.prototype.get=function(e){var t=this.__data__,n=W3(t,e);return n<0?void 0:t[n][1]},q3.prototype.has=function(e){return W3(this.__data__,e)>-1},q3.prototype.set=function(e,t){var n=this.__data__,r=W3(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function X3(e){if(!K3(e))return!1;var t=O3(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Y3,$3=T3["__core-js_shared__"],Q3=(Y3=/[^.]+$/.exec($3&&$3.keys&&$3.keys.IE_PROTO||""))?"Symbol(src)_1."+Y3:"";var J3=Function.prototype.toString;function Z3(e){if(null!=e){try{return J3.call(e)}catch(XY){}try{return e+""}catch(XY){}}return""}var e4=/^\[object .+?Constructor\]$/,t4=Function.prototype,n4=Object.prototype,r4=t4.toString,i4=n4.hasOwnProperty,o4=RegExp("^"+r4.call(i4).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function a4(e){return!(!K3(e)||(t=e,Q3&&Q3 in t))&&(X3(e)?o4:e4).test(Z3(e));var t}function s4(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return a4(n)?n:void 0}var u4=s4(T3,"Map"),l4=s4(Object,"create");var c4=Object.prototype.hasOwnProperty;var h4=Object.prototype.hasOwnProperty;function f4(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function d4(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function p4(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f4.prototype.clear=function(){this.__data__=l4?l4(null):{},this.size=0},f4.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},f4.prototype.get=function(e){var t=this.__data__;if(l4){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return c4.call(t,e)?t[e]:void 0},f4.prototype.has=function(e){var t=this.__data__;return l4?void 0!==t[e]:h4.call(t,e)},f4.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=l4&&void 0===t?"__lodash_hash_undefined__":t,this},p4.prototype.clear=function(){this.size=0,this.__data__={hash:new f4,map:new(u4||q3),string:new f4}},p4.prototype.delete=function(e){var t=d4(this,e).delete(e);return this.size-=t?1:0,t},p4.prototype.get=function(e){return d4(this,e).get(e)},p4.prototype.has=function(e){return d4(this,e).has(e)},p4.prototype.set=function(e,t){var n=d4(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function m4(e){var t=this.__data__=new q3(e);this.size=t.size}m4.prototype.clear=function(){this.__data__=new q3,this.size=0},m4.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},m4.prototype.get=function(e){return this.__data__.get(e)},m4.prototype.has=function(e){return this.__data__.has(e)},m4.prototype.set=function(e,t){var n=this.__data__;if(n instanceof q3){var r=n.__data__;if(!u4||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new p4(r)}return n.set(e,t),this.size=n.size,this};var v4=function(){try{var e=s4(Object,"defineProperty");return e({},"",{}),e}catch(XY){}}();function g4(e,t,n){"__proto__"==t&&v4?v4(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var y4=Object.prototype.hasOwnProperty;function b4(e,t,n){var r=e[t];y4.call(e,t)&&H3(r,n)&&(void 0!==n||t in e)||g4(e,t,n)}function _4(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?g4(n,s,u):b4(n,s,u)}return n}function w4(e){return D3(e)&&"[object Arguments]"==O3(e)}var x4=Object.prototype,S4=x4.hasOwnProperty,E4=x4.propertyIsEnumerable,T4=w4(function(){return arguments}())?w4:function(e){return D3(e)&&S4.call(e,"callee")&&!E4.call(e,"callee")},M4=Array.isArray;var C4="object"==typeof exports&&exports&&!exports.nodeType&&exports,I4=C4&&"object"==typeof module&&module&&!module.nodeType&&module,A4=I4&&I4.exports===C4?T3.Buffer:void 0,k4=(A4?A4.isBuffer:void 0)||function(){return!1},P4=/^(?:0|[1-9]\d*)$/;function R4(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&P4.test(e))&&e>-1&&e%1==0&&e<t}function O4(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var L4={};function N4(e){return function(t){return e(t)}}L4["[object Float32Array]"]=L4["[object Float64Array]"]=L4["[object Int8Array]"]=L4["[object Int16Array]"]=L4["[object Int32Array]"]=L4["[object Uint8Array]"]=L4["[object Uint8ClampedArray]"]=L4["[object Uint16Array]"]=L4["[object Uint32Array]"]=!0,L4["[object Arguments]"]=L4["[object Array]"]=L4["[object ArrayBuffer]"]=L4["[object Boolean]"]=L4["[object DataView]"]=L4["[object Date]"]=L4["[object Error]"]=L4["[object Function]"]=L4["[object Map]"]=L4["[object Number]"]=L4["[object Object]"]=L4["[object RegExp]"]=L4["[object Set]"]=L4["[object String]"]=L4["[object WeakMap]"]=!1;var D4="object"==typeof exports&&exports&&!exports.nodeType&&exports,F4=D4&&"object"==typeof module&&module&&!module.nodeType&&module,U4=F4&&F4.exports===D4&&S3.process,z4=function(){try{var e=F4&&F4.require&&F4.require("util").types;return e||U4&&U4.binding&&U4.binding("util")}catch(XY){}}(),j4=z4&&z4.isTypedArray,B4=j4?N4(j4):function(e){return D3(e)&&O4(e.length)&&!!L4[O3(e)]},V4=Object.prototype.hasOwnProperty;function H4(e,t){var n=M4(e),r=!n&&T4(e),i=!n&&!r&&k4(e),o=!n&&!r&&!i&&B4(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!V4.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||R4(l,u))||s.push(l);return s}var W4=Object.prototype;function G4(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||W4)}var q4=L3(Object.keys,Object),K4=Object.prototype.hasOwnProperty;function X4(e){return null!=e&&O4(e.length)&&!X3(e)}function Y4(e){return X4(e)?H4(e):function(e){if(!G4(e))return q4(e);var t=[];for(var n in Object(e))K4.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var $4=Object.prototype.hasOwnProperty;function Q4(e){if(!K3(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=G4(e),n=[];for(var r in e)("constructor"!=r||!t&&$4.call(e,r))&&n.push(r);return n}function J4(e){return X4(e)?H4(e,!0):Q4(e)}var Z4="object"==typeof exports&&exports&&!exports.nodeType&&exports,e5=Z4&&"object"==typeof module&&module&&!module.nodeType&&module,t5=e5&&e5.exports===Z4?T3.Buffer:void 0,n5=t5?t5.allocUnsafe:void 0;function r5(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function i5(){return[]}var o5=Object.prototype.propertyIsEnumerable,a5=Object.getOwnPropertySymbols,s5=a5?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(a5(e),(function(t){return o5.call(e,t)})))}:i5;function u5(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var l5=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)u5(t,s5(e)),e=N3(e);return t}:i5;function c5(e,t,n){var r=t(e);return M4(e)?r:u5(r,n(e))}function h5(e){return c5(e,Y4,s5)}function f5(e){return c5(e,J4,l5)}var d5=s4(T3,"DataView"),p5=s4(T3,"Promise"),m5=s4(T3,"Set"),v5=s4(T3,"WeakMap"),g5=Z3(d5),y5=Z3(u4),b5=Z3(p5),_5=Z3(m5),w5=Z3(v5),x5=O3;(d5&&"[object DataView]"!=x5(new d5(new ArrayBuffer(1)))||u4&&"[object Map]"!=x5(new u4)||p5&&"[object Promise]"!=x5(p5.resolve())||m5&&"[object Set]"!=x5(new m5)||v5&&"[object WeakMap]"!=x5(new v5))&&(x5=function(e){var t=O3(e),n="[object Object]"==t?e.constructor:void 0,r=n?Z3(n):"";if(r)switch(r){case g5:return"[object DataView]";case y5:return"[object Map]";case b5:return"[object Promise]";case _5:return"[object Set]";case w5:return"[object WeakMap]"}return t});var S5=x5,E5=Object.prototype.hasOwnProperty;var T5=T3.Uint8Array;function M5(e){var t=new e.constructor(e.byteLength);return new T5(t).set(new T5(e)),t}var C5=/\w*$/;var I5=M3?M3.prototype:void 0,A5=I5?I5.valueOf:void 0;function k5(e,t,n){var r,i,o,a=e.constructor;switch(t){case"[object ArrayBuffer]":return M5(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?M5(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?M5(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(o=new(i=e).constructor(i.source,C5.exec(i))).lastIndex=i.lastIndex,o;case"[object Set]":return new a;case"[object Symbol]":return r=e,A5?Object(A5.call(r)):{}}}var P5=Object.create,R5=function(){function e(){}return function(t){if(!K3(t))return{};if(P5)return P5(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var O5=z4&&z4.isMap,L5=O5?N4(O5):function(e){return D3(e)&&"[object Map]"==S5(e)};var N5=z4&&z4.isSet,D5=N5?N4(N5):function(e){return D3(e)&&"[object Set]"==S5(e)},F5={};function U5(e,t,n,r,i,o){var a,s=1&t,u=2&t,l=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!K3(e))return e;var c=M4(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&E5.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return r5(e,a)}else{var h=S5(e),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(k4(e))return function(e,t){if(t)return e.slice();var n=e.length,r=n5?n5(n):new e.constructor(n);return e.copy(r),r}(e,s);if("[object Object]"==h||"[object Arguments]"==h||f&&!i){if(a=u||f?{}:function(e){return"function"!=typeof e.constructor||G4(e)?{}:R5(N3(e))}(e),!s)return u?function(e,t){return _4(e,l5(e),t)}(e,function(e,t){return e&&_4(t,J4(t),e)}(a,e)):function(e,t){return _4(e,s5(e),t)}(e,function(e,t){return e&&_4(t,Y4(t),e)}(a,e))}else{if(!F5[h])return i?e:{};a=k5(e,h,s)}}o||(o=new m4);var d=o.get(e);if(d)return d;o.set(e,a),D5(e)?e.forEach((function(r){a.add(U5(r,t,n,r,e,o))})):L5(e)&&e.forEach((function(r,i){a.set(i,U5(r,t,n,i,e,o))}));var p=c?void 0:(l?u?f5:h5:u?J4:Y4)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,i){p&&(r=e[i=r]),b4(a,i,U5(r,t,n,i,e,o))})),a}F5["[object Arguments]"]=F5["[object Array]"]=F5["[object ArrayBuffer]"]=F5["[object DataView]"]=F5["[object Boolean]"]=F5["[object Date]"]=F5["[object Float32Array]"]=F5["[object Float64Array]"]=F5["[object Int8Array]"]=F5["[object Int16Array]"]=F5["[object Int32Array]"]=F5["[object Map]"]=F5["[object Number]"]=F5["[object Object]"]=F5["[object RegExp]"]=F5["[object Set]"]=F5["[object String]"]=F5["[object Symbol]"]=F5["[object Uint8Array]"]=F5["[object Uint8ClampedArray]"]=F5["[object Uint16Array]"]=F5["[object Uint32Array]"]=!0,F5["[object Error]"]=F5["[object Function]"]=F5["[object WeakMap]"]=!1;function z5(e){return U5(e,4)}function j5(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function B5(e){return"symbol"==typeof e||D3(e)&&"[object Symbol]"==O3(e)}function V5(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(V5.Cache||p4),n}V5.Cache=p4;var H5,W5,G5,q5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K5=/\\(\\)?/g,X5=(H5=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(q5,(function(e,n,r,i){t.push(r?i.replace(K5,"$1"):n||e)})),t},W5=V5(H5,(function(e){return 500===G5.size&&G5.clear(),e})),G5=W5.cache,W5);function Y5(e){if("string"==typeof e||B5(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var $5=M3?M3.prototype:void 0,Q5=$5?$5.toString:void 0;function J5(e){if("string"==typeof e)return e;if(M4(e))return j5(e,J5)+"";if(B5(e))return Q5?Q5.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Z5(e){return M4(e)?j5(e,Y5):B5(e)?[e]:r5(X5(function(e){return null==e?"":J5(e)}(e)))}function e6(){return(e6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function t6(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var n6=function(e){return"function"==typeof e},r6=function(e){return null!==e&&"object"==typeof e},i6=function(e){return String(Math.floor(Number(e)))===e},o6=function(e){return"[object String]"===Object.prototype.toString.call(e)},a6=function(e){return r6(e)&&n6(e.then)};function s6(e,t,n,r){void 0===r&&(r=0);for(var i=Z5(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function u6(e,t,n){for(var r=z5(e),i=r,o=0,a=Z5(t);o<a.length-1;o++){var s=a[o],u=s6(e,a.slice(0,o+1));if(u&&(r6(u)||Array.isArray(u)))i=i[s]=z5(u);else{var l=a[o+1];i=i[s]=i6(l)&&Number(l)>=0?[]:{}}}return(0===o?e:i)[a[o]]===n?e:(void 0===n?delete i[a[o]]:i[a[o]]=n,0===o&&void 0===n&&delete r[a[o]],r)}function l6(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];r6(s)?n.get(s)||(n.set(s,!0),r[a]=Array.isArray(s)?[]:{},l6(s,t,n,r[a])):r[a]=t}return r}var c6=s.exports.createContext(void 0);c6.displayName="FormikContext";var h6=c6.Provider;function f6(){var e=s.exports.useContext(c6);return e}function d6(e,t){switch(t.type){case"SET_VALUES":return e6({},e,{values:t.payload});case"SET_TOUCHED":return e6({},e,{touched:t.payload});case"SET_ERRORS":return v3(e.errors,t.payload)?e:e6({},e,{errors:t.payload});case"SET_STATUS":return e6({},e,{status:t.payload});case"SET_ISSUBMITTING":return e6({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return e6({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return e6({},e,{values:u6(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return e6({},e,{touched:u6(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return e6({},e,{errors:u6(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return e6({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return e6({},e,{touched:l6(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return e6({},e,{isSubmitting:!1});default:return e}}c6.Consumer;var p6={},m6={};function v6(e){var t=e.validateOnChange,n=void 0===t||t,r=e.validateOnBlur,i=void 0===r||r,o=e.validateOnMount,a=void 0!==o&&o,u=e.isInitialValid,l=e.enableReinitialize,c=void 0!==l&&l,h=e.onSubmit,f=t6(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=e6({validateOnChange:n,validateOnBlur:i,validateOnMount:a,onSubmit:h},f),p=s.exports.useRef(d.initialValues),m=s.exports.useRef(d.initialErrors||p6),v=s.exports.useRef(d.initialTouched||m6),g=s.exports.useRef(d.initialStatus),y=s.exports.useRef(!1),b=s.exports.useRef({});s.exports.useEffect((function(){return y.current=!0,function(){y.current=!1}}),[]);var _=s.exports.useReducer(d6,{values:d.initialValues,errors:d.initialErrors||p6,touched:d.initialTouched||m6,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),w=_[0],x=_[1],S=s.exports.useCallback((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(p6):a6(i)?i.then((function(e){n(e||p6)}),(function(e){r(e)})):n(i)}))}),[d.validate]),E=s.exports.useCallback((function(e,t){var n=d.validationSchema,r=n6(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=y6(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(p6)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return u6(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;s6(t,a.path)||(t=u6(t,a.path,a.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),T=s.exports.useCallback((function(e,t){return new Promise((function(n){return n(b.current[e].validate(t))}))}),[]),M=s.exports.useCallback((function(e){var t=Object.keys(b.current).filter((function(e){return n6(b.current[e].validate)})),n=t.length>0?t.map((function(t){return T(t,s6(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=u6(e,t[r],n)),e}),{})}))}),[T]),C=s.exports.useCallback((function(e){return Promise.all([M(e),d.validationSchema?E(e):{},d.validate?S(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return x3.all([t,n,r],{arrayMerge:b6})}))}),[d.validate,d.validationSchema,M,S,E]),I=w6((function(e){return void 0===e&&(e=w.values),x({type:"SET_ISVALIDATING",payload:!0}),C(e).then((function(e){return y.current&&(x({type:"SET_ISVALIDATING",payload:!1}),x({type:"SET_ERRORS",payload:e})),e}))}));s.exports.useEffect((function(){a&&!0===y.current&&v3(p.current,d.initialValues)&&I(p.current)}),[a,I]);var A=s.exports.useCallback((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:m.current?m.current:d.initialErrors||{},r=e&&e.touched?e.touched:v.current?v.current:d.initialTouched||{},i=e&&e.status?e.status:g.current?g.current:d.initialStatus;p.current=t,m.current=n,v.current=r,g.current=i;var o=function(){x({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var a=d.onReset(w.values,X);a6(a)?a.then(o):o()}else o()}),[d.initialErrors,d.initialStatus,d.initialTouched]);s.exports.useEffect((function(){!0!==y.current||v3(p.current,d.initialValues)||(c&&(p.current=d.initialValues,A()),a&&I(p.current))}),[c,d.initialValues,A,a,I]),s.exports.useEffect((function(){c&&!0===y.current&&!v3(m.current,d.initialErrors)&&(m.current=d.initialErrors||p6,x({type:"SET_ERRORS",payload:d.initialErrors||p6}))}),[c,d.initialErrors]),s.exports.useEffect((function(){c&&!0===y.current&&!v3(v.current,d.initialTouched)&&(v.current=d.initialTouched||m6,x({type:"SET_TOUCHED",payload:d.initialTouched||m6}))}),[c,d.initialTouched]),s.exports.useEffect((function(){c&&!0===y.current&&!v3(g.current,d.initialStatus)&&(g.current=d.initialStatus,x({type:"SET_STATUS",payload:d.initialStatus}))}),[c,d.initialStatus,d.initialTouched]);var k=w6((function(e){if(b.current[e]&&n6(b.current[e].validate)){var t=s6(w.values,e),n=b.current[e].validate(t);return a6(n)?(x({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),x({type:"SET_ISVALIDATING",payload:!1})}))):(x({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(x({type:"SET_ISVALIDATING",payload:!0}),E(w.values,e).then((function(e){return e})).then((function(t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),x({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),P=s.exports.useCallback((function(e,t){var n=t.validate;b.current[e]={validate:n}}),[]),R=s.exports.useCallback((function(e){delete b.current[e]}),[]),O=w6((function(e,t){return x({type:"SET_TOUCHED",payload:e}),(void 0===t?i:t)?I(w.values):Promise.resolve()})),L=s.exports.useCallback((function(e){x({type:"SET_ERRORS",payload:e})}),[]),N=w6((function(e,t){var r=n6(e)?e(w.values):e;return x({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?I(r):Promise.resolve()})),D=s.exports.useCallback((function(e,t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),F=w6((function(e,t,r){return x({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?I(u6(w.values,e,t)):Promise.resolve()})),U=s.exports.useCallback((function(e,t){var n,r=t,i=e;if(!o6(e)){e.persist&&e.persist();var o=e.target?e.target:e.currentTarget,a=o.type,s=o.name,u=o.id,l=o.value,c=o.checked,h=(o.outerHTML,o.options),f=o.multiple;r=t||(s||u),i=/number|range/.test(a)?(n=parseFloat(l),isNaN(n)?"":n):/checkbox/.test(a)?function(e,t,n){if("boolean"==typeof e)return Boolean(t);var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,i=(o=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,o).concat(r.slice(o+1))}(s6(w.values,r),c,l):h&&f?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(h):l}r&&F(r,i)}),[F,w.values]),z=w6((function(e){if(o6(e))return function(t){return U(t,e)};U(e)})),j=w6((function(e,t,n){return void 0===t&&(t=!0),x({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?i:n)?I(w.values):Promise.resolve()})),B=s.exports.useCallback((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,o=(n.outerHTML,t||(r||i));j(o,!0)}),[j]),V=w6((function(e){if(o6(e))return function(t){return B(t,e)};B(e)})),H=s.exports.useCallback((function(e){n6(e)?x({type:"SET_FORMIK_STATE",payload:e}):x({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),W=s.exports.useCallback((function(e){x({type:"SET_STATUS",payload:e})}),[]),G=s.exports.useCallback((function(e){x({type:"SET_ISSUBMITTING",payload:e})}),[]),q=w6((function(){return x({type:"SUBMIT_ATTEMPT"}),I().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Y()))return}catch(r){throw r}return Promise.resolve(n).then((function(e){return y.current&&x({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(y.current)throw x({type:"SUBMIT_FAILURE"}),e}))}if(y.current&&(x({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=w6((function(e){e&&e.preventDefault&&n6(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&n6(e.stopPropagation)&&e.stopPropagation(),q().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),X={resetForm:A,validateForm:I,validateField:k,setErrors:L,setFieldError:D,setFieldTouched:j,setFieldValue:F,setStatus:W,setSubmitting:G,setTouched:O,setValues:N,setFormikState:H,submitForm:q},Y=w6((function(){return h(w.values,X)})),$=w6((function(e){e&&e.preventDefault&&n6(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&n6(e.stopPropagation)&&e.stopPropagation(),A()})),Q=s.exports.useCallback((function(e){return{value:s6(w.values,e),error:s6(w.errors,e),touched:!!s6(w.touched,e),initialValue:s6(p.current,e),initialTouched:!!s6(v.current,e),initialError:s6(m.current,e)}}),[w.errors,w.touched,w.values]),J=s.exports.useCallback((function(e){return{setValue:function(t,n){return F(e,t,n)},setTouched:function(t,n){return j(e,t,n)},setError:function(t){return D(e,t)}}}),[F,j,D]),Z=s.exports.useCallback((function(e){var t=r6(e),n=t?e.name:e,r=s6(w.values,n),i={name:n,value:r,onChange:z,onBlur:V};if(t){var o=e.type,a=e.value,s=e.as,u=e.multiple;"checkbox"===o?void 0===a?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(a)),i.value=a):"radio"===o?(i.checked=r===a,i.value=a):"select"===s&&u&&(i.value=i.value||[],i.multiple=!0)}return i}),[V,z,w.values]),ee=s.exports.useMemo((function(){return!v3(p.current,w.values)}),[p.current,w.values]),te=s.exports.useMemo((function(){return void 0!==u?ee?w.errors&&0===Object.keys(w.errors).length:!1!==u&&n6(u)?u(d):u:w.errors&&0===Object.keys(w.errors).length}),[u,ee,w.errors,d]);return e6({},w,{initialValues:p.current,initialErrors:m.current,initialTouched:v.current,initialStatus:g.current,handleBlur:V,handleChange:z,handleReset:$,handleSubmit:K,resetForm:A,setErrors:L,setFormikState:H,setFieldTouched:j,setFieldValue:F,setFieldError:D,setStatus:W,setSubmitting:G,setTouched:O,setValues:N,submitForm:q,validateForm:I,validateField:k,isValid:te,dirty:ee,unregisterField:R,registerField:P,getFieldProps:Z,getFieldMeta:Q,getFieldHelpers:J,validateOnBlur:i,validateOnChange:n,validateOnMount:a})}function g6(e){var t=v6(e),n=e.component,r=e.children,i=e.render,o=e.innerRef;return s.exports.useImperativeHandle(o,(function(){return t})),s.exports.createElement(h6,{value:t},n?s.exports.createElement(n,t):i?i(t):r?n6(r)?r(t):function(e){return 0===s.exports.Children.count(e)}(r)?null:s.exports.Children.only(r):null)}function y6(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||V3(e)?y6(e):""!==e?e:void 0})):V3(e[r])?t[r]=y6(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function b6(e,t,n){var r=e.slice();return t.forEach((function(t,i){if(void 0===r[i]){var o=!1!==n.clone&&n.isMergeableObject(t);r[i]=o?x3(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=x3(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var _6="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.exports.useLayoutEffect:s.exports.useEffect;function w6(e){var t=s.exports.useRef(e);return _6((function(){t.current=e})),s.exports.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}function x6(e){var t=e.validate,n=e.name,r=e.render,i=e.children,o=e.as,a=e.component,u=t6(e,["validate","name","render","children","as","component"]),l=t6(f6(),["validate","validationSchema"]),c=l.registerField,h=l.unregisterField;s.exports.useEffect((function(){return c(n,{validate:t}),function(){h(n)}}),[c,h,n,t]);var f=l.getFieldProps(e6({name:n},u)),d=l.getFieldMeta(n),p={field:f,form:l};if(r)return r(e6({},p,{meta:d}));if(n6(i))return i(e6({},p,{meta:d}));if(a){if("string"==typeof a){var m=u.innerRef,v=t6(u,["innerRef"]);return s.exports.createElement(a,e6({ref:m},f,v),i)}return s.exports.createElement(a,e6({field:f,form:l},u),i)}var g=o||"input";if("string"==typeof g){var y=u.innerRef,b=t6(u,["innerRef"]);return s.exports.createElement(g,e6({ref:y},f,b),i)}return s.exports.createElement(g,e6({},f,u),i)}var S6,E6,T6=s.exports.forwardRef((function(e,t){var n=e.action,r=t6(e,["action"]),i=null!=n?n:"#",o=f6(),a=o.handleReset,u=o.handleSubmit;return s.exports.createElement("form",Object.assign({onSubmit:u,ref:t,onReset:a,action:i},r))}));T6.displayName="Form";try{S6=Map}catch(Aae){}try{E6=Set}catch(Aae){}function M6(e,t,n){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(C6);if(S6&&e instanceof S6)return new Map(Array.from(e.entries()));if(E6&&e instanceof E6)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var o=t.findIndex((function(t){return t===e[i]}));r[i]=o>-1?n[o]:M6(e[i],t,n)}return r}return e}function C6(e){return M6(e,[],[])}const I6=Object.prototype.toString,A6=Error.prototype.toString,k6=RegExp.prototype.toString,P6="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",R6=/^Symbol\((.*)\)(.*)$/;function O6(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return P6.call(e).replace(R6,"Symbol($1)");const r=I6.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+A6.call(e)+"]":"RegExp"===r?k6.call(e):null}function L6(e,t){let n=O6(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=O6(this[e],t);return null!==r?r:n}),2)}let N6={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{let i=null!=r&&r!==n,o=`${e} must be a \`${t}\` type, but the final value was: \`${L6(n,!0)}\``+(i?` (cast from the value \`${L6(r,!0)}\`).`:".");return null===n&&(o+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),o},defined:"${path} must be defined"},D6={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},F6={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},U6={noUnknown:"${path} field has unspecified keys: ${unknown}"};Object.assign(Object.create(null),{mixed:N6,string:D6,number:{min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date:F6,object:U6,array:{min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must be have ${length} items"},boolean:{isValue:"${path} field must be ${value}"}});var z6=Object.prototype.hasOwnProperty;var j6=function(e,t){return null!=e&&z6.call(e,t)},B6=Array.isArray,V6="object"==typeof o&&o&&o.Object===Object&&o,H6=V6,W6="object"==typeof self&&self&&self.Object===Object&&self,G6=H6||W6||Function("return this")(),q6=G6.Symbol,K6=q6,X6=Object.prototype,Y6=X6.hasOwnProperty,$6=X6.toString,Q6=K6?K6.toStringTag:void 0;var J6=function(e){var t=Y6.call(e,Q6),n=e[Q6];try{e[Q6]=void 0;var r=!0}catch(XY){}var i=$6.call(e);return r&&(t?e[Q6]=n:delete e[Q6]),i},Z6=Object.prototype.toString;var e8=J6,t8=function(e){return Z6.call(e)},n8=q6?q6.toStringTag:void 0;var r8=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n8&&n8 in Object(e)?e8(e):t8(e)};var i8=function(e){return null!=e&&"object"==typeof e},o8=r8,a8=i8;var s8=function(e){return"symbol"==typeof e||a8(e)&&"[object Symbol]"==o8(e)},u8=B6,l8=s8,c8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h8=/^\w*$/;var f8=function(e,t){if(u8(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!l8(e))||(h8.test(e)||!c8.test(e)||null!=t&&e in Object(t))};var d8=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},p8=r8,m8=d8;var v8=function(e){if(!m8(e))return!1;var t=p8(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},g8=G6["__core-js_shared__"],y8=function(){var e=/[^.]+$/.exec(g8&&g8.keys&&g8.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var b8=function(e){return!!y8&&y8 in e},_8=Function.prototype.toString;var w8=function(e){if(null!=e){try{return _8.call(e)}catch(XY){}try{return e+""}catch(XY){}}return""},x8=v8,S8=b8,E8=d8,T8=w8,M8=/^\[object .+?Constructor\]$/,C8=Function.prototype,I8=Object.prototype,A8=C8.toString,k8=I8.hasOwnProperty,P8=RegExp("^"+A8.call(k8).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var R8=function(e){return!(!E8(e)||S8(e))&&(x8(e)?P8:M8).test(T8(e))},O8=function(e,t){return null==e?void 0:e[t]};var L8=function(e,t){var n=O8(e,t);return R8(n)?n:void 0},N8=L8(Object,"create"),D8=N8;var F8=function(){this.__data__=D8?D8(null):{},this.size=0};var U8=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},z8=N8,j8=Object.prototype.hasOwnProperty;var B8=function(e){var t=this.__data__;if(z8){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return j8.call(t,e)?t[e]:void 0},V8=N8,H8=Object.prototype.hasOwnProperty;var W8=N8;var G8=F8,q8=U8,K8=B8,X8=function(e){var t=this.__data__;return V8?void 0!==t[e]:H8.call(t,e)},Y8=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=W8&&void 0===t?"__lodash_hash_undefined__":t,this};function $8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$8.prototype.clear=G8,$8.prototype.delete=q8,$8.prototype.get=K8,$8.prototype.has=X8,$8.prototype.set=Y8;var Q8=$8;var J8=function(){this.__data__=[],this.size=0};var Z8=function(e,t){return e===t||e!=e&&t!=t},e7=Z8;var t7=function(e,t){for(var n=e.length;n--;)if(e7(e[n][0],t))return n;return-1},n7=t7,r7=Array.prototype.splice;var i7=t7;var o7=t7;var a7=t7;var s7=J8,u7=function(e){var t=this.__data__,n=n7(t,e);return!(n<0)&&(n==t.length-1?t.pop():r7.call(t,n,1),--this.size,!0)},l7=function(e){var t=this.__data__,n=i7(t,e);return n<0?void 0:t[n][1]},c7=function(e){return o7(this.__data__,e)>-1},h7=function(e,t){var n=this.__data__,r=a7(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function f7(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f7.prototype.clear=s7,f7.prototype.delete=u7,f7.prototype.get=l7,f7.prototype.has=c7,f7.prototype.set=h7;var d7=f7,p7=L8(G6,"Map"),m7=Q8,v7=d7,g7=p7;var y7=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var b7=function(e,t){var n=e.__data__;return y7(t)?n["string"==typeof t?"string":"hash"]:n.map},_7=b7;var w7=b7;var x7=b7;var S7=b7;var E7=function(){this.size=0,this.__data__={hash:new m7,map:new(g7||v7),string:new m7}},T7=function(e){var t=_7(this,e).delete(e);return this.size-=t?1:0,t},M7=function(e){return w7(this,e).get(e)},C7=function(e){return x7(this,e).has(e)},I7=function(e,t){var n=S7(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function A7(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}A7.prototype.clear=E7,A7.prototype.delete=T7,A7.prototype.get=M7,A7.prototype.has=C7,A7.prototype.set=I7;var k7=A7,P7=k7;function R7(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(R7.Cache||P7),n}R7.Cache=P7;var O7=R7;var L7=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N7=/\\(\\)?/g,D7=function(e){var t=O7(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(L7,(function(e,n,r,i){t.push(r?i.replace(N7,"$1"):n||e)})),t}));var F7=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},U7=B6,z7=s8,j7=q6?q6.prototype:void 0,B7=j7?j7.toString:void 0;var V7=function e(t){if("string"==typeof t)return t;if(U7(t))return F7(t,e)+"";if(z7(t))return B7?B7.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var H7=function(e){return null==e?"":V7(e)},W7=B6,G7=f8,q7=D7,K7=H7;var X7=function(e,t){return W7(e)?e:G7(e,t)?[e]:q7(K7(e))},Y7=r8,$7=i8;var Q7=function(e){return $7(e)&&"[object Arguments]"==Y7(e)},J7=i8,Z7=Object.prototype,e9=Z7.hasOwnProperty,t9=Z7.propertyIsEnumerable,n9=Q7(function(){return arguments}())?Q7:function(e){return J7(e)&&e9.call(e,"callee")&&!t9.call(e,"callee")},r9=/^(?:0|[1-9]\d*)$/;var i9=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r9.test(e))&&e>-1&&e%1==0&&e<t};var o9=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},a9=s8;var s9=function(e){if("string"==typeof e||a9(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},u9=X7,l9=n9,c9=B6,h9=i9,f9=o9,d9=s9;var p9=function(e,t,n){for(var r=-1,i=(t=u9(t,e)).length,o=!1;++r<i;){var a=d9(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&f9(i)&&h9(a,i)&&(c9(e)||l9(e))},m9=j6,v9=p9;var g9=function(e,t){return null!=e&&v9(e,t,m9)},y9=e=>e&&e.__isYupSchema__;class b9{constructor(e,t){if(this.refs=e,this.refs=e,"function"==typeof t)return void(this.fn=t);if(!g9(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,o="function"==typeof n?n:(...e)=>e.every((e=>e===n));this.fn=function(...e){let t=e.pop(),n=e.pop(),a=o(...e)?r:i;if(a)return"function"==typeof a?a(n):n.concat(a.resolve(t))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!y9(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}function _9(e){return null==e?[]:[].concat(e)}function w9(){return(w9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let x9=/\$\{\s*(\w+)\s*\}/g;class S9 extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=w9({},t,{path:n})),"string"==typeof e?e.replace(x9,((e,n)=>L6(t[n]))):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],_9(e).forEach((e=>{S9.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,S9)}}function E9(e,t){let{endEarly:n,tests:r,args:i,value:o,errors:a,sort:s,path:u}=e,l=(e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}})(t),c=r.length;const h=[];if(a=a||[],!c)return a.length?l(new S9(a,o,u)):l(null,o);for(let f=0;f<r.length;f++){(0,r[f])(i,(function(e){if(e){if(!S9.isError(e))return l(e,o);if(n)return e.value=o,l(e,o);h.push(e)}if(--c<=0){if(h.length&&(s&&h.sort(s),a.length&&h.push(...a),a=h),a.length)return void l(new S9(a,o,u),o);l(null,o)}}))}}var T9=L8,M9=function(){try{var e=T9(Object,"defineProperty");return e({},"",{}),e}catch(XY){}}();var C9=function(e,t,n){"__proto__"==t&&M9?M9(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var I9=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}();var A9=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},k9={exports:{}};var P9=function(){return!1};!function(e,t){var n=G6,r=P9,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;e.exports=s}(k9,k9.exports);var R9=r8,O9=o9,L9=i8,N9={};N9["[object Float32Array]"]=N9["[object Float64Array]"]=N9["[object Int8Array]"]=N9["[object Int16Array]"]=N9["[object Int32Array]"]=N9["[object Uint8Array]"]=N9["[object Uint8ClampedArray]"]=N9["[object Uint16Array]"]=N9["[object Uint32Array]"]=!0,N9["[object Arguments]"]=N9["[object Array]"]=N9["[object ArrayBuffer]"]=N9["[object Boolean]"]=N9["[object DataView]"]=N9["[object Date]"]=N9["[object Error]"]=N9["[object Function]"]=N9["[object Map]"]=N9["[object Number]"]=N9["[object Object]"]=N9["[object RegExp]"]=N9["[object Set]"]=N9["[object String]"]=N9["[object WeakMap]"]=!1;var D9=function(e){return L9(e)&&O9(e.length)&&!!N9[R9(e)]};var F9=function(e){return function(t){return e(t)}},U9={exports:{}};!function(e,t){var n=V6,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(XY){}}();e.exports=a}(U9,U9.exports);var z9=D9,j9=F9,B9=U9.exports,V9=B9&&B9.isTypedArray,H9=V9?j9(V9):z9,W9=A9,G9=n9,q9=B6,K9=k9.exports,X9=i9,Y9=H9,$9=Object.prototype.hasOwnProperty;var Q9=function(e,t){var n=q9(e),r=!n&&G9(e),i=!n&&!r&&K9(e),o=!n&&!r&&!i&&Y9(e),a=n||r||i||o,s=a?W9(e.length,String):[],u=s.length;for(var l in e)!t&&!$9.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||X9(l,u))||s.push(l);return s},J9=Object.prototype;var Z9=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J9)};var eee=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),tee=Z9,nee=eee,ree=Object.prototype.hasOwnProperty;var iee=v8,oee=o9;var aee=Q9,see=function(e){if(!tee(e))return nee(e);var t=[];for(var n in Object(e))ree.call(e,n)&&"constructor"!=n&&t.push(n);return t},uee=function(e){return null!=e&&oee(e.length)&&!iee(e)};var lee=function(e){return uee(e)?aee(e):see(e)},cee=I9,hee=lee;var fee=function(e,t){return e&&cee(e,t,hee)},dee=d7;var pee=d7,mee=p7,vee=k7;var gee=d7,yee=function(){this.__data__=new dee,this.size=0},bee=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},_ee=function(e){return this.__data__.get(e)},wee=function(e){return this.__data__.has(e)},xee=function(e,t){var n=this.__data__;if(n instanceof pee){var r=n.__data__;if(!mee||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vee(r)}return n.set(e,t),this.size=n.size,this};function See(e){var t=this.__data__=new gee(e);this.size=t.size}See.prototype.clear=yee,See.prototype.delete=bee,See.prototype.get=_ee,See.prototype.has=wee,See.prototype.set=xee;var Eee=See;var Tee=k7,Mee=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Cee=function(e){return this.__data__.has(e)};function Iee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Tee;++t<n;)this.add(e[t])}Iee.prototype.add=Iee.prototype.push=Mee,Iee.prototype.has=Cee;var Aee=Iee,kee=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Pee=function(e,t){return e.has(t)};var Ree=function(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var h=-1,f=!0,d=2&n?new Aee:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(r)var v=a?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!kee(t,(function(e,t){if(!Pee(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){f=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var Oee=G6.Uint8Array,Lee=Z8,Nee=Ree,Dee=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Fee=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Uee=q6?q6.prototype:void 0,zee=Uee?Uee.valueOf:void 0;var jee=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Oee(e),new Oee(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Lee(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Dee;case"[object Set]":var u=1&r;if(s||(s=Fee),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=Nee(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(zee)return zee.call(e)==zee.call(t)}return!1};var Bee=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Vee=B6;var Hee=function(e,t,n){var r=t(e);return Vee(e)?r:Bee(r,n(e))};var Wee=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},Gee=function(){return[]},qee=Object.prototype.propertyIsEnumerable,Kee=Object.getOwnPropertySymbols,Xee=Hee,Yee=Kee?function(e){return null==e?[]:(e=Object(e),Wee(Kee(e),(function(t){return qee.call(e,t)})))}:Gee,$ee=lee;var Qee=function(e){return Xee(e,$ee,Yee)},Jee=Object.prototype.hasOwnProperty;var Zee=function(e,t,n,r,i,o){var a=1&n,s=Qee(e),u=s.length;if(u!=Qee(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:Jee.call(t,c)))return!1}var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<u;){var m=e[c=s[l]],v=t[c];if(r)var g=a?r(v,m,c,t,e,o):r(m,v,c,e,t,o);if(!(void 0===g?m===v||i(m,v,n,r,o):g)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(e),o.delete(t),d},ete=L8(G6,"DataView"),tte=p7,nte=L8(G6,"Promise"),rte=L8(G6,"Set"),ite=L8(G6,"WeakMap"),ote=r8,ate=w8,ste=ate(ete),ute=ate(tte),lte=ate(nte),cte=ate(rte),hte=ate(ite),fte=ote;(ete&&"[object DataView]"!=fte(new ete(new ArrayBuffer(1)))||tte&&"[object Map]"!=fte(new tte)||nte&&"[object Promise]"!=fte(nte.resolve())||rte&&"[object Set]"!=fte(new rte)||ite&&"[object WeakMap]"!=fte(new ite))&&(fte=function(e){var t=ote(e),n="[object Object]"==t?e.constructor:void 0,r=n?ate(n):"";if(r)switch(r){case ste:return"[object DataView]";case ute:return"[object Map]";case lte:return"[object Promise]";case cte:return"[object Set]";case hte:return"[object WeakMap]"}return t});var dte=Eee,pte=Ree,mte=jee,vte=Zee,gte=fte,yte=B6,bte=k9.exports,_te=H9,wte="[object Object]",xte=Object.prototype.hasOwnProperty;var Ste=function(e,t,n,r,i,o){var a=yte(e),s=yte(t),u=a?"[object Array]":gte(e),l=s?"[object Array]":gte(t),c=(u="[object Arguments]"==u?wte:u)==wte,h=(l="[object Arguments]"==l?wte:l)==wte,f=u==l;if(f&&bte(e)){if(!bte(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new dte),a||_te(e)?pte(e,t,n,r,i,o):mte(e,t,u,n,r,i,o);if(!(1&n)){var d=c&&xte.call(e,"__wrapped__"),p=h&&xte.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,v=p?t.value():t;return o||(o=new dte),i(m,v,n,r,o)}}return!!f&&(o||(o=new dte),vte(e,t,n,r,i,o))},Ete=i8;var Tte=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Ete(t)&&!Ete(n)?t!=t&&n!=n:Ste(t,n,r,i,e,o))},Mte=Eee,Cte=Tte;var Ite=d8;var Ate=function(e){return e==e&&!Ite(e)},kte=Ate,Pte=lee;var Rte=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},Ote=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var h=new Mte;if(r)var f=r(l,c,u,e,t,h);if(!(void 0===f?Cte(c,l,3,r,h):f))return!1}}return!0},Lte=function(e){for(var t=Pte(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,kte(i)]}return t},Nte=Rte;var Dte=X7,Fte=s9;var Ute=function(e,t){for(var n=0,r=(t=Dte(t,e)).length;null!=e&&n<r;)e=e[Fte(t[n++])];return n&&n==r?e:void 0},zte=Ute;var jte=function(e,t){return null!=e&&t in Object(e)},Bte=p9;var Vte=Tte,Hte=function(e,t,n){var r=null==e?void 0:zte(e,t);return void 0===r?n:r},Wte=function(e,t){return null!=e&&Bte(e,t,jte)},Gte=f8,qte=Ate,Kte=Rte,Xte=s9;var Yte=Ute;var $te=function(e){return function(t){return null==t?void 0:t[e]}},Qte=function(e){return function(t){return Yte(t,e)}},Jte=f8,Zte=s9;var ene=function(e){var t=Lte(e);return 1==t.length&&t[0][2]?Nte(t[0][0],t[0][1]):function(n){return n===e||Ote(n,e,t)}},tne=function(e,t){return Gte(e)&&qte(t)?Kte(Xte(e),t):function(n){var r=Hte(n,e);return void 0===r&&r===t?Wte(n,e):Vte(t,r,3)}},nne=function(e){return e},rne=B6,ine=function(e){return Jte(e)?$te(Zte(e)):Qte(e)};var one=function(e){return"function"==typeof e?e:null==e?nne:"object"==typeof e?rne(e)?tne(e[0],e[1]):ene(e):ine(e)},ane=C9,sne=fee,une=one;var lne=function(e,t){var n={};return t=une(t),sne(e,(function(e,r,i){ane(n,r,t(e,r,i))})),n};function cne(e){this._maxSize=e,this.clear()}cne.prototype.clear=function(){this._size=0,this._values=Object.create(null)},cne.prototype.get=function(e){return this._values[e]},cne.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var hne=/[^.^\]^[]+|(?=\[\]|\.\.)/g,fne=/^\d+$/,dne=/^\d/,pne=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,mne=/^\s*(['"]?)(.*?)(\1)\s*$/,vne=new cne(512),gne=new cne(512),yne=new cne(512),bne={Cache:cne,split:wne,normalizePath:_ne,setter:function(e){var t=_ne(e);return gne.get(e)||gne.set(e,(function(e,n){for(var r=0,i=t.length,o=e;r<i-1;){var a=t[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return e;o=o[t[r++]]}o[t[r]]=n}))},getter:function(e,t){var n=_ne(e);return yne.get(e)||yne.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(xne(t)||fne.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,o,a,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(Sne(r)&&(r='"'+r+'"'),o=!(a=xne(r))&&/^\d+$/.test(r),t.call(n,r,a,o,i,e))}(Array.isArray(e)?e:wne(e),t,n)}};function _ne(e){return vne.get(e)||vne.set(e,wne(e).map((function(e){return e.replace(mne,"$2")})))}function wne(e){return e.match(hne)}function xne(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function Sne(e){return!xne(e)&&(function(e){return e.match(dne)&&!e.match(fne)}(e)||function(e){return pne.test(e)}(e))}const Ene="$",Tne=".";class Mne{constructor(e,t={}){if("string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ene,this.isValue=this.key[0]===Tne,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?Ene:this.isValue?Tne:"";this.path=this.key.slice(n.length),this.getter=this.path&&bne.getter(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function Cne(){return(Cne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ine(e){function t(t,n){let{value:r,path:i="",label:o,options:a,originalValue:s,sync:u}=t,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]);const{name:c,test:h,params:f,message:d}=e;let{parent:p,context:m}=a;function v(e){return Mne.isRef(e)?e.getValue(r,p,m):e}function g(e={}){const t=lne(Cne({value:r,originalValue:s,label:o,path:e.path||i},f,e.params),v),n=new S9(S9.formatError(e.message||d,t),r,t.path,e.type||c);return n.params=t,n}let y,b=Cne({path:i,parent:p,type:c,createError:g,resolve:v,options:a,originalValue:s},l);if(u){try{var _;if(y=h.call(b,r,b),"function"==typeof(null==(_=y)?void 0:_.then))throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(w){return void n(w)}S9.isError(y)?n(y):y?n(null,y):n(g())}else try{Promise.resolve(h.call(b,r,b)).then((e=>{S9.isError(e)?n(e):e?n(null,e):n(g())}))}catch(w){n(w)}}return t.OPTIONS=e,t}Mne.prototype.__isYupRef=!0;function Ane(e,t,n,r=n){let i,o,a;return t?(bne.forEach(t,((s,u,l)=>{let c=u?(e=>e.substr(0,e.length-1).substr(1))(s):s;if((e=e.resolve({context:r,parent:i,value:n})).innerType){let r=l?parseInt(c,10):0;if(n&&r>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[r],e=e.innerType}if(!l){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e._type}")`);i=n,n=n&&n[c],e=e.fields[c]}o=c,a=u?"["+s+"]":"."+s})),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class kne{constructor(){this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}add(e){Mne.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Mne.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}has(e,t){if(this.list.has(e))return!0;let n,r=this.refs.values();for(;n=r.next(),!n.done;)if(t(n.value)===e)return!0;return!1}clone(){const e=new kne;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function Pne(){return(Pne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Rne{constructor(e){this.deps=[],this.conditions=[],this._whitelist=new kne,this._blacklist=new kne,this.exclusiveTests=Object.create(null),this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(N6.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=Pne({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=Pne({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=C6(Pne({},this.spec,e)),t}label(e){var t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=Pne({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(Pne({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let i=L6(e),o=L6(r);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". \n\nattempted value: ${i} \n`+(o!==i?`result of cast: ${o}`:""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:r,path:i,from:o=[],originalValue:a=e,strict:s=this.spec.strict,abortEarly:u=this.spec.abortEarly}=t,l=e;s||(l=this._cast(l,Pne({assert:!1},t)));let c={value:l,path:i,options:t,originalValue:a,schema:this,label:this.spec.label,sync:r,from:o},h=[];this._typeError&&h.push(this._typeError),this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),E9({args:c,value:l,path:i,sync:r,tests:h,endEarly:u},(e=>{e?n(e,l):E9({tests:this.tests,args:c,path:i,sync:r,value:l,endEarly:u},n)}))}validate(e,t,n){let r=this.resolve(Pne({},t,{value:e}));return"function"==typeof n?r._validate(e,t,n):new Promise(((n,i)=>r._validate(e,t,((e,t)=>{e?i(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(Pne({},t,{value:e}))._validate(e,Pne({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(S9.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(S9.isError(n))return!1;throw n}}_getDefault(){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this):C6(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){var t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=N6.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=N6.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){var e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){var t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=N6.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=Ine(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let n=this.clone(),r=_9(e).map((e=>new Mne(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new b9(r,t)),n}typeError(e){var t=this.clone();return t._typeError=Ine({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=N6.oneOf){var n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=Ine({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist;return!!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),n}notOneOf(e,t=N6.notOneOf){var n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=Ine({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist;return!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec;return{meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))}}}Rne.prototype.__isYupSchema__=!0;for(const kae of["validate","validateSync"])Rne.prototype[`${kae}At`]=function(e,t,n={}){const{parent:r,parentPath:i,schema:o}=Ane(this,e,t,n.context);return o[kae](r&&r[i],Pne({},n,{parent:r,path:e}))};for(const kae of["equals","is"])Rne.prototype[kae]=Rne.prototype.oneOf;for(const kae of["not","nope"])Rne.prototype[kae]=Rne.prototype.notOneOf;Rne.prototype.optional=Rne.prototype.notRequired;var One=e=>null==e;let Lne=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,Nne=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Dne=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fne=e=>One(e)||e===e.trim(),Une={}.toString();function zne(){return new jne}class jne extends Rne{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===Une?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=D6.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return One(t)||t.length===this.resolve(e)}})}min(e,t=D6.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return One(t)||t.length>=this.resolve(e)}})}max(e,t=D6.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return One(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"==typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||D6.matches,params:{regex:e},test:t=>One(t)||""===t&&i||-1!==t.search(e)})}email(e=D6.email){return this.matches(Lne,{name:"email",message:e,excludeEmptyString:!0})}url(e=D6.url){return this.matches(Nne,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=D6.uuid){return this.matches(Dne,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=D6.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:Fne})}lowercase(e=D6.lowercase){return this.transform((e=>One(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>One(e)||e===e.toLowerCase()})}uppercase(e=D6.uppercase){return this.transform((e=>One(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>One(e)||e===e.toUpperCase()})}}zne.prototype=jne.prototype;var Bne=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let Vne=new Date("");(class extends Rne{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Bne.exec(e)){for(var o,a=0;o=r[a];++a)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?Vne:new Date(e))}))}))}_typeCheck(e){return(e=>"[object Date]"===Object.prototype.toString.call(e))(e)&&!isNaN(e.getTime())}prepareParam(e,t){let n;if(Mne.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=F6.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return One(e)||e>=this.resolve(n)}})}max(e,t=F6.max){var n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return One(e)||e<=this.resolve(n)}})}}).INVALID_DATE=Vne;var Hne=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};var Wne=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Gne=H7,qne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kne=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Xne=function(e){return(e=Gne(e))&&e.replace(qne,Wne).replace(Kne,"")},Yne=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var $ne=function(e){return e.match(Yne)||[]},Qne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Jne=function(e){return Qne.test(e)},Zne="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ere="["+Zne+"]",tre="\\d+",nre="[\\u2700-\\u27bf]",rre="[a-z\\xdf-\\xf6\\xf8-\\xff]",ire="[^\\ud800-\\udfff"+Zne+tre+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ore="(?:\\ud83c[\\udde6-\\uddff]){2}",are="[\\ud800-\\udbff][\\udc00-\\udfff]",sre="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ure="(?:"+rre+"|"+ire+")",lre="(?:"+sre+"|"+ire+")",cre="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",hre="[\\ufe0e\\ufe0f]?"+cre+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",ore,are].join("|")+")[\\ufe0e\\ufe0f]?"+cre+")*"),fre="(?:"+[nre,ore,are].join("|")+")"+hre,dre=RegExp([sre+"?"+rre+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ere,sre,"$"].join("|")+")",lre+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ere,sre+ure,"$"].join("|")+")",sre+"?"+ure+"+(?:['’](?:d|ll|m|re|s|t|ve))?",sre+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tre,fre].join("|"),"g");var pre=$ne,mre=Jne,vre=H7,gre=function(e){return e.match(dre)||[]};var yre=Hne,bre=Xne,_re=function(e,t,n){return e=vre(e),void 0===(t=n?void 0:t)?mre(e)?gre(e):pre(e):e.match(t)||[]},wre=RegExp("['’]","g");var xre=function(e){return function(t){return yre(_re(bre(t).replace(wre,"")),e,"")}},Sre=xre((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ere=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var Tre=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Ere(e,t,n)},Mre=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Cre=function(e){return Mre.test(e)};var Ire=function(e){return e.split("")},Are="[\\ud800-\\udfff]",kre="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pre="\\ud83c[\\udffb-\\udfff]",Rre="[^\\ud800-\\udfff]",Ore="(?:\\ud83c[\\udde6-\\uddff]){2}",Lre="[\\ud800-\\udbff][\\udc00-\\udfff]",Nre="(?:"+kre+"|"+Pre+")"+"?",Dre="[\\ufe0e\\ufe0f]?"+Nre+("(?:\\u200d(?:"+[Rre,Ore,Lre].join("|")+")[\\ufe0e\\ufe0f]?"+Nre+")*"),Fre="(?:"+[Rre+kre+"?",kre,Ore,Lre,Are].join("|")+")",Ure=RegExp(Pre+"(?="+Pre+")|"+Fre+Dre,"g");var zre=Ire,jre=Cre,Bre=function(e){return e.match(Ure)||[]};var Vre=Tre,Hre=Cre,Wre=function(e){return jre(e)?Bre(e):zre(e)},Gre=H7;var qre=function(e){return function(t){t=Gre(t);var n=Hre(t)?Wre(t):void 0,r=n?n[0]:t.charAt(0),i=n?Vre(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),Kre=H7,Xre=qre;var Yre=function(e){return Xre(Kre(e).toLowerCase())},$re=xre((function(e,t,n){return t=t.toLowerCase(),e+(n?Yre(t):t)})),Qre=C9,Jre=fee,Zre=one;var eie=function(e,t){var n={};return t=Zre(t),Jre(e,(function(e,r,i){Qre(n,t(e,r,i),e)})),n},tie={exports:{}};function nie(e,t){var n=e.length,r=new Array(n),i={},o=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||u(e[o],o,new Set);return r;function u(e,t,o){if(o.has(e)){var l;try{l=", node was:"+JSON.stringify(e)}catch(XY){l=""}throw new Error("Cyclic dependency"+l)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var c=a.get(e)||new Set;if(t=(c=Array.from(c)).length){o.add(e);do{var h=c[--t];u(h,s.get(h),o)}while(t);o.delete(e)}r[--n]=e}}}tie.exports=function(e){return nie(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},tie.exports.array=nie;var rie=tie.exports;function iie(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function oie(e){return(t,n)=>iie(e,t)-iie(e,n)}function aie(){return(aie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let sie=e=>"[object Object]"===Object.prototype.toString.call(e);const uie=oie([]);class lie extends Rne{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=uie,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return sie(e)||"function"==typeof e}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,a=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),s={},u=aie({},t,{parent:s,__validating:t.__validating||!1}),l=!1;for(const c of a){let e=i[c],n=g9(r,c);if(e){let n,i=r[c];u.path=(t.path?`${t.path}.`:"")+c,e=e.resolve({value:i,context:t.context,parent:s});let o="spec"in e?e.spec:void 0,a=null==o?void 0:o.strict;if(null==o?void 0:o.strip){l=l||c in r;continue}n=t.__validating&&a?r[c]:e.cast(r[c],u),void 0!==n&&(s[c]=n)}else n&&!o&&(s[c]=r[c]);s[c]!==r[c]&&(l=!0)}return l?s:r}_validate(e,t={},n){let r=[],{sync:i,from:o=[],originalValue:a=e,abortEarly:s=this.spec.abortEarly,recursive:u=this.spec.recursive}=t;o=[{schema:this,value:a},...o],t.__validating=!0,t.originalValue=a,t.from=o,super._validate(e,t,((e,l)=>{if(e){if(!S9.isError(e)||s)return void n(e,l);r.push(e)}if(!u||!sie(l))return void n(r[0]||null,l);a=a||l;let c=this._nodes.map((e=>(n,r)=>{let i=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,s=this.fields[e];s&&"validate"in s?s.validate(l[e],aie({},t,{path:i,from:o,strict:!0,parent:l,originalValue:a[e]}),r):r(null)}));E9({sync:i,tests:c,value:l,errors:r,endEarly:s,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=aie({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];void 0===e?n[r]=i:e instanceof Rne&&i instanceof Rne&&(n[r]=i.concat(e))}return t.withMutation((()=>t.shape(n)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let n=this.clone(),r=Object.assign(n.fields,e);if(n.fields=r,n._sortErrors=oie(Object.keys(r)),t.length){Array.isArray(t[0])||(t=[t]);let e=t.map((([e,t])=>`${e}-${t}`));n._excludedEdges=n._excludedEdges.concat(e)}return n._nodes=function(e,t=[]){let n=[],r=[];function i(e,i){var o=bne.split(e)[0];~r.indexOf(o)||r.push(o),~t.indexOf(`${i}-${o}`)||n.push([i,o])}for(const o in e)if(g9(e,o)){let t=e[o];~r.indexOf(o)||r.push(o),Mne.isRef(t)&&t.isSibling?i(t.path,o):y9(t)&&"deps"in t&&t.deps.forEach((e=>i(e,o)))}return rie.array(r,n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const r of e)delete n[r];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=bne.getter(e,!0);return this.transform((i=>{if(null==i)return i;let o=i;return g9(i,e)&&(o=aie({},i),n||delete o[e],o[t]=r(i)),o}))}noUnknown(e=!0,t=U6.noUnknown){"string"==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=U6.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&eie(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys($re)}snakeCase(){return this.transformKeys(Sre)}constantCase(){return this.transformKeys((e=>Sre(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=lne(this.fields,(e=>e.describe())),e}}function cie(e){return new lie(e)}cie.prototype=lie.prototype;const hie={_origin:"https://api.emailjs.com"},fie=(e,t,n)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class die{constructor(e){this.status=e.status,this.text=e.responseText}}const pie=(e,t,n={})=>new Promise(((r,i)=>{const o=new XMLHttpRequest;o.addEventListener("load",(({target:e})=>{const t=new die(e);200===t.status||"OK"===t.text?r(t):i(t)})),o.addEventListener("error",(({target:e})=>{i(new die(e))})),o.open("POST",hie._origin+e,!0),Object.keys(n).forEach((e=>{o.setRequestHeader(e,n[e])})),o.send(t)}));var mie={init:(e,t="https://api.emailjs.com")=>{hie._userID=e,hie._origin=t},send:(e,t,n,r)=>{const i=r||hie._userID;fie(i,e,t);const o={lib_version:"3.2.0",user_id:i,service_id:e,template_id:t,template_params:n};return pie("/api/v1.0/email/send",JSON.stringify(o),{"Content-type":"application/json"})},sendForm:(e,t,n,r)=>{const i=r||hie._userID,o=(e=>{let t;if(t="string"==typeof e?document.querySelector(e):e,!t||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t})(n);fie(i,e,t);const a=new FormData(o);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),pie("/api/v1.0/email/send-form",a)}},vie={},gie={},yie={},bie={},_ie=/^\s+|\s+$/g,wie=/^[-+]0x[0-9a-f]+$/i,xie=/^0b[01]+$/i,Sie=/^0o[0-7]+$/i,Eie=parseInt,Tie="object"==typeof o&&o&&o.Object===Object&&o,Mie="object"==typeof self&&self&&self.Object===Object&&self,Cie=Tie||Mie||Function("return this")(),Iie=Object.prototype.toString,Aie=Math.max,kie=Math.min,Pie=function(){return Cie.Date.now()};function Rie(e,t,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(v,t),c?d(e):a}function m(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-l>=o}function v(){var e=Pie();if(m(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-u);return h?kie(n,o-(e-l)):n}(e))}function g(e){return s=void 0,f&&r?d(e):(r=i=void 0,a)}function y(){var e=Pie(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return p(u);if(h)return s=setTimeout(v,t),d(u)}return void 0===s&&(s=setTimeout(v,t)),a}return t=Lie(t)||0,Oie(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Aie(Lie(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?a:g(Pie())},y}function Oie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Lie(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Iie.call(e)}(e))return NaN;if(Oie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Oie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(_ie,"");var n=xie.test(e);return n||Sie.test(e)?Eie(e.slice(2),n?2:8):wie.test(e)?NaN:+e}var Nie=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Oie(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rie(e,t,{leading:r,maxWait:t,trailing:i})},Die={};Object.defineProperty(Die,"__esModule",{value:!0}),Die.addPassiveEventListener=function(e,t,n){var r=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(XY){}return e}();e.addEventListener(t,n,!!r&&{passive:!0})},Die.removePassiveEventListener=function(e,t,n){e.removeEventListener(t,n)},Object.defineProperty(bie,"__esModule",{value:!0});var Fie=function(e){return e&&e.__esModule?e:{default:e}}(Nie),Uie=Die;var zie={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,t){if(e){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:66;return(0,Fie.default)(e,t)}((function(t){zie.scrollHandler(e)}),t);zie.scrollSpyContainers.push(e),(0,Uie.addPassiveEventListener)(e,"scroll",n)}},isMounted:function(e){return-1!==zie.scrollSpyContainers.indexOf(e)},currentPositionX:function(e){if(e===document){var t=void 0!==window.pageYOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft}return e.scrollLeft},currentPositionY:function(e){if(e===document){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop}return e.scrollTop},scrollHandler:function(e){(zie.scrollSpyContainers[zie.scrollSpyContainers.indexOf(e)].spyCallbacks||[]).forEach((function(t){return t(zie.currentPositionX(e),zie.currentPositionY(e))}))},addStateHandler:function(e){zie.spySetState.push(e)},addSpyHandler:function(e,t){var n=zie.scrollSpyContainers[zie.scrollSpyContainers.indexOf(t)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e),e(zie.currentPositionX(t),zie.currentPositionY(t))},updateStates:function(){zie.spySetState.forEach((function(e){return e()}))},unmount:function(e,t){zie.scrollSpyContainers.forEach((function(e){return e.spyCallbacks&&e.spyCallbacks.length&&e.spyCallbacks.splice(e.spyCallbacks.indexOf(t),1)})),zie.spySetState&&zie.spySetState.length&&zie.spySetState.splice(zie.spySetState.indexOf(e),1),document.removeEventListener("scroll",zie.scrollHandler)},update:function(){return zie.scrollSpyContainers.forEach((function(e){return zie.scrollHandler(e)}))}};bie.default=zie;var jie={},Bie={};Object.defineProperty(Bie,"__esModule",{value:!0});var Vie=function(e,t){for(var n=e.offsetTop,r=e.offsetParent;r&&!t(r);)n+=r.offsetTop,r=r.offsetParent;return{offsetTop:n,offsetParent:r}};Bie.default={updateHash:function(e,t){var n=0===e.indexOf("#")?e.substring(1):e,r=n?"#"+n:"",i=window&&window.location,o=r?i.pathname+i.search+r:i.pathname+i.search;t?history.pushState(null,"",o):history.replaceState(null,"",o)},getHash:function(){return window.location.hash.replace(/^#/,"")},filterElementInContainer:function(e){return function(t){return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}},scrollOffset:function(e,t,n){if(n)return e===document?t.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):"static"!==getComputedStyle(e).position?t.offsetLeft:t.offsetLeft-e.offsetLeft;if(e===document)return t.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if("static"!==getComputedStyle(e).position){if(t.offsetParent!==e){var r=Vie(t,(function(t){return t===e||t===document})),i=r.offsetTop;if(r.offsetParent!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return i}return t.offsetTop}if(t.offsetParent===e.offsetParent)return t.offsetTop-e.offsetTop;var o=function(e){return e===document};return Vie(t,o).offsetTop-Vie(e,o).offsetTop}};var Hie={},Wie={};Object.defineProperty(Wie,"__esModule",{value:!0}),Wie.default={defaultEasing:function(e){return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var Gie={};Object.defineProperty(Gie,"__esModule",{value:!0});var qie=Die,Kie=["mousedown","mousewheel","touchmove","keydown"];Gie.default={subscribe:function(e){return"undefined"!=typeof document&&Kie.forEach((function(t){return(0,qie.addPassiveEventListener)(document,t,e)}))}};var Xie={};Object.defineProperty(Xie,"__esModule",{value:!0});var Yie={registered:{},scrollEvent:{register:function(e,t){Yie.registered[e]=t},remove:function(e){Yie.registered[e]=null}}};Xie.default=Yie,Object.defineProperty(Hie,"__esModule",{value:!0});var $ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};eoe(Bie);var Qie=eoe(Wie),Jie=eoe(Gie),Zie=eoe(Xie);function eoe(e){return e&&e.__esModule?e:{default:e}}var toe=function(e){return Qie.default[e.smooth]||Qie.default.defaultEasing},noe=function(){if("undefined"!=typeof window)return window.requestAnimationFrame||window.webkitRequestAnimationFrame}()||function(e,t,n){window.setTimeout(e,n||1e3/60,(new Date).getTime())},roe=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollLeft;var n=void 0!==window.pageXOffset,r="CSS1Compat"===(document.compatMode||"");return n?window.pageXOffset:r?document.documentElement.scrollLeft:document.body.scrollLeft},ioe=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollTop;var n=void 0!==window.pageXOffset,r="CSS1Compat"===(document.compatMode||"");return n?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop},ooe=function e(t,n,r){var i=n.data;if(n.ignoreCancelEvents||!i.cancel)if(i.delta=Math.round(i.targetPosition-i.startPosition),null===i.start&&(i.start=r),i.progress=r-i.start,i.percent=i.progress>=i.duration?1:t(i.progress/i.duration),i.currentPosition=i.startPosition+Math.ceil(i.delta*i.percent),i.containerElement&&i.containerElement!==document&&i.containerElement!==document.body?n.horizontal?i.containerElement.scrollLeft=i.currentPosition:i.containerElement.scrollTop=i.currentPosition:n.horizontal?window.scrollTo(i.currentPosition,0):window.scrollTo(0,i.currentPosition),i.percent<1){var o=e.bind(null,t,n);noe.call(window,o)}else Zie.default.registered.end&&Zie.default.registered.end(i.to,i.target,i.currentPosition);else Zie.default.registered.end&&Zie.default.registered.end(i.to,i.target,i.currentPositionY)},aoe=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},soe=function(e,t,n,r){if(t.data=t.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},window.clearTimeout(t.data.delayTimeout),Jie.default.subscribe((function(){t.data.cancel=!0})),aoe(t),t.data.start=null,t.data.cancel=!1,t.data.startPosition=t.horizontal?roe(t):ioe(t),t.data.targetPosition=t.absolute?e:e+t.data.startPosition,t.data.startPosition!==t.data.targetPosition){var i;t.data.delta=Math.round(t.data.targetPosition-t.data.startPosition),t.data.duration=("function"==typeof(i=t.duration)?i:function(){return i})(t.data.delta),t.data.duration=isNaN(parseFloat(t.data.duration))?1e3:parseFloat(t.data.duration),t.data.to=n,t.data.target=r;var o=toe(t),a=ooe.bind(null,o,t);t&&t.delay>0?t.data.delayTimeout=window.setTimeout((function(){Zie.default.registered.begin&&Zie.default.registered.begin(t.data.to,t.data.target),noe.call(window,a)}),t.delay):(Zie.default.registered.begin&&Zie.default.registered.begin(t.data.to,t.data.target),noe.call(window,a))}else Zie.default.registered.end&&Zie.default.registered.end(t.data.to,t.data.target,t.data.currentPosition)},uoe=function(e){return(e=$ie({},e)).data=e.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},e.absolute=!0,e};Hie.default={animateTopScroll:soe,getAnimationType:toe,scrollToTop:function(e){soe(0,uoe(e))},scrollToBottom:function(e){e=uoe(e),aoe(e),soe(e.horizontal?function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollWidth-t.offsetWidth;var n=document.body,r=document.documentElement;return Math.max(n.scrollWidth,n.offsetWidth,r.clientWidth,r.scrollWidth,r.offsetWidth)}(e):function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollHeight-t.offsetHeight;var n=document.body,r=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}(e),e)},scrollTo:function(e,t){soe(e,uoe(t))},scrollMore:function(e,t){t=uoe(t),aoe(t);var n=t.horizontal?roe(t):ioe(t);soe(e+n,t)}},Object.defineProperty(jie,"__esModule",{value:!0});var loe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},coe=doe(Bie),hoe=doe(Hie),foe=doe(Xie);function doe(e){return e&&e.__esModule?e:{default:e}}var poe={},moe=void 0;jie.default={unmount:function(){poe={}},register:function(e,t){poe[e]=t},unregister:function(e){delete poe[e]},get:function(e){return poe[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return moe=e},getActiveLink:function(){return moe},scrollTo:function(e,t){var n=this.get(e);if(n){var r=(t=loe({},t,{absolute:!1})).containerId,i=t.container,o=void 0;o=r?document.getElementById(r):i&&i.nodeType?i:document,t.absolute=!0;var a=t.horizontal,s=coe.default.scrollOffset(o,n,a)+(t.offset||0);if(!t.smooth)return foe.default.registered.begin&&foe.default.registered.begin(e,n),o===document?t.horizontal?window.scrollTo(s,0):window.scrollTo(0,s):o.scrollTop=s,void(foe.default.registered.end&&foe.default.registered.end(e,n));hoe.default.animateTopScroll(s,t,e,n)}else console.warn("target Element not found")}};var voe={};Object.defineProperty(voe,"__esModule",{value:!0});var goe=function(e){return e&&e.__esModule?e:{default:e}}(Bie);var yoe={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,t){this.containers[e]=t},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,t=this.getHash();t?window.setTimeout((function(){e.scrollTo(t,!0),e.initialized=!0}),10):this.initialized=!0},scrollTo:function(e,t){var n=this.scroller;if(n.get(e)&&(t||e!==n.getActiveLink())){var r=this.containers[e]||document;n.scrollTo(e,{container:r})}},getHash:function(){return goe.default.getHash()},changeHash:function(e,t){this.isInitialized()&&goe.default.getHash()!==e&&goe.default.updateHash(e,t)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};voe.default=yoe,Object.defineProperty(yie,"__esModule",{value:!0});var boe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),woe=Moe(s.exports),xoe=Moe(bie),Soe=Moe(jie),Eoe=Moe(ic.exports),Toe=Moe(voe);function Moe(e){return e&&e.__esModule?e:{default:e}}var Coe={to:Eoe.default.string.isRequired,containerId:Eoe.default.string,container:Eoe.default.object,activeClass:Eoe.default.string,spy:Eoe.default.bool,horizontal:Eoe.default.bool,smooth:Eoe.default.oneOfType([Eoe.default.bool,Eoe.default.string]),offset:Eoe.default.number,delay:Eoe.default.number,isDynamic:Eoe.default.bool,onClick:Eoe.default.func,duration:Eoe.default.oneOfType([Eoe.default.number,Eoe.default.func]),absolute:Eoe.default.bool,onSetActive:Eoe.default.func,onSetInactive:Eoe.default.func,ignoreCancelEvents:Eoe.default.bool,hashSpy:Eoe.default.bool,saveHashHistory:Eoe.default.bool,spyThrottle:Eoe.default.number};yie.default=function(e,t){var n=t||Soe.default,r=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return i.call(t),t.state={active:!1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,woe.default.PureComponent),_oe(r,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e&&!t?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();xoe.default.isMounted(e)||xoe.default.mount(e,this.props.spyThrottle),this.props.hashSpy&&(Toe.default.isMounted()||Toe.default.mount(n),Toe.default.mapContainer(this.props.to,e)),xoe.default.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){xoe.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n=boe({},this.props);for(var r in Coe)n.hasOwnProperty(r)&&delete n[r];return n.className=t,n.onClick=this.handleClick,woe.default.createElement(e,n)}}]),r}(),i=function(){var e=this;this.scrollTo=function(t,r){n.scrollTo(t,boe({},e.state,r))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.spyHandler=function(t,r){var i=e.getScrollSpyContainer();if(!Toe.default.isMounted()||Toe.default.isInitialized()){var o=e.props.horizontal,a=e.props.to,s=null,u=void 0,l=void 0;if(o){var c=0,h=0,f=0;if(i.getBoundingClientRect)f=i.getBoundingClientRect().left;if(!s||e.props.isDynamic){if(!(s=n.get(a)))return;var d=s.getBoundingClientRect();h=(c=d.left-f+t)+d.width}var p=t-e.props.offset;u=p>=Math.floor(c)&&p<Math.floor(h),l=p<Math.floor(c)||p>=Math.floor(h)}else{var m=0,v=0,g=0;if(i.getBoundingClientRect)g=i.getBoundingClientRect().top;if(!s||e.props.isDynamic){if(!(s=n.get(a)))return;var y=s.getBoundingClientRect();v=(m=y.top-g+r)+y.height}var b=r-e.props.offset;u=b>=Math.floor(m)&&b<Math.floor(v),l=b<Math.floor(m)||b>=Math.floor(v)}var _=n.getActiveLink();if(l){if(a===_&&n.setActiveLink(void 0),e.props.hashSpy&&Toe.default.getHash()===a){var w=e.props.saveHashHistory,x=void 0!==w&&w;Toe.default.changeHash("",x)}e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive(a,s))}if(u&&(_!==a||!1===e.state.active)){n.setActiveLink(a);var S=e.props.saveHashHistory,E=void 0!==S&&S;e.props.hashSpy&&Toe.default.changeHash(a,E),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(a,s))}}}};return r.propTypes=Coe,r.defaultProps={offset:0},r},Object.defineProperty(gie,"__esModule",{value:!0});var Ioe=koe(s.exports),Aoe=koe(yie);function koe(e){return e&&e.__esModule?e:{default:e}}function Poe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Roe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ooe=function(e){function t(){var e,n,r;Poe(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Roe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.render=function(){return Ioe.default.createElement("a",r.props,r.props.children)},Roe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ioe.default.Component),t}();gie.default=(0,Aoe.default)(Ooe);var Loe={};Object.defineProperty(Loe,"__esModule",{value:!0});var Noe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Doe=Uoe(s.exports),Foe=Uoe(yie);function Uoe(e){return e&&e.__esModule?e:{default:e}}function zoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function joe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Boe=function(e){function t(){return zoe(this,t),joe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Doe.default.Component),Noe(t,[{key:"render",value:function(){return Doe.default.createElement("input",this.props,this.props.children)}}]),t}();Loe.default=(0,Foe.default)(Boe);var Voe={},Hoe={};Object.defineProperty(Hoe,"__esModule",{value:!0});var Woe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Goe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),qoe=Yoe(s.exports);Yoe(G.exports);var Koe=Yoe(jie),Xoe=Yoe(ic.exports);function Yoe(e){return e&&e.__esModule?e:{default:e}}Hoe.default=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,qoe.default.Component),Goe(n,[{key:"componentDidMount",value:function(){if("undefined"==typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"==typeof window)return!1;Koe.default.unregister(this.props.name)}},{key:"registerElems",value:function(e){Koe.default.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return qoe.default.createElement(e,Woe({},this.props,{parentBindings:this.childBindings}))}}]),n}();return t.propTypes={name:Xoe.default.string,id:Xoe.default.string},t},Object.defineProperty(Voe,"__esModule",{value:!0});var $oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qoe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Joe=tae(s.exports),Zoe=tae(Hoe),eae=tae(ic.exports);function tae(e){return e&&e.__esModule?e:{default:e}}function nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var iae=function(e){function t(){return nae(this,t),rae(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Joe.default.Component),Qoe(t,[{key:"render",value:function(){var e=this,t=$oe({},this.props);return t.parentBindings&&delete t.parentBindings,Joe.default.createElement("div",$oe({},t,{ref:function(t){e.props.parentBindings.domNode=t}}),this.props.children)}}]),t}();iae.propTypes={name:eae.default.string,id:eae.default.string},Voe.default=(0,Zoe.default)(iae);var oae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aae=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function sae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cae=s.exports,hae=bie,fae=jie,dae=ic.exports,pae=voe,mae={to:dae.string.isRequired,containerId:dae.string,container:dae.object,activeClass:dae.string,spy:dae.bool,smooth:dae.oneOfType([dae.bool,dae.string]),offset:dae.number,delay:dae.number,isDynamic:dae.bool,onClick:dae.func,duration:dae.oneOfType([dae.number,dae.func]),absolute:dae.bool,onSetActive:dae.func,onSetInactive:dae.func,ignoreCancelEvents:dae.bool,hashSpy:dae.bool,spyThrottle:dae.number},vae={Scroll:function(e,t){console.warn("Helpers.Scroll is deprecated since v1.7.0");var n=t||fae,r=function(t){function r(e){sae(this,r);var t=uae(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return i.call(t),t.state={active:!1},t}return lae(r,cae.Component),aae(r,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();hae.isMounted(e)||hae.mount(e,this.props.spyThrottle),this.props.hashSpy&&(pae.isMounted()||pae.mount(n),pae.mapContainer(this.props.to,e)),this.props.spy&&hae.addStateHandler(this.stateHandler),hae.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){hae.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n=oae({},this.props);for(var r in mae)n.hasOwnProperty(r)&&delete n[r];return n.className=t,n.onClick=this.handleClick,cae.createElement(e,n)}}]),r}(),i=function(){var e=this;this.scrollTo=function(t,r){n.scrollTo(t,oae({},e.state,r))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.stateHandler=function(){n.getActiveLink()!==e.props.to&&(null!==e.state&&e.state.active&&e.props.onSetInactive&&e.props.onSetInactive(),e.setState({active:!1}))},this.spyHandler=function(t){var r=e.getScrollSpyContainer();if(!pae.isMounted()||pae.isInitialized()){var i=e.props.to,o=null,a=0,s=0,u=0;if(r.getBoundingClientRect)u=r.getBoundingClientRect().top;if(!o||e.props.isDynamic){if(!(o=n.get(i)))return;var l=o.getBoundingClientRect();s=(a=l.top-u+t)+l.height}var c=t-e.props.offset,h=c>=Math.floor(a)&&c<Math.floor(s),f=c<Math.floor(a)||c>=Math.floor(s),d=n.getActiveLink();return f?(i===d&&n.setActiveLink(void 0),e.props.hashSpy&&pae.getHash()===i&&pae.changeHash(),e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive()),hae.updateStates()):h&&d!==i?(n.setActiveLink(i),e.props.hashSpy&&pae.changeHash(i),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(i)),hae.updateStates()):void 0}}};return r.propTypes=mae,r.defaultProps={offset:0},r},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var t=function(t){function n(e){sae(this,n);var t=uae(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return lae(n,cae.Component),aae(n,[{key:"componentDidMount",value:function(){if("undefined"==typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"==typeof window)return!1;fae.unregister(this.props.name)}},{key:"registerElems",value:function(e){fae.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return cae.createElement(e,oae({},this.props,{parentBindings:this.childBindings}))}}]),n}();return t.propTypes={name:dae.string,id:dae.string},t}};Object.defineProperty(vie,"__esModule",{value:!0}),vie.Helpers=vie.ScrollElement=vie.ScrollLink=vie.animateScroll=vie.scrollSpy=vie.Events=vie.scroller=vie.Element=vie.Button=vie.Link=void 0;var gae=Cae(gie),yae=Cae(Loe),bae=Cae(Voe),_ae=Cae(jie),wae=Cae(Xie),xae=Cae(bie),Sae=Cae(Hie),Eae=Cae(yie),Tae=Cae(Hoe),Mae=Cae(vae);function Cae(e){return e&&e.__esModule?e:{default:e}}vie.Link=gae.default,vie.Button=yae.default,vie.Element=bae.default;var Iae=vie.scroller=_ae.default;vie.Events=wae.default,vie.scrollSpy=xae.default,vie.animateScroll=Sae.default,vie.ScrollLink=Eae.default,vie.ScrollElement=Tae.default,vie.Helpers=Mae.default,vie.default={Link:gae.default,Button:yae.default,Element:bae.default,scroller:_ae.default,Events:wae.default,scrollSpy:xae.default,animateScroll:Sae.default,ScrollLink:Eae.default,ScrollElement:Tae.default,Helpers:Mae.default};export{Lh as A,Oh as B,s as D,q2 as E,g6 as F,Rv as G,Eh as H,ip as M,F2 as N,fp as P,W as R,Uv as S,Yy as T,Fv as W,cp as a,Ty as b,L2 as c,s3 as d,c3 as e,NI as f,oE as g,j2 as h,cie as i,zne as j,T6 as k,x6 as l,mie as m,H2 as n,Sh as o,xh as p,tc as q,Iae as s};
