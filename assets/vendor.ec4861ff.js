var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;import o from"tween";import a from"raf";var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var l={exports:{}},c={},h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function p(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var m=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,r,i=p(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))f.call(n,a)&&(i[a]=n[a]);if(h){r=h(n);for(var s=0;s<r.length;s++)d.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},g=m,v=60103,y=60106;
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */c.Fragment=60107,c.StrictMode=60108,c.Profiler=60114;var b=60109,_=60110,w=60112;c.Suspense=60113;var x=60115,S=60116;if("function"==typeof Symbol&&Symbol.for){var E=Symbol.for;v=E("react.element"),y=E("react.portal"),c.Fragment=E("react.fragment"),c.StrictMode=E("react.strict_mode"),c.Profiler=E("react.profiler"),b=E("react.provider"),_=E("react.context"),w=E("react.forward_ref"),c.Suspense=E("react.suspense"),x=E("react.memo"),S=E("react.lazy")}var T="function"==typeof Symbol&&Symbol.iterator;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};function A(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||C}function k(){}function P(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||C}A.prototype.isReactComponent={},A.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(M(85));this.updater.enqueueSetState(this,e,t,"setState")},A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=A.prototype;var R=P.prototype=new k;R.constructor=P,g(R,A.prototype),R.isPureReactComponent=!0;var L={current:null},N=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)N.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:v,type:e,key:o,ref:a,props:i,_owner:L.current}}function F(e){return"object"==typeof e&&null!==e&&e.$$typeof===v}var U=/\/+/g;function z(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case v:case y:a=!0}}if(a)return i=i(a=e),e=""===r?"."+z(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(U,"$&/")+"/"),j(i,t,n,"",(function(e){return e}))):null!=i&&(F(i)&&(i=function(e,t){return{$$typeof:v,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(U,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+z(o=e[s],s);a+=j(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=j(o=o.value,t,n,u=r+z(o,s++),i);else if("object"===o)throw t=""+e,Error(M(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function B(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function V(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var H={current:null};function W(){var e=H.current;if(null===e)throw Error(M(321));return e}var G={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:L,IsSomeRendererActing:{current:!1},assign:g};c.Children={map:B,forEach:function(e,t,n){B(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return B(e,(function(){t++})),t},toArray:function(e){return B(e,(function(e){return e}))||[]},only:function(e){if(!F(e))throw Error(M(143));return e}},c.Component=A,c.PureComponent=P,c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,c.cloneElement=function(e,t,n){if(null==e)throw Error(M(267,e));var r=g({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=L.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)N.call(t,u)&&!O.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:v,type:e.type,key:i,ref:o,props:r,_owner:a}},c.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:_,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:b,_context:e},e.Consumer=e},c.createElement=D,c.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},c.createRef=function(){return{current:null}},c.forwardRef=function(e){return{$$typeof:w,render:e}},c.isValidElement=F,c.lazy=function(e){return{$$typeof:S,_payload:{_status:-1,_result:e},_init:V}},c.memo=function(e,t){return{$$typeof:x,type:e,compare:void 0===t?null:t}},c.useCallback=function(e,t){return W().useCallback(e,t)},c.useContext=function(e,t){return W().useContext(e,t)},c.useDebugValue=function(){},c.useEffect=function(e,t){return W().useEffect(e,t)},c.useImperativeHandle=function(e,t,n){return W().useImperativeHandle(e,t,n)},c.useLayoutEffect=function(e,t){return W().useLayoutEffect(e,t)},c.useMemo=function(e,t){return W().useMemo(e,t)},c.useReducer=function(e,t,n){return W().useReducer(e,t,n)},c.useRef=function(e){return W().useRef(e)},c.useState=function(e){return W().useState(e)},c.version="17.0.2",l.exports=c;var q=l.exports,K={exports:{}},X={},Y={exports:{}},$={};
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,l=null,c=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(n){throw setTimeout(c,0),n}};t=function(e){null!==u?setTimeout(t,0,e):(u=e,setTimeout(c,0))},n=function(e,t){l=setTimeout(e,t)},r=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var d=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,m=null,g=-1,v=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();y=t+v;try{m(!0,t)?_.postMessage(null):(p=!1,m=null)}catch(n){throw _.postMessage(null),n}}else p=!1},t=function(e){m=e,p||(p=!0,_.postMessage(null))},n=function(t,n){g=h((function(){t(e.unstable_now())}),n)},r=function(){f(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>E(a,n))void 0!==u&&0>E(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],M=[],C=1,I=null,A=3,k=!1,P=!1,R=!1;function L(e){for(var t=x(M);null!==t;){if(null===t.callback)S(M);else{if(!(t.startTime<=e))break;S(M),t.sortIndex=t.expirationTime,w(T,t)}t=x(M)}}function N(e){if(R=!1,L(e),!P)if(null!==x(T))P=!0,t(O);else{var r=x(M);null!==r&&n(N,r.startTime-e)}}function O(t,i){P=!1,R&&(R=!1,r()),k=!0;var o=A;try{for(L(i),I=x(T);null!==I&&(!(I.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=I.callback;if("function"==typeof a){I.callback=null,A=I.priorityLevel;var s=a(I.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?I.callback=s:I===x(T)&&S(T),L(i)}else S(T);I=x(T)}if(null!==I)var u=!0;else{var l=x(M);null!==l&&n(N,l.startTime-i),u=!1}return u}finally{I=null,A=o,k=!1}}var D=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){P||k||(P=!0,t(O))},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return x(T)},e.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=D,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},e.unstable_scheduleCallback=function(i,o,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,i){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return i={id:C++,callback:o,priorityLevel:i,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(i.sortIndex=a,w(M,i),null===x(T)&&i===x(M)&&(R?r():R=!0,n(N,a-s))):(i.sortIndex=u,w(T,i),P||k||(P=!0,t(O))),i},e.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}}($),Y.exports=$;
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Q=l.exports,J=m,Z=Y.exports;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Q)throw Error(ee(227));var te=new Set,ne={};function re(e,t){ie(e,t),ie(e+"Capture",t)}function ie(e,t){for(ne[e]=t,e=0;e<t.length;e++)te.add(t[e])}var oe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,se=Object.prototype.hasOwnProperty,ue={},le={};function ce(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){he[e]=new ce(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];he[t]=new ce(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){he[e]=new ce(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){he[e]=new ce(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){he[e]=new ce(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){he[e]=new ce(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){he[e]=new ce(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){he[e]=new ce(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){he[e]=new ce(e,5,!1,e.toLowerCase(),null,!1,!1)}));var fe=/[\-:]([a-z])/g;function de(e){return e[1].toUpperCase()}function pe(e,t,n,r){var i=he.hasOwnProperty(t)?he[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!se.call(le,e)||!se.call(ue,e)&&(ae.test(e)?le[e]=!0:(ue[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(fe,de);he[t]=new ce(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(fe,de);he[t]=new ce(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(fe,de);he[t]=new ce(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){he[e]=new ce(e,1,!1,e.toLowerCase(),null,!1,!1)})),he.xlinkHref=new ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){he[e]=new ce(e,1,!1,e.toLowerCase(),null,!0,!0)}));var me=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=60103,ve=60106,ye=60107,be=60108,_e=60114,we=60109,xe=60110,Se=60112,Ee=60113,Te=60120,Me=60115,Ce=60116,Ie=60121,Ae=60128,ke=60129,Pe=60130,Re=60131;if("function"==typeof Symbol&&Symbol.for){var Le=Symbol.for;ge=Le("react.element"),ve=Le("react.portal"),ye=Le("react.fragment"),be=Le("react.strict_mode"),_e=Le("react.profiler"),we=Le("react.provider"),xe=Le("react.context"),Se=Le("react.forward_ref"),Ee=Le("react.suspense"),Te=Le("react.suspense_list"),Me=Le("react.memo"),Ce=Le("react.lazy"),Ie=Le("react.block"),Le("react.scope"),Ae=Le("react.opaque.id"),ke=Le("react.debug_trace_mode"),Pe=Le("react.offscreen"),Re=Le("react.legacy_hidden")}var Ne,Oe="function"==typeof Symbol&&Symbol.iterator;function De(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}function Fe(e){if(void 0===Ne)try{throw Error()}catch(Py){var t=Py.stack.trim().match(/\n( *(at )?)/);Ne=t&&t[1]||""}return"\n"+Ne+e}var Ue=!1;function ze(e,t){if(!e||Ue)return"";Ue=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Ue=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fe(e):""}function je(e){switch(e.tag){case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return e=ze(e.type,!1);case 11:return e=ze(e.type.render,!1);case 22:return e=ze(e.type._render,!1);case 1:return e=ze(e.type,!0);default:return""}}function Be(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ye:return"Fragment";case ve:return"Portal";case _e:return"Profiler";case be:return"StrictMode";case Ee:return"Suspense";case Te:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case xe:return(e.displayName||"Context")+".Consumer";case we:return(e._context.displayName||"Context")+".Provider";case Se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Me:return Be(e.type);case Ie:return Be(e._render);case Ce:t=e._payload,e=e._init;try{return Be(e(t))}catch(Py){}}return null}function Ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function He(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=He(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=He(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ke(e,t){var n=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ye(e,t){null!=(t=t.checked)&&pe(e,"checked",t,!1)}function $e(e,t){Ye(e,t);var n=Ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Je(e,t.type,n):t.hasOwnProperty("defaultValue")&&Je(e,t.type,Ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Qe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Je(e,t,n){"number"===t&&qe(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ze(e,t){return e=J({children:void 0},t),(t=function(e){var t="";return Q.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function et(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ee(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ee(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(ee(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ve(n)}}function rt(e,t){var n=Ve(t.value),r=Ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ot="http://www.w3.org/1999/xhtml",at="http://www.w3.org/2000/svg";function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?st(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var lt,ct,ht=(ct=function(e,t){if(e.namespaceURI!==at||"innerHTML"in e)e.innerHTML=t;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(e,t)}))}:ct);function ft(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function gt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(dt).forEach((function(e){pt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]}))}));var vt=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(e,t){if(t){if(vt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ee(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ee(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ee(62))}}function bt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var wt=null,xt=null,St=null;function Et(e){if(e=Xi(e)){if("function"!=typeof wt)throw Error(ee(280));var t=e.stateNode;t&&(t=$i(t),wt(e.stateNode,e.type,t))}}function Tt(e){xt?St?St.push(e):St=[e]:xt=e}function Mt(){if(xt){var e=xt,t=St;if(St=xt=null,Et(e),t)for(e=0;e<t.length;e++)Et(t[e])}}function Ct(e,t){return e(t)}function It(e,t,n,r,i){return e(t,n,r,i)}function At(){}var kt=Ct,Pt=!1,Rt=!1;function Lt(){null===xt&&null===St||(At(),Mt())}function Nt(e,t){var n=e.stateNode;if(null===n)return null;var r=$i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ee(231,t,typeof n));return n}var Ot=!1;if(oe)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(ct){Ot=!1}function Ft(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(ky){this.onError(ky)}}var Ut=!1,zt=null,jt=!1,Bt=null,Vt={onError:function(e){Ut=!0,zt=e}};function Ht(e,t,n,r,i,o,a,s,u){Ut=!1,zt=null,Ft.apply(Vt,arguments)}function Wt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Gt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qt(e){if(Wt(e)!==e)throw Error(ee(188))}function Kt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Wt(e)))throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qt(i),e;if(o===r)return qt(i),t;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(3!==n.tag)throw Error(ee(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Xt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Yt,$t,Qt,Jt,Zt=!1,en=[],tn=null,nn=null,rn=null,on=new Map,an=new Map,sn=[],un="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ln(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function cn(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":on.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(t.pointerId)}}function hn(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ln(t,n,r,i,o),null!==t&&(null!==(t=Xi(t))&&$t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function fn(e){var t=Ki(e.target);if(null!==t){var n=Wt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Gt(n)))return e.blockedOn=t,void Jt(e.lanePriority,(function(){Z.unstable_runWithPriority(e.priority,(function(){Qt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function dn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Xi(n))&&$t(t),e.blockedOn=n,!1;t.shift()}return!0}function pn(e,t,n){dn(e)&&n.delete(t)}function mn(){for(Zt=!1;0<en.length;){var e=en[0];if(null!==e.blockedOn){null!==(e=Xi(e.blockedOn))&&Yt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&en.shift()}null!==tn&&dn(tn)&&(tn=null),null!==nn&&dn(nn)&&(nn=null),null!==rn&&dn(rn)&&(rn=null),on.forEach(pn),an.forEach(pn)}function gn(e,t){e.blockedOn===t&&(e.blockedOn=null,Zt||(Zt=!0,Z.unstable_scheduleCallback(Z.unstable_NormalPriority,mn)))}function vn(e){function t(t){return gn(t,e)}if(0<en.length){gn(en[0],e);for(var n=1;n<en.length;n++){var r=en[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tn&&gn(tn,e),null!==nn&&gn(nn,e),null!==rn&&gn(rn,e),on.forEach(t),an.forEach(t),n=0;n<sn.length;n++)(r=sn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&null===(n=sn[0]).blockedOn;)fn(n),null===n.blockedOn&&sn.shift()}function yn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bn={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionend:yn("Transition","TransitionEnd")},_n={},wn={};function xn(e){if(_n[e])return _n[e];if(!bn[e])return e;var t,n=bn[e];for(t in n)if(n.hasOwnProperty(t)&&t in wn)return _n[e]=n[t];return e}oe&&(wn=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);var Sn=xn("animationend"),En=xn("animationiteration"),Tn=xn("animationstart"),Mn=xn("transitionend"),Cn=new Map,In=new Map,An=["abort","abort",Sn,"animationEnd",En,"animationIteration",Tn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mn,"transitionEnd","waiting","waiting"];function kn(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),In.set(r,t),Cn.set(r,i),re(i,[r])}}(0,Z.unstable_now)();var Pn=8;function Rn(e){if(0!=(1&e))return Pn=15,1;if(0!=(2&e))return Pn=14,2;if(0!=(4&e))return Pn=13,4;var t=24&e;return 0!==t?(Pn=12,t):0!=(32&e)?(Pn=11,32):0!==(t=192&e)?(Pn=10,t):0!=(256&e)?(Pn=9,256):0!==(t=3584&e)?(Pn=8,t):0!=(4096&e)?(Pn=7,4096):0!==(t=4186112&e)?(Pn=6,t):0!==(t=62914560&e)?(Pn=5,t):67108864&e?(Pn=4,67108864):0!=(134217728&e)?(Pn=3,134217728):0!==(t=805306368&e)?(Pn=2,t):0!=(1073741824&e)?(Pn=1,1073741824):(Pn=8,e)}function Ln(e,t){var n=e.pendingLanes;if(0===n)return Pn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Pn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Rn(u),i=Pn):0!==(s&=o)&&(r=Rn(s),i=Pn)}else 0!==(o=n&~a)?(r=Rn(o),i=Pn):0!==s&&(r=Rn(s),i=Pn);if(0===r)return 0;if(r=n&((0>(r=31-zn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Rn(t),i<=Pn)return t;Pn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zn(t)),r|=e[n],t&=~i;return r}function Nn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function On(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Dn(24&~t))?On(10,t):e;case 10:return 0===(e=Dn(192&~t))?On(8,t):e;case 8:return 0===(e=Dn(3584&~t))&&(0===(e=Dn(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Dn(805306368&~t))&&(t=268435456),t}throw Error(ee(358,e))}function Dn(e){return e&-e}function Fn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Un(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zn(t)]=n}var zn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(jn(e)/Bn|0)|0},jn=Math.log,Bn=Math.LN2;var Vn=Z.unstable_UserBlockingPriority,Hn=Z.unstable_runWithPriority,Wn=!0;function Gn(e,t,n,r){Pt||At();var i=Kn,o=Pt;Pt=!0;try{It(i,e,t,n,r)}finally{(Pt=o)||Lt()}}function qn(e,t,n,r){Hn(Vn,Kn.bind(null,e,t,n,r))}function Kn(e,t,n,r){var i;if(Wn)if((i=0==(4&t))&&0<en.length&&-1<un.indexOf(e))e=ln(null,e,t,n,r),en.push(e);else{var o=Xn(e,t,n,r);if(null===o)i&&cn(e,r);else{if(i){if(-1<un.indexOf(e))return e=ln(o,e,t,n,r),void en.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return tn=hn(tn,e,t,n,r,i),!0;case"dragenter":return nn=hn(nn,e,t,n,r,i),!0;case"mouseover":return rn=hn(rn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return on.set(o,hn(on.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,an.set(o,hn(an.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;cn(e,r)}Mi(e,t,r,null,n)}}}function Xn(e,t,n,r){var i=_t(r);if(null!==(i=Ki(i))){var o=Wt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Gt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mi(e,t,r,i,n),null}var Yn=null,$n=null,Qn=null;function Jn(){if(Qn)return Qn;var e,t,n=$n,r=n.length,i="value"in Yn?Yn.value:Yn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Qn=i.slice(e,1<t?1-t:void 0)}function Zn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function er(){return!0}function tr(){return!1}function nr(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?er:tr,this.isPropagationStopped=tr,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),t}var rr,ir,or,ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=nr(ar),ur=J({},ar,{view:0,detail:0}),lr=nr(ur),cr=J({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(rr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=rr=0,or=e),rr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),hr=nr(cr),fr=nr(J({},cr,{dataTransfer:0})),dr=nr(J({},ur,{relatedTarget:0})),pr=nr(J({},ar,{animationName:0,elapsedTime:0,pseudoElement:0})),mr=nr(J({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),gr=nr(J({},ar,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=br[e])&&!!t[e]}function wr(){return _r}var xr=nr(J({},ur,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(e){return"keypress"===e.type?Zn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sr=nr(J({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=nr(J({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr})),Tr=nr(J({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mr=nr(J({},cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cr=[9,13,27,32],Ir=oe&&"CompositionEvent"in window,Ar=null;oe&&"documentMode"in document&&(Ar=document.documentMode);var kr=oe&&"TextEvent"in window&&!Ar,Pr=oe&&(!Ir||Ar&&8<Ar&&11>=Ar),Rr=String.fromCharCode(32),Lr=!1;function Nr(e,t){switch(e){case"keyup":return-1!==Cr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dr=!1;var Fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fr[e.type]:"textarea"===t}function zr(e,t,n,r){Tt(r),0<(t=Ii(t,"onChange")).length&&(n=new sr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jr=null,Br=null;function Vr(e){_i(e,0)}function Hr(e){if(Ge(Yi(e)))return e}function Wr(e,t){if("change"===e)return t}var Gr=!1;if(oe){var qr;if(oe){var Kr="oninput"in document;if(!Kr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Kr="function"==typeof Xr.oninput}qr=Kr}else qr=!1;Gr=qr&&(!document.documentMode||9<document.documentMode)}function Yr(){jr&&(jr.detachEvent("onpropertychange",$r),Br=jr=null)}function $r(e){if("value"===e.propertyName&&Hr(Br)){var t=[];if(zr(t,Br,e,_t(e)),e=Vr,Pt)e(t);else{Pt=!0;try{Ct(e,t)}finally{Pt=!1,Lt()}}}}function Qr(e,t,n){"focusin"===e?(Yr(),Br=n,(jr=t).attachEvent("onpropertychange",$r)):"focusout"===e&&Yr()}function Jr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hr(Br)}function Zr(e,t){if("click"===e)return Hr(t)}function ei(e,t){if("input"===e||"change"===e)return Hr(t)}var ti="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ni=Object.prototype.hasOwnProperty;function ri(e,t){if(ti(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ni.call(t,n[r])||!ti(e[n[r]],t[n[r]]))return!1;return!0}function ii(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oi(e,t){var n,r=ii(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ii(r)}}function ai(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ai(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function si(){for(var e=window,t=qe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=qe((e=t.contentWindow).document)}return t}function ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var li=oe&&"documentMode"in document&&11>=document.documentMode,ci=null,hi=null,fi=null,di=!1;function pi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;di||null==ci||ci!==qe(r)||("selectionStart"in(r=ci)&&ui(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},fi&&ri(fi,r)||(fi=r,0<(r=Ii(hi,"onSelect")).length&&(t=new sr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ci)))}kn("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),kn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),kn(An,2);for(var mi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),gi=0;gi<mi.length;gi++)In.set(mi[gi],0);ie("onMouseEnter",["mouseout","mouseover"]),ie("onMouseLeave",["mouseout","mouseover"]),ie("onPointerEnter",["pointerout","pointerover"]),ie("onPointerLeave",["pointerout","pointerover"]),re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),re("onBeforeInput",["compositionend","keypress","textInput","paste"]),re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yi=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function bi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(Ht.apply(this,arguments),Ut){if(!Ut)throw Error(ee(198));var l=zt;Ut=!1,zt=null,jt||(jt=!0,Bt=l)}}(r,t,void 0,e),e.currentTarget=null}function _i(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;bi(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;bi(i,s,l),o=u}}}if(jt)throw e=Bt,jt=!1,Bt=null,e}function wi(e,t){var n=Qi(t),r=e+"__bubble";n.has(r)||(Ti(t,e,2,!1),n.add(r))}var xi="_reactListening"+Math.random().toString(36).slice(2);function Si(e){e[xi]||(e[xi]=!0,te.forEach((function(t){yi.has(t)||Ei(t,!1,e,null),Ei(t,!0,e,null)})))}function Ei(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&yi.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Qi(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Ti(o,e,i,t),a.add(s))}function Ti(e,t,n,r){var i=In.get(t);switch(void 0===i?2:i){case 0:i=Gn;break;case 1:i=qn;break;default:i=Kn}n=i.bind(null,t,n,e),i=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mi(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Ki(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Rt)return e(t,n);Rt=!0;try{kt(e,t,n)}finally{Rt=!1,Lt()}}((function(){var r=o,i=_t(n),a=[];e:{var s=Cn.get(e);if(void 0!==s){var u=sr,l=e;switch(e){case"keypress":if(0===Zn(n))break e;case"keydown":case"keyup":u=xr;break;case"focusin":l="focus",u=dr;break;case"focusout":l="blur",u=dr;break;case"beforeblur":case"afterblur":u=dr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Er;break;case Sn:case En:case Tn:u=pr;break;case Mn:u=Tr;break;case"scroll":u=lr;break;case"wheel":u=Mr;break;case"copy":case"cut":case"paste":u=mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Sr}var c=0!=(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Nt(p,f))&&c.push(Ci(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Ki(l)&&!l[Gi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Ki(l):null)&&(l!==(h=Wt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=hr,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Sr,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:Yi(u),d=null==l?s:Yi(l),(s=new c(m,p+"leave",u,n,i)).target=h,s.relatedTarget=d,m=null,Ki(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,m=c),h=m,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Ai(d))p++;for(d=0,m=f;m;m=Ai(m))d++;for(;0<p-d;)c=Ai(c),p--;for(;0<d-p;)f=Ai(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Ai(c),f=Ai(f)}c=null}else c=null;null!==u&&ki(a,s,u,c,!1),null!==l&&null!==h&&ki(a,h,l,c,!0)}if("select"===(u=(s=r?Yi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Wr;else if(Ur(s))if(Gr)g=ei;else{g=Jr;var v=Qr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=Zr);switch(g&&(g=g(e,r))?zr(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&Je(s,"number",s.value)),v=r?Yi(r):window,e){case"focusin":(Ur(v)||"true"===v.contentEditable)&&(ci=v,hi=r,fi=null);break;case"focusout":fi=hi=ci=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,pi(a,n,i);break;case"selectionchange":if(li)break;case"keydown":case"keyup":pi(a,n,i)}var y;if(Ir)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Dr?Nr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==n.locale&&(Dr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Dr&&(y=Jn()):($n="value"in(Yn=i)?Yn.value:Yn.textContent,Dr=!0)),0<(v=Ii(r,b)).length&&(b=new gr(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Or(n))&&(b.data=y))),(y=kr?function(e,t){switch(e){case"compositionend":return Or(t);case"keypress":return 32!==t.which?null:(Lr=!0,Rr);case"textInput":return(e=t.data)===Rr&&Lr?null:e;default:return null}}(e,n):function(e,t){if(Dr)return"compositionend"===e||!Ir&&Nr(e,t)?(e=Jn(),Qn=$n=Yn=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ii(r,"onBeforeInput")).length&&(i=new gr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}_i(a,t)}))}function Ci(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ii(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Nt(e,n))&&r.unshift(Ci(e,o,i)),null!=(o=Nt(e,t))&&r.push(Ci(e,o,i))),e=e.return}return r}function Ai(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ki(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Nt(n,o))&&a.unshift(Ci(n,u,s)):i||null!=(u=Nt(n,o))&&a.push(Ci(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Pi(){}var Ri=null,Li=null;function Ni(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Oi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Di="function"==typeof setTimeout?setTimeout:void 0,Fi="function"==typeof clearTimeout?clearTimeout:void 0;function Ui(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function zi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ji(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Bi=0;var Vi=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Vi,Wi="__reactProps$"+Vi,Gi="__reactContainer$"+Vi,qi="__reactEvents$"+Vi;function Ki(e){var t=e[Hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gi]||n[Hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ji(e);null!==e;){if(n=e[Hi])return n;e=ji(e)}return t}n=(e=n).parentNode}return null}function Xi(e){return!(e=e[Hi]||e[Gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ee(33))}function $i(e){return e[Wi]||null}function Qi(e){var t=e[qi];return void 0===t&&(t=e[qi]=new Set),t}var Ji=[],Zi=-1;function eo(e){return{current:e}}function to(e){0>Zi||(e.current=Ji[Zi],Ji[Zi]=null,Zi--)}function no(e,t){Zi++,Ji[Zi]=e.current,e.current=t}var ro={},io=eo(ro),oo=eo(!1),ao=ro;function so(e,t){var n=e.type.contextTypes;if(!n)return ro;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function uo(e){return null!=(e=e.childContextTypes)}function lo(){to(oo),to(io)}function co(e,t,n){if(io.current!==ro)throw Error(ee(168));no(io,t),no(oo,n)}function ho(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(ee(108,Be(t)||"Unknown",i));return J({},n,r)}function fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ro,ao=io.current,no(io,e),no(oo,oo.current),!0}function po(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=ho(e,t,ao),r.__reactInternalMemoizedMergedChildContext=e,to(oo),to(io),no(io,e)):to(oo),no(oo,n)}var mo=null,go=null,vo=Z.unstable_runWithPriority,yo=Z.unstable_scheduleCallback,bo=Z.unstable_cancelCallback,_o=Z.unstable_shouldYield,wo=Z.unstable_requestPaint,xo=Z.unstable_now,So=Z.unstable_getCurrentPriorityLevel,Eo=Z.unstable_ImmediatePriority,To=Z.unstable_UserBlockingPriority,Mo=Z.unstable_NormalPriority,Co=Z.unstable_LowPriority,Io=Z.unstable_IdlePriority,Ao={},ko=void 0!==wo?wo:function(){},Po=null,Ro=null,Lo=!1,No=xo(),Oo=1e4>No?xo:function(){return xo()-No};function Do(){switch(So()){case Eo:return 99;case To:return 98;case Mo:return 97;case Co:return 96;case Io:return 95;default:throw Error(ee(332))}}function Fo(e){switch(e){case 99:return Eo;case 98:return To;case 97:return Mo;case 96:return Co;case 95:return Io;default:throw Error(ee(332))}}function Uo(e,t){return e=Fo(e),vo(e,t)}function zo(e,t,n){return e=Fo(e),yo(e,t,n)}function jo(){if(null!==Ro){var e=Ro;Ro=null,bo(e)}Bo()}function Bo(){if(!Lo&&null!==Po){Lo=!0;var e=0;try{var t=Po;Uo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Po=null}catch(Py){throw null!==Po&&(Po=Po.slice(e+1)),yo(Eo,jo),Py}finally{Lo=!1}}}var Vo=me.ReactCurrentBatchConfig;function Ho(e,t){if(e&&e.defaultProps){for(var n in t=J({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wo=eo(null),Go=null,qo=null,Ko=null;function Xo(){Ko=qo=Go=null}function Yo(e){var t=Wo.current;to(Wo),e.type._context._currentValue=t}function $o(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Qo(e,t){Go=e,Ko=qo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Is=!0),e.firstContext=null)}function Jo(e,t){if(Ko!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ko=e,t=1073741823),t={context:e,observedBits:t,next:null},null===qo){if(null===Go)throw Error(ee(308));qo=t,Go.dependencies={lanes:0,firstContext:t,responders:null}}else qo=qo.next=t;return e._currentValue}var Zo=!1;function ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ta(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ra(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oa(e,t,n,r){var i=e.updateQueue;Zo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var h=(c=c.updateQueue).lastBaseUpdate;h!==a&&(null===h?c.firstBaseUpdate=l:h.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(h=i.baseState,a=0,c=l=u=null;;){s=o.lane;var f=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,p=o;switch(s=t,f=n,p.tag){case 1:if("function"==typeof(d=p.payload)){h=d.call(f,h,s);break e}h=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(s="function"==typeof(d=p.payload)?d.call(f,h,s):d))break e;h=J({},h,s);break e;case 2:Zo=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else f={eventTime:f,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,Ru|=a,e.lanes=a,e.memoizedState=h}}function aa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ee(191,i));i.call(r)}}}var sa=(new Q.Component).refs;function ua(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:J({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&Wt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rl(),i=il(e),o=na(r,i);o.payload=t,null!=n&&(o.callback=n),ra(e,o),ol(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rl(),i=il(e),o=na(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ra(e,o),ol(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rl(),r=il(e),i=na(n,r);i.tag=2,null!=t&&(i.callback=t),ra(e,i),ol(e,r,n)}};function ca(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ri(n,r)||!ri(i,o))}function ha(e,t,n){var r=!1,i=ro,o=t.contextType;return"object"==typeof o&&null!==o?o=Jo(o):(i=uo(t)?ao:io.current,o=(r=null!=(r=t.contextTypes))?so(e,i):ro),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function fa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=sa,ea(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Jo(o):(o=uo(t)?ao:io.current,i.context=so(e,o)),oa(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ua(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&la.enqueueReplaceState(i,i.state,null),oa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var pa=Array.isArray;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===sa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function ga(e,t){if("textarea"!==e.type)throw Error(ee(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function va(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Fl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Ul(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=zl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ge:return(n=Ul(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case ve:return(t=Vl(t,e.mode,n)).return=e,t}if(pa(t)||De(t))return(t=zl(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ge:return n.key===i?n.type===ye?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case ve:return n.key===i?l(e,t,n,r):null}if(pa(n)||De(n))return null!==i?null:c(e,t,n,r,null);ga(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ge:return e=e.get(null===r.key?n:r.key)||null,r.type===ye?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case ve:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(pa(r)||De(r))return c(t,e=e.get(n)||null,r,i,null);ga(t,r)}return null}return function(s,u,l,c){var p="object"==typeof l&&null!==l&&l.type===ye&&null===l.key;p&&(l=l.props.children);var m="object"==typeof l&&null!==l;if(m)switch(l.$$typeof){case ge:e:{for(m=l.key,p=u;null!==p;){if(p.key===m){switch(p.tag){case 7:if(l.type===ye){n(s,p.sibling),(u=i(p,l.props.children)).return=s,s=u;break e}break;default:if(p.elementType===l.type){n(s,p.sibling),(u=i(p,l.props)).ref=ma(s,p,l),u.return=s,s=u;break e}}n(s,p);break}t(s,p),p=p.sibling}l.type===ye?((u=zl(l.props.children,s.mode,c,l.key)).return=s,s=u):((c=Ul(l.type,l.key,l.props,null,s.mode,c)).ref=ma(s,u,l),c.return=s,s=c)}return a(s);case ve:e:{for(p=l.key;null!==u;){if(u.key===p){if(4===u.tag&&u.stateNode.containerInfo===l.containerInfo&&u.stateNode.implementation===l.implementation){n(s,u.sibling),(u=i(u,l.children||[])).return=s,s=u;break e}n(s,u);break}t(s,u),u=u.sibling}(u=Vl(l,s.mode,c)).return=s,s=u}return a(s)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==u&&6===u.tag?(n(s,u.sibling),(u=i(u,l)).return=s,s=u):(n(s,u),(u=Bl(l,s.mode,c)).return=s,s=u),a(s);if(pa(l))return function(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var v=f(i,p,s[m],u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=h(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=d(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}(s,u,l,c);if(De(l))return function(i,a,s,u){var l=De(s);if("function"!=typeof l)throw Error(ee(150));if(null==(s=l.call(s)))throw Error(ee(151));for(var c=l=null,p=a,m=a=0,g=null,v=s.next();null!==p&&!v.done;m++,v=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var y=f(i,p,v.value,u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(v.done)return n(i,p),l;if(null===p){for(;!v.done;m++,v=s.next())null!==(v=h(i,v.value,u))&&(a=o(v,a,m),null===c?l=v:c.sibling=v,c=v);return l}for(p=r(i,p);!v.done;m++,v=s.next())null!==(v=d(p,i,m,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v);return e&&p.forEach((function(e){return t(i,e)})),l}(s,u,l,c);if(m&&ga(s,l),void 0===l&&!p)switch(s.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ee(152,Be(s.type)||"Component"))}return n(s,u)}}var ya=va(!0),ba=va(!1),_a={},wa=eo(_a),xa=eo(_a),Sa=eo(_a);function Ea(e){if(e===_a)throw Error(ee(174));return e}function Ta(e,t){switch(no(Sa,t),no(xa,e),no(wa,_a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ut(null,"");break;default:t=ut(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}to(wa),no(wa,t)}function Ma(){to(wa),to(xa),to(Sa)}function Ca(e){Ea(Sa.current);var t=Ea(wa.current),n=ut(t,e.type);t!==n&&(no(xa,e),no(wa,n))}function Ia(e){xa.current===e&&(to(wa),to(xa))}var Aa=eo(0);function ka(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pa=null,Ra=null,La=!1;function Na(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Da(e){if(La){var t=Ra;if(t){var n=t;if(!Oa(e,t)){if(!(t=zi(n.nextSibling))||!Oa(e,t))return e.flags=-1025&e.flags|2,La=!1,void(Pa=e);Na(Pa,n)}Pa=e,Ra=zi(t.firstChild)}else e.flags=-1025&e.flags|2,La=!1,Pa=e}}function Fa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Pa=e}function Ua(e){if(e!==Pa)return!1;if(!La)return Fa(e),La=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Oi(t,e.memoizedProps))for(t=Ra;t;)Na(e,t),t=zi(t.nextSibling);if(Fa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=zi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Pa?zi(e.stateNode.nextSibling):null;return!0}function za(){Ra=Pa=null,La=!1}var ja=[];function Ba(){for(var e=0;e<ja.length;e++)ja[e]._workInProgressVersionPrimary=null;ja.length=0}var Va=me.ReactCurrentDispatcher,Ha=me.ReactCurrentBatchConfig,Wa=0,Ga=null,qa=null,Ka=null,Xa=!1,Ya=!1;function $a(){throw Error(ee(321))}function Qa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ti(e[n],t[n]))return!1;return!0}function Ja(e,t,n,r,i,o){if(Wa=o,Ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Va.current=null===e||null===e.memoizedState?Es:Ts,e=n(r,i),Ya){o=0;do{if(Ya=!1,!(25>o))throw Error(ee(301));o+=1,Ka=qa=null,t.updateQueue=null,Va.current=Ms,e=n(r,i)}while(Ya)}if(Va.current=Ss,t=null!==qa&&null!==qa.next,Wa=0,Ka=qa=Ga=null,Xa=!1,t)throw Error(ee(300));return e}function Za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ka?Ga.memoizedState=Ka=e:Ka=Ka.next=e,Ka}function es(){if(null===qa){var e=Ga.alternate;e=null!==e?e.memoizedState:null}else e=qa.next;var t=null===Ka?Ga.memoizedState:Ka.next;if(null!==t)Ka=t,qa=e;else{if(null===e)throw Error(ee(310));e={memoizedState:(qa=e).memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},null===Ka?Ga.memoizedState=Ka=e:Ka=Ka.next=e}return Ka}function ts(e,t){return"function"==typeof t?t(e):t}function ns(e){var t=es(),n=t.queue;if(null===n)throw Error(ee(311));n.lastRenderedReducer=e;var r=qa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((Wa&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,Ga.lanes|=l,Ru|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,ti(r,t.memoizedState)||(Is=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function rs(e){var t=es(),n=t.queue;if(null===n)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ti(o,t.memoizedState)||(Is=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function is(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Wa&e)===e)&&(t._workInProgressVersionPrimary=r,ja.push(t))),e)return n(t._source);throw ja.push(t),Error(ee(350))}function os(e,t,n,r){var i=Eu;if(null===i)throw Error(ee(349));var o=t._getVersion,a=o(t._source),s=Va.current,u=s.useState((function(){return is(i,t,n)})),l=u[1],c=u[0];u=Ka;var h=e.memoizedState,f=h.refs,d=f.getSnapshot,p=h.source;h=h.subscribe;var m=Ga;return e.memoizedState={refs:f,source:t,subscribe:r},s.useEffect((function(){f.getSnapshot=n,f.setSnapshot=l;var e=o(t._source);if(!ti(a,e)){e=n(t._source),ti(c,e)||(l(e),e=il(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-zn(s),h=1<<u;r[u]|=e,s&=~h}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=il(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),ti(d,n)&&ti(p,t)&&ti(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ts,lastRenderedState:c}).dispatch=l=xs.bind(null,Ga,e),u.queue=e,u.baseQueue=null,c=is(i,t,n),u.memoizedState=u.baseState=c),c}function as(e,t,n){return os(es(),e,t,n)}function ss(e){var t=Za();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e}).dispatch=xs.bind(null,Ga,e),[t.memoizedState,e]}function us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ga.updateQueue)?(t={lastEffect:null},Ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ls(e){return e={current:e},Za().memoizedState=e}function cs(){return es().memoizedState}function hs(e,t,n,r){var i=Za();Ga.flags|=e,i.memoizedState=us(1|t,n,void 0,void 0===r?null:r)}function fs(e,t,n,r){var i=es();r=void 0===r?null:r;var o=void 0;if(null!==qa){var a=qa.memoizedState;if(o=a.destroy,null!==r&&Qa(r,a.deps))return void us(t,n,o,r)}Ga.flags|=e,i.memoizedState=us(1|t,n,o,r)}function ds(e,t){return hs(516,4,e,t)}function ps(e,t){return fs(516,4,e,t)}function ms(e,t){return fs(4,2,e,t)}function gs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vs(e,t,n){return n=null!=n?n.concat([e]):null,fs(4,2,gs.bind(null,t,e),n)}function ys(){}function bs(e,t){var n=es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Qa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Qa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ws(e,t){var n=Do();Uo(98>n?98:n,(function(){e(!0)})),Uo(97<n?97:n,(function(){var n=Ha.transition;Ha.transition=1;try{e(!1),t()}finally{Ha.transition=n}}))}function xs(e,t,n){var r=rl(),i=il(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Ga||null!==a&&a===Ga)Ya=Xa=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,ti(u,s))return}catch(l){}ol(e,i,r)}}var Ss={readContext:Jo,useCallback:$a,useContext:$a,useEffect:$a,useImperativeHandle:$a,useLayoutEffect:$a,useMemo:$a,useReducer:$a,useRef:$a,useState:$a,useDebugValue:$a,useDeferredValue:$a,useTransition:$a,useMutableSource:$a,useOpaqueIdentifier:$a,unstable_isNewReconciler:!1},Es={readContext:Jo,useCallback:function(e,t){return Za().memoizedState=[e,void 0===t?null:t],e},useContext:Jo,useEffect:ds,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,hs(4,2,gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var n=Za();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Za();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=xs.bind(null,Ga,e),[r.memoizedState,e]},useRef:ls,useState:ss,useDebugValue:ys,useDeferredValue:function(e){var t=ss(e),n=t[0],r=t[1];return ds((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=ss(!1),t=e[0];return ls(e=ws.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Za();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},os(r,e,t,n)},useOpaqueIdentifier:function(){if(La){var e=!1,t=function(e){return{$$typeof:Ae,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Bi++).toString(36))),Error(ee(355))})),n=ss(t)[1];return 0==(2&Ga.mode)&&(Ga.flags|=516,us(5,(function(){n("r:"+(Bi++).toString(36))}),void 0,null)),t}return ss(t="r:"+(Bi++).toString(36)),t},unstable_isNewReconciler:!1},Ts={readContext:Jo,useCallback:bs,useContext:Jo,useEffect:ps,useImperativeHandle:vs,useLayoutEffect:ms,useMemo:_s,useReducer:ns,useRef:cs,useState:function(){return ns(ts)},useDebugValue:ys,useDeferredValue:function(e){var t=ns(ts),n=t[0],r=t[1];return ps((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=ns(ts)[0];return[cs().current,e]},useMutableSource:as,useOpaqueIdentifier:function(){return ns(ts)[0]},unstable_isNewReconciler:!1},Ms={readContext:Jo,useCallback:bs,useContext:Jo,useEffect:ps,useImperativeHandle:vs,useLayoutEffect:ms,useMemo:_s,useReducer:rs,useRef:cs,useState:function(){return rs(ts)},useDebugValue:ys,useDeferredValue:function(e){var t=rs(ts),n=t[0],r=t[1];return ps((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=rs(ts)[0];return[cs().current,e]},useMutableSource:as,useOpaqueIdentifier:function(){return rs(ts)[0]},unstable_isNewReconciler:!1},Cs=me.ReactCurrentOwner,Is=!1;function As(e,t,n,r){t.child=null===e?ba(t,null,n,r):ya(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return Qo(t,i),r=Ja(e,t,n,r,o,i),null===e||Is?(t.flags|=1,As(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,$s(e,t,i))}function Ps(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Dl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ul(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Rs(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ri)(i,r)&&e.ref===t.ref)?$s(e,t,o):(t.flags|=1,(e=Fl(a,r)).ref=t.ref,e.return=t,t.child=e)}function Rs(e,t,n,r,i,o){if(null!==e&&ri(e.memoizedProps,r)&&e.ref===t.ref){if(Is=!1,0==(o&i))return t.lanes=e.lanes,$s(e,t,o);0!=(16384&e.flags)&&(Is=!0)}return Os(e,t,n,r,o)}function Ls(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},dl(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},dl(t,e),null;t.memoizedState={baseLanes:0},dl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,dl(t,r);return As(e,t,i,n),t.child}function Ns(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Os(e,t,n,r,i){var o=uo(n)?ao:io.current;return o=so(t,o),Qo(t,i),n=Ja(e,t,n,r,o,i),null===e||Is?(t.flags|=1,As(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,$s(e,t,i))}function Ds(e,t,n,r,i){if(uo(n)){var o=!0;fo(t)}else o=!1;if(Qo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ha(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=Jo(l):l=so(t,l=uo(n)?ao:io.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&fa(t,a,r,l),Zo=!1;var f=t.memoizedState;a.state=f,oa(t,r,a,i),u=t.memoizedState,s!==r||f!==u||oo.current||Zo?("function"==typeof c&&(ua(t,n,c,r),u=t.memoizedState),(s=Zo||ca(t,n,s,r,f,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ta(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ho(t.type,s),a.props=l,h=t.pendingProps,f=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=Jo(u):u=so(t,u=uo(n)?ao:io.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||f!==u)&&fa(t,a,r,u),Zo=!1,f=t.memoizedState,a.state=f,oa(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||oo.current||Zo?("function"==typeof d&&(ua(t,n,d,r),p=t.memoizedState),(l=Zo||ca(t,n,l,r,f,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Fs(e,t,n,r,o,i)}function Fs(e,t,n,r,i,o){Ns(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&po(t,n,!1),$s(e,t,o);r=t.stateNode,Cs.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ya(t,e.child,null,o),t.child=ya(t,null,s,o)):As(e,t,s,o),t.memoizedState=r.state,i&&po(t,n,!0),t.child}function Us(e){var t=e.stateNode;t.pendingContext?co(0,t.pendingContext,t.pendingContext!==t.context):t.context&&co(0,t.context,!1),Ta(e,t.containerInfo)}var zs,js,Bs,Vs={dehydrated:null,retryLane:0};function Hs(e,t,n){var r,i=t.pendingProps,o=Aa.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),no(Aa,1&o),null===e?(void 0!==i.fallback&&Da(t),e=i.children,o=i.fallback,a?(e=Ws(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vs,e):"number"==typeof i.unstable_expectedLoadTime?(e=Ws(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vs,t.lanes=33554432,e):((n=jl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=qs(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Vs,i):(n=Gs(e,t,i.children,n),t.memoizedState=null,n))}function Ws(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=jl(t,i,0,null),n=zl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Gs(e,t,n,r){var i=e.child;return e=i.sibling,n=Fl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function qs(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Fl(a,s),null!==e?r=Fl(e,r):(r=zl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ks(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),$o(e.return,t)}function Xs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Ys(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(As(e,t,r.children,n),0!=(2&(r=Aa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n);else if(19===e.tag)Ks(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(no(Aa,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ka(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ka(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xs(t,!0,n,null,o,t.lastEffect);break;case"together":Xs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function $s(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(ee(153));if(null!==t.child){for(n=Fl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Qs(e,t){if(!La)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Js(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return uo(t.type)&&lo(),null;case 3:return Ma(),to(oo),to(io),Ba(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ia(t);var i=Ea(Sa.current);if(n=t.type,null!==e&&null!=t.stateNode)js(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(ee(166));return null}if(e=Ea(wa.current),Ua(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Hi]=t,r[Wi]=o,n){case"dialog":wi("cancel",r),wi("close",r);break;case"iframe":case"object":case"embed":wi("load",r);break;case"video":case"audio":for(e=0;e<vi.length;e++)wi(vi[e],r);break;case"source":wi("error",r);break;case"img":case"image":case"link":wi("error",r),wi("load",r);break;case"details":wi("toggle",r);break;case"input":Xe(r,o),wi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},wi("invalid",r);break;case"textarea":nt(r,o),wi("invalid",r)}for(var a in yt(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):ne.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&wi("scroll",r));switch(n){case"input":We(r),Qe(r,o,!0);break;case"textarea":We(r),it(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Pi)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===ot&&(e=st(n)),e===ot?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Hi]=t,e[Wi]=r,zs(e,t),t.stateNode=e,a=bt(n,r),n){case"dialog":wi("cancel",e),wi("close",e),i=r;break;case"iframe":case"object":case"embed":wi("load",e),i=r;break;case"video":case"audio":for(i=0;i<vi.length;i++)wi(vi[i],e);i=r;break;case"source":wi("error",e),i=r;break;case"img":case"image":case"link":wi("error",e),wi("load",e),i=r;break;case"details":wi("toggle",e),i=r;break;case"input":Xe(e,r),i=Ke(e,r),wi("invalid",e);break;case"option":i=Ze(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=J({},r,{value:void 0}),wi("invalid",e);break;case"textarea":nt(e,r),i=tt(e,r),wi("invalid",e);break;default:i=r}yt(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?gt(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&ft(e,u):"number"==typeof u&&ft(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ne.hasOwnProperty(o)?null!=u&&"onScroll"===o&&wi("scroll",e):null!=u&&pe(e,o,u,a))}switch(n){case"input":We(e),Qe(e,r,!1);break;case"textarea":We(e),it(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?et(e,!!r.multiple,o,!1):null!=r.defaultValue&&et(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Pi)}Ni(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Bs(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ee(166));n=Ea(Sa.current),Ea(wa.current),Ua(t)?(r=t.stateNode,n=t.memoizedProps,r[Hi]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Hi]=t,t.stateNode=r)}return null;case 13:return to(Aa),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ua(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Aa.current)?0===Au&&(Au=3):(0!==Au&&3!==Au||(Au=4),null===Eu||0==(134217727&Ru)&&0==(134217727&Lu)||ll(Eu,Mu))),(r||n)&&(t.flags|=4),null);case 4:return Ma(),null===e&&Si(t.stateNode.containerInfo),null;case 10:return Yo(t),null;case 17:return uo(t.type)&&lo(),null;case 19:if(to(Aa),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Qs(r,!1);else{if(0!==Au||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=ka(e))){for(t.flags|=64,Qs(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return no(Aa,1&Aa.current|2),t.child}e=e.sibling}null!==r.tail&&Oo()>Fu&&(t.flags|=64,o=!0,Qs(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=ka(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!La)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Oo()-r.renderingStartTime>Fu&&1073741824!==n&&(t.flags|=64,o=!0,Qs(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Oo(),n.sibling=null,t=Aa.current,no(Aa,o?1&t|2:1&t),n):null;case 23:case 24:return pl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(ee(156,t.tag))}function Zs(e){switch(e.tag){case 1:uo(e.type)&&lo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ma(),to(oo),to(io),Ba(),0!=(64&(t=e.flags)))throw Error(ee(285));return e.flags=-4097&t|64,e;case 5:return Ia(e),null;case 13:return to(Aa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return to(Aa),null;case 4:return Ma(),null;case 10:return Yo(e),null;case 23:case 24:return pl(),null;default:return null}}function eu(e,t){try{var n="",r=t;do{n+=je(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function tu(e,t){try{console.error(t.value)}catch(Py){setTimeout((function(){throw Py}))}}zs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ea(wa.current);var o,a=null;switch(n){case"input":i=Ke(e,i),r=Ke(e,r),a=[];break;case"option":i=Ze(e,i),r=Ze(e,r),a=[];break;case"select":i=J({},i,{value:void 0}),r=J({},r,{value:void 0}),a=[];break;case"textarea":i=tt(e,i),r=tt(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Pi)}for(l in yt(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ne.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(ne.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&wi("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Ae?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var nu="function"==typeof WeakMap?WeakMap:Map;function ru(e,t,n){(n=na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bu||(Bu=!0,Vu=r),tu(0,t)},n}function iu(e,t,n){(n=na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return tu(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this),tu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ou="function"==typeof WeakSet?WeakSet:Set;function au(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(Py){Pl(e,Py)}else t.current=null}function su(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ho(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Ui(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(ee(163))}function uu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Il(n,e),Cl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ho(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&aa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}aa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ni(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&vn(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ee(163))}function lu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=mt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function cu(e,t){if(go&&"function"==typeof go.onCommitFiberUnmount)try{go.onCommitFiberUnmount(mo,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Il(t,n);else{r=t;try{i()}catch(o){Pl(r,o)}}n=n.next}while(n!==e)}break;case 1:if(au(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Pl(t,o)}break;case 5:au(t);break;case 4:gu(e,t)}}function hu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function fu(e){return 5===e.tag||3===e.tag||4===e.tag}function du(e){e:{for(var t=e.return;null!==t;){if(fu(t))break e;t=t.return}throw Error(ee(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(ee(161))}16&n.flags&&(ft(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?pu(e,n,t):mu(e,n,t)}function pu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Pi));else if(4!==r&&null!==(e=e.child))for(pu(e,t,n),e=e.sibling;null!==e;)pu(e,t,n),e=e.sibling}function mu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(mu(e,t,n),e=e.sibling;null!==e;)mu(e,t,n),e=e.sibling}function gu(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(ee(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(cu(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(cu(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function vu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Wi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ye(n,r),bt(e,i),t=bt(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?gt(n,s):"dangerouslySetInnerHTML"===a?ht(n,s):"children"===a?ft(n,s):pe(n,a,s,t)}switch(e){case"input":$e(n,r);break;case"textarea":rt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?et(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?et(n,!!r.multiple,r.defaultValue,!0):et(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(ee(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,vn(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Du=Oo(),lu(t.child,!0)),void yu(t);case 19:return void yu(t);case 17:return;case 23:case 24:return void lu(t,null!==t.memoizedState)}throw Error(ee(163))}function yu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ou),t.forEach((function(t){var r=Ll.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function bu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var _u=Math.ceil,wu=me.ReactCurrentDispatcher,xu=me.ReactCurrentOwner,Su=0,Eu=null,Tu=null,Mu=0,Cu=0,Iu=eo(0),Au=0,ku=null,Pu=0,Ru=0,Lu=0,Nu=0,Ou=null,Du=0,Fu=1/0;function Uu(){Fu=Oo()+500}var zu,ju=null,Bu=!1,Vu=null,Hu=null,Wu=!1,Gu=null,qu=90,Ku=[],Xu=[],Yu=null,$u=0,Qu=null,Ju=-1,Zu=0,el=0,tl=null,nl=!1;function rl(){return 0!=(48&Su)?Oo():-1!==Ju?Ju:Ju=Oo()}function il(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Do()?1:2;if(0===Zu&&(Zu=Pu),0!==Vo.transition){0!==el&&(el=null!==Ou?Ou.pendingLanes:0),e=Zu;var t=4186112&~el;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Do(),0!=(4&Su)&&98===e?e=On(12,Zu):e=On(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Zu),e}function ol(e,t,n){if(50<$u)throw $u=0,Qu=null,Error(ee(185));if(null===(e=al(e,t)))return null;Un(e,t,n),e===Eu&&(Lu|=t,4===Au&&ll(e,Mu));var r=Do();1===t?0!=(8&Su)&&0==(48&Su)?cl(e):(sl(e,n),0===Su&&(Uu(),jo())):(0==(4&Su)||98!==r&&99!==r||(null===Yu?Yu=new Set([e]):Yu.add(e)),sl(e,n)),Ou=e}function al(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function sl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-zn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Rn(u);var c=Pn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ln(e,e===Eu?Mu:0),t=Pn,0===r)null!==n&&(n!==Ao&&bo(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ao&&bo(n)}15===t?(n=cl.bind(null,e),null===Po?(Po=[n],Ro=yo(Eo,Bo)):Po.push(n),n=Ao):14===t?n=zo(99,cl.bind(null,e)):n=zo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ee(358,e))}}(t),ul.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ul(e){if(Ju=-1,el=Zu=0,0!=(48&Su))throw Error(ee(327));var t=e.callbackNode;if(Ml()&&e.callbackNode!==t)return null;var n=Ln(e,e===Eu?Mu:0);if(0===n)return null;var r=n,i=Su;Su|=16;var o=vl();for(Eu===e&&Mu===r||(Uu(),ml(e,r));;)try{_l();break}catch(s){gl(e,s)}if(Xo(),wu.current=o,Su=i,null!==Tu?r=0:(Eu=null,Mu=0,r=Au),0!=(Pu&Lu))ml(e,0);else if(0!==r){if(2===r&&(Su|=64,e.hydrate&&(e.hydrate=!1,Ui(e.containerInfo)),0!==(n=Nn(e))&&(r=yl(e,n))),1===r)throw t=ku,ml(e,0),ll(e,n),sl(e,Oo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(ee(345));case 2:Sl(e);break;case 3:if(ll(e,n),(62914560&n)===n&&10<(r=Du+500-Oo())){if(0!==Ln(e,0))break;if(((i=e.suspendedLanes)&n)!==n){rl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Di(Sl.bind(null,e),r);break}Sl(e);break;case 4:if(ll(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-zn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Oo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_u(n/1960))-n)){e.timeoutHandle=Di(Sl.bind(null,e),n);break}Sl(e);break;case 5:Sl(e);break;default:throw Error(ee(329))}}return sl(e,Oo()),e.callbackNode===t?ul.bind(null,e):null}function ll(e,t){for(t&=~Nu,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zn(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!=(48&Su))throw Error(ee(327));if(Ml(),e===Eu&&0!=(e.expiredLanes&Mu)){var t=Mu,n=yl(e,t);0!=(Pu&Lu)&&(n=yl(e,t=Ln(e,t)))}else n=yl(e,t=Ln(e,0));if(0!==e.tag&&2===n&&(Su|=64,e.hydrate&&(e.hydrate=!1,Ui(e.containerInfo)),0!==(t=Nn(e))&&(n=yl(e,t))),1===n)throw n=ku,ml(e,0),ll(e,t),sl(e,Oo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sl(e),sl(e,Oo()),null}function hl(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(Uu(),jo())}}function fl(e,t){var n=Su;Su&=-2,Su|=8;try{return e(t)}finally{0===(Su=n)&&(Uu(),jo())}}function dl(e,t){no(Iu,Cu),Cu|=t,Pu|=t}function pl(){Cu=Iu.current,to(Iu)}function ml(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Fi(n)),null!==Tu)for(n=Tu.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&lo();break;case 3:Ma(),to(oo),to(io),Ba();break;case 5:Ia(r);break;case 4:Ma();break;case 13:case 19:to(Aa);break;case 10:Yo(r);break;case 23:case 24:pl()}n=n.return}Eu=e,Tu=Fl(e.current,null),Mu=Cu=Pu=t,Au=0,ku=null,Nu=Lu=Ru=0}function gl(e,t){for(;;){var n=Tu;try{if(Xo(),Va.current=Ss,Xa){for(var r=Ga.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Xa=!1}if(Wa=0,Ka=qa=Ga=null,Ya=!1,xu.current=null,null===n||null===n.return){Au=1,ku=t,Tu=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Mu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Aa.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var v=new Set;v.add(l),f.updateQueue=v}else g.add(l);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=na(-1,1);y.tag=2,ra(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new nu,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var _=Rl.bind(null,o,l,s);l.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((Be(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Au&&(Au=2),u=eu(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,ia(f,ru(0,o,t));break e;case 1:o=u;var w=f.type,x=f.stateNode;if(0==(64&f.flags)&&("function"==typeof w.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Hu||!Hu.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,ia(f,iu(f,o,t));break e}}f=f.return}while(null!==f)}xl(n)}catch(S){t=S,Tu===n&&null!==n&&(Tu=n=n.return);continue}break}}function vl(){var e=wu.current;return wu.current=Ss,null===e?Ss:e}function yl(e,t){var n=Su;Su|=16;var r=vl();for(Eu===e&&Mu===t||ml(e,t);;)try{bl();break}catch(bX){gl(e,bX)}if(Xo(),Su=n,wu.current=r,null!==Tu)throw Error(ee(261));return Eu=null,Mu=0,Au}function bl(){for(;null!==Tu;)wl(Tu)}function _l(){for(;null!==Tu&&!_o();)wl(Tu)}function wl(e){var t=zu(e.alternate,e,Cu);e.memoizedProps=e.pendingProps,null===t?xl(e):Tu=t,xu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=Js(n,t,Cu)))return void(Tu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Cu)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Zs(t)))return n.flags&=2047,void(Tu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Tu=t);Tu=t=e}while(null!==t);0===Au&&(Au=5)}function Sl(e){var t=Do();return Uo(99,El.bind(null,e,t)),null}function El(e,t){do{Ml()}while(null!==Gu);if(0!=(48&Su))throw Error(ee(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-zn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==Yu&&0==(24&r)&&Yu.has(e)&&Yu.delete(e),e===Eu&&(Tu=Eu=null,Mu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Su,Su|=32,xu.current=null,Ri=Wn,ui(a=si())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(T){s=null;break e}var c=0,h=-1,f=-1,d=0,p=0,m=a,g=null;t:for(;;){for(var v;m!==s||0!==o&&3!==m.nodeType||(h=c+o),m!==u||0!==l&&3!==m.nodeType||(f=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(v=m.firstChild);)g=m,m=v;for(;;){if(m===a)break t;if(g===s&&++d===o&&(h=c),g===u&&++p===l&&(f=c),null!==(v=m.nextSibling))break;g=(m=g).parentNode}m=v}s=-1===h||-1===f?null:{start:h,end:f}}else s=null;s=s||{start:0,end:0}}else s=null;Li={focusedElem:a,selectionRange:s},Wn=!1,tl=null,nl=!1,ju=r;do{try{Tl()}catch(T){if(null===ju)throw Error(ee(330));Pl(ju,T),ju=ju.nextEffect}}while(null!==ju);tl=null,ju=r;do{try{for(a=e;null!==ju;){var y=ju.flags;if(16&y&&ft(ju.stateNode,""),128&y){var b=ju.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&y){case 2:du(ju),ju.flags&=-3;break;case 6:du(ju),ju.flags&=-3,vu(ju.alternate,ju);break;case 1024:ju.flags&=-1025;break;case 1028:ju.flags&=-1025,vu(ju.alternate,ju);break;case 4:vu(ju.alternate,ju);break;case 8:gu(a,s=ju);var w=s.alternate;hu(s),null!==w&&hu(w)}ju=ju.nextEffect}}catch(T){if(null===ju)throw Error(ee(330));Pl(ju,T),ju=ju.nextEffect}}while(null!==ju);if(_=Li,b=si(),y=_.focusedElem,a=_.selectionRange,b!==y&&y&&y.ownerDocument&&ai(y.ownerDocument.documentElement,y)){null!==a&&ui(y)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(_,y.value.length)):(_=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),s=y.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!_.extend&&w>a&&(s=a,a=w,w=s),s=oi(y,w),o=oi(y,a),s&&o&&(1!==_.rangeCount||_.anchorNode!==s.node||_.anchorOffset!==s.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),_.removeAllRanges(),w>a?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=y;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<b.length;y++)(_=b[y]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Wn=!!Ri,Li=Ri=null,e.current=n,ju=r;do{try{for(y=e;null!==ju;){var x=ju.flags;if(36&x&&uu(y,ju.alternate,ju),128&x){b=void 0;var S=ju.ref;if(null!==S){var E=ju.stateNode;switch(ju.tag){case 5:b=E;break;default:b=E}"function"==typeof S?S(b):S.current=b}}ju=ju.nextEffect}}catch(T){if(null===ju)throw Error(ee(330));Pl(ju,T),ju=ju.nextEffect}}while(null!==ju);ju=null,ko(),Su=i}else e.current=n;if(Wu)Wu=!1,Gu=e,qu=t;else for(ju=r;null!==ju;)t=ju.nextEffect,ju.nextEffect=null,8&ju.flags&&((x=ju).sibling=null,x.stateNode=null),ju=t;if(0===(r=e.pendingLanes)&&(Hu=null),1===r?e===Qu?$u++:($u=0,Qu=e):$u=0,n=n.stateNode,go&&"function"==typeof go.onCommitFiberRoot)try{go.onCommitFiberRoot(mo,n,void 0,64==(64&n.current.flags))}catch(T){}if(sl(e,Oo()),Bu)throw Bu=!1,e=Vu,Vu=null,e;return 0!=(8&Su)||jo(),null}function Tl(){for(;null!==ju;){var e=ju.alternate;nl||null===tl||(0!=(8&ju.flags)?Xt(ju,tl)&&(nl=!0):13===ju.tag&&bu(e,ju)&&Xt(ju,tl)&&(nl=!0));var t=ju.flags;0!=(256&t)&&su(e,ju),0==(512&t)||Wu||(Wu=!0,zo(97,(function(){return Ml(),null}))),ju=ju.nextEffect}}function Ml(){if(90!==qu){var e=97<qu?97:qu;return qu=90,Uo(e,Al)}return!1}function Cl(e,t){Ku.push(t,e),Wu||(Wu=!0,zo(97,(function(){return Ml(),null})))}function Il(e,t){Xu.push(t,e),Wu||(Wu=!0,zo(97,(function(){return Ml(),null})))}function Al(){if(null===Gu)return!1;var e=Gu;if(Gu=null,0!=(48&Su))throw Error(ee(331));var t=Su;Su|=32;var n=Xu;Xu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(u){if(null===o)throw Error(ee(330));Pl(o,u)}}for(n=Ku,Ku=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(u){if(null===o)throw Error(ee(330));Pl(o,u)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Su=t,jo(),!0}function kl(e,t,n){ra(e,t=ru(0,t=eu(n,t),1)),t=rl(),null!==(e=al(e,1))&&(Un(e,1,t),sl(e,t))}function Pl(e,t){if(3===e.tag)kl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){kl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){var i=iu(n,e=eu(t,e),1);if(ra(n,i),i=rl(),null!==(n=al(n,1)))Un(n,1,i),sl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Hu||!Hu.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Rl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rl(),e.pingedLanes|=e.suspendedLanes&n,Eu===e&&(Mu&n)===n&&(4===Au||3===Au&&(62914560&Mu)===Mu&&500>Oo()-Du?ml(e,0):Nu|=n),sl(e,t)}function Ll(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Do()?1:2:(0===Zu&&(Zu=Pu),0===(t=Dn(62914560&~Zu))&&(t=4194304))),n=rl(),null!==(e=al(e,t))&&(Un(e,t,n),sl(e,n))}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Nl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ul(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Dl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ye:return zl(n.children,i,o,t);case ke:a=8,i|=16;break;case be:a=8,i|=1;break;case _e:return(e=Ol(12,n,t,8|i)).elementType=_e,e.type=_e,e.lanes=o,e;case Ee:return(e=Ol(13,n,t,i)).type=Ee,e.elementType=Ee,e.lanes=o,e;case Te:return(e=Ol(19,n,t,i)).elementType=Te,e.lanes=o,e;case Pe:return jl(n,i,o,t);case Re:return(e=Ol(24,n,t,i)).elementType=Re,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case we:a=10;break e;case xe:a=9;break e;case Se:a=11;break e;case Me:a=14;break e;case Ce:a=16,r=null;break e;case Ie:a=22;break e}throw Error(ee(130,null==e?e:typeof e,""))}return(t=Ol(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=Ol(23,e,r,t)).elementType=Pe,e.lanes=n,e}function Bl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Fn(0),this.expirationTimes=Fn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.mutableSourceEagerHydrationData=null}function Wl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ve,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Gl(e,t,n,r){var i=t.current,o=rl(),a=il(i);e:if(n){t:{if(Wt(n=n._reactInternals)!==n||1!==n.tag)throw Error(ee(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(uo(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(ee(171))}if(1===n.tag){var u=n.type;if(uo(u)){n=ho(n,u,s);break e}}n=s}else n=ro;return null===t.context?t.context=n:t.pendingContext=n,(t=na(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ra(i,t),ol(i,a,o),a}function ql(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}function Yl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Hl(e,t,null!=n&&!0===n.hydrate),t=Ol(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ea(t),e[Gi]=n.current,Si(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ql(a);s.call(e)}}Gl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Yl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=ql(a);u.call(e)}}fl((function(){Gl(t,a,e,i)}))}return ql(a)}function Jl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(ee(200));return Wl(e,t,null,n)}zu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||oo.current)Is=!0;else{if(0==(n&r)){switch(Is=!1,t.tag){case 3:Us(t),za();break;case 5:Ca(t);break;case 1:uo(t.type)&&fo(t);break;case 4:Ta(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;no(Wo,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Hs(e,t,n):(no(Aa,1&Aa.current),null!==(t=$s(e,t,n))?t.sibling:null);no(Aa,1&Aa.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ys(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),no(Aa,Aa.current),r)break;return null;case 23:case 24:return t.lanes=0,Ls(e,t,n)}return $s(e,t,n)}Is=0!=(16384&e.flags)}else Is=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=so(t,io.current),Qo(t,n),i=Ja(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,uo(r)){var o=!0;fo(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ea(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ua(t,r,a,e),i.updater=la,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Fs(null,t,r,!0,o,n)}else t.tag=0,As(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Dl(e)?1:0;if(null!=e){if((e=e.$$typeof)===Se)return 11;if(e===Me)return 14}return 2}(i),e=Ho(i,e),o){case 0:t=Os(null,t,i,e,n);break e;case 1:t=Ds(null,t,i,e,n);break e;case 11:t=ks(null,t,i,e,n);break e;case 14:t=Ps(null,t,i,Ho(i.type,e),r,n);break e}throw Error(ee(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Os(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ds(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 3:if(Us(t),r=t.updateQueue,null===e||null===r)throw Error(ee(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ta(e,t),oa(t,r,null,n),(r=t.memoizedState.element)===i)za(),t=$s(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Ra=zi(t.stateNode.containerInfo.firstChild),Pa=t,o=La=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],ja.push(o);for(n=ba(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else As(e,t,r,n),za();t=t.child}return t;case 5:return Ca(t),null===e&&Da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Oi(r,i)?a=null:null!==o&&Oi(r,o)&&(t.flags|=16),Ns(e,t),As(e,t,a,n),t.child;case 6:return null===e&&Da(t),null;case 13:return Hs(e,t,n);case 4:return Ta(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ya(t,null,r,n):As(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 7:return As(e,t,t.pendingProps,n),t.child;case 8:case 12:return As(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(no(Wo,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=ti(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!oo.current){t=$s(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=na(-1,n&-n)).tag=2,ra(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),$o(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}As(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Qo(t,n),r=r(i=Jo(i,o.unstable_observedBits)),t.flags|=1,As(e,t,r,n),t.child;case 14:return o=Ho(i=t.type,t.pendingProps),Ps(e,t,i,o=Ho(i.type,o),r,n);case 15:return Rs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ho(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,uo(r)?(e=!0,fo(t)):e=!1,Qo(t,n),ha(t,r,i),da(t,r,i,n),Fs(null,t,r,!0,e,n);case 19:return Ys(e,t,n);case 23:case 24:return Ls(e,t,n)}throw Error(ee(156,t.tag))},Yl.prototype.render=function(e){Gl(e,this._internalRoot,null,null)},Yl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Gl(null,e,null,(function(){t[Gi]=null}))},Yt=function(e){13===e.tag&&(ol(e,4,rl()),Xl(e,4))},$t=function(e){13===e.tag&&(ol(e,67108864,rl()),Xl(e,67108864))},Qt=function(e){if(13===e.tag){var t=rl(),n=il(e);ol(e,n,t),Xl(e,n)}},Jt=function(e,t){return t()},wt=function(e,t,n){switch(t){case"input":if($e(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$i(r);if(!i)throw Error(ee(90));Ge(r),$e(r,i)}}}break;case"textarea":rt(e,n);break;case"select":null!=(t=n.value)&&et(e,!!n.multiple,t,!1)}},Ct=hl,It=function(e,t,n,r,i){var o=Su;Su|=4;try{return Uo(98,e.bind(null,t,n,r,i))}finally{0===(Su=o)&&(Uu(),jo())}},At=function(){0==(49&Su)&&(function(){if(null!==Yu){var e=Yu;Yu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,sl(e,Oo())}))}jo()}(),Ml())},kt=function(e,t){var n=Su;Su|=2;try{return e(t)}finally{0===(Su=n)&&(Uu(),jo())}};var Zl={Events:[Xi,Yi,$i,Tt,Mt,Ml,{current:!1}]},ec={findFiberByHostInstance:Ki,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},tc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Kt(e))?null:e.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{mo=nc.inject(tc),go=nc}catch(ct){}}X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zl,X.createPortal=Jl,X.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ee(188));throw Error(ee(268,Object.keys(e)))}return e=null===(e=Kt(t))?null:e.stateNode},X.flushSync=function(e,t){var n=Su;if(0!=(48&n))return e(t);Su|=1;try{if(e)return Uo(99,e.bind(null,t))}finally{Su=n,jo()}},X.hydrate=function(e,t,n){if(!$l(t))throw Error(ee(200));return Ql(null,e,t,!0,n)},X.render=function(e,t,n){if(!$l(t))throw Error(ee(200));return Ql(null,e,t,!1,n)},X.unmountComponentAtNode=function(e){if(!$l(e))throw Error(ee(40));return!!e._reactRootContainer&&(fl((function(){Ql(null,null,e,!1,(function(){e._reactRootContainer=null,e[Gi]=null}))})),!0)},X.unstable_batchedUpdates=hl,X.unstable_createPortal=function(e,t){return Jl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},X.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(ee(200));if(null==e||void 0===e._reactInternals)throw Error(ee(38));return Ql(e,t,n,!1,r)},X.version="17.0.2",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),K.exports=X;var rc=K.exports;
/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ic=1,oc=2;class ac{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const sc=[];for(let bre=0;bre<256;bre++)sc[bre]=(bre<16?"0":"")+bre.toString(16);const uc=Math.PI/180,lc=180/Math.PI;function cc(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(sc[255&e]+sc[e>>8&255]+sc[e>>16&255]+sc[e>>24&255]+"-"+sc[255&t]+sc[t>>8&255]+"-"+sc[t>>16&15|64]+sc[t>>24&255]+"-"+sc[63&n|128]+sc[n>>8&255]+"-"+sc[n>>16&255]+sc[n>>24&255]+sc[255&r]+sc[r>>8&255]+sc[r>>16&255]+sc[r>>24&255]).toUpperCase()}function hc(e,t,n){return Math.max(t,Math.min(n,e))}function fc(e,t,n){return(1-n)*e+n*t}function dc(e){return 0==(e&e-1)&&0!==e}function pc(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}class mc{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}mc.prototype.isVector2=!0;class gc{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+a*v+s*_,i[3]=o*m+a*y+s*w,i[6]=o*g+a*b+s*x,i[1]=u*p+l*v+c*_,i[4]=u*m+l*y+c*w,i[7]=u*g+l*b+c*x,i[2]=h*p+f*v+d*_,i[5]=h*m+f*y+d*w,i[8]=h*g+f*b+d*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=l*o-a*u,h=a*s-l*i,f=u*i-o*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let vc;gc.prototype.isMatrix3=!0;class yc{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===vc&&(vc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),vc.width=e.width,vc.height=e.height;const n=vc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let bc=0;class _c extends ac{constructor(e=_c.DEFAULT_IMAGE,t=_c.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,u=1,l=3e3){super(),Object.defineProperty(this,"id",{value:bc++}),this.uuid=cc(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new mc(0,0),this.repeat=new mc(1,1),this.center=new mc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=cc()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(wc(r[e].image)):t.push(wc(r[e]))}else t=wc(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function wc(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?yc.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}_c.DEFAULT_IMAGE=void 0,_c.DEFAULT_MAPPING=300,_c.prototype.isTexture=!0;class xc{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(l-h)<o&&Math.abs(c-p)<o&&Math.abs(d-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+p)<a&&Math.abs(d+m)<a&&Math.abs(u+f+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(u+1)/2,s=(f+1)/2,v=(g+1)/2,y=(l+h)/4,b=(c+p)/4,_=(d+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=_/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(m-d)/v,this.y=(c-p)/v,this.z=(h-l)/v,this.w=Math.acos((u+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}xc.prototype.isVector4=!0;class Sc extends ac{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new xc(0,0,e,t),this.scissorTest=!1,this.viewport=new xc(0,0,e,t),this.texture=new _c(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=((e,o)=>{for(var a in o||(o={}))n.call(o,a)&&i(e,a,o[a]);if(t)for(var a of t(o))r.call(o,a)&&i(e,a,o[a]);return e})({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Sc.prototype.isWebGLRenderTarget=!0;(class extends Sc{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let i=0;i<n;i++)this.texture[i]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Ec extends Sc{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Ec.prototype.isWebGLMultisampleRenderTarget=!0;class Tc{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3];const h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){let e=1-a;const t=s*h+u*f+l*d+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,u=u*e+f*i,l=l*e+d*i,c=c*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=e,u*=e,l*=e,c*=e}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return e[t]=a*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-a*f,e[t+2]=u*d+l*f+a*h-s*c,e[t+3]=l*d-a*c-s*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+a+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(i-u)*e,this._z=(o-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(l-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+u)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(o-r)/e,this._x=(i+u)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hc(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(s),l=Math.atan2(u,a),c=Math.sin((1-t)*l)/u,h=Math.sin(t*l)/u;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Tc.prototype.isQuaternion=!0;class Mc{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ic.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ic.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Cc.copy(this).projectOnVector(e),this.sub(Cc)}reflect(e){return this.sub(Cc.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hc(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Mc.prototype.isVector3=!0;const Cc=new Mc,Ic=new Tc;class Ac{constructor(e=new Mc(1/0,1/0,1/0),t=new Mc(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.length;s<u;s+=3){const u=e[s],l=e[s+1],c=e[s+2];u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>o&&(o=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.count;s<u;s++){const u=e.getX(s),l=e.getY(s),c=e.getZ(s);u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>o&&(o=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Pc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Rc.copy(t.boundingBox),Rc.applyMatrix4(e.matrixWorld),this.union(Rc));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Pc),Pc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zc),jc.subVectors(this.max,zc),Lc.subVectors(e.a,zc),Nc.subVectors(e.b,zc),Oc.subVectors(e.c,zc),Dc.subVectors(Nc,Lc),Fc.subVectors(Oc,Nc),Uc.subVectors(Lc,Oc);let t=[0,-Dc.z,Dc.y,0,-Fc.z,Fc.y,0,-Uc.z,Uc.y,Dc.z,0,-Dc.x,Fc.z,0,-Fc.x,Uc.z,0,-Uc.x,-Dc.y,Dc.x,0,-Fc.y,Fc.x,0,-Uc.y,Uc.x,0];return!!Hc(t,Lc,Nc,Oc,jc)&&(t=[1,0,0,0,1,0,0,0,1],!!Hc(t,Lc,Nc,Oc,jc)&&(Bc.crossVectors(Dc,Fc),t=[Bc.x,Bc.y,Bc.z],Hc(t,Lc,Nc,Oc,jc)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Pc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Pc).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(kc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ac.prototype.isBox3=!0;const kc=[new Mc,new Mc,new Mc,new Mc,new Mc,new Mc,new Mc,new Mc],Pc=new Mc,Rc=new Ac,Lc=new Mc,Nc=new Mc,Oc=new Mc,Dc=new Mc,Fc=new Mc,Uc=new Mc,zc=new Mc,jc=new Mc,Bc=new Mc,Vc=new Mc;function Hc(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Vc.fromArray(e,o);const a=i.x*Math.abs(Vc.x)+i.y*Math.abs(Vc.y)+i.z*Math.abs(Vc.z),s=t.dot(Vc),u=n.dot(Vc),l=r.dot(Vc);if(Math.max(-Math.max(s,u,l),Math.min(s,u,l))>a)return!1}return!0}const Wc=new Ac,Gc=new Mc,qc=new Mc,Kc=new Mc;class Xc{constructor(e=new Mc,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Wc.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Kc.subVectors(e,this.center);const t=Kc.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Kc.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return qc.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Gc.copy(e.center).add(qc)),this.expandByPoint(Gc.copy(e.center).sub(qc)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Yc=new Mc,$c=new Mc,Qc=new Mc,Jc=new Mc,Zc=new Mc,eh=new Mc,th=new Mc;class nh{constructor(e=new Mc,t=new Mc(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Yc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Yc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yc.copy(this.direction).multiplyScalar(t).add(this.origin),Yc.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){$c.copy(e).add(t).multiplyScalar(.5),Qc.copy(t).sub(e).normalize(),Jc.copy(this.origin).sub($c);const i=.5*e.distanceTo(t),o=-this.direction.dot(Qc),a=Jc.dot(this.direction),s=-Jc.dot(Qc),u=Jc.lengthSq(),l=Math.abs(1-o*o);let c,h,f,d;if(l>0)if(c=o*s-a,h=o*a-s,d=i*l,c>=0)if(h>=-d)if(h<=d){const e=1/l;c*=e,h*=e,f=c*(c+o*h+2*a)+h*(o*c+h+2*s)+u}else h=i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;else h=-i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;else h<=-d?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+u):h<=d?(c=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+u):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+u);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Qc).multiplyScalar(h).add($c),f}intersectSphere(e,t){Yc.subVectors(e.center,this.origin);const n=Yc.dot(this.direction),r=Yc.dot(Yc)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Yc)}intersectTriangle(e,t,n,r,i){Zc.subVectors(t,e),eh.subVectors(n,e),th.crossVectors(Zc,eh);let o,a=this.direction.dot(th);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Jc.subVectors(this.origin,e);const s=o*this.direction.dot(eh.crossVectors(Jc,eh));if(s<0)return null;const u=o*this.direction.dot(Zc.cross(Jc));if(u<0)return null;if(s+u>a)return null;const l=-o*Jc.dot(th);return l<0?null:this.at(l/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class rh{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new rh).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ih.setFromMatrixColumn(e,0).length(),i=1/ih.setFromMatrixColumn(e,1).length(),o=1/ih.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=o*l,n=o*c,r=a*l,i=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=n+r*u,t[5]=e-i*u,t[9]=-a*s,t[2]=i-e*u,t[6]=r+n*u,t[10]=o*s}else if("YXZ"===e.order){const e=s*l,n=s*c,r=u*l,i=u*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*l,n=s*c,r=u*l,i=u*c;t[0]=e-i*a,t[4]=-o*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*l,t[9]=i-e*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*l,n=o*c,r=a*l,i=a*c;t[0]=s*l,t[4]=r*u-n,t[8]=e*u+i,t[1]=s*c,t[5]=i*u+e,t[9]=n*u-r,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*l,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=e*c+i,t[5]=o*l,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*l,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ah,e,sh)}lookAt(e,t,n){const r=this.elements;return ch.subVectors(e,t),0===ch.lengthSq()&&(ch.z=1),ch.normalize(),uh.crossVectors(n,ch),0===uh.lengthSq()&&(1===Math.abs(n.z)?ch.x+=1e-4:ch.z+=1e-4,ch.normalize(),uh.crossVectors(n,ch)),uh.normalize(),lh.crossVectors(ch,uh),r[0]=uh.x,r[4]=lh.x,r[8]=ch.x,r[1]=uh.y,r[5]=lh.y,r[9]=ch.y,r[2]=uh.z,r[6]=lh.z,r[10]=ch.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],E=r[12],T=r[1],M=r[5],C=r[9],I=r[13],A=r[2],k=r[6],P=r[10],R=r[14],L=r[3],N=r[7],O=r[11],D=r[15];return i[0]=o*w+a*T+s*A+u*L,i[4]=o*x+a*M+s*k+u*N,i[8]=o*S+a*C+s*P+u*O,i[12]=o*E+a*I+s*R+u*D,i[1]=l*w+c*T+h*A+f*L,i[5]=l*x+c*M+h*k+f*N,i[9]=l*S+c*C+h*P+f*O,i[13]=l*E+c*I+h*R+f*D,i[2]=d*w+p*T+m*A+g*L,i[6]=d*x+p*M+m*k+g*N,i[10]=d*S+p*C+m*P+g*O,i[14]=d*E+p*I+m*R+g*D,i[3]=v*w+y*T+b*A+_*L,i[7]=v*x+y*M+b*k+_*N,i[11]=v*S+y*C+b*P+_*O,i[15]=v*E+y*I+b*R+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],g=e[15],v=c*m*u-p*h*u+p*s*f-a*m*f-c*s*g+a*h*g,y=d*h*u-l*m*u-d*s*f+o*m*f+l*s*g-o*h*g,b=l*p*u-d*c*u+d*a*f-o*p*f-l*a*g+o*c*g,_=d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m,w=t*v+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=v*x,e[1]=(p*h*i-c*m*i-p*r*f+n*m*f+c*r*g-n*h*g)*x,e[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*g+n*s*g)*x,e[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*f-n*s*f)*x,e[4]=y*x,e[5]=(l*m*i-d*h*i+d*r*f-t*m*f-l*r*g+t*h*g)*x,e[6]=(d*s*i-o*m*i-d*r*u+t*m*u+o*r*g-t*s*g)*x,e[7]=(o*h*i-l*s*i+l*r*u-t*h*u-o*r*f+t*s*f)*x,e[8]=b*x,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*g-t*c*g)*x,e[10]=(o*p*i-d*a*i+d*n*u-t*p*u-o*n*g+t*a*g)*x,e[11]=(l*a*i-o*c*i-l*n*u+t*c*u+o*n*f-t*a*f)*x,e[12]=_*x,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*m+t*c*m)*x,e[14]=(d*a*r-o*p*r-d*n*s+t*p*s+o*n*m-t*a*m)*x,e[15]=(o*c*r-l*a*r+l*n*s-t*c*s-o*n*h+t*a*h)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,g=a*c,v=s*u,y=s*l,b=s*c,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(m-v)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=ih.set(r[0],r[1],r[2]).length();const o=ih.set(r[4],r[5],r[6]).length(),a=ih.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],oh.copy(this);const s=1/i,u=1/o,l=1/a;return oh.elements[0]*=s,oh.elements[1]*=s,oh.elements[2]*=s,oh.elements[4]*=u,oh.elements[5]*=u,oh.elements[6]*=u,oh.elements[8]*=l,oh.elements[9]*=l,oh.elements[10]*=l,t.setFromRotationMatrix(oh),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}rh.prototype.isMatrix4=!0;const ih=new Mc,oh=new rh,ah=new Mc(0,0,0),sh=new Mc(1,1,1),uh=new Mc,lh=new Mc,ch=new Mc,hh=new rh,fh=new Tc;class dh{constructor(e=0,t=0,n=0,r=dh.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(hc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-hc(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(hc(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-hc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(hc(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-hc(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return hh.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hh,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fh.setFromEuler(this),this.setFromQuaternion(fh,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Mc(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}dh.prototype.isEuler=!0,dh.DefaultOrder="XYZ",dh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ph{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let mh=0;const gh=new Mc,vh=new Tc,yh=new rh,bh=new Mc,_h=new Mc,wh=new Mc,xh=new Tc,Sh=new Mc(1,0,0),Eh=new Mc(0,1,0),Th=new Mc(0,0,1),Mh={type:"added"},Ch={type:"removed"};class Ih extends ac{constructor(){super(),Object.defineProperty(this,"id",{value:mh++}),this.uuid=cc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ih.DefaultUp.clone();const e=new Mc,t=new dh,n=new Tc,r=new Mc(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rh},normalMatrix:{value:new gc}}),this.matrix=new rh,this.matrixWorld=new rh,this.matrixAutoUpdate=Ih.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ph,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vh.setFromAxisAngle(e,t),this.quaternion.multiply(vh),this}rotateOnWorldAxis(e,t){return vh.setFromAxisAngle(e,t),this.quaternion.premultiply(vh),this}rotateX(e){return this.rotateOnAxis(Sh,e)}rotateY(e){return this.rotateOnAxis(Eh,e)}rotateZ(e){return this.rotateOnAxis(Th,e)}translateOnAxis(e,t){return gh.copy(e).applyQuaternion(this.quaternion),this.position.add(gh.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Sh,e)}translateY(e){return this.translateOnAxis(Eh,e)}translateZ(e){return this.translateOnAxis(Th,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(yh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?bh.copy(e):bh.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),_h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yh.lookAt(_h,bh,this.up):yh.lookAt(bh,_h,this.up),this.quaternion.setFromRotationMatrix(yh),r&&(yh.extractRotation(r.matrixWorld),vh.setFromRotationMatrix(yh),this.quaternion.premultiply(vh.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Mh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ch)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Ch)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),yh.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),yh.multiply(e.parent.matrixWorld)),e.applyMatrix4(yh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,e,wh),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,xh,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),u=o(e.skeletons),l=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),u.length>0&&(n.skeletons=u),l.length>0&&(n.animations=l)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Ih.DefaultUp=new Mc(0,1,0),Ih.DefaultMatrixAutoUpdate=!0,Ih.prototype.isObject3D=!0;const Ah=new Mc,kh=new Mc,Ph=new Mc,Rh=new Mc,Lh=new Mc,Nh=new Mc,Oh=new Mc,Dh=new Mc,Fh=new Mc,Uh=new Mc;class zh{constructor(e=new Mc,t=new Mc,n=new Mc){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ah.subVectors(e,t),r.cross(Ah);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Ah.subVectors(r,t),kh.subVectors(n,t),Ph.subVectors(e,t);const o=Ah.dot(Ah),a=Ah.dot(kh),s=Ah.dot(Ph),u=kh.dot(kh),l=kh.dot(Ph),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,f=(u*s-a*l)*h,d=(o*l-a*s)*h;return i.set(1-f-d,d,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Rh),Rh.x>=0&&Rh.y>=0&&Rh.x+Rh.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,Rh),s.set(0,0),s.addScaledVector(i,Rh.x),s.addScaledVector(o,Rh.y),s.addScaledVector(a,Rh.z),s}static isFrontFacing(e,t,n,r){return Ah.subVectors(n,t),kh.subVectors(e,t),Ah.cross(kh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ah.subVectors(this.c,this.b),kh.subVectors(this.a,this.b),.5*Ah.cross(kh).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zh.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zh.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return zh.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return zh.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zh.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;Lh.subVectors(r,n),Nh.subVectors(i,n),Dh.subVectors(e,n);const s=Lh.dot(Dh),u=Nh.dot(Dh);if(s<=0&&u<=0)return t.copy(n);Fh.subVectors(e,r);const l=Lh.dot(Fh),c=Nh.dot(Fh);if(l>=0&&c<=l)return t.copy(r);const h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),t.copy(n).addScaledVector(Lh,o);Uh.subVectors(e,i);const f=Lh.dot(Uh),d=Nh.dot(Uh);if(d>=0&&f<=d)return t.copy(i);const p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return a=u/(u-d),t.copy(n).addScaledVector(Nh,a);const m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return Oh.subVectors(i,r),a=(c-l)/(c-l+(f-d)),t.copy(r).addScaledVector(Oh,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(Lh,o).addScaledVector(Nh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let jh=0;class Bh extends ac{constructor(){super(),Object.defineProperty(this,"id",{value:jh++}),this.uuid=cc(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Bh.prototype.isMaterial=!0;const Vh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Hh={h:0,s:0,l:0},Wh={h:0,s:0,l:0};function Gh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function qh(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Kh(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Xh{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){var r;if(e=(e%(r=1)+r)%r,t=hc(t,0,1),n=hc(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Gh(i,r,e+1/3),this.g=Gh(i,r,e),this.b=Gh(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Vh[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=qh(e.r),this.g=qh(e.g),this.b=qh(e.b),this}copyLinearToSRGB(e){return this.r=Kh(e.r),this.g=Kh(e.g),this.b=Kh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const u=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=u<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=u,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Hh),Hh.h+=e,Hh.s+=t,Hh.l+=n,this.setHSL(Hh.h,Hh.s,Hh.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Hh),e.getHSL(Wh);const n=fc(Hh.h,Wh.h,t),r=fc(Hh.s,Wh.s,t),i=fc(Hh.l,Wh.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Xh.NAMES=Vh,Xh.prototype.isColor=!0,Xh.prototype.r=1,Xh.prototype.g=1,Xh.prototype.b=1;class Yh extends Bh{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Xh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}Yh.prototype.isMeshBasicMaterial=!0;const $h=new Mc,Qh=new mc;class Jh{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Xh),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new mc),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Mc),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new xc),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Qh.fromBufferAttribute(this,t),Qh.applyMatrix3(e),this.setXY(t,Qh.x,Qh.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)$h.fromBufferAttribute(this,t),$h.applyMatrix3(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)$h.x=this.getX(t),$h.y=this.getY(t),$h.z=this.getZ(t),$h.applyMatrix4(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)$h.x=this.getX(t),$h.y=this.getY(t),$h.z=this.getZ(t),$h.applyNormalMatrix(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)$h.x=this.getX(t),$h.y=this.getY(t),$h.z=this.getZ(t),$h.transformDirection(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Jh.prototype.isBufferAttribute=!0;class Zh extends Jh{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ef extends Jh{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class extends Jh{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class tf extends Jh{constructor(e,t,n){super(new Float32Array(e),t,n)}}function nf(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}let rf=0;const of=new rh,af=new Ih,sf=new Mc,uf=new Ac,lf=new Ac,cf=new Mc;class hf extends ac{constructor(){super(),Object.defineProperty(this,"id",{value:rf++}),this.uuid=cc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nf(e)>65535?ef:Zh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new gc).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return of.makeRotationFromQuaternion(e),this.applyMatrix4(of),this}rotateX(e){return of.makeRotationX(e),this.applyMatrix4(of),this}rotateY(e){return of.makeRotationY(e),this.applyMatrix4(of),this}rotateZ(e){return of.makeRotationZ(e),this.applyMatrix4(of),this}translate(e,t,n){return of.makeTranslation(e,t,n),this.applyMatrix4(of),this}scale(e,t,n){return of.makeScale(e,t,n),this.applyMatrix4(of),this}lookAt(e){return af.lookAt(e),af.updateMatrix(),this.applyMatrix4(af.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sf).negate(),this.translate(sf.x,sf.y,sf.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new tf(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ac);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Mc(-1/0,-1/0,-1/0),new Mc(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];uf.setFromBufferAttribute(e),this.morphTargetsRelative?(cf.addVectors(this.boundingBox.min,uf.min),this.boundingBox.expandByPoint(cf),cf.addVectors(this.boundingBox.max,uf.max),this.boundingBox.expandByPoint(cf)):(this.boundingBox.expandByPoint(uf.min),this.boundingBox.expandByPoint(uf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Xc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Mc,1/0);if(e){const n=this.boundingSphere.center;if(uf.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];lf.setFromBufferAttribute(n),this.morphTargetsRelative?(cf.addVectors(uf.min,lf.min),uf.expandByPoint(cf),cf.addVectors(uf.max,lf.max),uf.expandByPoint(cf)):(uf.expandByPoint(lf.min),uf.expandByPoint(lf.max))}uf.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)cf.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(cf));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)cf.fromBufferAttribute(o,t),a&&(sf.fromBufferAttribute(e,t),cf.add(sf)),r=Math.max(r,n.distanceToSquared(cf))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Jh(new Float32Array(4*a),4));const s=t.tangent.array,u=[],l=[];for(let T=0;T<a;T++)u[T]=new Mc,l[T]=new Mc;const c=new Mc,h=new Mc,f=new Mc,d=new mc,p=new mc,m=new mc,g=new Mc,v=new Mc;function y(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),f.fromArray(r,3*n),d.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(c),f.sub(c),p.sub(d),m.sub(d);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),v.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(v),l[t].add(v),l[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let T=0,M=b.length;T<M;++T){const e=b[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}const _=new Mc,w=new Mc,x=new Mc,S=new Mc;function E(e){x.fromArray(i,3*e),S.copy(x);const t=u[e];_.copy(t),_.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(l[e])<0?-1:1;s[4*e]=_.x,s[4*e+1]=_.y,s[4*e+2]=_.z,s[4*e+3]=n}for(let T=0,M=b.length;T<M;++T){const e=b[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Jh(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Mc,i=new Mc,o=new Mc,a=new Mc,s=new Mc,u=new Mc,l=new Mc,c=new Mc;if(e)for(let h=0,f=e.count;h<f;h+=3){const f=e.getX(h+0),d=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,f),i.fromBufferAttribute(t,d),o.fromBufferAttribute(t,p),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),u.fromBufferAttribute(n,p),a.add(l),s.add(l),u.add(l),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s);for(let e=0,t=s;e<u;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)cf.fromBufferAttribute(e,t),cf.normalize(),e.setXYZ(t,cf.x,cf.y,cf.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let u=0,l=t.length;u<l;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Jh(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new hf,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new hf).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const e=r[u];this.setAttribute(u,e.clone(t))}const i=e.morphAttributes;for(const u in i){const e=[],n=i[u];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[u]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,l=o.length;u<l;u++){const e=o[u];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}hf.prototype.isBufferGeometry=!0;const ff=new rh,df=new nh,pf=new Xc,mf=new Mc,gf=new Mc,vf=new Mc,yf=new Mc,bf=new Mc,_f=new Mc,wf=new Mc,xf=new Mc,Sf=new Mc,Ef=new mc,Tf=new mc,Mf=new mc,Cf=new Mc,If=new Mc;class Af extends Ih{constructor(e=new hf,t=new Yh){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),pf.copy(n.boundingSphere),pf.applyMatrix4(i),!1===e.ray.intersectsSphere(pf))return;if(ff.copy(i).invert(),df.copy(e.ray).applyMatrix4(ff),null!==n.boundingBox&&!1===df.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative,l=n.attributes.uv,c=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const d=h[n],p=r[d.materialIndex];for(let n=Math.max(d.start,f.start),r=Math.min(d.start+d.count,f.start+f.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),f=i.getX(n+2);o=kf(this,p,e,df,a,s,u,l,c,r,h,f),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=d.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),h=Math.min(i.count,f.start+f.count);n<h;n+=3){const h=i.getX(n),f=i.getX(n+1),d=i.getX(n+2);o=kf(this,r,e,df,a,s,u,l,c,h,f,d),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const i=h[n],d=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(i.start+i.count,f.start+f.count);n<r;n+=3){o=kf(this,d,e,df,a,s,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){o=kf(this,r,e,df,a,s,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function kf(e,t,n,r,i,o,a,s,u,l,c,h){mf.fromBufferAttribute(i,l),gf.fromBufferAttribute(i,c),vf.fromBufferAttribute(i,h);const f=e.morphTargetInfluences;if(t.morphTargets&&o&&f){wf.set(0,0,0),xf.set(0,0,0),Sf.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=f[e],n=o[e];0!==t&&(yf.fromBufferAttribute(n,l),bf.fromBufferAttribute(n,c),_f.fromBufferAttribute(n,h),a?(wf.addScaledVector(yf,t),xf.addScaledVector(bf,t),Sf.addScaledVector(_f,t)):(wf.addScaledVector(yf.sub(mf),t),xf.addScaledVector(bf.sub(gf),t),Sf.addScaledVector(_f.sub(vf),t)))}mf.add(wf),gf.add(xf),vf.add(Sf)}e.isSkinnedMesh&&(e.boneTransform(l,mf),e.boneTransform(c,gf),e.boneTransform(h,vf));const d=function(e,t,n,r,i,o,a,s){let u;if(u=1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s),null===u)return null;If.copy(s),If.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(If);return l<n.near||l>n.far?null:{distance:l,point:If.clone(),object:e}}(e,t,n,r,mf,gf,vf,Cf);if(d){s&&(Ef.fromBufferAttribute(s,l),Tf.fromBufferAttribute(s,c),Mf.fromBufferAttribute(s,h),d.uv=zh.getUV(Cf,mf,gf,vf,Ef,Tf,Mf,new mc)),u&&(Ef.fromBufferAttribute(u,l),Tf.fromBufferAttribute(u,c),Mf.fromBufferAttribute(u,h),d.uv2=zh.getUV(Cf,mf,gf,vf,Ef,Tf,Mf,new mc));const e={a:l,b:c,c:h,normal:new Mc,materialIndex:0};zh.getNormal(mf,gf,vf,e.normal),d.face=e}return d}Af.prototype.isMesh=!0;class Pf extends hf{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],u=[],l=[],c=[];let h=0,f=0;function d(e,t,n,r,i,o,d,p,m,g,v){const y=o/m,b=d/g,_=o/2,w=d/2,x=p/2,S=m+1,E=g+1;let T=0,M=0;const C=new Mc;for(let a=0;a<E;a++){const o=a*b-w;for(let s=0;s<S;s++){const h=s*y-_;C[e]=h*r,C[t]=o*i,C[n]=x,u.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,l.push(C.x,C.y,C.z),c.push(s/m),c.push(1-a/g),T+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+S*a,n=h+e+S*(a+1),r=h+(e+1)+S*(a+1),i=h+(e+1)+S*a;s.push(t,n,i),s.push(n,r,i),M+=6}a.addGroup(f,M,v),f+=M,h+=T}d("z","y","x",-1,-1,n,t,e,o,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new tf(u,3)),this.setAttribute("normal",new tf(l,3)),this.setAttribute("uv",new tf(c,2))}static fromJSON(e){return new Pf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rf(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Lf(e){const t={};for(let n=0;n<e.length;n++){const r=Rf(e[n]);for(const e in r)t[e]=r[e]}return t}const Nf={clone:Rf,merge:Lf};class Of extends Bh{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rf(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Of.prototype.isShaderMaterial=!0;class Df extends Ih{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new rh,this.projectionMatrix=new rh,this.projectionMatrixInverse=new rh}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Df.prototype.isCamera=!0;class Ff extends Df{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*lc*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*uc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*lc*Math.atan(Math.tan(.5*uc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*uc*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Ff.prototype.isPerspectiveCamera=!0;class Uf extends Ih{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Ff(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Mc(1,0,0)),this.add(r);const i=new Ff(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Mc(-1,0,0)),this.add(i);const o=new Ff(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Mc(0,1,0)),this.add(o);const a=new Ff(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Mc(0,-1,0)),this.add(a);const s=new Ff(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Mc(0,0,1)),this.add(s);const u=new Ff(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Mc(0,0,-1)),this.add(u)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,u]=this.children,l=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=l}}class zf extends _c{constructor(e,t,n,r,i,o,a,s,u,l){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,o,a=void 0!==a?a:1022,s,u,l),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}zf.prototype.isCubeTexture=!0;class jf extends Sc{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new zf(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Pf(5,5,5),i=new Of({name:"CubemapFromEquirect",uniforms:Rf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const o=new Af(r,i),a=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);return new Uf(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}jf.prototype.isWebGLCubeRenderTarget=!0;const Bf=new Mc,Vf=new Mc,Hf=new gc;class Wf{constructor(e=new Mc(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Bf.subVectors(n,t).cross(Vf.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Bf),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Hf.getNormalMatrix(e),r=this.coplanarPoint(Bf).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Wf.prototype.isPlane=!0;const Gf=new Xc,qf=new Mc;class Kf{constructor(e=new Wf,t=new Wf,n=new Wf,r=new Wf,i=new Wf,o=new Wf){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+u,p+f,y+g).normalize(),t[3].setComponents(a-i,c-u,p-f,y-g).normalize(),t[4].setComponents(a-o,c-l,p-d,y-v).normalize(),t[5].setComponents(a+o,c+l,p+d,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Gf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Gf)}intersectsSprite(e){return Gf.center.set(0,0,0),Gf.radius=.7071067811865476,Gf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gf)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(qf.x=r.normal.x>0?e.max.x:e.min.x,qf.y=r.normal.y>0?e.max.y:e.min.y,qf.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(qf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Xf(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Yf(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class $f extends hf{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),u=a+1,l=s+1,c=e/a,h=t/s,f=[],d=[],p=[],m=[];for(let g=0;g<l;g++){const e=g*h-o;for(let t=0;t<u;t++){const n=t*c-i;d.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+u*g,n=e+u*(g+1),r=e+1+u*(g+1),i=e+1+u*g;f.push(t,n,i),f.push(n,r,i)}this.setIndex(f),this.setAttribute("position",new tf(d,3)),this.setAttribute("normal",new tf(p,3)),this.setAttribute("uv",new tf(m,2))}static fromJSON(e){return new $f(e.width,e.height,e.widthSegments,e.heightSegments)}}const Qf={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Jf={common:{diffuse:{value:new Xh(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gc},uv2Transform:{value:new gc},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mc(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xh(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xh(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gc}},sprite:{diffuse:{value:new Xh(16777215)},opacity:{value:1},center:{value:new mc(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gc}}},Zf={basic:{uniforms:Lf([Jf.common,Jf.specularmap,Jf.envmap,Jf.aomap,Jf.lightmap,Jf.fog]),vertexShader:Qf.meshbasic_vert,fragmentShader:Qf.meshbasic_frag},lambert:{uniforms:Lf([Jf.common,Jf.specularmap,Jf.envmap,Jf.aomap,Jf.lightmap,Jf.emissivemap,Jf.fog,Jf.lights,{emissive:{value:new Xh(0)}}]),vertexShader:Qf.meshlambert_vert,fragmentShader:Qf.meshlambert_frag},phong:{uniforms:Lf([Jf.common,Jf.specularmap,Jf.envmap,Jf.aomap,Jf.lightmap,Jf.emissivemap,Jf.bumpmap,Jf.normalmap,Jf.displacementmap,Jf.fog,Jf.lights,{emissive:{value:new Xh(0)},specular:{value:new Xh(1118481)},shininess:{value:30}}]),vertexShader:Qf.meshphong_vert,fragmentShader:Qf.meshphong_frag},standard:{uniforms:Lf([Jf.common,Jf.envmap,Jf.aomap,Jf.lightmap,Jf.emissivemap,Jf.bumpmap,Jf.normalmap,Jf.displacementmap,Jf.roughnessmap,Jf.metalnessmap,Jf.fog,Jf.lights,{emissive:{value:new Xh(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qf.meshphysical_vert,fragmentShader:Qf.meshphysical_frag},toon:{uniforms:Lf([Jf.common,Jf.aomap,Jf.lightmap,Jf.emissivemap,Jf.bumpmap,Jf.normalmap,Jf.displacementmap,Jf.gradientmap,Jf.fog,Jf.lights,{emissive:{value:new Xh(0)}}]),vertexShader:Qf.meshtoon_vert,fragmentShader:Qf.meshtoon_frag},matcap:{uniforms:Lf([Jf.common,Jf.bumpmap,Jf.normalmap,Jf.displacementmap,Jf.fog,{matcap:{value:null}}]),vertexShader:Qf.meshmatcap_vert,fragmentShader:Qf.meshmatcap_frag},points:{uniforms:Lf([Jf.points,Jf.fog]),vertexShader:Qf.points_vert,fragmentShader:Qf.points_frag},dashed:{uniforms:Lf([Jf.common,Jf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qf.linedashed_vert,fragmentShader:Qf.linedashed_frag},depth:{uniforms:Lf([Jf.common,Jf.displacementmap]),vertexShader:Qf.depth_vert,fragmentShader:Qf.depth_frag},normal:{uniforms:Lf([Jf.common,Jf.bumpmap,Jf.normalmap,Jf.displacementmap,{opacity:{value:1}}]),vertexShader:Qf.normal_vert,fragmentShader:Qf.normal_frag},sprite:{uniforms:Lf([Jf.sprite,Jf.fog]),vertexShader:Qf.sprite_vert,fragmentShader:Qf.sprite_frag},background:{uniforms:{uvTransform:{value:new gc},t2D:{value:null}},vertexShader:Qf.background_vert,fragmentShader:Qf.background_frag},cube:{uniforms:Lf([Jf.envmap,{opacity:{value:1}}]),vertexShader:Qf.cube_vert,fragmentShader:Qf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qf.equirect_vert,fragmentShader:Qf.equirect_frag},distanceRGBA:{uniforms:Lf([Jf.common,Jf.displacementmap,{referencePosition:{value:new Mc},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qf.distanceRGBA_vert,fragmentShader:Qf.distanceRGBA_frag},shadow:{uniforms:Lf([Jf.lights,Jf.fog,{color:{value:new Xh(0)},opacity:{value:1}}]),vertexShader:Qf.shadow_vert,fragmentShader:Qf.shadow_frag}};function ed(e,t,n,r,i){const o=new Xh(0);let a,s,u=0,l=null,c=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(n,i){let d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?f(o,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===s&&(s=new Af(new Pf(1,1,1),new Of({name:"BackgroundCubeMaterial",uniforms:Rf(Zf.cube.uniforms),vertexShader:Zf.cube.vertexShader,fragmentShader:Zf.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,l===p&&c===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&(a=new Af(new $f(2,2),new Of({name:"BackgroundMaterial",uniforms:Rf(Zf.background.uniforms),vertexShader:Zf.background.vertexShader,fragmentShader:Zf.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function td(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null);let l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const t=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),l!==u&&(l=u,c(l.object))}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){let _=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let u=s[t.id];void 0===u&&(u={},s[t.id]=u);let l=u[n.id];void 0===l&&(l={},u[n.id]=l);let c=l[a];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(y,h,u);l!==t&&(l=t,c(l.object)),_=function(e,t){const n=l.attributes,r=e.attributes;let i=0;for(const o in r){const e=n[o],t=r[o];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b),_&&function(e,t){const n={},r=e.attributes;let i=0;for(const o in r){const e=r[o],t={};t.attribute=e,e.data&&(t.data=e.data),n[o]=t,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{const e=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===e||(l.geometry=y.id,l.program=h.id,l.wireframe=e,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();const u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(const t in l){const r=l[t];if(r>=0){const o=u[t];if(void 0!==o){const t=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const u=a.buffer,l=a.type,c=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),e.bindBuffer(34962,u),v(r,i,l,t,a*c,h*c)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),e.bindBuffer(34962,u),v(r,i,l,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r+0,4,a,!1,64,0),e.vertexAttribPointer(r+1,4,a,!1,64,16),e.vertexAttribPointer(r+2,4,a,!1,64,32),e.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function nd(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let u,l;if(i)u=e,l="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](o,r,a,s),n.update(a,o,s)}}function rd(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const u=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function id(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new Wf,s=new gc,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){const o=null!==e?e.length:0;let l=null;if(0!==o){if(l=u.value,!0!==i||null===l){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let n=0,u=r;n!==o;++n,u+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(l,u),l[u+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){const h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!d)o?c(null):l();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;u.value=i,i=c(h,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=e}}}function od(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(303===o||304===o){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new jf(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function ad(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function sd(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const u=o.get(s);u&&(t.remove(u),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(nf(n)>65535?ef:Zh)(n,1);s.version=a;const u=o.get(e);u&&t.remove(u),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function ud(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,u,l){if(0===l)return;let c,h;if(i)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,u,a,r*s,l),n.update(u,o,l)}}function ld(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function cd(e,t){return e[0]-t[0]}function hd(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fd(e){const t={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){const u=i.morphTargetInfluences,l=void 0===u?0:u.length;let c=t[o.id];if(void 0===c||c.length!==l){c=[];for(let e=0;e<l;e++)c[e]=[e,0];t[o.id]=c}for(let e=0;e<l;e++){const t=c[e];t[0]=e,t[1]=u[e]}c.sort(hd);for(let e=0;e<8;e++)e<l&&c[e][1]?(r[e][0]=c[e][0],r[e][1]=c[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(cd);const h=a.morphTargets&&o.morphAttributes.position,f=a.morphNormals&&o.morphAttributes.normal;let d=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],a=t[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[i]&&o.setAttribute("morphTarget"+e,h[i]),f&&o.getAttribute("morphNormal"+e)!==f[i]&&o.setAttribute("morphNormal"+e,f[i]),n[e]=a,d+=a):(h&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),f&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const p=o.morphTargetsRelative?1:1-d;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function dd(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}Zf.physical={uniforms:Lf([Zf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mc(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Xh(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mc},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Xh(0)}}]),vertexShader:Qf.meshphysical_vert,fragmentShader:Qf.meshphysical_frag};class pd extends _c{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}pd.prototype.isDataTexture2DArray=!0;class md extends _c{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}md.prototype.isDataTexture3D=!0;const gd=new _c,vd=new pd,yd=new md,bd=new zf,_d=[],wd=[],xd=new Float32Array(16),Sd=new Float32Array(9),Ed=new Float32Array(4);function Td(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=_d[i];if(void 0===o&&(o=new Float32Array(i),_d[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Md(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Cd(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Id(e,t){let n=wd[t];void 0===n&&(n=new Int32Array(t),wd[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ad(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function kd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Md(n,t))return;e.uniform2fv(this.addr,t),Cd(n,t)}}function Pd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Md(n,t))return;e.uniform3fv(this.addr,t),Cd(n,t)}}function Rd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Md(n,t))return;e.uniform4fv(this.addr,t),Cd(n,t)}}function Ld(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Md(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Cd(n,t)}else{if(Md(n,r))return;Ed.set(r),e.uniformMatrix2fv(this.addr,!1,Ed),Cd(n,r)}}function Nd(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Md(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Cd(n,t)}else{if(Md(n,r))return;Sd.set(r),e.uniformMatrix3fv(this.addr,!1,Sd),Cd(n,r)}}function Od(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Md(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Cd(n,t)}else{if(Md(n,r))return;xd.set(r),e.uniformMatrix4fv(this.addr,!1,xd),Cd(n,r)}}function Dd(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Fd(e,t){const n=this.cache;Md(n,t)||(e.uniform2iv(this.addr,t),Cd(n,t))}function Ud(e,t){const n=this.cache;Md(n,t)||(e.uniform3iv(this.addr,t),Cd(n,t))}function zd(e,t){const n=this.cache;Md(n,t)||(e.uniform4iv(this.addr,t),Cd(n,t))}function jd(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Bd(e,t){const n=this.cache;Md(n,t)||(e.uniform2uiv(this.addr,t),Cd(n,t))}function Vd(e,t){const n=this.cache;Md(n,t)||(e.uniform3uiv(this.addr,t),Cd(n,t))}function Hd(e,t){const n=this.cache;Md(n,t)||(e.uniform4uiv(this.addr,t),Cd(n,t))}function Wd(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||gd,i)}function Gd(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||yd,i)}function qd(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||bd,i)}function Kd(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||vd,i)}function Xd(e,t){e.uniform1fv(this.addr,t)}function Yd(e,t){const n=Td(t,this.size,2);e.uniform2fv(this.addr,n)}function $d(e,t){const n=Td(t,this.size,3);e.uniform3fv(this.addr,n)}function Qd(e,t){const n=Td(t,this.size,4);e.uniform4fv(this.addr,n)}function Jd(e,t){const n=Td(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Zd(e,t){const n=Td(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ep(e,t){const n=Td(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function tp(e,t){e.uniform1iv(this.addr,t)}function np(e,t){e.uniform2iv(this.addr,t)}function rp(e,t){e.uniform3iv(this.addr,t)}function ip(e,t){e.uniform4iv(this.addr,t)}function op(e,t){e.uniform1uiv(this.addr,t)}function ap(e,t){e.uniform2uiv(this.addr,t)}function sp(e,t){e.uniform3uiv(this.addr,t)}function up(e,t){e.uniform4uiv(this.addr,t)}function lp(e,t,n){const r=t.length,i=Id(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||gd,i[o])}function cp(e,t,n){const r=t.length,i=Id(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||bd,i[o])}function hp(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ad;case 35664:return kd;case 35665:return Pd;case 35666:return Rd;case 35674:return Ld;case 35675:return Nd;case 35676:return Od;case 5124:case 35670:return Dd;case 35667:case 35671:return Fd;case 35668:case 35672:return Ud;case 35669:case 35673:return zd;case 5125:return jd;case 36294:return Bd;case 36295:return Vd;case 36296:return Hd;case 35678:case 36198:case 36298:case 36306:case 35682:return Wd;case 35679:case 36299:case 36307:return Gd;case 35680:case 36300:case 36308:case 36293:return qd;case 36289:case 36303:case 36311:case 36292:return Kd}}(t.type)}function fp(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Xd;case 35664:return Yd;case 35665:return $d;case 35666:return Qd;case 35674:return Jd;case 35675:return Zd;case 35676:return ep;case 5124:case 35670:return tp;case 35667:case 35671:return np;case 35668:case 35672:return rp;case 35669:case 35673:return ip;case 5125:return op;case 36294:return ap;case 36295:return sp;case 36296:return up;case 35678:case 36198:case 36298:case 36306:case 35682:return lp;case 35680:case 36300:case 36308:case 36293:return cp}}(t.type)}function dp(e){this.id=e,this.seq=[],this.map={}}fp.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Cd(t,e)},dp.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const pp=/(\w+)(\])?(\[|\.)?/g;function mp(e,t){e.seq.push(t),e.map[t.id]=t}function gp(e,t,n){const r=e.name,i=r.length;for(pp.lastIndex=0;;){const o=pp.exec(r),a=pp.lastIndex;let s=o[1];const u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){mp(n,void 0===l?new hp(s,e,t):new fp(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new dp(s),mp(n,e)),n=e}}}function vp(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);gp(n,e.getUniformLocation(t,n.name),this)}}function yp(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}vp.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},vp.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},vp.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},vp.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let bp=0;function _p(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function wp(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function xp(e,t){const n=_p(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Sp(e,t){const n=_p(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ep(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tp(e){return""!==e}function Mp(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Cp(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ip=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ap(e){return e.replace(Ip,kp)}function kp(e,t){const n=Qf[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ap(n)}const Pp=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Rp=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Lp(e){return e.replace(Rp,Op).replace(Pp,Np)}function Np(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Op(e,t,n,r)}function Op(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Dp(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Fp(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const u=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tp).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(Tp).join("\n"),g.length>0&&(g+="\n"),v=[d,p].filter(Tp).join("\n"),v.length>0&&(v+="\n")):(g=[Dp(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Tp).join("\n"),v=[d,Dp(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Qf.tonemapping_pars_fragment:"",0!==n.toneMapping?Ep("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Qf.encodings_pars_fragment,n.map?xp("mapTexelToLinear",n.mapEncoding):"",n.matcap?xp("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?xp("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?xp("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?xp("lightMapTexelToLinear",n.lightMapEncoding):"",Sp("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Tp).join("\n")),a=Ap(a),a=Mp(a,n),a=Cp(a,n),s=Ap(s),s=Mp(s,n),s=Cp(s,n),a=Lp(a),s=Lp(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,_=yp(i,35633,y+g+a),w=yp(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=wp(i,_,"vertex"),n=wp(i,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let x,S;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===x&&(x=new vp(i,m)),x},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=bp++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}function Up(e,t,n,r,i,o){const a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures;let f=r.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(i,a,p,g,v){const y=g.fog,b=i.isMeshStandardMaterial?g.environment:null,_=t.get(i.envMap||b),w=d[i.type],x=v.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(l)return 1024;{const e=c,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(v):0;let S,E;if(null!==i.precision&&(f=r.getMaxPrecision(i.precision),f!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead.")),w){const e=Zf[w];S=e.vertexShader,E=e.fragmentShader}else S=i.vertexShader,E=i.fragmentShader;const T=e.getRenderTarget();return{isWebGL2:s,shaderID:w,shaderName:i.type,vertexShader:S,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==T?m(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&v.geometry&&v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===v.isSkinnedMesh&&x>0,maxBones:x,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=d[e.type];let n;if(t){const e=Zf[t];n=Nf.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=a.length;e<i;e++){const t=a[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Fp(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function zp(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function jp(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Bp(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Vp(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,l){let c=t[n];const h=e.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=h.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,u,l){const c=s(e,t,n,a,u,l);n.transmission>0?i.push(c):!0===n.transparent?o.push(c):r.push(c)},unshift:function(e,t,n,a,u,l){const c=s(e,t,n,a,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?o.unshift(c):r.unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||jp),i.length>1&&i.sort(t||Bp),o.length>1&&o.sort(t||Bp)}}}function Hp(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new Vp(e),t.set(n,[i])):r>=t.get(n).length?(i=new Vp(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function Wp(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Mc,color:new Xh};break;case"SpotLight":n={position:new Mc,direction:new Mc,color:new Xh,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Mc,color:new Xh,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Mc,skyColor:new Xh,groundColor:new Xh};break;case"RectAreaLight":n={color:new Xh,position:new Mc,halfWidth:new Mc,halfHeight:new Mc}}return e[t.id]=n,n}}}let Gp=0;function qp(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Kp(e,t){const n=new Wp,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mc};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mc,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new Mc);const o=new Mc,a=new rh,s=new rh;return{setup:function(o){let a=0,s=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0;o.sort(qp);for(let e=0,t=o.length;e<t;e++){const t=o[e],v=t.color,y=t.intensity,b=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=v.r*y,s+=v.g*y,u+=v.b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[l]=n,i.directionalShadowMap[l]=_,i.directionalShadowMatrix[l]=t.shadow.matrix,p++}i.directional[l]=e,l++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(v).multiplyScalar(y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=t.shadow.matrix,g++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(v).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[c]=n,i.pointShadowMap[c]=_,i.pointShadowMatrix[c]=t.shadow.matrix,m++}i.point[c]=e,c++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y),e.groundColor.copy(t.groundColor).multiplyScalar(y),i.hemi[d]=e,d++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Jf.LTC_FLOAT_1,i.rectAreaLTC2=Jf.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Jf.LTC_HALF_1,i.rectAreaLTC2=Jf.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;const v=i.hash;v.directionalLength===l&&v.pointLength===c&&v.spotLength===h&&v.rectAreaLength===f&&v.hemiLength===d&&v.numDirectionalShadows===p&&v.numPointShadows===m&&v.numSpotShadows===g||(i.directional.length=l,i.spot.length=h,i.rectArea.length=f,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,v.directionalLength=l,v.pointLength=c,v.spotLength=h,v.rectAreaLength=f,v.hemiLength=d,v.numDirectionalShadows=p,v.numPointShadows=m,v.numSpotShadows=g,i.version=Gp++)},setupView:function(e,t){let n=0,r=0,u=0,l=0,c=0;const h=t.matrixWorldInverse;for(let f=0,d=e.length;f<d;f++){const t=e[f];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),u++}else if(t.isRectAreaLight){const e=i.rectArea[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(t.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),l++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),c++}}},state:i}}function Xp(e,t){const n=new Kp(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Yp(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new Xp(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new Xp(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class $p extends Bh{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}$p.prototype.isMeshDepthMaterial=!0;class Qp extends Bh{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Mc,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Qp.prototype.isMeshDistanceMaterial=!0;function Jp(e,t,n){let r=new Kf;const i=new mc,o=new mc,a=new xc,s=[],u=[],l={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new Of({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new mc},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new hf;p.setAttribute("position",new Jh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Af(p,f),g=this;function v(n,r){const i=t.update(m);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,m,null)}function y(e){const t=e<<0;let n=s[t];return void 0===n&&(n=new $p({depthPacking:3201,morphTargets:e}),s[t]=n),n}function b(e){const t=e<<0;let n=u[t];return void 0===n&&(n=new Qp({morphTargets:e}),u[t]=n),n}function _(t,n,r,i,o,a,s){let u=null,c=y,f=t.customDepthMaterial;if(!0===i.isPointLight&&(c=b,f=t.customDistanceMaterial),void 0===f){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=c(e)}else u=f;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=u.uuid,t=r.uuid;let n=l[e];void 0===n&&(n={},l[e]=n);let i=n[t];void 0===i&&(i=u.clone(),n[t]=i),u=i}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function w(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let u=0,l=t.length;u<l;u++){const l=t[u],c=i[l.materialIndex];if(c&&c.visible){const t=_(n,r,c,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,l)}}}else if(i.visible){const t=_(n,r,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const u=n.children;for(let e=0,t=u.length;e<t;e++)w(u[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let d=0,p=t.length;d<p;d++){const u=t[d],l=u.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const h=l.getFrameExtents();if(i.multiply(h),o.copy(l.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/h.x),i.x=o.x*h.x,l.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/h.y),i.y=o.y*h.y,l.mapSize.y=o.y)),null===l.map&&!l.isPointLightShadow&&3===this.type){const e={minFilter:1006,magFilter:1006,format:1023};l.map=new Sc(i.x,i.y,e),l.map.texture.name=u.name+".shadowMap",l.mapPass=new Sc(i.x,i.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:1003,magFilter:1003,format:1023};l.map=new Sc(i.x,i.y,e),l.map.texture.name=u.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const p=l.getViewportCount();for(let e=0;e<p;e++){const t=l.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),f.viewport(a),l.updateMatrices(u,e),r=l.getFrustum(),w(n,s,l.camera,u,this.type)}l.isPointLightShadow||3!==this.type||v(l,s),l.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(u,l,h)}}function Zp(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new xc;let r=null;const i=new xc(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?F(2929):U(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?F(2960):U(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}};let s={},u=null,l={},c=null,h=!1,f=null,d=null,p=null,m=null,g=null,v=null,y=null,b=!1,_=null,w=null,x=null,S=null,E=null;const T=e.getParameter(35661);let M=!1,C=0;const I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(I)[1]),M=C>=1):-1!==I.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),M=C>=2);let A=null,k={};const P=e.getParameter(3088),R=e.getParameter(2978),L=(new xc).fromArray(P),N=(new xc).fromArray(R);function O(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const D={};function F(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function U(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}D[3553]=O(3553,3553,1),D[34067]=O(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(3),V(!1),H(1),F(2884),B(0);const z={100:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(z[103]=e.MIN_EXT,z[104]=e.MAX_EXT)}const j={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function B(t,n,r,i,o,a,s,u){if(0!==t){if(!1===h&&(F(3042),h=!0),5===t)o=o||n,a=a||r,s=s||i,n===d&&o===g||(e.blendEquationSeparate(z[n],z[o]),d=n,g=o),r===p&&i===m&&a===v&&s===y||(e.blendFuncSeparate(j[r],j[i],j[a],j[s]),p=r,m=i,v=a,y=s),f=t,b=null;else if(t!==f||u!==b){if(100===d&&100===g||(e.blendEquation(32774),d=100,g=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,m=null,v=null,y=null,f=t,b=u}}else!0===h&&(U(3042),h=!1)}function V(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function H(t){0!==t?(F(2884),t!==w&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):U(2884),w=t}function W(t,n,r){t?(F(32823),S===n&&E===r||(e.polygonOffset(n,r),S=n,E=r)):U(32823)}function G(t){void 0===t&&(t=33984+T-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:i,depth:o,stencil:a},enable:F,disable:U,bindFramebuffer:function(t,n){return null===n&&null!==u&&(n=u),l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,r&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==u&&(e.bindFramebuffer(36160,t),u=t)},useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:B,setMaterial:function(e,t){2===e.side?U(2884):F(2884);let n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?B(0):B(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):U(32926)},setFlipSided:V,setCullFace:H,setLineWidth:function(t){t!==x&&(M&&e.lineWidth(t),x=t)},setPolygonOffset:W,setScissorTest:function(e){e?F(3089):U(3089)},activeTexture:G,bindTexture:function(t,n){null===A&&G();let r=k[A];void 0===r&&(r={type:void 0,texture:void 0},k[A]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||D[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=k[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},A=null,k={},u=null,l={},c=null,h=!1,f=null,d=null,p=null,m=null,g=null,v=null,y=null,b=!1,_=null,w=null,x=null,S=null,E=null,L.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function em(e,t,n,r,i,o,a){const s=i.isWebGL2,u=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=new WeakMap;let d,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?pc:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===d&&(d=m(o,a));const s=n?m(o,a):d;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return dc(e.width)&&dc(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(t,n,i,o,a=1){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,o,a))}function _(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return 1003===e||1004===e||1005===e?9728:9729}function x(t){const n=t.target;n.removeEventListener("dispose",x),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&f.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let s=0,u=n.length;s<u;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}let E=0;function T(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function M(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;k(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),u=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=a||u?u?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,l);const h=c[0],f=v(h)||s,d=o.convert(r.format),p=o.convert(r.type),m=_(r.internalFormat,d,p);let w;if(A(34067,r,f),a){for(let e=0;e<6;e++){w=c[e].mipmaps;for(let t=0;t<w.length;t++){const i=w[t];1023!==r.format&&1022!==r.format?null!==d?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,d,p,i.data)}}t.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let e=0;e<6;e++)if(u){n.texImage2D(34069+e,0,m,c[e].width,c[e].height,0,d,p,c[e].data);for(let t=0;t<w.length;t++){const r=w[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,d,p,r.data)}}else{n.texImage2D(34069+e,0,m,d,p,c[e]);for(let t=0;t<w.length;t++){const r=w[t];n.texImage2D(34069+e,t+1,m,d,p,r.image[e])}}t.__maxMipLevel=w.length}y(r,f)&&b(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const C={1e3:10497,1001:33071,1002:33648},I={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function A(n,o,a){if(a?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,I[o.magFilter]),e.texParameteri(n,10241,I[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&1016===o.type&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function k(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x),t.__webglTexture=e.createTexture(),a.memory.textures++)}function P(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),k(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const u=function(e){return!s&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===v(r.image),l=g(r.image,u,!1,c),h=v(l)||s,f=o.convert(r.format);let d,p=o.convert(r.type),m=_(r.internalFormat,f,p);A(a,r,h);const w=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=o.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)d=w[e],n.texImage2D(3553,e,m,d.width,d.height,0,f,p,d.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)d=w[e],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,e,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,d.width,d.height,0,f,p,d.data);t.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)d=w[e],n.texImage2D(3553,e,m,f,p,d);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,f,p,l),t.__maxMipLevel=0;y(r,h)&&b(a,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,i,a,s,u){const l=o.convert(a.format),c=o.convert(a.type),h=_(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function L(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=36012:1014===t.type&&(i=33190));const r=O(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=_(t.internalFormat,i,a);if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),L(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),L(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function O(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let D=!1,F=!1;this.allocateTextureUnit=function(){const e=E;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(t){const u=t.texture,l=r.get(t),c=r.get(u);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=u.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,p=u.isDataTexture3D||u.isDataTexture2DArray,m=v(t)||s;if(!s||1022!==u.format||1015!==u.type&&1016!==u.type||(u.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(s){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const r=o.convert(u.format),i=o.convert(u.type),a=_(u.internalFormat,r,i),s=O(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),L(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),A(34067,u,m);for(let e=0;e<6;e++)R(l.__webglFramebuffer[e],t,u,36064,34069+e);y(u,m)&&b(34067,u,t.width,t.height),n.bindTexture(34067,null)}else if(f){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),A(3553,o,m),R(l.__webglFramebuffer,t,o,36064+i,3553),y(o,m)&&b(3553,o,t.width,t.height)}n.bindTexture(3553,null)}else{let e=3553;if(p)if(s){e=u.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,c.__webglTexture),A(e,u,m),R(l.__webglFramebuffer,t,u,36064,e),y(u,m)&&b(e,u,t.width,t.height,t.depth),n.bindTexture(e,null)}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),b(t,a,e.width,e.height),n.bindTexture(t,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const i=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),M(e,t)}}function tm(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):1020===e?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class nm extends Ff{constructor(e=[]){super(),this.cameras=e}}nm.prototype.isArrayCamera=!0;class rm extends Ih{constructor(){super(),this.type="Group"}}rm.prototype.isGroup=!0;const im={type:"move"};class om{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Mc,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Mc),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Mc,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Mc),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(im))),u&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n);if(void 0===u.joints[o.jointName]){const e=new rm;e.matrixAutoUpdate=!1,e.visible=!1,u.joints[o.jointName]=e,u.add(e)}const r=u.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=u.joints["index-finger-tip"],i=u.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,l=.005;u.inputState.pinching&&a>s+l?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&a<=s-l&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}class am extends ac{constructor(e,t){super();const n=this,r=e.state;let i=null,o=1,a=null,s="local-floor",u=null,l=null,c=null,h=null;const f=[],d=new Map,p=new Ff;p.layers.enable(1),p.viewport=new xc;const m=new Ff;m.layers.enable(2),m.viewport=new xc;const g=[p,m],v=new nm;v.layers.enable(1),v.layers.enable(2);let y=null,b=null;function _(e){const t=d.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function w(){d.forEach((function(e,t){e.disconnect(t)})),d.clear(),y=null,b=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),C.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function x(e){const t=i.inputSources;for(let n=0;n<f.length;n++)d.set(t[n],f[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=d.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),d.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=d.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=f[e];return void 0===t&&(t=new om,f[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=f[e];return void 0===t&&(t=new om,f[e]=t),t.getGripSpace()},this.getHand=function(e){let t=f[e];return void 0===t&&(t=new om,f[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",_),i.addEventListener("selectstart",_),i.addEventListener("selectend",_),i.addEventListener("squeeze",_),i.addEventListener("squeezestart",_),i.addEventListener("squeezeend",_),i.addEventListener("end",w),i.addEventListener("inputsourceschange",x);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o},r=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:r})}else{let n=0;e.depth&&(n=e.stencil?34041:6402);const r={colorFormat:e.alpha?6408:6407,depthFormat:n,scaleFactor:o};l=new XRWebGLBinding(i,t),h=l.createProjectionLayer(r),c=t.createFramebuffer(),i.updateRenderState({layers:[h]})}a=await i.requestReferenceSpace(s),C.setContext(i),C.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const S=new Mc,E=new Mc;function T(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;v.near=m.near=p.near=e.near,v.far=m.far=p.far=e.far,y===v.near&&b===v.far||(i.updateRenderState({depthNear:v.near,depthFar:v.far}),y=v.near,b=v.far);const t=e.parent,n=v.cameras;T(v,t);for(let i=0;i<n.length;i++)T(n[i],t);v.matrixWorld.decompose(v.position,v.quaternion,v.scale),e.position.copy(v.position),e.quaternion.copy(v.quaternion),e.scale.copy(v.scale),e.matrix.copy(v.matrix),e.matrixWorld.copy(v.matrixWorld);const r=e.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){S.setFromMatrixPosition(t.matrixWorld),E.setFromMatrixPosition(n.matrixWorld);const r=S.distanceTo(E),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=s+p,y=f-m,b=d+(r-m),_=u*s/v*g,w=l*s/v*g;e.projectionMatrix.makePerspective(y,b,_,w,g,v)}(v,p,m):v.projectionMatrix.copy(p.projectionMatrix)},this.getCamera=function(){return v};let M=null;const C=new Xf;C.setAnimationLoop((function(e,n){if(u=n.getViewerPose(a),null!==u){const e=u.views,n=i.renderState.baseLayer;void 0===i.renderState.layers&&r.bindXRFramebuffer(n.framebuffer);let o=!1;e.length!==v.cameras.length&&(v.cameras.length=0,o=!0);for(let a=0;a<e.length;a++){const s=e[a];let u=null;if(void 0===i.renderState.layers)u=n.getViewport(s);else{const e=l.getViewSubImage(h,s);r.bindXRFramebuffer(c),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,36096,3553,e.depthStencilTexture,0),u=e.viewport}const f=g[a];f.matrix.fromArray(s.transform.matrix),f.projectionMatrix.fromArray(s.projectionMatrix),f.viewport.set(u.x,u.y,u.width,u.height),0===a&&v.matrix.copy(f.matrix),!0===o&&v.cameras.push(f)}}const o=i.inputSources;for(let t=0;t<f.length;t++){const e=f[t],r=o[t];e.update(r,n,a)}M&&M(e,n)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}}function sm(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height));e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap);e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function um(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,f=null;const d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,_=-1,w=null;const x=new xc,S=new xc;let E=null,T=t.width,M=t.height,C=1,I=null,A=null;const k=new xc(0,0,T,M),P=new xc(0,0,T,M);let R=!1;const L=[],N=new Kf;let O=!1,D=!1,F=null;const U=new rh,z=new Mc,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===b?C:1}let V,H,W,G,q,K,X,Y,$,Q,J,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce=n;function he(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),ce=he(t,e),null===ce)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ce){throw console.error("THREE.WebGLRenderer: "+Ce.message),Ce}function fe(){V=new ad(ce),H=new rd(ce,V,e),V.init(H),ue=new tm(ce,V,H),W=new Zp(ce,V,H),L[0]=1029,G=new ld(ce),q=new zp,K=new em(ce,V,W,q,H,ue,G),X=new od(m),Y=new Yf(ce,H),le=new td(ce,V,Y,H),$=new sd(ce,Y,G,le),Q=new dd(ce,$,Y,G),oe=new fd(ce),ne=new id(q),J=new Up(m,X,V,H,le,ne),Z=new sm(q),ee=new Hp(q),te=new Yp(V,H),ie=new ed(m,X,W,Q,s),re=new Jp(m,Q,H),ae=new nd(ce,V,G,H),se=new ud(ce,V,G,H),G.programs=J.programs,m.capabilities=H,m.extensions=V,m.properties=q,m.renderLists=ee,m.shadowMap=re,m.state=W,m.info=G}fe();const de=new am(m,ce);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=G.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;fe(),G.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function ge(e){const t=e.target;t.removeEventListener("dispose",ge),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){J.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=de,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(T,M,!1))},this.getSize=function(e){return e.set(T,M)},this.setSize=function(e,n,r){de.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,M=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*C,M*C).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,M=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),W.viewport(x.copy(k).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),W.scissor(S.copy(P).multiplyScalar(C).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){W.setScissorTest(R=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),q.dispose(),X.dispose(),Q.dispose(),le.dispose(),de.dispose(),de.removeEventListener("sessionstart",ye),de.removeEventListener("sessionend",be),F&&(F.dispose(),F=null),_e.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const n=q.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=j);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Me(e,t,r,i);W.setMaterial(r,a);let u=n.index;const l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;let c,h=1;!0===r.wireframe&&(u=$.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&oe.update(i,n,r,s),le.setup(i,r,s,n,u);let f=ae;null!==u&&(c=Y.get(u),f=se,f.setIndex(c));const d=null!==u?u.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(p,g),b=Math.min(d,p+m,g+v)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*B()),f.setMode(1)):f.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),W.setLineWidth(e*B()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,e)}else f.render(y,_)}},this.compile=function(e,t){f=te.get(e),f.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Ee(n[r],e,t)}else Ee(n,e,t)}))};let ve=null;function ye(){_e.stop()}function be(){_e.start()}const _e=new Xf;function we(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=Q.update(e),i=e.material;i.visible&&h.push(e,t,i,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U),h.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=Q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,z.z,a)}}else i.visible&&h.push(e,t,i,n,z.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)we(i[o],t,n,r)}function xe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,u=null===r?o.material:r,l=o.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];a.layers.test(r.layers)&&(W.viewport(x.copy(r.viewport)),f.setupLightsView(r),Se(a,t,r,s,u,l))}}else Se(a,t,n,s,u,l)}}function Se(e,t,n,r,i,o){if(e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Me(n,t,i,e);W.setMaterial(i),le.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,r)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=2):m.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(m,t,n,r,i,o)}function Ee(e,t,n){!0!==t.isScene&&(t=j);const r=q.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=J.getParameters(e,i.state,o,t,n),u=J.getProgramCacheKey(s);let l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",ge),l=new Map,r.programs=l);let c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Te(e,s),c}else s.uniforms=J.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),c=J.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Te(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=c.getUniforms(),p=vp.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Te(e,t){const n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function Me(e,t,n,r){!0!==t.isScene&&(t=j),K.resetTextureUnits();const i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===b?m.outputEncoding:b.texture.encoding,s=X.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=q.get(n),c=f.state.lights;if(!0===O&&(!0===D||e!==w)){const t=e===w&&n.id===_;ne.setState(n,e,t)}let h=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==a||r.isInstancedMesh&&!1===l.instancing?h=!0:r.isInstancedMesh||!0!==l.instancing?r.isSkinnedMesh&&!1===l.skinning?h=!0:r.isSkinnedMesh||!0!==l.skinning?l.envMap!==s||n.fog&&l.fog!==i?h=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?l.vertexAlphas!==u&&(h=!0):h=!0:h=!0:h=!0:(h=!0,l.__version=n.version);let d=l.currentProgram;!0===h&&(d=Ee(n,t,r));let p=!1,g=!1,v=!1;const y=d.getUniforms(),x=l.uniforms;if(W.useProgram(d.program)&&(p=!0,g=!0,v=!0),n.id!==_&&(_=n.id,g=!0),p||w!==e){if(y.setValue(ce,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&y.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,g=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=y.map.cameraPosition;void 0!==t&&t.setValue(ce,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&y.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){y.setOptional(ce,r,"bindMatrix"),y.setOptional(ce,r,"bindMatrixInverse");const e=r.skeleton;e&&(H.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),y.setValue(ce,"boneTexture",e.boneTexture,K),y.setValue(ce,"boneTextureSize",e.boneTextureSize)):y.setOptional(ce,e,"boneMatrices"))}var S,E;return(g||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,y.setValue(ce,"receiveShadow",r.receiveShadow)),g&&(y.setValue(ce,"toneMappingExposure",m.toneMappingExposure),l.needsLights&&(E=v,(S=x).ambientLightColor.needsUpdate=E,S.lightProbe.needsUpdate=E,S.directionalLights.needsUpdate=E,S.directionalLightShadows.needsUpdate=E,S.pointLights.needsUpdate=E,S.pointLightShadows.needsUpdate=E,S.spotLights.needsUpdate=E,S.spotLightShadows.needsUpdate=E,S.rectAreaLights.needsUpdate=E,S.hemisphereLights.needsUpdate=E),i&&n.fog&&Z.refreshFogUniforms(x,i),Z.refreshMaterialUniforms(x,n,C,M,F),vp.upload(ce,l.uniformsList,x,K)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(vp.upload(ce,l.uniformsList,x,K),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(ce,"center",r.center),y.setValue(ce,"modelViewMatrix",r.modelViewMatrix),y.setValue(ce,"normalMatrix",r.normalMatrix),y.setValue(ce,"modelMatrix",r.matrixWorld),d}_e.setAnimationLoop((function(e){ve&&ve(e)})),"undefined"!=typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){ve=e,de.setAnimationLoop(e),null===e?_e.stop():_e.start()},de.addEventListener("sessionstart",ye),de.addEventListener("sessionend",be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===de.enabled&&!0===de.isPresenting&&(!0===de.cameraAutoUpdate&&de.updateCamera(t),t=de.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),f=te.get(e,p.length),f.init(),p.push(f),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(U),D=this.localClippingEnabled,O=ne.init(this.clippingPlanes,D,t),h=ee.get(e,d.length),h.init(),d.push(h),we(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(I,A),!0===O&&ne.beginShadows();const n=f.state.shadowsArray;re.render(n,e,t),f.setupLights(),f.setupLightsView(t),!0===O&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e);const r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&xe(r,e,t),i.length>0&&function(e,t,n,r){if(null===F){const e=!0===a&&!0===H.isWebGL2;F=new(e?Ec:Sc)(1024,1024,{generateMipmaps:!0,type:null!==ue.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}const i=m.getRenderTarget();m.setRenderTarget(F),m.clear();const o=m.toneMapping;m.toneMapping=0,xe(e,n,r),m.toneMapping=o,K.updateMultisampleRenderTarget(F),K.updateRenderTargetMipmap(F),m.setRenderTarget(i),xe(t,n,r)}(r,i,e,t),o.length>0&&xe(o,e,t),null!==b&&(K.updateMultisampleRenderTarget(b),K.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),le.resetDefaultState(),_=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e,t=0,n=0){b=e,v=t,y=n,e&&void 0===q.get(e).__webglFramebuffer&&K.setupRenderTarget(e);let r=null,i=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,x.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else x.copy(k).multiplyScalar(C).floor(),S.copy(P).multiplyScalar(C).floor(),E=R;if(W.bindFramebuffer(36160,r)&&H.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(L.length!==n.length||36064!==L[0]){for(let e=0,t=n.length;e<t;e++)L[e]=36064+e;L.length=n.length,t=!0}}else 1===L.length&&36064===L[0]||(L[0]=36064,L.length=1,t=!0);else 1===L.length&&1029===L[0]||(L[0]=1029,L.length=1,t=!0);t&&(H.isWebGL2?ce.drawBuffers(L):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(L))}if(W.viewport(x),W.scissor(S),W.setScissorTest(E),i){const r=q.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=q.get(e.texture),i=t||0;ce.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){W.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,u=a.type;if(1023!==s&&ue.convert(s)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=1016===u&&(V.has("EXT_color_buffer_half_float")||H.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(1009===u||ue.convert(u)===ce.getParameter(35738)||1015===u&&(H.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,ue.convert(s),ue.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==b?q.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=ue.convert(t.format);H.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),K.setTexture2D(t,0),ce.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=ue.convert(n.format),s=ue.convert(n.type);K.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,u=ue.convert(r.format),l=ue.convert(r.type);let c;if(r.isDataTexture3D)K.setTexture3D(r,0),c=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),c=35866}ce.pixelStorei(37440,r.flipY),ce.pixelStorei(37441,r.premultiplyAlpha),ce.pixelStorei(3317,r.unpackAlignment);const h=ce.getParameter(3314),f=ce.getParameter(32878),d=ce.getParameter(3316),p=ce.getParameter(3315),g=ce.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;ce.pixelStorei(3314,v.width),ce.pixelStorei(32878,v.height),ce.pixelStorei(3316,e.min.x),ce.pixelStorei(3315,e.min.y),ce.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ce.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,l,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,v.data)):ce.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,u,l,v),ce.pixelStorei(3314,h),ce.pixelStorei(32878,f),ce.pixelStorei(3316,d),ce.pixelStorei(3315,p),ce.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ce.generateMipmap(c),W.unbindTexture()},this.initTexture=function(e){K.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,W.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends um{}).prototype.isWebGL1Renderer=!0;class lm extends Ih{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}lm.prototype.isScene=!0;class cm{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=cc()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=cc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=cc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}cm.prototype.isInterleavedBuffer=!0;const hm=new Mc;class fm{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)hm.x=this.getX(t),hm.y=this.getY(t),hm.z=this.getZ(t),hm.applyMatrix4(e),this.setXYZ(t,hm.x,hm.y,hm.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)hm.x=this.getX(t),hm.y=this.getY(t),hm.z=this.getZ(t),hm.applyNormalMatrix(e),this.setXYZ(t,hm.x,hm.y,hm.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)hm.x=this.getX(t),hm.y=this.getY(t),hm.z=this.getZ(t),hm.transformDirection(e),this.setXYZ(t,hm.x,hm.y,hm.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Jh(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}fm.prototype.isInterleavedBufferAttribute=!0;class dm extends Bh{constructor(e){super(),this.type="SpriteMaterial",this.color=new Xh(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let pm;dm.prototype.isSpriteMaterial=!0;const mm=new Mc,gm=new Mc,vm=new Mc,ym=new mc,bm=new mc,_m=new rh,wm=new Mc,xm=new Mc,Sm=new Mc,Em=new mc,Tm=new mc,Mm=new mc;function Cm(e,t,n,r,i,o){ym.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(bm.x=o*ym.x-i*ym.y,bm.y=i*ym.x+o*ym.y):bm.copy(ym),e.copy(t),e.x+=bm.x,e.y+=bm.y,e.applyMatrix4(_m)}(class extends Ih{constructor(e){if(super(),this.type="Sprite",void 0===pm){pm=new hf;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new cm(e,5);pm.setIndex([0,1,2,0,2,3]),pm.setAttribute("position",new fm(t,3,0,!1)),pm.setAttribute("uv",new fm(t,2,3,!1))}this.geometry=pm,this.material=void 0!==e?e:new dm,this.center=new mc(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gm.setFromMatrixScale(this.matrixWorld),_m.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&gm.multiplyScalar(-vm.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Cm(wm.set(-.5,-.5,0),vm,o,gm,r,i),Cm(xm.set(.5,-.5,0),vm,o,gm,r,i),Cm(Sm.set(.5,.5,0),vm,o,gm,r,i),Em.set(0,0),Tm.set(1,0),Mm.set(1,1);let a=e.ray.intersectTriangle(wm,xm,Sm,!1,mm);if(null===a&&(Cm(xm.set(-.5,.5,0),vm,o,gm,r,i),Tm.set(0,1),a=e.ray.intersectTriangle(wm,Sm,xm,!1,mm),null===a))return;const s=e.ray.origin.distanceTo(mm);s<e.near||s>e.far||t.push({distance:s,point:mm.clone(),uv:zh.getUV(mm,wm,xm,Sm,Em,Tm,Mm,new mc),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Im=new Mc,Am=new xc,km=new xc,Pm=new Mc,Rm=new rh;class Lm extends Af{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new rh,this.bindMatrixInverse=new rh}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xc,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Am.fromBufferAttribute(r.attributes.skinIndex,e),km.fromBufferAttribute(r.attributes.skinWeight,e),Im.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=km.getComponent(i);if(0!==e){const r=Am.getComponent(i);Rm.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Pm.copy(Im).applyMatrix4(Rm),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}Lm.prototype.isSkinnedMesh=!0;(class extends Ih{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends _c{constructor(e=null,t=1,n=1,r,i,o,a,s,u=1003,l=1003,c,h){super(null,o,a,s,u,l,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=u,this.minFilter=l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;const Nm=new rh,Om=new rh,Dm=[],Fm=new Af;(class extends Af{constructor(e,t,n){super(e,t),this.instanceMatrix=new Jh(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Fm.geometry=this.geometry,Fm.material=this.material,void 0!==Fm.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Nm),Om.multiplyMatrices(n,Nm),Fm.matrixWorld=Om,Fm.raycast(e,Dm);for(let e=0,n=Dm.length;e<n;e++){const n=Dm[e];n.instanceId=i,n.object=this,t.push(n)}Dm.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Jh(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Um extends Bh{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Xh(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}Um.prototype.isLineBasicMaterial=!0;const zm=new Mc,jm=new Mc,Bm=new rh,Vm=new nh,Hm=new Xc;class Wm extends Ih{constructor(e=new hf,t=new Um){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)zm.fromBufferAttribute(t,e-1),jm.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=zm.distanceTo(jm);e.setAttribute("lineDistance",new tf(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hm.copy(n.boundingSphere),Hm.applyMatrix4(r),Hm.radius+=i,!1===e.ray.intersectsSphere(Hm))return;Bm.copy(r).invert(),Vm.copy(e.ray).applyMatrix4(Bm);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new Mc,l=new Mc,c=new Mc,h=new Mc,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=f){const o=r.getX(n),a=r.getX(n+1);u.fromBufferAttribute(i,o),l.fromBufferAttribute(i,a);if(Vm.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const f=e.ray.origin.distanceTo(h);f<e.near||f>e.far||t.push({distance:f,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=f){u.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1);if(Vm.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Wm.prototype.isLine=!0;const Gm=new Mc,qm=new Mc;class Km extends Wm{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Gm.fromBufferAttribute(t,e),qm.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Gm.distanceTo(qm);e.setAttribute("lineDistance",new tf(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Km.prototype.isLineSegments=!0;(class extends Wm{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Xm extends Bh{constructor(e){super(),this.type="PointsMaterial",this.color=new Xh(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}Xm.prototype.isPointsMaterial=!0;const Ym=new rh,$m=new nh,Qm=new Xc,Jm=new Mc;function Zm(e,t,n,r,i,o,a){const s=$m.distanceSqToPoint(e);if(s<n){const n=new Mc;$m.closestPointToPoint(e,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}(class extends Ih{constructor(e=new hf,t=new Xm){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qm.copy(n.boundingSphere),Qm.applyMatrix4(r),Qm.radius+=i,!1===e.ray.intersectsSphere(Qm))return;Ym.copy(r).invert(),$m.copy(e.ray).applyMatrix4(Ym);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),u=Math.min(i.count,o.start+o.count);n<u;n++){const o=i.getX(n);Jm.fromBufferAttribute(a,o),Zm(Jm,o,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)Jm.fromBufferAttribute(a,n),Zm(Jm,n,s,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0;(class extends _c{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;(class extends _c{constructor(e,t,n,r,i,o,a,s,u,l,c,h){super(null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;(class extends _c{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends _c{constructor(e,t,n,r,i,o,a,s,u,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),super(null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0,new Mc,new Mc,new Mc,new zh;class eg{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,u=i-1;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new mc:new Mc);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Mc,r=[],i=[],o=[],a=new Mc,s=new rh;for(let f=0;f<=e;f++){const t=f/e;r[f]=this.getTangentAt(t,new Mc),r[f].normalize()}i[0]=new Mc,o[0]=new Mc;let u=Number.MAX_VALUE;const l=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=u&&(u=l,n.set(1,0,0)),c<=u&&(u=c,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let f=1;f<=e;f++){if(i[f]=i[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(hc(r[f-1].dot(r[f]),-1,1));i[f].applyMatrix4(s.makeRotationAxis(a,e))}o[f].crossVectors(r[f],i[f])}if(!0===t){let t=Math.acos(hc(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class tg extends eg{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new mc,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*e-r*t+this.aX,u=n*t+r*e+this.aY}return n.set(s,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}tg.prototype.isEllipseCurve=!0;class ng extends tg{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function rg(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;u*=a,l*=a,i(t,n,u,l)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}ng.prototype.isArcCurve=!0;const ig=new Mc,og=new rg,ag=new rg,sg=new rg;class ug extends eg{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Mc){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,u=Math.floor(o),l=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===l&&u===i-1&&(u=i-2,l=1),this.closed||u>0?a=r[(u-1)%i]:(ig.subVectors(r[0],r[1]).add(r[0]),a=ig);const c=r[u%i],h=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(ig.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=ig),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),og.initNonuniformCatmullRom(a.x,c.x,h.x,s.x,t,n,r),ag.initNonuniformCatmullRom(a.y,c.y,h.y,s.y,t,n,r),sg.initNonuniformCatmullRom(a.z,c.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(og.initCatmullRom(a.x,c.x,h.x,s.x,this.tension),ag.initCatmullRom(a.y,c.y,h.y,s.y,this.tension),sg.initCatmullRom(a.z,c.z,h.z,s.z,this.tension));return n.set(og.calc(l),ag.calc(l),sg.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Mc).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function lg(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function cg(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function hg(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}ug.prototype.isCatmullRomCurve3=!0;class fg extends eg{constructor(e=new mc,t=new mc,n=new mc,r=new mc){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new mc){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(hg(e,r.x,i.x,o.x,a.x),hg(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}fg.prototype.isCubicBezierCurve=!0;class dg extends eg{constructor(e=new Mc,t=new Mc,n=new Mc,r=new Mc){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Mc){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(hg(e,r.x,i.x,o.x,a.x),hg(e,r.y,i.y,o.y,a.y),hg(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}dg.prototype.isCubicBezierCurve3=!0;class pg extends eg{constructor(e=new mc,t=new mc){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new mc){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new mc;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}pg.prototype.isLineCurve=!0;class mg extends eg{constructor(e=new mc,t=new mc,n=new mc){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new mc){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(cg(e,r.x,i.x,o.x),cg(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}mg.prototype.isQuadraticBezierCurve=!0;class gg extends eg{constructor(e=new Mc,t=new Mc,n=new Mc){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Mc){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(cg(e,r.x,i.x,o.x),cg(e,r.y,i.y,o.y),cg(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}gg.prototype.isQuadraticBezierCurve3=!0;class vg extends eg{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new mc){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(lg(a,s.x,u.x,l.x,c.x),lg(a,s.y,u.y,l.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new mc).fromArray(n))}return this}}vg.prototype.isSplineCurve=!0;var yg=Object.freeze({__proto__:null,ArcCurve:ng,CatmullRomCurve3:ug,CubicBezierCurve:fg,CubicBezierCurve3:dg,EllipseCurve:tg,LineCurve:pg,LineCurve3:class extends eg{constructor(e=new Mc,t=new Mc){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Mc){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:mg,QuadraticBezierCurve3:gg,SplineCurve:vg});const bg=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=_g(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,u,l,c,h,f,d;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,u,l;for(o=0,a=t.length;o<a;o++)s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,l=_g(e,s,u,r,!1),l===l.next&&(l.steiner=!0),i.push(Pg(l));for(i.sort(Cg),o=0;o<i.length;o++)Ig(i[o],n),n=wg(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=l=e[0],u=c=e[1];for(let t=n;t<i;t+=n)h=e[t],f=e[t+1],h<s&&(s=h),f<u&&(u=f),h>l&&(l=h),f>c&&(c=f);d=Math.max(l-s,c-u),d=0!==d?1/d:0}return xg(o,a,n,s,u,d),a};function _g(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Bg(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Bg(o,e[o],e[o+1],a);return a&&Og(a,a.next)&&(Vg(a),a=a.next),a}function wg(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Og(r,r.next)&&0!==Ng(r.prev,r,r.next))r=r.next;else{if(Vg(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function xg(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=kg(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ,r);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);let s,u,l=e;for(;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Eg(e,r,i,o):Sg(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Vg(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?xg(e=Tg(wg(e),t,n),t,n,r,i,o,2):2===a&&Mg(e,t,n,r,i,o):xg(wg(e),t,n,r,i,o,1);break}}function Sg(e){const t=e.prev,n=e,r=e.next;if(Ng(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Rg(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ng(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Eg(e,t,n,r){const i=e.prev,o=e,a=e.next;if(Ng(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=kg(s,u,t,n,r),f=kg(l,c,t,n,r);let d=e.prevZ,p=e.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&Rg(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ng(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&Rg(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ng(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Rg(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ng(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&Rg(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ng(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Tg(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Og(i,o)&&Dg(i,r,r.next,o)&&zg(i,o)&&zg(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Vg(r),Vg(r.next),r=e=o),r=r.next}while(r!==e);return wg(r)}function Mg(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Lg(a,e)){let s=jg(a,e);return a=wg(a,a.next),s=wg(s,s.next),xg(a,t,n,r,i,o),void xg(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function Cg(e,t){return e.x-t.x}function Ig(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,u=o.x,l=o.y;let c,h=1/0;n=o;do{r>=n.x&&n.x>=u&&r!==n.x&&Rg(i<l?r:a,i,u,l,i<l?a:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),zg(n,e)&&(c<h||c===h&&(n.x>o.x||n.x===o.x&&Ag(o,n)))&&(o=n,h=c)),n=n.next}while(n!==s);return o}(e,t)){const n=jg(t,e);wg(t,t.next),wg(n,n.next)}}function Ag(e,t){return Ng(e.prev,e,t.prev)<0&&Ng(t.next,e,e.next)<0}function kg(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Pg(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Rg(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Lg(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Dg(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(zg(e,t)&&zg(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ng(e.prev,e,t.prev)||Ng(e,t.prev,t))||Og(e,t)&&Ng(e.prev,e,e.next)>0&&Ng(t.prev,t,t.next)>0)}function Ng(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Og(e,t){return e.x===t.x&&e.y===t.y}function Dg(e,t,n,r){const i=Ug(Ng(e,t,n)),o=Ug(Ng(e,t,r)),a=Ug(Ng(n,r,e)),s=Ug(Ng(n,r,t));return i!==o&&a!==s||(!(0!==i||!Fg(e,n,t))||(!(0!==o||!Fg(e,r,t))||(!(0!==a||!Fg(n,e,r))||!(0!==s||!Fg(n,t,r)))))}function Fg(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ug(e){return e>0?1:e<0?-1:0}function zg(e,t){return Ng(e.prev,e,e.next)<0?Ng(e,t,e.next)>=0&&Ng(e,e.prev,t)>=0:Ng(e,t,e.prev)<0||Ng(e,e.next,t)<0}function jg(e,t){const n=new Hg(e.i,e.x,e.y),r=new Hg(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Bg(e,t,n,r){const i=new Hg(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Hg(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Wg{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Wg.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Gg(e),qg(n,e);let o=e.length;t.forEach(Gg);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,qg(n,t[s]);const a=bg(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function Gg(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function qg(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Kg extends hf{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Xg;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let g,v,y,b,_,w=!1;p&&(g=p.getSpacedPoints(s),w=!0,l=!1,v=p.computeFrenetFrames(s,!1),y=new Mc,b=new Mc,_=new Mc),l||(d=0,c=0,h=0,f=0);const x=e.extractPoints(a);let S=x.shape;const E=x.holes;if(!Wg.isClockWise(S)){S=S.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Wg.isClockWise(t)&&(E[e]=t.reverse())}}const T=Wg.triangulateShape(S,E),M=S;for(let t=0,n=E.length;t<n;t++){const e=E[t];S=S.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const I=S.length,A=T.length;function k(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+a/h,m=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(a*l-s*u);r=d+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new mc(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?u>Number.EPSILON&&(e=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new mc(r/o,i/o)}const P=[];for(let t=0,n=M.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[t]=k(M[t],M[r],M[i]);const R=[];let L,N=P.concat();for(let t=0,n=E.length;t<n;t++){const e=E[t];L=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[t]=k(e[t],e[r],e[i]);R.push(L),N=N.concat(L)}for(let t=0;t<d;t++){const e=t/d,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,i=M.length;t<i;t++){const e=C(M[t],P[t],r);F(e.x,e.y,-n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];L=R[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],L[t],r);F(i.x,i.y,-n)}}}const O=h+f;for(let t=0;t<I;t++){const e=l?C(S[t],N[t],O):S[t];w?(b.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(b).add(y),F(_.x,_.y,_.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<I;e++){const n=l?C(S[e],N[e],O):S[e];w?(b.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(b).add(y),F(_.x,_.y,_.z)):F(n.x,n.y,u/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,i=M.length;t<i;t++){const e=C(M[t],P[t],r);F(e.x,e.y,u+n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];L=R[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],L[t],r);w?F(i.x,i.y+g[s-1].y,g[s-1].x+n):F(i.x,i.y,u+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*d;e<n;e++){const n=I*e,o=I*(e+1);z(t+r+n,t+i+n,t+i+o,t+r+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function U(e,t,i){j(e),j(t),j(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);B(a[0]),B(a[1]),B(a[2])}function z(e,t,i,o){j(e),j(t),j(o),j(t),j(i),j(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[3]),B(s[1]),B(s[2]),B(s[3])}function j(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function B(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(l){let e=0,t=I*e;for(let n=0;n<A;n++){const e=T[n];U(e[2]+t,e[1]+t,e[0]+t)}e=s+2*d,t=I*e;for(let n=0;n<A;n++){const e=T[n];U(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<A;e++){const t=T[e];U(t[2],t[1],t[0])}for(let e=0;e<A;e++){const t=T[e];U(t[0]+I*s,t[1]+I*s,t[2]+I*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(M,t),t+=M.length;for(let n=0,r=E.length;n<r;n++){const e=E[n];D(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new tf(r,3)),this.setAttribute("uv",new tf(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new yg[r.type]).fromJSON(r)),new Kg(n,e.options)}}const Xg={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new mc(o,a),new mc(s,u),new mc(l,c)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new mc(a,1-u),new mc(l,1-h),new mc(f,1-p),new mc(m,1-v)]:[new mc(s,1-u),new mc(c,1-h),new mc(d,1-p),new mc(g,1-v)]}};class Yg extends hf{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))u(e);else for(let l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){const a=r.length/3,u=e.extractPoints(t);let l=u.shape;const c=u.holes;!1===Wg.isClockWise(l)&&(l=l.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===Wg.isClockWise(e)&&(c[t]=e.reverse())}const h=Wg.triangulateShape(l,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];l=l.concat(e)}for(let t=0,n=l.length;t<n;t++){const e=l[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new tf(r,3)),this.setAttribute("normal",new tf(i,3)),this.setAttribute("uv",new tf(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Yg(n,e.curveSegments)}}class $g extends hf{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let u=0;const l=[],c=new Mc,h=new Mc,f=[],d=[],p=[],m=[];for(let g=0;g<=n;g++){const f=[],v=g/n;let y=0;0==g&&0==o?y=.5/t:g==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=e*Math.cos(o+v*a),c.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),d.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-v),f.push(u++)}l.push(f)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=l[g][e+1],r=l[g][e],i=l[g+1][e],a=l[g+1][e+1];(0!==g||o>0)&&f.push(t,r,a),(g!==n-1||s<Math.PI)&&f.push(r,i,a)}this.setIndex(f),this.setAttribute("position",new tf(d,3)),this.setAttribute("normal",new tf(p,3)),this.setAttribute("uv",new tf(m,2))}static fromJSON(e){return new $g(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}(class extends Bh{constructor(e){super(),this.type="ShadowMaterial",this.color=new Xh(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;(class extends Of{constructor(e){super(e),this.type="RawShaderMaterial"}}).prototype.isRawShaderMaterial=!0;class Qg extends Bh{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Xh(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}Qg.prototype.isMeshStandardMaterial=!0;(class extends Qg{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mc(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=hc(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Xh(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Xh).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}).prototype.isMeshPhysicalMaterial=!0;(class extends Bh{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Xh(16777215),this.specular=new Xh(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends Bh{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xh(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshToonMaterial=!0;(class extends Bh{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends Bh{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Xh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshLambertMaterial=!0;(class extends Bh{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xh(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends Um{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Jg={arraySlice:function(e,t,n){return Jg.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let u=0;u<o.tracks.length;++u){const e=o.tracks[u],t=e.getValueSize(),s=[],l=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)l.push(e.values[o*t+n])}}0!==s.length&&(e.times=Jg.convertArray(s,e.times.constructor),e.values=Jg.convertArray(l,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let u=0;u<o.tracks.length;++u)s>o.tracks[u].times[0]&&(s=o.tracks[u].times[0]);for(let u=0;u<o.tracks.length;++u)o.tracks[u].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);let l=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);const h=t.times.length-1;let f;if(o<=t.times[0]){const e=s,n=u-s;f=Jg.arraySlice(t.values,e,n)}else if(o>=t.times[h]){const e=h*u+s,n=e+u-s;f=Jg.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=u-s;e.evaluate(o),f=Jg.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new Tc).fromArray(f).normalize().conjugate().toArray(f)}const d=i.times.length;for(let e=0;e<d;++e){const t=e*c+l;if("quaternion"===r)Tc.multiplyQuaternionsFlat(i.values,t,f,0,i.values,t);else{const e=c-2*l;for(let n=0;n<e;++n)i.values[t+n]-=f[n]}}}return e.blendMode=2501,e}};class Zg{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Zg.prototype.beforeStart_=Zg.prototype.copySampleValue_,Zg.prototype.afterEnd_=Zg.prototype.copySampleValue_;class ev extends Zg{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p;for(let _=0;_!==a;++_)i[_]=g*o[l+_]+v*o[u+_]+y*o[s+_]+b*o[c+_];return i}}class tv extends Zg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l;for(let h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}class nv extends Zg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class rv{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jg.convertArray(t,this.TimeBufferType),this.values=Jg.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Jg.convertArray(e.times,Array),values:Jg.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new nv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ev(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=Jg.arraySlice(n,i,o),this.values=Jg.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&Jg.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=Jg.arraySlice(this.times),t=Jg.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=Jg.arraySlice(e,0,o),this.values=Jg.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Jg.arraySlice(this.times,0),t=Jg.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}rv.prototype.TimeBufferType=Float32Array,rv.prototype.ValueBufferType=Float32Array,rv.prototype.DefaultInterpolation=2301;class iv extends rv{}iv.prototype.ValueTypeName="bool",iv.prototype.ValueBufferType=Array,iv.prototype.DefaultInterpolation=2300,iv.prototype.InterpolantFactoryMethodLinear=void 0,iv.prototype.InterpolantFactoryMethodSmooth=void 0;class ov extends rv{}ov.prototype.ValueTypeName="color";class av extends rv{}av.prototype.ValueTypeName="number";class sv extends Zg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let u=e*a;for(let l=u+a;u!==l;u+=4)Tc.slerpFlat(i,0,o,u-a,o,u,s);return i}}class uv extends rv{InterpolantFactoryMethodLinear(e){return new sv(this.times,this.values,this.getValueSize(),e)}}uv.prototype.ValueTypeName="quaternion",uv.prototype.DefaultInterpolation=2301,uv.prototype.InterpolantFactoryMethodSmooth=void 0;class lv extends rv{}lv.prototype.ValueTypeName="string",lv.prototype.ValueBufferType=Array,lv.prototype.DefaultInterpolation=2300,lv.prototype.InterpolantFactoryMethodLinear=void 0,lv.prototype.InterpolantFactoryMethodSmooth=void 0;class cv extends rv{}cv.prototype.ValueTypeName="vector";class hv{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=cc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(fv(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(rv.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const u=Jg.getKeyframeOrder(e);e=Jg.sortedArray(e,1,u),s=Jg.sortedArray(s,1,u),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new av(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];Jg.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const u=e.hierarchy||[];for(let l=0;l<u.length;l++){const e=u[l].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new av(".morphTargetInfluence["+i+"]",t,o))}s=t.length*(o||1)}else{const i=".bones["+t[l].name+"]";n(cv,i+".position",e,"pos",r),n(uv,i+".quaternion",e,"rot",r),n(cv,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fv(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return av;case"vector":case"vector2":case"vector3":case"vector4":return cv;case"color":return ov;case"quaternion":return uv;case"bool":case"boolean":return iv;case"string":return lv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Jg.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const dv={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const pv=new class{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){const t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=u.length;t<n;t+=2){const n=u[t],r=u[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}};class mv{constructor(e){this.manager=void 0!==e?e:pv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const gv={};class vv extends mv{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=dv.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0!==gv[e])return void gv[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let n=0;n<s.length;n++)e[n]=s.charCodeAt(n);r="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(u){setTimeout((function(){r&&r(u),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{gv[e]=[],gv[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,r=gv[e];if(delete gv[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),dv.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=gv[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=gv[e];delete gv[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=gv[e];delete gv[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return i.manager.itemStart(e),s}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yv extends mv{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=dv.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),dv.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class bv extends mv{constructor(e){super(e)}load(e,t,n,r){const i=new zf,o=new yv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let u=0;u<e.length;++u)s(u);return i}}class _v extends mv{constructor(e){super(e)}load(e,t,n,r){const i=new _c,o=new yv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class wv extends eg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new pg(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new yg[n.type]).fromJSON(n))}return this}}class xv extends wv{constructor(e){super(),this.type="Path",this.currentPoint=new mc,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new pg(this.currentPoint.clone(),new mc(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new mg(this.currentPoint.clone(),new mc(e,t),new mc(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new fg(this.currentPoint.clone(),new mc(e,t),new mc(n,r),new mc(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new vg(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const u=new tg(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=u.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(u);const l=u.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Sv extends xv{constructor(e){super(e),this.uuid=cc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new xv).fromJSON(n))}return this}}class Ev extends Ih{constructor(e,t=1){super(),this.type="Light",this.color=new Xh(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ev.prototype.isLight=!0;(class extends Ev{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Ih.DefaultUp),this.updateMatrix(),this.groundColor=new Xh(t)}copy(e){return Ev.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Tv=new rh,Mv=new Mc,Cv=new Mc;class Iv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new mc(512,512),this.map=null,this.mapPass=null,this.matrix=new rh,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kf,this._frameExtents=new mc(1,1),this._viewportCount=1,this._viewports=[new xc(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Mv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Mv),Cv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Cv),t.updateMatrixWorld(),Tv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Av extends Iv{constructor(){super(new Ff(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*lc*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Av.prototype.isSpotLightShadow=!0;(class extends Ev{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Ih.DefaultUp),this.updateMatrix(),this.target=new Ih,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new Av}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const kv=new rh,Pv=new Mc,Rv=new Mc;class Lv extends Iv{constructor(){super(new Ff(90,1,.5,500)),this._frameExtents=new mc(4,2),this._viewportCount=6,this._viewports=[new xc(2,1,1,1),new xc(0,1,1,1),new xc(3,1,1,1),new xc(1,1,1,1),new xc(3,0,1,1),new xc(1,0,1,1)],this._cubeDirections=[new Mc(1,0,0),new Mc(-1,0,0),new Mc(0,0,1),new Mc(0,0,-1),new Mc(0,1,0),new Mc(0,-1,0)],this._cubeUps=[new Mc(0,1,0),new Mc(0,1,0),new Mc(0,1,0),new Mc(0,1,0),new Mc(0,0,1),new Mc(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Pv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Pv),Rv.copy(n.position),Rv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Rv),n.updateMatrixWorld(),r.makeTranslation(-Pv.x,-Pv.y,-Pv.z),kv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kv)}}Lv.prototype.isPointLightShadow=!0;(class extends Ev{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Lv}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class Nv extends Df{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Nv.prototype.isOrthographicCamera=!0;class Ov extends Iv{constructor(){super(new Nv(-5,5,5,-5,.5,500))}}Ov.prototype.isDirectionalLightShadow=!0;(class extends Ev{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ih.DefaultUp),this.updateMatrix(),this.target=new Ih,this.shadow=new Ov}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends Ev{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Ev{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class Dv{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Mc)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}Dv.prototype.isSphericalHarmonics3=!0;class Fv extends Ev{constructor(e=new Dv,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Fv.prototype.isLightProbe=!0;(class extends hf{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;(class extends Jh{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}).prototype.isInstancedBufferAttribute=!0;let Uv;(class extends mv{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=dv.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){dv.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;const zv=function(){return void 0===Uv&&(Uv=new(window.AudioContext||window.webkitAudioContext)),Uv};class jv extends mv{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new vv(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);zv().decodeAudioData(e,(function(e){t(e)}))}catch(bX){r?r(bX):console.error(bX),i.manager.itemError(e)}}),n,r)}}(class extends Fv{constructor(e,t,n=1){super(void 0,n);const r=(new Xh).set(e),i=(new Xh).set(t),o=new Mc(r.r,r.g,r.b),a=new Mc(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}).prototype.isHemisphereLightProbe=!0;(class extends Fv{constructor(e,t=1){super(void 0,t);const n=(new Xh).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Bv{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Tc.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;Tc.multiplyQuaternionsFlat(e,o,e,t,e,n),Tc.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const Vv=new RegExp("[\\[\\]\\.:\\/]","g"),Hv="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Wv=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Gv=/(WCOD+)?/.source.replace("WCOD",Hv),qv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Kv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Xv=new RegExp("^"+Wv+Gv+qv+Kv+"$"),Yv=["material","materials","bones"];class $v{constructor(e,t,n){this.path=t,this.parsedPath=n||$v.parseTrackName(t),this.node=$v.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new $v.Composite(e,t,n):new $v(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Vv,"")}static parseTrackName(e){const t=Xv.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Yv.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=$v.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$v.Composite=class{constructor(e,t,n){const r=n||$v.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},$v.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$v.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$v.prototype.GetterByBindingType=[$v.prototype._getValue_direct,$v.prototype._getValue_array,$v.prototype._getValue_arrayElement,$v.prototype._getValue_toArray],$v.prototype.SetterByBindingTypeAndVersioning=[[$v.prototype._setValue_direct,$v.prototype._setValue_direct_setNeedsUpdate,$v.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$v.prototype._setValue_array,$v.prototype._setValue_array_setNeedsUpdate,$v.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$v.prototype._setValue_arrayElement,$v.prototype._setValue_arrayElement_setNeedsUpdate,$v.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$v.prototype._setValue_fromArray,$v.prototype._setValue_fromArray_setNeedsUpdate,$v.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qv{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let u=0;u!==o;++u){const e=i[u].createInterpolant(null);a[u]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=2202===n;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}(class extends ac{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName;let l=u[s];void 0===l&&(l={},u[s]=l);for(let c=0;c!==i;++c){const e=r[c],i=e.name;let u=l[i];if(void 0!==u)o[c]=u;else{if(u=o[c],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,i));continue}const r=t&&t._propertyBindings[c].binding.parsedPath;u=new Bv($v.create(n,i,r),e.ValueTypeName,e.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,i),o[c]=u}a[c].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new tv(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?hv.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;const l=new Qv(this,o,t,n);return this._bindAction(l,u),this._addInactiveAction(l,a,i),l}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?hv.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u){t[u]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let u=0;u!==s;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);(class extends cm{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;(class extends Ih{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}).prototype.isImmediateRenderObject=!0;const Jv=new Mc,Zv=new rh,ey=new rh;function ty(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,ty(e.children[n]));return t}const ny=new Float32Array(1);new Int32Array(ny.buffer);const ry=new Yh({side:1,depthWrite:!1,depthTest:!1});function iy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oy(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.7.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/new Af(new Pf,ry),eg.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(eg.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},xv.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends Km{constructor(e=10,t=10,n=4473924,r=8947848){n=new Xh(n),r=new Xh(r);const i=t/2,o=e/t,a=e/2,s=[],u=[];for(let c=0,h=0,f=-a;c<=t;c++,f+=o){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);const e=c===i?n:r;e.toArray(u,h),h+=3,e.toArray(u,h),h+=3,e.toArray(u,h),h+=3,e.toArray(u,h),h+=3}const l=new hf;l.setAttribute("position",new tf(s,3)),l.setAttribute("color",new tf(u,3));super(l,new Um({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Km{constructor(e){const t=ty(e),n=new hf,r=[],i=[],o=new Xh(0,0,1),a=new Xh(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new tf(r,3)),n.setAttribute("color",new tf(i,3));super(n,new Um({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");ey.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(Zv.multiplyMatrices(ey,e.matrixWorld),Jv.setFromMatrixPosition(Zv),r.setXYZ(o,Jv.x,Jv.y,Jv.z),Zv.multiplyMatrices(ey,e.parent.matrixWorld),Jv.setFromMatrixPosition(Zv),r.setXYZ(o+1,Jv.x,Jv.y,Jv.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},mv.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(bX){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}.extractUrlBase(e)},mv.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ac.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ac.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ac.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Ac.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ac.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Xc.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Kf.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},gc.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},gc.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gc.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},gc.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gc.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},gc.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},rh.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},rh.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},rh.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Mc).setFromMatrixColumn(this,3)},rh.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},rh.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},rh.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},rh.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},rh.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rh.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},rh.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},rh.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},rh.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rh.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rh.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rh.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},rh.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},rh.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},rh.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},rh.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Wf.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Tc.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Tc.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},nh.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},nh.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},nh.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},zh.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},zh.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},zh.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},zh.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},zh.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},zh.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zh.getBarycoord(e,t,n,r,i)},zh.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zh.getNormal(e,t,n,r)},Sv.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Sv.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Kg(this,e)},Sv.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yg(this,e)},mc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},mc.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},mc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mc.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Mc.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Mc.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Mc.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Mc.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Mc.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Mc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Mc.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Mc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},xc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ih.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Ih.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ih.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Ih.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ih.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ih.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Af.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Af.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Lm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ff.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ev.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Jh.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Jh.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},Jh.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Jh.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},hf.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},hf.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Jh(arguments[1],arguments[2])))},hf.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},hf.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},hf.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},hf.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},hf.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(hf.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),cm.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},cm.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Kg.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Kg.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Kg.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},lm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(Bh.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Xh}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Of.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),um.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},um.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},um.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},um.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},um.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},um.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},um.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},um.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},um.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},um.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},um.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},um.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},um.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},um.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},um.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},um.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},um.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},um.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},um.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},um.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},um.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},um.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},um.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},um.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},um.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(um.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Jp.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Sc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends Ih{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new jv).load(e,(function(e){t.setBuffer(e)})),this},Uf.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Uf.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},yc.crossOrigin=void 0,yc.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new _v;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},yc.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new bv;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},yc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},yc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"130"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="130");var ay,sy,uy,ly,cy,hy,fy,dy,py,my,gy,vy,yy,by,_y,wy,xy,Sy,Ey,Ty,My,Cy,Iy,Ay,ky,Py,Ry,Ly,Ny={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Oy={duration:.5,overwrite:!1,delay:0},Dy=2*Math.PI,Fy=Dy/4,Uy=0,zy=Math.sqrt,jy=Math.cos,By=Math.sin,Vy=function(e){return"string"==typeof e},Hy=function(e){return"function"==typeof e},Wy=function(e){return"number"==typeof e},Gy=function(e){return void 0===e},qy=function(e){return"object"==typeof e},Ky=function(e){return!1!==e},Xy=function(){return"undefined"!=typeof window},Yy=function(e){return Hy(e)||Vy(e)},$y="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Qy=Array.isArray,Jy=/(?:-?\.?\d|\.)+/gi,Zy=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,eb=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tb=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,nb=/[+-]=-?[.\d]+/,rb=/[^,'"\[\]\s]+/gi,ib=/[\d.+\-=]+(?:e[-+]\d*)*/i,ob={},ab={},sb=function(e){return(ab=Rb(e,ob))&&vw},ub=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lb=function(e,t){return!t&&console.warn(e)},cb=function(e,t){return e&&(ob[e]=t)&&ab&&(ab[e]=t)||ob},hb=function(){return 0},fb={},db=[],pb={},mb={},gb={},vb=30,yb=[],bb="",_b=function(e){var t,n,r=e[0];if(qy(r)||Hy(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=yb.length;n--&&!yb[n].targetTest(r););t=yb[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new V_(e[n],t)))||e.splice(n,1);return e},wb=function(e){return e._gsap||_b(u_(e))[0]._gsap},xb=function(e,t,n){return(n=e[t])&&Hy(n)?e[t]():Gy(n)&&e.getAttribute&&e.getAttribute(t)||n},Sb=function(e,t){return(e=e.split(",")).forEach(t)||e},Eb=function(e){return Math.round(1e5*e)/1e5||0},Tb=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Mb=function(){var e,t,n=db.length,r=db.slice(0);for(pb={},db.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Cb=function(e,t,n,r){db.length&&Mb(),e.render(t,n,r),db.length&&Mb()},Ib=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(rb).length<2?t:Vy(e)?e.trim():e},Ab=function(e){return e},kb=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Pb=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},Rb=function(e,t){for(var n in t)e[n]=t[n];return e},Lb=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=qy(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Nb=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},Ob=function(e){var t=e.parent||sy,n=e.keyframes?Pb:kb;if(Ky(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Db=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Fb=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ub=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},zb=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},jb=function e(t){return!t||t._ts&&e(t.parent)},Bb=function(e){return e._repeat?Vb(e._tTime,e=e.duration()+e._rDelay)*e:0},Vb=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Hb=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Wb=function(e){return e._end=Eb(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},Gb=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Eb(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Wb(e),n._dirty||Ub(n,e)),e},qb=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Hb(e.rawTime(),t),(!t._dur||i_(0,t.totalDuration(),n)-t._tTime>1e-8)&&t.render(n,!0)),Ub(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Kb=function(e,t,n,r){return t.parent&&Fb(t),t._start=Eb((Wy(n)?n:n||e!==sy?t_(e,n,t):e._time)+t._delay),t._end=Eb(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=e[r];if(i)for(o=t[i];a&&a[i]>o;)a=a._prev;a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),Qb(t)||(e._recent=t),r||qb(e,t),e},Xb=function(e,t){return(ob.ScrollTrigger||ub("scrollTrigger",t))&&ob.ScrollTrigger.create(t,e)},Yb=function(e,t,n,r){return Y_(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&fy!==A_.frame?(db.push(e),e._lazy=[t,r],1):void 0:1},$b=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Qb=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Jb=function(e,t,n,r){var i=e._repeat,o=Eb(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:Eb(o*(i+1)+e._rDelay*i):o,a&&!r?Gb(e,e._tTime=e._tDur*a):e.parent&&Wb(e),n||Ub(e.parent,e),e},Zb=function(e){return e instanceof W_?Ub(e):Jb(e,e._dur)},e_={_start:0,endTime:hb,totalDuration:hb},t_=function e(t,n,r){var i,o,a,s=t.labels,u=t._recent||e_,l=t.duration()>=1e8?u.endTime(!1):t._dur;return Vy(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?u:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=l),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(Qy(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+o:l+o)):null==n?l:+n},n_=function(e,t,n){var r,i,o=Wy(t[1]),a=(o?2:1)+(e<2?0:1),s=t[a];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=Ky(i.vars.inherit)&&i.parent;s.immediateRender=Ky(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[a-1]}return new Z_(t[0],s,t[a+1])},r_=function(e,t){return e||0===e?t(e):t},i_=function(e,t,n){return n<e?e:n>t?t:n},o_=function(e){if("string"!=typeof e)return"";var t=ib.exec(e);return t?e.substr(t.index+t[0].length):""},a_=[].slice,s_=function(e,t){return e&&qy(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&qy(e[0]))&&!e.nodeType&&e!==uy},u_=function(e,t,n){return!Vy(e)||n||!ly&&k_()?Qy(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return Vy(e)&&!t||s_(e,1)?(r=n).push.apply(r,u_(e)):n.push(e)}))||n}(e,n):s_(e)?a_.call(e,0):e?[e]:[]:a_.call((t||cy).querySelectorAll(e),0)},l_=function(e){return e.sort((function(){return.5-Math.random()}))},c_=function(e){if(Hy(e))return e;var t=qy(e)?e:{each:e},n=F_(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=t.axis,l=r,c=r;return Vy(r)?l=c={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(l=r[0],c=r[1]),function(e,a,h){var f,d,p,m,g,v,y,b,_,w=(h||t).length,x=o[w];if(!x){if(!(_="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(y=-1e8;y<(y=h[_++].getBoundingClientRect().left)&&_<w;);_--}for(x=o[w]=[],f=s?Math.min(_,w)*l-.5:r%_,d=s?w*c/_-.5:r/_|0,y=0,b=1e8,v=0;v<w;v++)p=v%_-f,m=d-(v/_|0),x[v]=g=u?Math.abs("y"===u?m:p):zy(p*p+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&l_(x),x.max=y-b,x.min=b,x.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(_>w?w-1:u?"y"===u?w/_:_:Math.max(_,w/_))||0)*("edges"===r?-1:1),x.b=w<0?i-w:i,x.u=o_(t.amount||t.each)||0,n=n&&w<0?O_(n):n}return w=(x[e]-x.min)/x.max||0,Eb(x.b+(n?n(w):w)*x.v)+x.u}},h_=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(Wy(n)?0:o_(n))}},f_=function(e,t){var n,r,i=Qy(e);return!i&&qy(e)&&(n=i=e.radius||1e8,e.values?(e=u_(e.values),(r=!Wy(e[0]))&&(n*=n)):e=h_(e.increment)),r_(t,i?Hy(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,a=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),u=1e8,l=0,c=e.length;c--;)(i=r?(i=e[c].x-a)*i+(o=e[c].y-s)*o:Math.abs(e[c]-a))<u&&(u=i,l=c);return l=!n||u<=n?e[l]:t,r||l===t||Wy(t)?l:l+o_(t)}:h_(e))},d_=function(e,t,n,r){return r_(Qy(e)?!t:!0===n?!!(n=0):!r,(function(){return Qy(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},p_=function(e,t,n){return r_(n,(function(n){return e[~~t(n)]}))},m_=function(e){for(var t,n,r,i,o=0,a="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?rb:Jy),a+=e.substr(o,t-o)+d_(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},g_=function(e,t,n,r,i){var o=t-e,a=r-n;return r_(i,(function(t){return n+((t-e)/o*a||0)}))},v_=function(e,t,n){var r,i,o,a=e.labels,s=1e8;for(r in a)(i=a[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},y_=function(e,t,n){var r,i,o=e.vars,a=o[t];if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&db.length&&Mb(),r?a.apply(i,r):a.call(i)},b_=function(e){return Fb(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&y_(e,"onInterrupt"),e},__=function(e){var t=(e=!e.name&&e.default||e).name,n=Hy(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:hb,render:uw,add:K_,kill:cw,modifier:lw,rawVars:0},o={targetTest:0,get:0,getSetter:iw,aliases:{},register:0};if(k_(),e!==r){if(mb[t])return;kb(r,kb(Nb(e,i),o)),Rb(r.prototype,Rb(i,Nb(e,o))),mb[r.prop=t]=r,e.targetTest&&(yb.push(r),fb[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}cb(t,r),e.register&&e.register(vw,r,dw)},w_={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},x_=function(e,t,n){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},S_=function(e,t,n){var r,i,o,a,s,u,l,c,h,f,d=e?Wy(e)?[e>>16,e>>8&255,255&e]:0:w_.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),w_[e])d=w_[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(d=parseInt(e.substr(1,6),16))>>16,d>>8&255,255&d,parseInt(e.substr(7),16)/255];d=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3))if(d=f=e.match(Jy),t){if(~e.indexOf("="))return d=e.match(Zy),n&&d.length<4&&(d[3]=1),d}else a=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=x_(a+1/3,r,i),d[1]=x_(a,r,i),d[2]=x_(a-1/3,r,i);else d=e.match(Jy)||w_.transparent;d=d.map(Number)}return t&&!f&&(r=d[0]/255,i=d[1]/255,o=d[2]/255,u=((l=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,l===c?a=s=0:(h=l-c,s=u>.5?h/(2-l-c):h/(l+c),a=l===r?(i-o)/h+(i<o?6:0):l===i?(o-r)/h+2:(r-i)/h+4,a*=60),d[0]=~~(a+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},E_=function(e){var t=[],n=[],r=-1;return e.split(M_).forEach((function(e){var i=e.match(eb)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},T_=function(e,t,n){var r,i,o,a,s="",u=(e+s).match(M_),l=t?"hsla(":"rgba(",c=0;if(!u)return e;if(u=u.map((function(e){return(e=S_(e,t,1))&&l+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=E_(e),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=e.replace(M_,"1").split(eb)).length-1;c<a;c++)s+=i[c]+(~r.indexOf(c)?u.shift()||l+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=e.split(M_)).length-1;c<a;c++)s+=i[c]+u[c];return s+i[a]},M_=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in w_)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),C_=/hsl[a]?\(/,I_=function(e){var t,n=e.join(" ");if(M_.lastIndex=0,M_.test(n))return t=C_.test(n),e[1]=T_(e[1],t),e[0]=T_(e[0],t,E_(e[1])),!0},A_=(wy=Date.now,xy=500,Sy=33,Ey=wy(),Ty=Ey,Cy=My=1e3/240,Ay=function e(t){var n,r,i,o,a=wy()-Ty,s=!0===t;if(a>xy&&(Ey+=a-Sy),((n=(i=(Ty+=a)-Ey)-Cy)>0||s)&&(o=++yy.frame,by=i-1e3*yy.time,yy.time=i/=1e3,Cy+=n+(n>=My?4:My-n),r=1),s||(my=gy(e)),r)for(_y=0;_y<Iy.length;_y++)Iy[_y](i,by,o,t)},yy={time:0,frame:0,tick:function(){Ay(!0)},deltaRatio:function(e){return by/(1e3/(e||60))},wake:function(){hy&&(!ly&&Xy()&&(uy=ly=window,cy=uy.document||{},ob.gsap=vw,(uy.gsapVersions||(uy.gsapVersions=[])).push(vw.version),sb(ab||uy.GreenSockGlobals||!uy.gsap&&uy||{}),vy=uy.requestAnimationFrame),my&&yy.sleep(),gy=vy||function(e){return setTimeout(e,Cy-1e3*yy.time+1|0)},py=1,Ay(2))},sleep:function(){(vy?uy.cancelAnimationFrame:clearTimeout)(my),py=0,gy=hb},lagSmoothing:function(e,t){xy=e||1/1e-8,Sy=Math.min(t,xy,0)},fps:function(e){My=1e3/(e||240),Cy=1e3*yy.time+My},add:function(e){Iy.indexOf(e)<0&&Iy.push(e),k_()},remove:function(e){var t;~(t=Iy.indexOf(e))&&Iy.splice(t,1)&&_y>=t&&_y--},_listeners:Iy=[]}),k_=function(){return!py&&A_.wake()},P_={},R_=/^[\d.\-M][\d.\-,\s]/,L_=/["']/g,N_=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],t=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(L_,"").trim():+r,a=n.substr(t+1).trim();return i},O_=function(e){return function(t){return 1-e(1-t)}},D_=function e(t,n){for(var r,i=t._first;i;)i instanceof W_?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},F_=function(e,t){return e&&(Hy(e)?e:P_[e]||function(e){var t,n,r,i,o=(e+"").split("("),a=P_[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[N_(o[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(Ib)):P_._CE&&R_.test(e)?P_._CE("",e):a}(e))||t},U_=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return Sb(e,(function(e){for(var t in P_[e]=ob[e]=o,P_[i=e.toLowerCase()]=n,o)P_[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=P_[e+"."+t]=o[t]})),o},z_=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},j_=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),a=o/Dy*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*By((e-a)*o)+1},u="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:z_(s);return o=Dy/o,u.config=function(n,r){return e(t,n,r)},u},B_=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:z_(r);return i.config=function(n){return e(t,n)},i};Sb("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;U_(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),P_.Linear.easeNone=P_.none=P_.Linear.easeIn,U_("Elastic",j_("in"),j_("out"),j_()),ky=7.5625,Ry=1/(Py=2.75),U_("Bounce",(function(e){return 1-Ly(1-e)}),Ly=function(e){return e<Ry?ky*e*e:e<.7272727272727273?ky*Math.pow(e-1.5/Py,2)+.75:e<.9090909090909092?ky*(e-=2.25/Py)*e+.9375:ky*Math.pow(e-2.625/Py,2)+.984375}),U_("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),U_("Circ",(function(e){return-(zy(1-e*e)-1)})),U_("Sine",(function(e){return 1===e?1:1-jy(e*Fy)})),U_("Back",B_("in"),B_("out"),B_()),P_.SteppedEase=P_.steps=ob.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*i_(0,.99999999,e)|0)+i)*n}}},Oy.ease=P_["quad.out"],Sb("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return bb+=e+","+e+"Params,"}));var V_=function(e,t){this.id=Uy++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:xb,this.set=t?t.getSetter:iw},H_=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Jb(this,+e.duration,1,1),this.data=e.data,py||A_.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Jb(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(k_(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Gb(this,e),!n._dp||n.parent||qb(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Kb(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&1e-8===Math.abs(this._zTime)||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Cb(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Bb(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Bb(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Vb(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Hb(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,zb(this.totalTime(i_(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(k_(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Kb(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Ky(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Hb(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Zb(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Zb(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(t_(this,e),Ky(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Ky(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-1e-8))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=Hy(e)?e:Ab,i=function(){var e=t.then;t.then=null,Hy(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){b_(this)},e}();kb(H_.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var W_=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=Ky(t.sortChildren),sy&&Kb(t.parent||sy,iy(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&Xb(iy(r),t.scrollTrigger),r}oy(t,e);var n=t.prototype;return n.to=function(e,t,n){return n_(0,arguments,this),this},n.from=function(e,t,n){return n_(1,arguments,this),this},n.fromTo=function(e,t,n,r){return n_(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Ob(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Z_(e,t,t_(this,n),1),this},n.call=function(e,t,n){return Kb(this,Z_.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,o,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new Z_(e,n,t_(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,a){return n.runBackwards=1,Ob(n).immediateRender=Ky(n.immediateRender),this.staggerTo(e,t,n,r,i,o,a)},n.staggerFromTo=function(e,t,n,r,i,o,a,s){return r.startAt=n,Ob(r).immediateRender=Ky(r.immediateRender),this.staggerTo(e,t,r,i,o,a,s)},n.render=function(e,t,n){var r,i,o,a,s,u,l,c,h,f,d,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==sy&&e>g-1e-8&&e>=0?g:e<1e-8?0:e,b=this._zTime<0!=e<0&&(this._initted||!v);if(y!==this._tTime||n||b){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),r=y,h=this._start,u=!(c=this._ts),b&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(d=this._yoyo,s=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(r=Eb(y%s),y===g?(a=this._repeat,r=v):((a=~~(y/s))&&a===y/s&&(r=v,a--),r>v&&(r=v)),f=Vb(this._tTime,s),!m&&this._tTime&&f!==a&&(f=a),d&&1&a&&(r=v-r,p=1),a!==f&&!this._lock){var _=d&&1&f,w=_===(d&&1&a);if(a<f&&(_=!_),m=_?0:v,this._lock=1,this.render(m||(p?0:Eb(a*s)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&y_(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,w&&(this._lock=2,m=_?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;D_(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Eb(m),Eb(r)))&&(y-=r-(r=l._start)),this._tTime=y,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&(y_(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,o&&(y+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var x=e<0?e:r;i;){if(o=i._prev,(i._act||x<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(x-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(x-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){l=0,o&&(y+=this._zTime=x?-1e-8:1e-8);break}}i=o}}if(l&&!t&&(this.pause(),l.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=h,Wb(this),this.render(e,t,n);this._onUpdate&&!t&&y_(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Fb(this,1),t||e<0&&!m||!y&&!m&&g||(y_(this,y===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(Wy(t)||(t=t_(this,t,e)),!(e instanceof H_)){if(Qy(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Vy(e))return this.addLabel(e,t);if(!Hy(e))return this;e=Z_.delayedCall(0,e)}return this!==e?Kb(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof Z_?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Vy(e)?this.removeLabel(e):Hy(e)?this.killTweensOf(e):(Db(this,e),e===this._recent&&(this._recent=this._last),Ub(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Eb(A_.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=t_(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=Z_.delayedCall(0,t||hb,n);return r.data="isPause",this._hasPause=1,Kb(this,r,t_(this,e))},n.removePause=function(e){var t=this._first;for(e=t_(this,e);t;)t._start===e&&"isPause"===t.data&&Fb(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)G_!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=u_(e),o=this._first,a=Wy(t);o;)o instanceof Z_?Tb(o._targets,i)&&(a?(!G_||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=t_(r,e),o=t,a=o.startAt,s=o.onStart,u=o.onStartParams,l=o.immediateRender,c=Z_.to(r,kb({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==e&&Jb(c,e,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,u||[])}},t));return l?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,kb({startAt:{time:t_(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),v_(this,t_(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),v_(this,t_(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return Ub(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ub(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,a=o._last,s=1e8;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,Kb(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-1/0),s=0),a._end>i&&a._ts&&(i=a._end),a=t;Jb(o,o===sy&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(sy._ts&&(Cb(sy,Hb(e,sy)),fy=A_.frame),A_.frame>=vb){vb+=Ny.autoSleep||120;var t=sy._first;if((!t||!t._ts)&&Ny.autoSleep&&A_._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||A_.sleep()}}},t}(H_);kb(W_.prototype,{_lock:0,_hasPause:0,_forcing:0});var G_,q_=function(e,t,n,r,i,o,a){var s,u,l,c,h,f,d,p,m=new dw(this._pt,e,t,0,1,sw,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=m_(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]),u=n.match(tb)||[];s=tb.exec(r);)c=s[0],h=r.substring(g,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[v++]&&(f=parseFloat(u[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:f,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-f,m:l&&l<4?Math.round:0},g=tb.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(nb.test(r)||d)&&(m.e=0),this._pt=m,m},K_=function(e,t,n,r,i,o,a,s,u){Hy(r)&&(r=r(i||0,e,o));var l,c=e[t],h="get"!==n?n:Hy(c)?u?e[t.indexOf("set")||!Hy(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():c,f=Hy(c)?u?nw:tw:ew;if(Vy(r)&&(~r.indexOf("random(")&&(r=m_(r)),"="===r.charAt(1)&&((l=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(o_(h)||0))||0===l)&&(r=l)),h!==r)return isNaN(h*r)||""===r?(!c&&!(t in e)&&ub(t,r),q_.call(this,e,t,h,r,f,s||Ny.stringFilter,u)):(l=new dw(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof c?aw:ow,0,f),u&&(l.fp=u),a&&l.modifier(a,this,e),this._pt=l)},X_=function(e,t,n,r,i,o){var a,s,u,l;if(mb[e]&&!1!==(a=new mb[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(Hy(e)&&(e=$_(e,i,t,n,r)),!qy(e)||e.style&&e.nodeType||Qy(e)||$y(e))return Vy(e)?$_(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=$_(e[o],i,t,n,r);return a}(t[e],r,i,o,n),n,r,o)&&(n._pt=s=new dw(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==dy))for(u=n._ptLookup[n._targets.indexOf(i)],l=a._props.length;l--;)u[a._props[l]]=s;return a},Y_=function e(t,n){var r,i,o,a,s,u,l,c,h,f,d,p,m,g=t.vars,v=g.ease,y=g.startAt,b=g.immediateRender,_=g.lazy,w=g.onUpdate,x=g.onUpdateParams,S=g.callbackScope,E=g.runBackwards,T=g.yoyoEase,M=g.keyframes,C=g.autoRevert,I=t._dur,A=t._startAt,k=t._targets,P=t.parent,R=P&&"nested"===P.data?P.parent._targets:k,L="auto"===t._overwrite&&!ay,N=t.timeline;if(N&&(!M||!v)&&(v="none"),t._ease=F_(v,Oy.ease),t._yEase=T?O_(F_(!0===T?v:T,Oy.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!N&&!!g.runBackwards,!N){if(p=(c=k[0]?wb(k[0]).harness:0)&&g[c.prop],r=Nb(g,fb),A&&A.render(-1,!0).kill(),y)if(Fb(t._startAt=Z_.set(k,kb({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:Ky(_),startAt:null,delay:0,onUpdate:w,onUpdateParams:x,callbackScope:S,stagger:0},y))),n<0&&!b&&!C&&t._startAt.render(-1,!0),b){if(n>0&&!C&&(t._startAt=0),I&&n<=0)return void(n&&(t._zTime=n))}else!1===C&&(t._startAt=0);else if(E&&I)if(A)!C&&(t._startAt=0);else if(n&&(b=!1),o=kb({overwrite:!1,data:"isFromStart",lazy:b&&Ky(_),immediateRender:b,stagger:0,parent:P},r),p&&(o[c.prop]=p),Fb(t._startAt=Z_.set(k,o)),n<0&&t._startAt.render(-1,!0),b){if(!n)return}else e(t._startAt,1e-8);for(t._pt=0,_=I&&Ky(_)||_&&!I,i=0;i<k.length;i++){if(l=(s=k[i])._gsap||_b(k)[i]._gsap,t._ptLookup[i]=f={},pb[l.id]&&db.length&&Mb(),d=R===k?i:R.indexOf(s),c&&!1!==(h=new c).init(s,p||r,t,d,R)&&(t._pt=a=new dw(t._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){f[e]=a})),h.priority&&(u=1)),!c||p)for(o in r)mb[o]&&(h=X_(o,r,t,d,s,R))?h.priority&&(u=1):f[o]=a=K_.call(t,s,o,"get",r[o],d,R,0,g.stringFilter);t._op&&t._op[i]&&t.kill(s,t._op[i]),L&&t._pt&&(G_=t,sy.killTweensOf(s,f,t.globalTime(0)),m=!t.parent,G_=0),t._pt&&_&&(pb[l.id]=1)}u&&fw(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},$_=function(e,t,n,r,i){return Hy(e)?e.call(t,n,r,i):Vy(e)&&~e.indexOf("random(")?m_(e):e},Q_=bb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",J_=(Q_+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Z_=function(e){function t(t,n,r,i){var o;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,s,u,l,c,h,f,d,p=(o=e.call(this,i?n:Ob(n))||this).vars,m=p.duration,g=p.delay,v=p.immediateRender,y=p.stagger,b=p.overwrite,_=p.keyframes,w=p.defaults,x=p.scrollTrigger,S=p.yoyoEase,E=n.parent||sy,T=(Qy(t)||$y(t)?Wy(t[0]):"length"in n)?[t]:u_(t);if(o._targets=T.length?_b(T):lb("GSAP target "+t+" not found. https://greensock.com",!Ny.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,_||y||Yy(m)||Yy(g)){if(n=o.vars,(a=o.timeline=new W_({data:"nested",defaults:w||{}})).kill(),a.parent=a._dp=iy(o),a._start=0,_)kb(a.vars.defaults,{ease:"none"}),y?T.forEach((function(e,t){return _.forEach((function(n,r){return a.to(e,n,r?">":t*y)}))})):_.forEach((function(e){return a.to(T,e,">")}));else{if(l=T.length,f=y?c_(y):hb,qy(y))for(c in y)~Q_.indexOf(c)&&(d||(d={}),d[c]=y[c]);for(s=0;s<l;s++){for(c in u={},n)J_.indexOf(c)<0&&(u[c]=n[c]);u.stagger=0,S&&(u.yoyoEase=S),d&&Rb(u,d),h=T[s],u.duration=+$_(m,iy(o),s,h,T),u.delay=(+$_(g,iy(o),s,h,T)||0)-o._delay,!y&&1===l&&u.delay&&(o._delay=g=u.delay,o._start+=g,u.delay=0),a.to(h,u,f(s,h,T))}a.duration()?m=g=0:o.timeline=0}m||o.duration(m=a.duration())}else o.timeline=0;return!0!==b||ay||(G_=iy(o),sy.killTweensOf(T),G_=0),Kb(E,iy(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(v||!m&&!_&&o._start===Eb(E._time)&&Ky(v)&&jb(iy(o))&&"nested"!==E.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-g))),x&&Xb(iy(o),x),o}oy(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,a,s,u,l,c,h,f=this._time,d=this._tDur,p=this._dur,m=e>d-1e-8&&e>=0?d:e<1e-8?0:e;if(p){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(r=m,c=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=Eb(m%a),m===d?(o=this._repeat,r=p):((o=~~(m/a))&&o===m/a&&(r=p,o--),r>p&&(r=p)),(u=this._yoyo&&1&o)&&(h=this._yEase,r=p-r),s=Vb(this._tTime,a),r===f&&!n&&this._initted)return this;o!==s&&(c&&this._yEase&&D_(c,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(Eb(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Yb(this,e<0?e:r,n,t))return this._tTime=0,this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(r/p),this._from&&(this.ratio=l=1-l),r&&!f&&!t&&y_(this,"onStart"),r&&!f&&!t&&(y_(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(l,i.d),i=i._next;c&&c.render(e<0?e:!r&&u?-1e-8:c._dur*l,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),y_(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!t&&this.parent&&y_(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Fb(this,1),t||e<0&&!f||!m&&!f||(y_(this,m===d?"onComplete":"onReverseComplete",!0),this._prom&&!(m<d&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,a,s=e.ratio,u=t<0||!t&&(!e._start&&$b(e)&&(e._initted||!Qb(e))||(e._ts<0||e._dp._ts<0)&&!Qb(e))?0:1,l=e._rDelay,c=0;if(l&&e._repeat&&(c=i_(0,e._tDur,t),o=Vb(c,l),a=Vb(e._tTime,l),e._yoyo&&1&o&&(u=1-u),o!==a&&(s=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==s||r||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&Yb(e,t,r,n))return;for(a=e._zTime,e._zTime=t||(n?1e-8:0),n||(n=t&&!a),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=c,i=e._pt;i;)i.r(u,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&y_(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&y_(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&Fb(e,1),n||(y_(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?b_(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,G_&&!0!==G_.vars.overwrite)._first||b_(this),this.parent&&n!==this.timeline.totalDuration()&&Jb(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,l,c=this._targets,h=e?u_(e):c,f=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,h))return"all"===t&&(this._pt=0),b_(this);for(r=this._op=this._op||[],"all"!==t&&(Vy(t)&&(s={},Sb(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,o,a=e[0]?wb(e[0]).harness:0,s=a&&a.aliases;if(!s)return t;for(r in n=Rb({},t),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,t)),l=c.length;l--;)if(~h.indexOf(c[l]))for(s in i=f[l],"all"===t?(r[l]=t,a=i,o={}):(o=r[l]=r[l]||{},a=t),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Db(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&d&&b_(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return n_(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return n_(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return sy.killTweensOf(e,t,n)},t}(H_);kb(Z_.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Sb("staggerTo,staggerFrom,staggerFromTo",(function(e){Z_[e]=function(){var t=new W_,n=a_.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var ew=function(e,t,n){return e[t]=n},tw=function(e,t,n){return e[t](n)},nw=function(e,t,n,r){return e[t](r.fp,n)},rw=function(e,t,n){return e.setAttribute(t,n)},iw=function(e,t){return Hy(e[t])?tw:Gy(e[t])&&e.setAttribute?rw:ew},ow=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},aw=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},sw=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},uw=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},lw=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},cw=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Db(this,r,"_pt"):r.dep||(t=1),r=n;return!t},hw=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},fw=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},dw=function(){function e(e,t,n,r,i,o,a,s,u){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||ow,this.d=a||this,this.set=s||ew,this.pr=u||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=hw,this.m=e,this.mt=n,this.tween=t},e}();Sb(bb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return fb[e]=1})),ob.TweenMax=ob.TweenLite=Z_,ob.TimelineLite=ob.TimelineMax=W_,sy=new W_({sortChildren:!1,defaults:Oy,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ny.stringFilter=I_;var pw={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return __(e)}))},timeline:function(e){return new W_(e)},getTweensOf:function(e,t){return sy.getTweensOf(e,t)},getProperty:function(e,t,n,r){Vy(e)&&(e=u_(e)[0]);var i=wb(e||{}).get,o=n?Ab:Ib;return"native"===n&&(n=""),e?t?o((mb[t]&&mb[t].get||i)(e,t,n,r)):function(t,n,r){return o((mb[t]&&mb[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=u_(e)).length>1){var r=e.map((function(e){return vw.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=mb[t],a=wb(e),s=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(t){var r=new o;dy._pt=0,r.init(e,n?t+n:t,dy,0,[e]),r.render(1,r),dy._pt&&uw(1,dy)}:a.set(e,s);return o?u:function(t){return u(e,s,n?t+n:t,a,1)}},isTweening:function(e){return sy.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=F_(e.ease,Oy.ease)),Lb(Oy,e||{})},config:function(e){return Lb(Ny,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!mb[e]&&!ob[e]&&lb(t+" effect requires "+e+" plugin.")})),gb[t]=function(e,t,r){return n(u_(e),kb(t||{},i),r)},o&&(W_.prototype[t]=function(e,n,r){return this.add(gb[t](e,qy(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){P_[e]=F_(t)},parseEase:function(e,t){return arguments.length?F_(e,t):P_},getById:function(e){return sy.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new W_(e);for(i.smoothChildTiming=Ky(e.smoothChildTiming),sy.remove(i),i._dp=0,i._time=i._tTime=sy._time,n=sy._first;n;)r=n._next,!t&&!n._dur&&n instanceof Z_&&n.vars.onComplete===n._targets[0]||Kb(i,n,n._start-n._delay),n=r;return Kb(sy,i,0),i},utils:{wrap:function e(t,n,r){var i=n-t;return Qy(t)?p_(t,e(0,t.length),n):r_(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return Qy(t)?p_(t,e(0,t.length-1),n):r_(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)}))},distribute:c_,random:d_,snap:f_,normalize:function(e,t,n){return g_(e,t,0,1,n)},getUnit:o_,clamp:function(e,t,n){return r_(n,(function(n){return i_(e,t,n)}))},splitColor:S_,toArray:u_,selector:function(e){return e=u_(e)[0]||lb("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return u_(t,n.querySelectorAll?n:n===e?lb("Invalid scope")||cy.createElement("div"):e)}},mapRange:g_,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||o_(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var a,s,u,l,c,h=Vy(t),f={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(Qy(t)&&!Qy(n)){for(u=[],l=t.length,c=l-2,s=1;s<l;s++)u.push(e(t[s-1],t[s]));l--,o=function(e){e*=l;var t=Math.min(c,~~e);return u[t](e-t)},r=n}else i||(t=Rb(Qy(t)?[]:{},t));if(!u){for(a in n)K_.call(f,t,a,"get",n[a]);o=function(e){return uw(e,f)||(h?t.p:t)}}}return r_(r,o)},shuffle:l_},install:sb,effects:gb,ticker:A_,updateRoot:W_.updateRoot,plugins:mb,globalTimeline:sy,core:{PropTween:dw,globals:cb,Tween:Z_,Timeline:W_,Animation:H_,getCache:wb,_removeLinkedListItem:Db,suppressOverwrites:function(e){return ay=e}}};Sb("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return pw[e]=Z_[e]})),A_.add(W_.updateRoot),dy=pw.to({},{duration:0});var mw=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},gw=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(Vy(n)&&(r={},Sb(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=mw(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},vw=pw.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a;for(o in t)(a=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},gw("roundProps",h_),gw("modifiers"),gw("snap",f_))||pw;Z_.version=W_.version=vw.version="3.7.0",hy=1,Xy()&&k_(),P_.Power0,P_.Power1,P_.Power2,P_.Power3,P_.Power4,P_.Linear,P_.Quad,P_.Cubic,P_.Quart,P_.Quint,P_.Strong,P_.Elastic,P_.Back,P_.SteppedEase,P_.Bounce,P_.Sine,P_.Expo,P_.Circ;
/*!
 * CSSPlugin 3.7.0
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var yw,bw,_w,ww,xw,Sw,Ew,Tw={},Mw=180/Math.PI,Cw=Math.PI/180,Iw=Math.atan2,Aw=/([A-Z])/g,kw=/(?:left|right|width|margin|padding|x)/i,Pw=/[\s,\(]\S/,Rw={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Lw=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Nw=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Ow=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Dw=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Fw=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Uw=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},zw=function(e,t,n){return e.style[t]=n},jw=function(e,t,n){return e.style.setProperty(t,n)},Bw=function(e,t,n){return e._gsap[t]=n},Vw=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Hw=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},Ww=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},Gw="transform",qw=Gw+"Origin",Kw=function(e,t){var n=bw.createElementNS?bw.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):bw.createElement(e);return n.style?n:bw.createElement(e)},Xw=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Aw,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,$w(n)||n,1)||""},Yw="O,Moz,ms,Ms,Webkit".split(","),$w=function(e,t,n){var r=(t||xw).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(Yw[i]+e in r););return i<0?null:(3===i?"ms":i>=0?Yw[i]:"")+e},Qw=function(){"undefined"!=typeof window&&window.document&&(yw=window,bw=yw.document,_w=bw.documentElement,xw=Kw("div")||{style:{}},Kw("div"),Gw=$w(Gw),qw=Gw+"Origin",xw.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ew=!!$w("perspective"),ww=1)},Jw=function e(t){var n,r=Kw("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(_w.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(bX){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),_w.removeChild(r),this.style.cssText=a,n},Zw=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},ex=function(e){var t;try{t=e.getBBox()}catch(n){t=Jw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Jw||(t=Jw.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Zw(e,["x","cx","x1"])||0,y:+Zw(e,["y","cy","y1"])||0,width:0,height:0}},tx=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!ex(e))},nx=function(e,t){if(t){var n=e.style;t in Tw&&t!==qw&&(t=Gw),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(Aw,"-$1").toLowerCase())):n.removeAttribute(t)}},rx=function(e,t,n,r,i,o){var a=new dw(e._pt,t,n,0,1,o?Uw:Fw);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},ix={deg:1,rad:1,turn:1},ox=function e(t,n,r,i){var o,a,s,u,l=parseFloat(r)||0,c=(r+"").trim().substr((l+"").length)||"px",h=xw.style,f=kw.test(n),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(f?"Width":"Height"),m=100,g="px"===i,v="%"===i;return i===c||!l||ix[i]||ix[c]?l:("px"!==c&&!g&&(l=e(t,n,r,"px")),u=t.getCTM&&tx(t),!v&&"%"!==c||!Tw[n]&&!~n.indexOf("adius")?(h[f?"width":"height"]=m+(g?c:i),a=~n.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,u&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==bw&&a.appendChild||(a=bw.body),(s=a._gsap)&&v&&s.width&&f&&s.time===A_.time?Eb(l/s.width*m):((v||"%"===c)&&(h.position=Xw(t,"position")),a===t&&(h.position="static"),a.appendChild(xw),o=xw[p],a.removeChild(xw),h.position="absolute",f&&v&&((s=wb(a)).time=A_.time,s.width=a[p]),Eb(g?o*l/m:o&&l?m/o*l:0))):(o=u?t.getBBox()[f?"width":"height"]:t[p],Eb(v?l/o*m:l/100*o)))},ax=function(e,t,n,r){var i;return ww||Qw(),t in Rw&&"transform"!==t&&~(t=Rw[t]).indexOf(",")&&(t=t.split(",")[0]),Tw[t]&&"transform"!==t?(i=vx(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:yx(Xw(e,qw))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=cx[t]&&cx[t](e,t,n)||Xw(e,t)||xb(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?ox(e,t,i,n)+n:i},sx=function(e,t,n,r){if(!n||"none"===n){var i=$w(t,e,1),o=i&&Xw(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=Xw(e,"borderTopColor"))}var a,s,u,l,c,h,f,d,p,m,g,v,y=new dw(this._pt,e.style,t,0,1,sw),b=0,_=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=Xw(e,t)||r,e.style[t]=n),I_(a=[n,r]),r=a[1],u=(n=a[0]).match(eb)||[],(r.match(eb)||[]).length){for(;s=eb.exec(r);)f=s[0],p=r.substring(b,s.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),f!==(h=u[_++]||"")&&(l=parseFloat(h)||0,g=h.substr((l+"").length),(v="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),d=parseFloat(f),m=f.substr((d+"").length),b=eb.lastIndex-m.length,m||(m=m||Ny.units[t]||g,b===r.length&&(r+=m,y.e+=m)),g!==m&&(l=ox(e,t,h,m)||0),y._pt={_next:y._pt,p:p||1===_?p:",",s:l,c:v?v*d:d-l,m:c&&c<4||"zIndex"===t?Math.round:0});y.c=b<r.length?r.substring(b,r.length):""}else y.r="display"===t&&"none"===r?Uw:Fw;return nb.test(r)&&(y.e=0),this._pt=y,y},ux={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lx=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,a=o.style,s=t.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],Tw[n]&&(r=1,n="transformOrigin"===n?qw:Gw),nx(o,n);r&&(nx(o,Gw),u&&(u.svg&&o.removeAttribute("transform"),vx(o,1),u.uncache=1))}},cx={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new dw(e._pt,t,n,0,0,lx);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},hx=[1,0,0,1,0,0],fx={},dx=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},px=function(e){var t=Xw(e,Gw);return dx(t)?hx:t.substr(7).match(Zy).map(Eb)},mx=function(e,t){var n,r,i,o,a=e._gsap||wb(e),s=e.style,u=px(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?hx:u:(u!==hx||e.offsetParent||e===_w||a.svg||(i=s.display,s.display="block",(n=e.parentNode)&&e.offsetParent||(o=1,r=e.nextSibling,_w.appendChild(e)),u=px(e),i?s.display=i:nx(e,"display"),o&&(r?n.insertBefore(e,r):n?n.appendChild(e):_w.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},gx=function(e,t,n,r,i,o){var a,s,u,l=e._gsap,c=i||mx(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,d=l.xOffset||0,p=l.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],b=c[4],_=c[5],w=t.split(" "),x=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?c!==hx&&(s=m*y-g*v)&&(u=x*(-g/s)+S*(m/s)-(m*_-g*b)/s,x=x*(y/s)+S*(-v/s)+(v*_-y*b)/s,S=u):(x=(a=ex(e)).x+(~w[0].indexOf("%")?x/100*a.width:x),S=a.y+(~(w[1]||w[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&l.smooth?(b=x-h,_=S-f,l.xOffset=d+(b*m+_*v)-b,l.yOffset=p+(b*g+_*y)-_):l.xOffset=l.yOffset=0,l.xOrigin=x,l.yOrigin=S,l.smooth=!!r,l.origin=t,l.originIsAbsolute=!!n,e.style[qw]="0px 0px",o&&(rx(o,l,"xOrigin",h,x),rx(o,l,"yOrigin",f,S),rx(o,l,"xOffset",d,l.xOffset),rx(o,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},vx=function(e,t){var n=e._gsap||new V_(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,a,s,u,l,c,h,f,d,p,m,g,v,y,b,_,w,x,S,E,T,M,C,I,A,k,P,R,L,N,O=e.style,D=n.scaleX<0,F="px",U="deg",z=Xw(e,qw)||"0";return r=i=o=u=l=c=h=f=d=0,a=s=1,n.svg=!(!e.getCTM||!tx(e)),g=mx(e,n.svg),n.svg&&(M=(!n.uncache||"0px 0px"===z)&&!t&&e.getAttribute("data-svg-origin"),gx(e,M||z,!!M||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==hx&&(_=g[0],w=g[1],x=g[2],S=g[3],r=E=g[4],i=T=g[5],6===g.length?(a=Math.sqrt(_*_+w*w),s=Math.sqrt(S*S+x*x),u=_||w?Iw(w,_)*Mw:0,(h=x||S?Iw(x,S)*Mw+u:0)&&(s*=Math.abs(Math.cos(h*Cw))),n.svg&&(r-=p-(p*_+m*x),i-=m-(p*w+m*S))):(N=g[6],R=g[7],A=g[8],k=g[9],P=g[10],L=g[11],r=g[12],i=g[13],o=g[14],l=(v=Iw(N,P))*Mw,v&&(M=E*(y=Math.cos(-v))+A*(b=Math.sin(-v)),C=T*y+k*b,I=N*y+P*b,A=E*-b+A*y,k=T*-b+k*y,P=N*-b+P*y,L=R*-b+L*y,E=M,T=C,N=I),c=(v=Iw(-x,P))*Mw,v&&(y=Math.cos(-v),L=S*(b=Math.sin(-v))+L*y,_=M=_*y-A*b,w=C=w*y-k*b,x=I=x*y-P*b),u=(v=Iw(w,_))*Mw,v&&(M=_*(y=Math.cos(v))+w*(b=Math.sin(v)),C=E*y+T*b,w=w*y-_*b,T=T*y-E*b,_=M,E=C),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),a=Eb(Math.sqrt(_*_+w*w+x*x)),s=Eb(Math.sqrt(T*T+N*N)),v=Iw(E,T),h=Math.abs(v)>2e-4?v*Mw:0,d=L?1/(L<0?-L:L):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!dx(Xw(e,Gw)),M&&e.setAttribute("transform",M))),Math.abs(h)>90&&Math.abs(h)<270&&(D?(a*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+F,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+F,n.z=o+F,n.scaleX=Eb(a),n.scaleY=Eb(s),n.rotation=Eb(u)+U,n.rotationX=Eb(l)+U,n.rotationY=Eb(c)+U,n.skewX=h+U,n.skewY=f+U,n.transformPerspective=d+F,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(O[qw]=yx(z)),n.xOffset=n.yOffset=0,n.force3D=Ny.force3D,n.renderTransform=n.svg?xx:Ew?wx:_x,n.uncache=0,n},yx=function(e){return(e=e.split(" "))[0]+" "+e[1]},bx=function(e,t,n){var r=o_(t);return Eb(parseFloat(t)+parseFloat(ox(e,"x",n+"px",r)))+r},_x=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,wx(e,t)},wx=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",_="auto"===g&&e&&1!==e||!0===g;if(y&&("0deg"!==c||"0deg"!==l)){var w,x=parseFloat(l)*Cw,S=Math.sin(x),E=Math.cos(x);x=parseFloat(c)*Cw,w=Math.cos(x),o=bx(v,o,S*w*-y),a=bx(v,a,-Math.sin(x)*-y),s=bx(v,s,E*w*-y+y)}"0px"!==m&&(b+="perspective("+m+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(_||"0px"!==o||"0px"!==a||"0px"!==s)&&(b+="0px"!==s||_?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+") "),"0deg"!==u&&(b+="rotate("+u+") "),"0deg"!==l&&(b+="rotateY("+l+") "),"0deg"!==c&&(b+="rotateX("+c+") "),"0deg"===h&&"0deg"===f||(b+="skew("+h+", "+f+") "),1===d&&1===p||(b+="scale("+d+", "+p+") "),v.style[Gw]=b||"translate(0, 0)"},xx=function(e,t){var n,r,i,o,a,s=t||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,f=s.rotation,d=s.skewX,p=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,w=s.yOffset,x=s.forceCSS,S=parseFloat(c),E=parseFloat(h);f=parseFloat(f),d=parseFloat(d),(p=parseFloat(p))&&(d+=p=parseFloat(p),f+=p),f||d?(f*=Cw,d*=Cw,n=Math.cos(f)*m,r=Math.sin(f)*m,i=Math.sin(f-d)*-g,o=Math.cos(f-d)*g,d&&(p*=Cw,a=Math.tan(d-p),i*=a=Math.sqrt(1+a*a),o*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),r*=a)),n=Eb(n),r=Eb(r),i=Eb(i),o=Eb(o)):(n=m,o=g,r=i=0),(S&&!~(c+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(S=ox(v,"x",c,"px"),E=ox(v,"y",h,"px")),(y||b||_||w)&&(S=Eb(S+y-(y*n+b*i)+_),E=Eb(E+b-(y*r+b*o)+w)),(u||l)&&(a=v.getBBox(),S=Eb(S+u/100*a.width),E=Eb(E+l/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+S+","+E+")",v.setAttribute("transform",a),x&&(v.style[Gw]=a)},Sx=function(e,t,n,r,i,o){var a,s,u=360,l=Vy(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?Mw:1),h=o?c*o:c-r,f=r+h+"deg";return l&&("short"===(a=i.split("_")[1])&&(h%=u)!==h%180&&(h+=h<0?u:-360),"cw"===a&&h<0?h=(h+36e9)%u-~~(h/u)*u:"ccw"===a&&h>0&&(h=(h-36e9)%u-~~(h/u)*u)),e._pt=s=new dw(e._pt,t,n,r,h,Nw),s.e=f,s.u="deg",e._props.push(n),s},Ex=function(e,t){for(var n in t)e[n]=t[n];return e},Tx=function(e,t,n){var r,i,o,a,s,u,l,c=Ex({},n._gsap),h=n.style;for(i in c.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),h[Gw]=t,r=vx(n,1),nx(n,Gw),n.setAttribute("transform",o)):(o=getComputedStyle(n)[Gw],h[Gw]=t,r=vx(n,1),h[Gw]=o),Tw)(o=c[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=o_(o)!==(l=o_(a))?ox(n,i,o,l):parseFloat(o),u=parseFloat(a),e._pt=new dw(e._pt,r,i,s,u-s,Lw),e._pt.u=l||0,e._props.push(i));Ex(r,c)};Sb("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",o="Left",a=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return t<2?e+n:"border"+n+e}));cx[t>1?"border"+e:e]=function(e,t,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(t){return ax(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,i)}}));var Mx,Cx,Ix,Ax={name:"css",register:Qw,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,d,p,m,g,v,y,b,_,w,x,S,E=this._props,T=e.style,M=n.vars.startAt;for(h in ww||Qw(),t)if("autoRound"!==h&&(a=t[h],!mb[h]||!X_(h,t,n,r,e,i)))if(l=typeof a,c=cx[h],"function"===l&&(l=typeof(a=a.call(n,r,e,i))),"string"===l&&~a.indexOf("random(")&&(a=m_(a)),c)c(this,e,h,a,n)&&(b=1);else if("--"===h.substr(0,2))o=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",M_.lastIndex=0,M_.test(o)||(f=o_(o),d=o_(a)),d?f!==d&&(o=ox(e,h,o,d)+d):f&&(a+=f),this.add(T,"setProperty",o,a,r,i,0,0,h),E.push(h);else if("undefined"!==l){if(M&&h in M?(o="function"==typeof M[h]?M[h].call(n,r,e,i):M[h],h in Ny.units&&!o_(o)&&(o+=Ny.units[h]),"="===(o+"").charAt(1)&&(o=ax(e,h))):o=ax(e,h),u=parseFloat(o),(p="string"===l&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),s=parseFloat(a),h in Rw&&("autoAlpha"===h&&(1===u&&"hidden"===ax(e,"visibility")&&s&&(u=0),rx(this,T,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=Rw[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in Tw)if(g||((v=e._gsap).renderTransform&&!t.parseTransform||vx(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new dw(this._pt,T,Gw,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new dw(this._pt,v,"scaleY",v.scaleY,(p?p*s:s-v.scaleY)||0),E.push("scaleY",h),h+="X";else{if("transformOrigin"===h){w=void 0,x=void 0,S=void 0,w=(_=a).split(" "),x=w[0],S=w[1]||"50%","top"!==x&&"bottom"!==x&&"left"!==S&&"right"!==S||(_=x,x=S,S=_),w[0]=ux[x]||x,w[1]=ux[S]||S,a=w.join(" "),v.svg?gx(e,a,0,y,0,this):((d=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&rx(this,v,"zOrigin",v.zOrigin,d),rx(this,T,h,yx(o),yx(a)));continue}if("svgOrigin"===h){gx(e,a,1,y,0,this);continue}if(h in fx){Sx(this,v,h,u,a,p);continue}if("smoothOrigin"===h){rx(this,v,"smooth",v.smooth,a);continue}if("force3D"===h){v[h]=a;continue}if("transform"===h){Tx(this,a,e);continue}}else h in T||(h=$w(h)||h);if(m||(s||0===s)&&(u||0===u)&&!Pw.test(a)&&h in T)s||(s=0),(f=(o+"").substr((u+"").length))!==(d=o_(a)||(h in Ny.units?Ny.units[h]:f))&&(u=ox(e,h,o,d)),this._pt=new dw(this._pt,m?v:T,h,u,p?p*s:s-u,m||"px"!==d&&"zIndex"!==h||!1===t.autoRound?Lw:Dw),this._pt.u=d||0,f!==d&&(this._pt.b=o,this._pt.r=Ow);else if(h in T)sx.call(this,e,h,o,a);else{if(!(h in e)){ub(h,a);continue}this.add(e,h,o||e[h],a,r,i)}E.push(h)}b&&fw(this)},get:ax,aliases:Rw,getSetter:function(e,t,n){var r=Rw[t];return r&&r.indexOf(",")<0&&(t=r),t in Tw&&t!==qw&&(e._gsap.x||ax(e,"x"))?n&&Sw===n?"scale"===t?Vw:Bw:(Sw=n||{})&&("scale"===t?Hw:Ww):e.style&&!Gy(e.style[t])?zw:~t.indexOf("-")?jw:iw(e,t)},core:{_removeProperty:nx,_getMatrix:mx}};vw.utils.checkPrefix=$w,Ix=Sb((Mx="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Cx="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Tw[e]=1})),Sb(Cx,(function(e){Ny.units[e]="deg",fx[e]=1})),Rw[Ix[13]]=Mx+","+Cx,Sb("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Rw[t[1]]=Ix[t[0]]})),Sb("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Ny.units[e]="px"})),vw.registerPlugin(Ax);var kx=vw.registerPlugin(Ax)||vw;kx.core.Tween;var Px={},Rx={},Lx={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};e.default=t}(Lx);var Nx=/^\s+|\s+$/g,Ox=/^[-+]0x[0-9a-f]+$/i,Dx=/^0b[01]+$/i,Fx=/^0o[0-7]+$/i,Ux=parseInt,zx="object"==typeof s&&s&&s.Object===Object&&s,jx="object"==typeof self&&self&&self.Object===Object&&self,Bx=zx||jx||Function("return this")(),Vx=Object.prototype.toString,Hx=Math.max,Wx=Math.min,Gx=function(){return Bx.Date.now()};function qx(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Kx(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Vx.call(e)}(e))return NaN;if(qx(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qx(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Nx,"");var n=Dx.test(e);return n||Fx.test(e)?Ux(e.slice(2),n?2:8):Ox.test(e)?NaN:+e}var Xx,Yx=function(e,t,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(g,t),c?d(e):a}function m(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-l>=o}function g(){var e=Gx();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-u);return h?Wx(n,o-(e-l)):n}(e))}function v(e){return s=void 0,f&&r?d(e):(r=i=void 0,a)}function y(){var e=Gx(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return p(u);if(h)return s=setTimeout(g,t),d(u)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Kx(t)||0,qx(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Hx(Kx(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?a:v(Gx())},y},$x={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
Xx=$x,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var a=t.apply(null,i);a&&n.push(a)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var s in i)e.call(i,s)&&i[s]&&n.push(s);else n.push(i.toString())}}return n.join(" ")}Xx.exports?(t.default=t,Xx.exports=t):window.classNames=t}();var Qx={};Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.clamp=rS,Qx.canUseDOM=Qx.slidesOnLeft=Qx.slidesOnRight=Qx.siblingDirection=Qx.getTotalSlides=Qx.getPostClones=Qx.getPreClones=Qx.getTrackLeft=Qx.getTrackAnimateCSS=Qx.getTrackCSS=Qx.checkSpecKeys=Qx.getSlideCount=Qx.checkNavigable=Qx.getNavigableIndexes=Qx.swipeEnd=Qx.swipeMove=Qx.swipeStart=Qx.keyHandler=Qx.changeSlide=Qx.slideHandler=Qx.initializedState=Qx.extractObject=Qx.canGoNext=Qx.getSwipeDirection=Qx.getHeight=Qx.getWidth=Qx.lazySlidesOnRight=Qx.lazySlidesOnLeft=Qx.lazyEndIndex=Qx.lazyStartIndex=Qx.getRequiredLazySlides=Qx.getOnDemandLazySlides=Qx.safePreventDefault=void 0;var Jx,Zx=(Jx=l.exports)&&Jx.__esModule?Jx:{default:Jx};function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach((function(t){nS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rS(e,t,n){return Math.max(t,Math.min(e,n))}var iS=function(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()};Qx.safePreventDefault=iS;var oS=function(e){for(var t=[],n=aS(e),r=sS(e),i=n;i<r;i++)e.lazyLoadedList.indexOf(i)<0&&t.push(i);return t};Qx.getOnDemandLazySlides=oS;Qx.getRequiredLazySlides=function(e){for(var t=[],n=aS(e),r=sS(e),i=n;i<r;i++)t.push(i);return t};var aS=function(e){return e.currentSlide-uS(e)};Qx.lazyStartIndex=aS;var sS=function(e){return e.currentSlide+lS(e)};Qx.lazyEndIndex=sS;var uS=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};Qx.lazySlidesOnLeft=uS;var lS=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};Qx.lazySlidesOnRight=lS;var cS=function(e){return e&&e.offsetWidth||0};Qx.getWidth=cS;var hS=function(e){return e&&e.offsetHeight||0};Qx.getHeight=hS;var fS=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),(i=Math.round(180*r/Math.PI))<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?"left":i>=135&&i<=225?"right":!0===o?i>=35&&i<=135?"up":"down":"vertical"};Qx.getSwipeDirection=fS;var dS=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};Qx.canGoNext=dS;Qx.extractObject=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n};Qx.initializedState=function(e){var t,n=Zx.default.Children.count(e.children),r=e.listRef,i=Math.ceil(cS(r)),o=e.trackRef&&e.trackRef.node,a=Math.ceil(cS(o));if(e.vertical)t=i;else{var s=e.centerMode&&2*parseInt(e.centerPadding);"string"==typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(s*=i/100),t=Math.ceil((i-s)/e.slidesToShow)}var u=r&&hS(r.querySelector('[data-index="0"]')),l=u*e.slidesToShow,c=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(c=n-1-e.initialSlide);var h=e.lazyLoadedList||[],f=oS(tS(tS({},e),{},{currentSlide:c,lazyLoadedList:h})),d={slideCount:n,slideWidth:t,listWidth:i,trackWidth:a,currentSlide:c,slideHeight:u,listHeight:l,lazyLoadedList:h=h.concat(f)};return null===e.autoplaying&&e.autoplay&&(d.autoplaying="playing"),d};Qx.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,i=e.infinite,o=e.index,a=e.slideCount,s=e.lazyLoad,u=e.currentSlide,l=e.centerMode,c=e.slidesToScroll,h=e.slidesToShow,f=e.useCSS,d=e.lazyLoadedList;if(t&&n)return{};var p,m,g,v=o,y={},b={},_=i?o:rS(o,0,a-1);if(r){if(!i&&(o<0||o>=a))return{};o<0?v=o+a:o>=a&&(v=o-a),s&&d.indexOf(v)<0&&(d=d.concat(v)),y={animating:!0,currentSlide:v,lazyLoadedList:d,targetSlide:v},b={animating:!1,targetSlide:v}}else p=v,v<0?(p=v+a,i?a%c!=0&&(p=a-a%c):p=0):!dS(e)&&v>u?v=p=u:l&&v>=a?(v=i?a:a-1,p=i?0:a-1):v>=a&&(p=v-a,i?a%c!=0&&(p=0):p=a-h),!i&&v+h>=a&&(p=a-h),m=_S(tS(tS({},e),{},{slideIndex:v})),g=_S(tS(tS({},e),{},{slideIndex:p})),i||(m===g&&(v=p),m=g),s&&(d=d.concat(oS(tS(tS({},e),{},{currentSlide:v})))),f?(y={animating:!0,currentSlide:p,trackStyle:bS(tS(tS({},e),{},{left:m})),lazyLoadedList:d,targetSlide:_},b={animating:!1,currentSlide:p,trackStyle:yS(tS(tS({},e),{},{left:g})),swipeLeft:null,targetSlide:_}):y={currentSlide:p,trackStyle:yS(tS(tS({},e),{},{left:g})),lazyLoadedList:d,targetSlide:_};return{state:y,nextState:b}};Qx.changeSlide=function(e,t){var n,r,i,o,a=e.slidesToScroll,s=e.slidesToShow,u=e.slideCount,l=e.currentSlide,c=e.targetSlide,h=e.lazyLoad,f=e.infinite;if(n=u%a!=0?0:(u-l)%a,"previous"===t.message)o=l-(i=0===n?a:s-n),h&&!f&&(o=-1===(r=l-i)?u-1:r),f||(o=c-a);else if("next"===t.message)o=l+(i=0===n?a:n),h&&!f&&(o=(l+a)%u+n),f||(o=c+a);else if("dots"===t.message)o=t.index*t.slidesToScroll;else if("children"===t.message){if(o=t.index,f){var d=ES(tS(tS({},e),{},{targetSlide:o}));o>t.currentSlide&&"left"===d?o-=u:o<t.currentSlide&&"right"===d&&(o+=u)}}else"index"===t.message&&(o=Number(t.index));return o};Qx.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""};Qx.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&iS(e),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};Qx.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,i=t.vertical,o=t.swipeToSlide,a=t.verticalSwiping,s=t.rtl,u=t.currentSlide,l=t.edgeFriction,c=t.edgeDragged,h=t.onEdge,f=t.swiped,d=t.swiping,p=t.slideCount,m=t.slidesToScroll,g=t.infinite,v=t.touchObject,y=t.swipeEvent,b=t.listHeight,_=t.listWidth;if(!n){if(r)return iS(e);i&&o&&a&&iS(e);var w,x={},S=_S(t);v.curX=e.touches?e.touches[0].pageX:e.clientX,v.curY=e.touches?e.touches[0].pageY:e.clientY,v.swipeLength=Math.round(Math.sqrt(Math.pow(v.curX-v.startX,2)));var E=Math.round(Math.sqrt(Math.pow(v.curY-v.startY,2)));if(!a&&!d&&E>10)return{scrolling:!0};a&&(v.swipeLength=E);var T=(s?-1:1)*(v.curX>v.startX?1:-1);a&&(T=v.curY>v.startY?1:-1);var M=Math.ceil(p/m),C=fS(t.touchObject,a),I=v.swipeLength;return g||(0===u&&("right"===C||"down"===C)||u+1>=M&&("left"===C||"up"===C)||!dS(t)&&("left"===C||"up"===C))&&(I=v.swipeLength*l,!1===c&&h&&(h(C),x.edgeDragged=!0)),!f&&y&&(y(C),x.swiped=!0),w=i?S+I*(b/_)*T:s?S-I*T:S+I*T,a&&(w=S+I*T),x=tS(tS({},x),{},{touchObject:v,swipeLeft:w,trackStyle:yS(tS(tS({},t),{},{left:w}))}),Math.abs(v.curX-v.startX)<.8*Math.abs(v.curY-v.startY)?x:(v.swipeLength>10&&(x.swiping=!0,iS(e)),x)}};Qx.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,i=t.touchObject,o=t.listWidth,a=t.touchThreshold,s=t.verticalSwiping,u=t.listHeight,l=t.swipeToSlide,c=t.scrolling,h=t.onSwipe,f=t.targetSlide,d=t.currentSlide,p=t.infinite;if(!n)return r&&iS(e),{};var m=s?u/a:o/a,g=fS(i,s),v={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(c)return v;if(!i.swipeLength)return v;if(i.swipeLength>m){var y,b;iS(e),h&&h(g);var _=p?d:f;switch(g){case"left":case"up":b=_+gS(t),y=l?mS(t,b):b,v.currentDirection=0;break;case"right":case"down":b=_-gS(t),y=l?mS(t,b):b,v.currentDirection=1;break;default:y=_}v.triggerSlideHandler=y}else{var w=_S(t);v.trackStyle=bS(tS(tS({},t),{},{left:w}))}return v};var pS=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,r=e.infinite?-1*e.slidesToShow:0,i=[];n<t;)i.push(n),n=r+e.slidesToScroll,r+=Math.min(e.slidesToScroll,e.slidesToShow);return i};Qx.getNavigableIndexes=pS;var mS=function(e,t){var n=pS(e),r=0;if(t>n[n.length-1])t=n[n.length-1];else for(var i in n){if(t<n[i]){t=r;break}r=n[i]}return t};Qx.checkNavigable=mS;var gS=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,r=e.listRef,i=r.querySelectorAll&&r.querySelectorAll(".slick-slide")||[];if(Array.from(i).every((function(r){if(e.vertical){if(r.offsetTop+hS(r)/2>-1*e.swipeLeft)return n=r,!1}else if(r.offsetLeft-t+cS(r)/2>-1*e.swipeLeft)return n=r,!1;return!0})),!n)return 0;var o=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-o)||1}return e.slidesToScroll};Qx.getSlideCount=gS;var vS=function(e,t){return t.reduce((function(t,n){return t&&e.hasOwnProperty(n)}),!0)?null:console.error("Keys Missing:",e)};Qx.checkSpecKeys=vS;var yS=function(e){var t,n;vS(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=SS(e)*e.slideWidth;var i={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";i=tS(tS({},i),{},{WebkitTransform:o,transform:a,msTransform:s})}else e.vertical?i.top=e.left:i.left=e.left;return e.fade&&(i={opacity:1}),t&&(i.width=t),n&&(i.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i};Qx.getTrackCSS=yS;var bS=function(e){vS(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=yS(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};Qx.getTrackAnimateCSS=bS;var _S=function(e){if(e.unslick)return 0;vS(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=e.slideIndex,i=e.trackRef,o=e.infinite,a=e.centerMode,s=e.slideCount,u=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,h=e.listWidth,f=e.variableWidth,d=e.slideHeight,p=e.fade,m=e.vertical;if(p||1===e.slideCount)return 0;var g=0;if(o?(g=-wS(e),s%l!=0&&r+l>s&&(g=-(r>s?u-(r-s):s%l)),a&&(g+=parseInt(u/2))):(s%l!=0&&r+l>s&&(g=u-s%l),a&&(g=parseInt(u/2))),t=m?r*d*-1+g*d:r*c*-1+g*c,!0===f){var v,y=i&&i.node;if(v=r+wS(e),t=(n=y&&y.childNodes[v])?-1*n.offsetLeft:0,!0===a){v=o?r+wS(e):r,n=y&&y.children[v],t=0;for(var b=0;b<v;b++)t-=y&&y.children[b]&&y.children[b].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(h-n.offsetWidth)/2}}return t};Qx.getTrackLeft=_S;var wS=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};Qx.getPreClones=wS;var xS=function(e){return e.unslick||!e.infinite?0:e.slideCount};Qx.getPostClones=xS;var SS=function(e){return 1===e.slideCount?1:wS(e)+e.slideCount+xS(e)};Qx.getTotalSlides=SS;var ES=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+TS(e)?"left":"right":e.targetSlide<e.currentSlide-MS(e)?"right":"left"};Qx.siblingDirection=ES;var TS=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r&&t%2==0&&(o+=1),o}return r?0:t-1};Qx.slidesOnRight=TS;var MS=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r||t%2!=0||(o+=1),o}return r?t-1:0};Qx.slidesOnLeft=MS;Qx.canUseDOM=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)};var CS={};Object.defineProperty(CS,"__esModule",{value:!0}),CS.Track=void 0;var IS=PS(l.exports),AS=PS($x.exports),kS=Qx;function PS(e){return e&&e.__esModule?e:{default:e}}function RS(e){return(RS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LS(){return(LS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function NS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DS(e,t){return(DS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}();return function(){var n,r=jS(e);if(t){var i=jS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return US(this,n)}}function US(e,t){return!t||"object"!==RS(t)&&"function"!=typeof t?zS(e):t}function zS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jS(e){return(jS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BS(Object(n),!0).forEach((function(t){HS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WS=function(e){var t,n,r,i,o;return r=(o=e.rtl?e.slideCount-1-e.index:e.index)<0||o>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount==0,o>e.currentSlide-i-1&&o<=e.currentSlide+i&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r,"slick-current":o===(e.targetSlide<0?e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?e.targetSlide-e.slideCount:e.targetSlide)}},GS=function(e,t){return e.key||t},qS=function(e){var t,n=[],r=[],i=[],o=IS.default.Children.count(e.children),a=(0,kS.lazyStartIndex)(e),s=(0,kS.lazyEndIndex)(e);return IS.default.Children.forEach(e.children,(function(u,l){var c,h={message:"children",index:l,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};c=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(l)>=0?u:IS.default.createElement("div",null);var f=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t}(VS(VS({},e),{},{index:l})),d=c.props.className||"",p=WS(VS(VS({},e),{},{index:l}));if(n.push(IS.default.cloneElement(c,{key:"original"+GS(c,l),"data-index":l,className:(0,AS.default)(p,d),tabIndex:"-1","aria-hidden":!p["slick-active"],style:VS(VS({outline:"none"},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}})),e.infinite&&!1===e.fade){var m=o-l;m<=(0,kS.getPreClones)(e)&&o!==e.slidesToShow&&((t=-m)>=a&&(c=u),p=WS(VS(VS({},e),{},{index:t})),r.push(IS.default.cloneElement(c,{key:"precloned"+GS(c,t),"data-index":t,tabIndex:"-1",className:(0,AS.default)(p,d),"aria-hidden":!p["slick-active"],style:VS(VS({},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}}))),o!==e.slidesToShow&&((t=o+l)<s&&(c=u),p=WS(VS(VS({},e),{},{index:t})),i.push(IS.default.cloneElement(c,{key:"postcloned"+GS(c,t),"data-index":t,tabIndex:"-1",className:(0,AS.default)(p,d),"aria-hidden":!p["slick-active"],style:VS(VS({},c.props.style||{}),f),onClick:function(t){c.props&&c.props.onClick&&c.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(h)}})))}})),e.rtl?r.concat(n,i).reverse():r.concat(n,i)},KS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DS(e,t)}(o,IS["default"].PureComponent);var t,n,r,i=FS(o);function o(){var e;NS(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return HS(zS(e=i.call.apply(i,[this].concat(n))),"node",null),HS(zS(e),"handleRef",(function(t){e.node=t})),e}return t=o,(n=[{key:"render",value:function(){var e=qS(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return IS.default.createElement("div",LS({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},n),e)}}])&&OS(t.prototype,n),r&&OS(t,r),o}();CS.Track=KS;var XS={};Object.defineProperty(XS,"__esModule",{value:!0}),XS.Dots=void 0;var YS=JS(l.exports),$S=JS($x.exports),QS=Qx;function JS(e){return e&&e.__esModule?e:{default:e}}function ZS(e){return(ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iE(e,t){return(iE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}();return function(){var n,r=sE(e);if(t){var i=sE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return aE(this,n)}}function aE(e,t){return!t||"object"!==ZS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sE(e){return(sE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iE(e,t)}(o,YS["default"].PureComponent);var t,n,r,i=oE(o);function o(){return nE(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"clickHandler",value:function(e,t){t.preventDefault(),this.props.clickHandler(e)}},{key:"render",value:function(){for(var e,t=this.props,n=t.onMouseEnter,r=t.onMouseOver,i=t.onMouseLeave,o=t.infinite,a=t.slidesToScroll,s=t.slidesToShow,u=t.slideCount,l=t.currentSlide,c=(e={slideCount:u,slidesToScroll:a,slidesToShow:s,infinite:o}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,h={onMouseEnter:n,onMouseOver:r,onMouseLeave:i},f=[],d=0;d<c;d++){var p=(d+1)*a-1,m=o?p:(0,QS.clamp)(p,0,u-1),g=m-(a-1),v=o?g:(0,QS.clamp)(g,0,u-1),y=(0,$S.default)({"slick-active":o?l>=v&&l<=m:l===v}),b={message:"dots",index:d,slidesToScroll:a,currentSlide:l},_=this.clickHandler.bind(this,b);f=f.concat(YS.default.createElement("li",{key:d,className:y},YS.default.cloneElement(this.props.customPaging(d),{onClick:_})))}return YS.default.cloneElement(this.props.appendDots(f),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach((function(t){tE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.props.dotsClass},h))}}])&&rE(t.prototype,n),r&&rE(t,r),o}();XS.Dots=uE;var lE={};Object.defineProperty(lE,"__esModule",{value:!0}),lE.NextArrow=lE.PrevArrow=void 0;var cE=dE(l.exports),hE=dE($x.exports),fE=Qx;function dE(e){return e&&e.__esModule?e:{default:e}}function pE(e){return(pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(){return(mE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(n),!0).forEach((function(t){yE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wE(e,t,n){return t&&_E(e.prototype,t),n&&_E(e,n),e}function xE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SE(e,t)}function SE(e,t){return(SE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}();return function(){var n,r=ME(e);if(t){var i=ME(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return TE(this,n)}}function TE(e,t){return!t||"object"!==pE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ME(e){return(ME=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CE=function(e){xE(n,cE["default"].PureComponent);var t=EE(n);function n(){return bE(this,n),t.apply(this,arguments)}return wE(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,hE.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?cE.default.cloneElement(this.props.prevArrow,vE(vE({},n),r)):cE.default.createElement("button",mE({key:"0",type:"button"},n)," ","Previous")}}]),n}();lE.PrevArrow=CE;var IE=function(e){xE(n,cE["default"].PureComponent);var t=EE(n);function n(){return bE(this,n),t.apply(this,arguments)}return wE(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,fE.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,hE.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?cE.default.cloneElement(this.props.nextArrow,vE(vE({},n),r)):cE.default.createElement("button",mE({key:"1",type:"button"},n)," ","Next")}}]),n}();lE.NextArrow=IE;var AE=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),kE="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,PE="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),RE="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(PE):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var LE=["top","right","bottom","left","width","height","size","weight"],NE="undefined"!=typeof MutationObserver,OE=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){RE(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){kE&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),NE?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){kE&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;LE.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),DE=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},FE=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||PE},UE=WE(0,0,0,0);function zE(e){return parseFloat(e)||0}function jE(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+zE(e["border-"+n+"-width"])}),0)}function BE(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return UE;var r=FE(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=zE(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=zE(r.width),u=zE(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=jE(r,"left","right")+o),Math.round(u+a)!==n&&(u-=jE(r,"top","bottom")+a)),!function(e){return e===FE(e).document.documentElement}(e)){var l=Math.round(s+o)-t,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return WE(i.left,i.top,s,u)}var VE="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof FE(e).SVGGraphicsElement}:function(e){return e instanceof FE(e).SVGElement&&"function"==typeof e.getBBox};function HE(e){return kE?VE(e)?function(e){var t=e.getBBox();return WE(0,0,t.width,t.height)}(e):BE(e):UE}function WE(e,t,n,r){return{x:e,y:t,width:n,height:r}}var GE=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=WE(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=HE(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),qE=function(e,t){var n,r,i,o,a,s,u,l=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),DE(u,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),u);DE(this,{target:e,contentRect:l})},KE=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new AE,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof FE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new GE(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof FE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new qE(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),XE="undefined"!=typeof WeakMap?new WeakMap:new AE,YE=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=OE.getInstance(),r=new KE(t,n,this);XE.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){YE.prototype[e]=function(){var t;return(t=XE.get(this))[e].apply(t,arguments)}}));var $E=void 0!==PE.ResizeObserver?PE.ResizeObserver:YE,QE=u(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$E}));Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.InnerSlider=void 0;var JE=sT(l.exports),ZE=sT(Lx),eT=sT(Yx),tT=sT($x.exports),nT=Qx,rT=CS,iT=XS,oT=lE,aT=sT(QE);function sT(e){return e&&e.__esModule?e:{default:e}}function uT(e){return(uT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(){return(lT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hT(Object(n),!0).forEach((function(t){bT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pT(e,t){return(pT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}();return function(){var n,r=yT(e);if(t){var i=yT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gT(this,n)}}function gT(e,t){return!t||"object"!==uT(t)&&"function"!=typeof t?vT(e):t}function vT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yT(e){return(yT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pT(e,t)}(o,JE["default"].Component);var t,n,r,i=mT(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),bT(vT(t=i.call(this,e)),"listRefHandler",(function(e){return t.list=e})),bT(vT(t),"trackRefHandler",(function(e){return t.track=e})),bT(vT(t),"adaptHeight",(function(){if(t.props.adaptiveHeight&&t.list){var e=t.list.querySelector('[data-index="'.concat(t.state.currentSlide,'"]'));t.list.style.height=(0,nT.getHeight)(e)+"px"}})),bT(vT(t),"componentDidMount",(function(){if(t.props.onInit&&t.props.onInit(),t.props.lazyLoad){var e=(0,nT.getOnDemandLazySlides)(fT(fT({},t.props),t.state));e.length>0&&(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e))}var n=fT({listRef:t.list,trackRef:t.track},t.props);t.updateState(n,!0,(function(){t.adaptHeight(),t.props.autoplay&&t.autoPlay("update")})),"progressive"===t.props.lazyLoad&&(t.lazyLoadTimer=setInterval(t.progressiveLazyLoad,1e3)),t.ro=new aT.default((function(){t.state.animating?(t.onWindowResized(!1),t.callbackTimers.push(setTimeout((function(){return t.onWindowResized()}),t.props.speed))):t.onWindowResized()})),t.ro.observe(t.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(e){e.onfocus=t.props.pauseOnFocus?t.onSlideFocus:null,e.onblur=t.props.pauseOnFocus?t.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",t.onWindowResized):window.attachEvent("onresize",t.onWindowResized)})),bT(vT(t),"componentWillUnmount",(function(){t.animationEndCallback&&clearTimeout(t.animationEndCallback),t.lazyLoadTimer&&clearInterval(t.lazyLoadTimer),t.callbackTimers.length&&(t.callbackTimers.forEach((function(e){return clearTimeout(e)})),t.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",t.onWindowResized):window.detachEvent("onresize",t.onWindowResized),t.autoplayTimer&&clearInterval(t.autoplayTimer),t.ro.disconnect()})),bT(vT(t),"componentDidUpdate",(function(e){if(t.checkImagesLoad(),t.props.onReInit&&t.props.onReInit(),t.props.lazyLoad){var n=(0,nT.getOnDemandLazySlides)(fT(fT({},t.props),t.state));n.length>0&&(t.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(n)}})),t.props.onLazyLoad&&t.props.onLazyLoad(n))}t.adaptHeight();var r=fT(fT({listRef:t.list,trackRef:t.track},t.props),t.state),i=t.didPropsChange(e);i&&t.updateState(r,i,(function(){t.state.currentSlide>=JE.default.Children.count(t.props.children)&&t.changeSlide({message:"index",index:JE.default.Children.count(t.props.children)-t.props.slidesToShow,currentSlide:t.state.currentSlide}),t.props.autoplay?t.autoPlay("update"):t.pause("paused")}))})),bT(vT(t),"onWindowResized",(function(e){t.debouncedResize&&t.debouncedResize.cancel(),t.debouncedResize=(0,eT.default)((function(){return t.resizeWindow(e)}),50),t.debouncedResize()})),bT(vT(t),"resizeWindow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=Boolean(t.track&&t.track.node);if(n){var r=fT(fT({listRef:t.list,trackRef:t.track},t.props),t.state);t.updateState(r,e,(function(){t.props.autoplay?t.autoPlay("update"):t.pause("paused")})),t.setState({animating:!1}),clearTimeout(t.animationEndCallback),delete t.animationEndCallback}})),bT(vT(t),"updateState",(function(e,n,r){var i=(0,nT.initializedState)(e);e=fT(fT(fT({},e),i),{},{slideIndex:i.currentSlide});var o=(0,nT.getTrackLeft)(e);e=fT(fT({},e),{},{left:o});var a=(0,nT.getTrackCSS)(e);(n||JE.default.Children.count(t.props.children)!==JE.default.Children.count(e.children))&&(i.trackStyle=a),t.setState(i,r)})),bT(vT(t),"ssrInit",(function(){if(t.props.variableWidth){var e=0,n=0,r=[],i=(0,nT.getPreClones)(fT(fT(fT({},t.props),t.state),{},{slideCount:t.props.children.length})),o=(0,nT.getPostClones)(fT(fT(fT({},t.props),t.state),{},{slideCount:t.props.children.length}));t.props.children.forEach((function(t){r.push(t.props.style.width),e+=t.props.style.width}));for(var a=0;a<i;a++)n+=r[r.length-1-a],e+=r[r.length-1-a];for(var s=0;s<o;s++)e+=r[s];for(var u=0;u<t.state.currentSlide;u++)n+=r[u];var l={width:e+"px",left:-n+"px"};if(t.props.centerMode){var c="".concat(r[t.state.currentSlide],"px");l.left="calc(".concat(l.left," + (100% - ").concat(c,") / 2 ) ")}return{trackStyle:l}}var h=JE.default.Children.count(t.props.children),f=fT(fT(fT({},t.props),t.state),{},{slideCount:h}),d=(0,nT.getPreClones)(f)+(0,nT.getPostClones)(f)+h,p=100/t.props.slidesToShow*d,m=100/d,g=-m*((0,nT.getPreClones)(f)+t.state.currentSlide)*p/100;return t.props.centerMode&&(g+=(100-m*p/100)/2),{slideWidth:m+"%",trackStyle:{width:p+"%",left:g+"%"}}})),bT(vT(t),"checkImagesLoad",(function(){var e=t.list&&t.list.querySelectorAll&&t.list.querySelectorAll(".slick-slide img")||[],n=e.length,r=0;Array.prototype.forEach.call(e,(function(e){var i=function(){return++r&&r>=n&&t.onWindowResized()};if(e.onclick){var o=e.onclick;e.onclick=function(){o(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(t.props.lazyLoad?e.onload=function(){t.adaptHeight(),t.callbackTimers.push(setTimeout(t.onWindowResized,t.props.speed))}:(e.onload=i,e.onerror=function(){i(),t.props.onLazyLoadError&&t.props.onLazyLoadError()}))}))})),bT(vT(t),"progressiveLazyLoad",(function(){for(var e=[],n=fT(fT({},t.props),t.state),r=t.state.currentSlide;r<t.state.slideCount+(0,nT.getPostClones)(n);r++)if(t.state.lazyLoadedList.indexOf(r)<0){e.push(r);break}for(var i=t.state.currentSlide-1;i>=-(0,nT.getPreClones)(n);i--)if(t.state.lazyLoadedList.indexOf(i)<0){e.push(i);break}e.length>0?(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e)):t.lazyLoadTimer&&(clearInterval(t.lazyLoadTimer),delete t.lazyLoadTimer)})),bT(vT(t),"slideHandler",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,i=r.asNavFor,o=r.beforeChange,a=r.onLazyLoad,s=r.speed,u=r.afterChange,l=t.state.currentSlide,c=(0,nT.slideHandler)(fT(fT(fT({index:e},t.props),t.state),{},{trackRef:t.track,useCSS:t.props.useCSS&&!n})),h=c.state,f=c.nextState;if(h){o&&o(l,h.currentSlide);var d=h.lazyLoadedList.filter((function(e){return t.state.lazyLoadedList.indexOf(e)<0}));a&&d.length>0&&a(d),!t.props.waitForAnimate&&t.animationEndCallback&&(clearTimeout(t.animationEndCallback),u&&u(l),delete t.animationEndCallback),t.setState(h,(function(){i&&t.asNavForIndex!==e&&(t.asNavForIndex=e,i.innerSlider.slideHandler(e)),f&&(t.animationEndCallback=setTimeout((function(){var e=f.animating,n=cT(f,["animating"]);t.setState(n,(function(){t.callbackTimers.push(setTimeout((function(){return t.setState({animating:e})}),10)),u&&u(h.currentSlide),delete t.animationEndCallback}))}),s))}))}})),bT(vT(t),"changeSlide",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=fT(fT({},t.props),t.state),i=(0,nT.changeSlide)(r,e);if((0===i||i)&&(!0===n?t.slideHandler(i,n):t.slideHandler(i),t.props.autoplay&&t.autoPlay("update"),t.props.focusOnSelect)){var o=t.list.querySelectorAll(".slick-current");o[0]&&o[0].focus()}})),bT(vT(t),"clickHandler",(function(e){!1===t.clickable&&(e.stopPropagation(),e.preventDefault()),t.clickable=!0})),bT(vT(t),"keyHandler",(function(e){var n=(0,nT.keyHandler)(e,t.props.accessibility,t.props.rtl);""!==n&&t.changeSlide({message:n})})),bT(vT(t),"selectHandler",(function(e){t.changeSlide(e)})),bT(vT(t),"disableBodyScroll",(function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})),bT(vT(t),"enableBodyScroll",(function(){window.ontouchmove=null})),bT(vT(t),"swipeStart",(function(e){t.props.verticalSwiping&&t.disableBodyScroll();var n=(0,nT.swipeStart)(e,t.props.swipe,t.props.draggable);""!==n&&t.setState(n)})),bT(vT(t),"swipeMove",(function(e){var n=(0,nT.swipeMove)(e,fT(fT(fT({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));n&&(n.swiping&&(t.clickable=!1),t.setState(n))})),bT(vT(t),"swipeEnd",(function(e){var n=(0,nT.swipeEnd)(e,fT(fT(fT({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));if(n){var r=n.triggerSlideHandler;delete n.triggerSlideHandler,t.setState(n),void 0!==r&&(t.slideHandler(r),t.props.verticalSwiping&&t.enableBodyScroll())}})),bT(vT(t),"touchEnd",(function(e){t.swipeEnd(e),t.clickable=!0})),bT(vT(t),"slickPrev",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"previous"})}),0))})),bT(vT(t),"slickNext",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"next"})}),0))})),bT(vT(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"index",index:e,currentSlide:t.state.currentSlide},n)}),0))})),bT(vT(t),"play",(function(){var e;if(t.props.rtl)e=t.state.currentSlide-t.props.slidesToScroll;else{if(!(0,nT.canGoNext)(fT(fT({},t.props),t.state)))return!1;e=t.state.currentSlide+t.props.slidesToScroll}t.slideHandler(e)})),bT(vT(t),"autoPlay",(function(e){t.autoplayTimer&&clearInterval(t.autoplayTimer);var n=t.state.autoplaying;if("update"===e){if("hovered"===n||"focused"===n||"paused"===n)return}else if("leave"===e){if("paused"===n||"focused"===n)return}else if("blur"===e&&("paused"===n||"hovered"===n))return;t.autoplayTimer=setInterval(t.play,t.props.autoplaySpeed+50),t.setState({autoplaying:"playing"})})),bT(vT(t),"pause",(function(e){t.autoplayTimer&&(clearInterval(t.autoplayTimer),t.autoplayTimer=null);var n=t.state.autoplaying;"paused"===e?t.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==n&&"playing"!==n||t.setState({autoplaying:"focused"}):"playing"===n&&t.setState({autoplaying:"hovered"})})),bT(vT(t),"onDotsOver",(function(){return t.props.autoplay&&t.pause("hovered")})),bT(vT(t),"onDotsLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),bT(vT(t),"onTrackOver",(function(){return t.props.autoplay&&t.pause("hovered")})),bT(vT(t),"onTrackLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),bT(vT(t),"onSlideFocus",(function(){return t.props.autoplay&&t.pause("focused")})),bT(vT(t),"onSlideBlur",(function(){return t.props.autoplay&&"focused"===t.state.autoplaying&&t.autoPlay("blur")})),bT(vT(t),"render",(function(){var e,n,r,i=(0,tT.default)("slick-slider",t.props.className,{"slick-vertical":t.props.vertical,"slick-initialized":!0}),o=fT(fT({},t.props),t.state),a=(0,nT.extractObject)(o,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),s=t.props.pauseOnHover;if(a=fT(fT({},a),{},{onMouseEnter:s?t.onTrackOver:null,onMouseLeave:s?t.onTrackLeave:null,onMouseOver:s?t.onTrackOver:null,focusOnSelect:t.props.focusOnSelect&&t.clickable?t.selectHandler:null}),!0===t.props.dots&&t.state.slideCount>=t.props.slidesToShow){var u=(0,nT.extractObject)(o,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),l=t.props.pauseOnDotsHover;u=fT(fT({},u),{},{clickHandler:t.changeSlide,onMouseEnter:l?t.onDotsLeave:null,onMouseOver:l?t.onDotsOver:null,onMouseLeave:l?t.onDotsLeave:null}),e=JE.default.createElement(iT.Dots,u)}var c=(0,nT.extractObject)(o,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);c.clickHandler=t.changeSlide,t.props.arrows&&(n=JE.default.createElement(oT.PrevArrow,c),r=JE.default.createElement(oT.NextArrow,c));var h=null;t.props.vertical&&(h={height:t.state.listHeight});var f=null;!1===t.props.vertical?!0===t.props.centerMode&&(f={padding:"0px "+t.props.centerPadding}):!0===t.props.centerMode&&(f={padding:t.props.centerPadding+" 0px"});var d=fT(fT({},h),f),p=t.props.touchMove,m={className:"slick-list",style:d,onClick:t.clickHandler,onMouseDown:p?t.swipeStart:null,onMouseMove:t.state.dragging&&p?t.swipeMove:null,onMouseUp:p?t.swipeEnd:null,onMouseLeave:t.state.dragging&&p?t.swipeEnd:null,onTouchStart:p?t.swipeStart:null,onTouchMove:t.state.dragging&&p?t.swipeMove:null,onTouchEnd:p?t.touchEnd:null,onTouchCancel:t.state.dragging&&p?t.swipeEnd:null,onKeyDown:t.props.accessibility?t.keyHandler:null},g={className:i,dir:"ltr",style:t.props.style};return t.props.unslick&&(m={className:"slick-list"},g={className:i}),JE.default.createElement("div",g,t.props.unslick?"":n,JE.default.createElement("div",lT({ref:t.listRefHandler},m),JE.default.createElement(rT.Track,lT({ref:t.trackRefHandler},a),t.props.children)),t.props.unslick?"":r,t.props.unslick?"":e)})),t.list=null,t.track=null,t.state=fT(fT({},ZE.default),{},{currentSlide:t.props.initialSlide,slideCount:JE.default.Children.count(t.props.children)}),t.callbackTimers=[],t.clickable=!0,t.debouncedResize=null;var n=t.ssrInit();return t.state=fT(fT({},t.state),n),t}return t=o,(n=[{key:"didPropsChange",value:function(e){for(var t=!1,n=0,r=Object.keys(this.props);n<r.length;n++){var i=r[n];if(!e.hasOwnProperty(i)){t=!0;break}if("object"!==uT(e[i])&&"function"!=typeof e[i]&&e[i]!==this.props[i]){t=!0;break}}return t||JE.default.Children.count(this.props.children)!==JE.default.Children.count(e.children)}}])&&dT(t.prototype,n),r&&dT(t,r),o}();Rx.InnerSlider=_T;var wT=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()},xT=function(e){var t="",n=Object.keys(e);return n.forEach((function(r,i){var o=e[r];(function(e){return/[height|width]$/.test(e)})(r=wT(r))&&"number"==typeof o&&(o+="px"),t+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",i<n.length-1&&(t+=" and ")})),t},ST=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach((function(n,r){t+=xT(n),r<e.length-1&&(t+=", ")})),t):xT(e)},ET={};function TT(e){this.options=e,!e.deferSetup&&this.setup()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(l.exports);var n={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return t.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return t.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};e.default=n}(ET),TT.prototype={constructor:TT,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}};var MT={isFunction:function(e){return"function"==typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);}},CT=TT,IT=MT.each;function AT(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}AT.prototype={constuctor:AT,addHandler:function(e){var t=new CT(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;IT(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){IT(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";IT(this.handlers,(function(t){t[e]()}))}};var kT=AT,PT=MT.each,RT=MT.isFunction,LT=MT.isArray;function NT(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}NT.prototype={constructor:NT,register:function(e,t,n){var r=this.queries,i=n&&this.browserIsIncapable;return r[e]||(r[e]=new kT(e,i)),RT(t)&&(t={match:t}),LT(t)||(t=[t]),PT(t,(function(t){RT(t)&&(t={match:t}),r[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}};var OT=new NT;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(l.exports),n=Rx,r=a(ST),i=a(ET),o=Qx;function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,o.canUseDOM)()&&OT,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var a,s,l,c=p(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),y(g(t=c.call(this,e)),"innerSliderRefHandler",(function(e){return t.innerSlider=e})),y(g(t),"slickPrev",(function(){return t.innerSlider.slickPrev()})),y(g(t),"slickNext",(function(){return t.innerSlider.slickNext()})),y(g(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.innerSlider.slickGoTo(e,n)})),y(g(t),"slickPause",(function(){return t.innerSlider.pause("paused")})),y(g(t),"slickPlay",(function(){return t.innerSlider.autoPlay("play")})),t.state={breakpoint:null},t._responsiveMediaHandlers=[],t}return a=m,(s=[{key:"media",value:function(e,t){b.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})}},{key:"componentDidMount",value:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map((function(e){return e.breakpoint}));t.sort((function(e,t){return e-t})),t.forEach((function(n,i){var a;a=0===i?(0,r.default)({minWidth:0,maxWidth:n}):(0,r.default)({minWidth:t[i-1]+1,maxWidth:n}),(0,o.canUseDOM)()&&e.media(a,(function(){e.setState({breakpoint:n})}))}));var n=(0,r.default)({minWidth:t.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(n,(function(){e.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(e){b.unregister(e.query,e.handler)}))}},{key:"render",value:function(){var e,r,o=this;(e=this.state.breakpoint?"unslick"===(r=this.props.responsive.filter((function(e){return e.breakpoint===o.state.breakpoint})))[0].settings?"unslick":h(h(h({},i.default),this.props),r[0].settings):h(h({},i.default),this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var a=t.default.Children.toArray(this.props.children);a=a.filter((function(e){return"string"==typeof e?!!e.trim():!!e})),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var s=[],l=null,c=0;c<a.length;c+=e.rows*e.slidesPerRow){for(var f=[],d=c;d<c+e.rows*e.slidesPerRow;d+=e.slidesPerRow){for(var p=[],m=d;m<d+e.slidesPerRow&&(e.variableWidth&&a[m].props.style&&(l=a[m].props.style.width),!(m>=a.length));m+=1)p.push(t.default.cloneElement(a[m],{key:100*c+10*d+m,tabIndex:-1,style:{width:"".concat(100/e.slidesPerRow,"%"),display:"inline-block"}}));f.push(t.default.createElement("div",{key:10*c+d},p))}e.variableWidth?s.push(t.default.createElement("div",{key:c,style:{width:l}},f)):s.push(t.default.createElement("div",{key:c},f))}if("unslick"===e){var g="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:g},a)}return s.length<=e.slidesToShow&&(e.unslick=!0),t.default.createElement(n.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},e),s)}}])&&f(a.prototype,s),l&&f(a,l),m}(t.default.Component);e.default=_}(Px),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(Px).default;e.default=t}({});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var DT=function(e,t){return(DT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function FT(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}DT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var UT=function(){return(UT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function zT(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(bX){o(bX)}}function s(e){try{u(r.throw(e))}catch(bX){o(bX)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function jT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(bX){o=[6,bX],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function BT(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function VT(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function HT(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WT=!1,GT="${JSCORE_VERSION}",qT=function(e,t){if(!e)throw KT(t)},KT=function(e){return new Error("Firebase Database ("+GT+") INTERNAL ASSERT FAILED: "+e)},XT=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},YT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,a||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(XT(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},$T=function(e){try{return YT.decodeString(e,!0)}catch(bX){console.error("base64Decode failed: ",bX)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function QT(e){return JT(void 0,e)}function JT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=JT(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ZT=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=UT({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[YT.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),YT.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nM(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tM())}function rM(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(bX){return!1}}function iM(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function oM(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function aM(){return!0===WT}function sM(){return"indexedDB"in self&&null!=indexedDB}function uM(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function lM(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cM=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,hM.prototype.create),o}return FT(t,e),t}(Error),hM=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?fM(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new cM(i,s,r);return u},e}();function fM(e,t){return e.replace(dM,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var dM=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(e){return JSON.parse(e)}function mM(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gM=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=pM($T(o[0])||""),n=pM($T(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(bX){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vM(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yM(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function bM(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _M(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wM=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function xM(e,t){var n=new SM(e,t);return n.subscribe.bind(n)}var SM=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=EM),void 0===r.error&&(r.error=EM),void 0===r.complete&&(r.complete=EM);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(bX){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(bX){"undefined"!=typeof console&&console.error&&console.error(bX)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function EM(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TM=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function MM(e,t){return e+" failed: "+t+" argument "}function CM(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(MM(e,t)+"must be a valid function.")}function IM(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(MM(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AM=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function kM(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(e){return e&&e._delegate?e._delegate:e}var RM=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),LM=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ZT;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(bX){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bX){if(r)return null;throw bX}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(bX){}try{for(var r=BT(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=VT(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:u});s.resolve(l)}catch(bX){}}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(HT(HT([],VT(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),VT(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=BT(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var l=VT(u.value,2),c=l[0],h=l[1];o===this.normalizeInstanceIdentifier(c)&&h.resolve(a)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=BT(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(u){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e="[DEFAULT]"),this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NM,OM=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new LM(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function DM(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FM,UM,zM=[];(UM=FM||(FM={}))[UM.DEBUG=0]="DEBUG",UM[UM.VERBOSE=1]="VERBOSE",UM[UM.INFO=2]="INFO",UM[UM.WARN=3]="WARN",UM[UM.ERROR=4]="ERROR",UM[UM.SILENT=5]="SILENT";var jM,BM={debug:FM.DEBUG,verbose:FM.VERBOSE,info:FM.INFO,warn:FM.WARN,error:FM.ERROR,silent:FM.SILENT},VM=FM.INFO,HM=((NM={})[FM.DEBUG]="log",NM[FM.VERBOSE]="log",NM[FM.INFO]="info",NM[FM.WARN]="warn",NM[FM.ERROR]="error",NM),WM=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=HM[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,DM(["["+i+"]  "+e.name+":"],n))}},GM=function(){function e(e){this.name=e,this._logLevel=VM,this._logHandler=WM,this._userLogHandler=null,zM.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in FM))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?BM[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,DM([this,FM.DEBUG],e)),this._logHandler.apply(this,DM([this,FM.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,DM([this,FM.VERBOSE],e)),this._logHandler.apply(this,DM([this,FM.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,DM([this,FM.INFO],e)),this._logHandler.apply(this,DM([this,FM.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,DM([this,FM.WARN],e)),this._logHandler.apply(this,DM([this,FM.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,DM([this,FM.ERROR],e)),this._logHandler.apply(this,DM([this,FM.ERROR],e))},e}();function qM(e){zM.forEach((function(t){t.setLogLevel(e)}))}var KM,XM=((jM={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",jM["bad-app-name"]="Illegal App name: '{$appName}",jM["duplicate-app"]="Firebase App named '{$appName}' already exists",jM["app-deleted"]="Firebase App named '{$appName}' already deleted",jM["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",jM["invalid-log-argument"]="First argument to `onLog` must be null or a function.",jM),YM=new hM("app","Firebase",XM),$M=((KM={})["@firebase/app"]="fire-core",KM["@firebase/analytics"]="fire-analytics",KM["@firebase/app-check"]="fire-app-check",KM["@firebase/auth"]="fire-auth",KM["@firebase/database"]="fire-rtdb",KM["@firebase/functions"]="fire-fn",KM["@firebase/installations"]="fire-iid",KM["@firebase/messaging"]="fire-fcm",KM["@firebase/performance"]="fire-perf",KM["@firebase/remote-config"]="fire-rc",KM["@firebase/storage"]="fire-gcs",KM["@firebase/firestore"]="fire-fst",KM["fire-js"]="fire-js",KM["firebase-wrapper"]="fire-js-all",KM),QM=new GM("@firebase/app"),JM=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=QT(e),this.container=new OM(t.name),this._addComponent(new RM("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(bX){QM.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,bX)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw YM.create("app-deleted",{appName:this.name_})},e}();JM.prototype.name&&JM.prototype.options||JM.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ZM(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw YM.create("bad-app-name",{appName:String(a)});if(vM(t,a))throw YM.create("duplicate-app",{appName:a});var s=new e(n,o,r);return t[a]=s,s},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=$M[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void QM.warn(u.join(" "))}o(new RM(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:qM,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw YM.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=BM[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:FM[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=zM;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(!vM(t,e=e||"[DEFAULT]"))throw YM.create("no-app",{appName:e});return t[e]}function o(o){var a=o.name;if(n.has(a))return QM.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[a])throw YM.create("invalid-app-argument",{appName:a});return e[a]()};void 0!==o.serviceProps&&JT(s,o.serviceProps),r[a]=s,e.prototype[a]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?e:[])}}for(var u=0,l=Object.keys(t);u<l.length;u++){var c=l[u];t[c]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eC=function e(){var t=ZM(JM);return t.INTERNAL=UT(UT({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){JT(t,e)},createSubscribe:xM,ErrorFactory:hM,deepExtend:JT}),t}(),tC=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){QM.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var nC=self.firebase.SDK_VERSION;nC&&nC.indexOf("LITE")>=0&&QM.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var rC=eC.initializeApp;eC.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rM()&&QM.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),rC.apply(void 0,e)};var iC,oC,aC=eC;(iC=aC).INTERNAL.registerComponent(new RM("platform-logger",(function(e){return new tC(e)}),"PRIVATE")),iC.registerVersion("@firebase/app","0.6.28",oC),iC.registerVersion("fire-js",""),function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var n=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis}(this);function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=n.setTimeout;r.prototype.c=function(e){a(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new r;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ra(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""}function c(){}function h(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){return"function"==h(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function x(e){return e}function S(e,t,n){this.code=M+e,this.message=t||C[e]||"",this.a=n||null}function E(e){var t=e&&e.code;return t?new S(t.substring(M.length),e.message,e.serverResponse):null}w(S,Error),S.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},S.prototype.toJSON=function(){return this.w()};var T,M="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},I={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(e){for(var t in I)if(I[t].id===e)return{firebaseEndpoint:(e=I[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function P(e){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function R(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");P.call(this,n+e[r])}function L(e,t){throw new R("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function N(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function D(){this.b=this.a=null}T=A("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var F=new N((function(){return new z}),(function(e){e.reset()}));function U(){var e=vt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function z(){this.next=this.b=this.a=null}D.prototype.add=function(e,t){var n=F.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var V=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},H=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},W=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function G(e,t){return 0<=j(e,t)}function q(e,t){var n;return(n=0<=(t=j(e,t)))&&Array.prototype.splice.call(e,t,1),n}function K(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function X(e){return Array.prototype.concat.apply([],arguments)}function Y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var $,Q=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},J=/&/g,Z=/</g,ee=/>/g,te=/"/g,ne=/'/g,re=/\x00/g,ie=/[\x00&<>"']/;function oe(e,t){return-1!=e.indexOf(t)}function ae(e,t){return e<t?-1:e>t?1:0}e:{var se=a.navigator;if(se){var ue=se.userAgent;if(ue){$=ue;break e}}$=""}function le(e){return oe($,e)}function ce(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function he(e){for(var t in e)return!1;return!0}function fe(e){var t,n={};for(t in e)n[t]=e[t];return n}var de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<de.length;o++)n=de[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(s){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(p(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function ge(e,t){this.a=e===_e&&t||"",this.b=be}function ve(e){return e instanceof ge&&e.constructor===ge&&e.b===be?e.a:(L("expected object of type Const, got '"+e+"'"),"type_error:Const")}ge.prototype.ta=!0,ge.prototype.sa=function(){return this.a},ge.prototype.toString=function(){return"Const{"+this.a+"}"};var ye,be={},_e={};function we(){if(void 0===ye){var e=null,t=a.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:x,createScript:x,createScriptURL:x})}catch(Py){a.console&&a.console.error(Py.message)}ye=e}else ye=e}return ye}function xe(e,t){this.a=t===Ce?e:""}function Se(e){return e instanceof xe&&e.constructor===xe?e.a:(L("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function Ee(e,t){var n=ve(e);if(!Me.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=we();return new xe(e=t?t.createScriptURL(e):e,Ce)}(e=n.replace(Te,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof ge?ve(e):encodeURIComponent(String(e))})))}xe.prototype.ta=!0,xe.prototype.sa=function(){return this.a.toString()},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Te=/%{(\w+)}/g,Me=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ce={};function Ie(e,t){this.a=t===Oe?e:""}function Ae(e){return e instanceof Ie&&e.constructor===Ie?e.a:(L("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}Ie.prototype.ta=!0,Ie.prototype.sa=function(){return this.a.toString()},Ie.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ke=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Re=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Le(e){if(e instanceof Ie)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e))e=new Ie(e,Oe);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Pe);e=t&&ke.test(t[1])?new Ie(e,Oe):null}return e}function Ne(e){return e instanceof Ie?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e)||(e="about:invalid#zClosurez"),new Ie(e,Oe))}var Oe={},De=new Ie("about:invalid#zClosurez",Oe);function Fe(e,t,n){this.a=n===Ue?e:""}Fe.prototype.ta=!0,Fe.prototype.sa=function(){return this.a.toString()},Fe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ue={};function ze(e,t,n,r){return e=e instanceof Ie?e:Ne(e),t=t||a,n=n instanceof ge?ve(n):n||"",t.open(Ae(e),n,r,void 0)}function je(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Be(e){return ie.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(J,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Z,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ee,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(te,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ne,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(re,"&#0;"))),e}function Ve(e){return Ve[" "](e),e}Ve[" "]=c;var He,We=le("Opera"),Ge=le("Trident")||le("MSIE"),qe=le("Edge"),Ke=qe||Ge,Xe=le("Gecko")&&!(oe($.toLowerCase(),"webkit")&&!le("Edge"))&&!(le("Trident")||le("MSIE"))&&!le("Edge"),Ye=oe($.toLowerCase(),"webkit")&&!le("Edge");function $e(){var e=a.document;return e?e.documentMode:void 0}e:{var Qe="",Je=function(){var e=$;return Xe?/rv:([^\);]+)(\)|;)/.exec(e):qe?/Edge\/([\d\.]+)/.exec(e):Ge?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ye?/WebKit\/(\S+)/.exec(e):We?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Je&&(Qe=Je?Je[1]:""),Ge){var Ze=$e();if(null!=Ze&&Ze>parseFloat(Qe)){He=String(Ze);break e}}He=Qe}var et,tt={};function nt(e){return function(e,t){var n=tt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=Q(String(He)).split("."),r=Q(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ae(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ae(0==a[2].length,0==s[2].length)||ae(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(a.document&&Ge){var rt=$e();et=rt||(parseInt(He,10)||void 0)}else et=void 0;var it=et;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ct){}var ot=!Ge||9<=Number(it);function at(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function st(e,t){ce(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ht.hasOwnProperty(n)?e.setAttribute(ht[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ut,lt,ht={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ft(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(d(o)){a="function"==typeof o.item;break e}}a=!1}B(a?Y(o):o,r)}}}function dt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function pt(e){a.setTimeout((function(){throw e}),0)}function mt(e,t){lt||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);lt=function(){e.then(yt)}}else lt=function(){var e=yt;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!le("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ut||(ut=function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!le("Presto")&&(e=function(){var e=dt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=b((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!le("Trident")&&!le("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){a.setTimeout(e,0)}}()),ut(e)):a.setImmediate(e)}}(),gt||(lt(),gt=!0),vt.add(e,t)}var gt=!1,vt=new D;function yt(){for(var e;e=U();){try{e.a.call(e.b)}catch(t){pt(t)}O(F,e)}gt=!1}function bt(e,t){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=c)try{var n=this;e.call(t,(function(e){Lt(n,wt,e)}),(function(e){if(!(e instanceof jt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(bX){}Lt(n,xt,e)}))}catch(r){Lt(this,xt,r)}}var _t=0,wt=2,xt=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Et=new N((function(){return new St}),(function(e){e.reset()}));function Tt(e,t,n){var r=Et.get();return r.g=e,r.b=t,r.f=n,r}function Mt(e){if(e instanceof bt)return e;var t=new bt(c);return Lt(t,wt,e),t}function Ct(e){return new bt((function(t,n){n(e)}))}function It(e,t,n){Nt(e,t,n,null)||mt(_(t,e))}function At(e){return new bt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)It(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}function kt(e,t){if(e.a==_t)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_t&&1==r?kt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Dt(n),Ft(n,i,xt,t)))}e.c=null}else Lt(e,xt,t)}function Pt(e,t){e.b||e.a!=wt&&e.a!=xt||Ot(e),e.f?e.f.next=t:e.b=t,e.f=t}function Rt(e,t,n,r){var i=Tt(null,null,null);return i.a=new bt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof jt?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,Pt(e,i),i.a}function Lt(e,t,n){e.a==_t&&(e===n&&(t=xt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Nt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Ot(e),t!=xt||n instanceof jt||function(e,t){e.g=!0,mt((function(){e.g&&zt.call(null,t)}))}(e,n)))}function Nt(e,t,n,r){if(e instanceof bt)return Pt(e,Tt(t||c,n||null,r)),!0;if(k(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(d(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ot(e){e.h||(e.h=!0,mt(e.gc,e))}function Dt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ft(e,t,n,r){if(n==xt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,r);else try{t.c?t.g.call(t.f):Ut(t,n,r)}catch(bX){zt.call(null,bX)}O(Et,t)}function Ut(e,t,n){t==wt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}bt.prototype.then=function(e,t,n){return Rt(this,d(e)?e:null,d(t)?t:null,n)},bt.prototype.$goog_Thenable=!0,(e=bt.prototype).oa=function(e,t){return(e=Tt(e,e,t)).c=!0,Pt(this,e),this},e.o=function(e,t){return Rt(this,null,e,t)},e.cancel=function(e){if(this.a==_t){var t=new jt(e);mt((function(){kt(this,t)}),this)}},e.$c=function(e){this.a=_t,Lt(this,wt,e)},e.ad=function(e){this.a=_t,Lt(this,xt,e)},e.gc=function(){for(var e;e=Dt(this);)Ft(this,e,this.a,this.i);this.h=!1};var zt=pt;function jt(e){P.call(this,e)}function Bt(){this.ya=this.ya,this.pa=this.pa}w(jt,P),jt.prototype.name="cancel";var Vt={};function Ht(e){if(!e.ya&&(e.ya=!0,e.Da(),0)){var t=function(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++g)}(e);delete Vt[t]}}Bt.prototype.ya=!1,Bt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Wt=Object.freeze||function(e){return e},Gt=!Ge||9<=Number(it),qt=Ge&&!nt("9"),Kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(Py){}return e}();function Xt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Yt(e,t){if(Xt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Xe){e:{try{Ve(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$t[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Xt.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Yt,Xt);var $t=Wt({2:"touch",3:"pen",4:"mouse"});Yt.prototype.preventDefault=function(){Yt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,qt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Yt.prototype.g=function(){return this.a};var Qt="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function Zt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Jt,this.wa=this.Qa=!1}function en(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function tn(e){this.src=e,this.a={},this.b=0}function nn(e,t){var n=t.type;n in e.a&&q(e.a[n],t)&&(en(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function rn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}tn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=rn(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new Zt(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var on="closure_lm_"+(1e6*Math.random()|0),an={};function sn(e,t,n,r,i){if(r&&r.once)ln(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)sn(e,t[o],n,r,i);else n=yn(n),e&&e[Qt]?_n(e,t,n,p(r)?!!r.capture:!!r,i):un(e,t,n,!1,r,i)}function un(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=gn(e);if(s||(e[on]=s=new tn(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=mn,t=Gt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function ln(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ln(e,t[o],n,r,i);else n=yn(n),e&&e[Qt]?wn(e,t,n,p(r)?!!r.capture:!!r,i):un(e,t,n,!0,r,i)}function cn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)cn(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=yn(n),e&&e[Qt]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=rn(o=e.a[t],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=gn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=rn(t,n,r,i)),(n=-1<e?t[e]:null)&&hn(n))}function hn(e){if("number"!=typeof e&&e&&!e.wa){var t=e.src;if(t&&t[Qt])nn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gn(t))?(nn(n,e),0==n.b&&(n.src=null,t[on]=null)):en(e)}}}function fn(e){return e in an?an[e]:an[e]="on"+e}function dn(e,t,n,r){var i=!0;if((e=gn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=pn(o,r),i=i&&!1!==o)}return i}function pn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&hn(e),n.call(r,t)}function mn(e,t){if(e.wa)return!0;if(!Gt){if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Yt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=dn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=dn(r[i],e,!1,t),n=n&&o}return n}return pn(e,new Yt(t,this))}function gn(e){return(e=e[on])instanceof tn?e:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(e){return d(e)?e:(e[vn]||(e[vn]=function(t){return e.handleEvent(t)}),e[vn])}function bn(){Bt.call(this),this.v=new tn(this),this.bc=this,this.hb=null}function _n(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function wn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function xn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&nn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(e,t,n){if(d(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function En(e){var t=null;return new bt((function(n,r){-1==(t=Sn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw a.clearTimeout(t),e}))}function Tn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Mn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Cn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Cn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function In(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];An(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)An(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function An(e,t){return Object.prototype.hasOwnProperty.call(e,t)}w(bn,Bt),bn.prototype[Qt]=!0,bn.prototype.addEventListener=function(e,t,n,r){sn(this,e,t,n,r)},bn.prototype.removeEventListener=function(e,t,n,r){cn(this,e,t,n,r)},bn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"==typeof e)e=new Xt(e,n);else if(e instanceof Xt)e.target=e.target||n;else{var i=e;pe(e=new Xt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=xn(a,r,!0,e)&&i}if(i=xn(a=e.b=n,r,!0,e)&&i,i=xn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=xn(a=e.b=t[o],r,!1,e)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)en(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=Cn.prototype).X=function(){In(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return In(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return An(this.b,e)?this.b[e]:t},e.set=function(e,t){An(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Pn?(this.i=void 0!==t?t:e.i,Rn(this,e.c),this.l=e.l,this.a=e.a,Ln(this,e.g),this.f=e.f,Nn(this,Zn(e.b)),this.h=e.h):e&&(n=String(e).match(kn))?(this.i=!!t,Rn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),Ln(this,n[4]),this.f=zn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!t,this.b=new Kn(null,this.i))}function Rn(e,t,n){e.c=n?zn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Ln(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Nn(e,t,n){t instanceof Kn?(e.b=t,function(e,t){t&&!e.f&&(Xn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($n(this,t),Jn(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=jn(t,Gn)),e.b=new Kn(t,e.i))}function On(e,t,n){e.b.set(t,n)}function Dn(e,t){return e.b.get(t)}function Fn(e){return e instanceof Pn?new Pn(e):new Pn(e,void 0)}function Un(e,t,n,r){var i=new Pn(null,void 0);return e&&Rn(i,e),t&&(i.a=t),n&&Ln(i,n),r&&(i.f=r),i}function zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Bn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(jn(t,Vn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(jn(t,Vn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(jn(n,"/"==n.charAt(0)?Wn:Hn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",jn(n,qn)),e.join("")},Pn.prototype.resolve=function(e){var t=new Pn(this),n=!!e.c;n?Rn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Ln(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(oe(i,"./")||oe(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Nn(t,Zn(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Vn=/[#\/\?@]/g,Hn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,qn=/#/g;function Kn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Xn(e){e.a||(e.a=new Cn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Yn(e){var t=Mn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Kn(null,void 0);e=Tn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function $n(e,t){Xn(e),t=er(e,t),An(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,An((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&In(e)))}function Qn(e,t){return Xn(e),t=er(e,t),An(e.a.b,t)}function Jn(e,t,n){$n(e,t),0<n.length&&(e.c=null,e.a.set(er(e,t),Y(n)),e.b+=n.length)}function Zn(e){var t=new Kn;return t.c=e.c,e.a&&(t.a=new Cn(e.a),t.b=e.b),t}function er(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tr(e){var t=[];return rr(new nr,e,t),t.join("")}function nr(){}function rr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),rr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),ar(r,n),n.push(":"),rr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":ar(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Kn.prototype).add=function(e,t){Xn(this),this.c=null,e=er(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Xn(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Xn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){Xn(this);var t=[];if("string"==typeof e)Qn(this,e)&&(t=X(t,this.a.get(er(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=X(t,e[n])}return t},e.set=function(e,t){return Xn(this),this.c=null,Qn(this,e=er(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(e,t){t.push('"',e.replace(or,(function(e){var t=ir[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ir[e]=t),t})),'"')}function sr(){var e=Cr();return Ge&&!!it&&11==it||/Edge\/\d+/.test(e)}function ur(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function lr(e,t){t=t||a.window;var n="about:blank";e&&(n=Ae(Le(e)||De)),t.location.href=n}function cr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<cr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function hr(e){return!!((e=(e||Cr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function fr(e){e=e||a.window;try{e.close()}catch(t){}}function dr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(t.target=r,oe(n,"crios/")&&(t.target="_blank")),Er(Cr())==xr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Ie?n:Le(void 0!==n.href?n.href:String(n))||De,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((le("iPhone")&&!le("iPod")&&!le("iPad")||le("iPad")||le("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(me(a=dt(document,"A"),"HTMLAnchorElement"),t=t instanceof Ie?t:Ne(t),a.href=Ae(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=ze("",r,n,a),e=Ae(t),a&&(Ke&&oe(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Be(e)+'">',e=new Fe(e=(r=we())?r.createHTML(e):e,null,Ue),r=a.document)&&(r.write(function(e){return e instanceof Fe&&e.constructor===Fe?e.a:(L("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")}(e)),r.close())):(a=ze(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function gr(){var e=null;return new bt((function(t){"complete"==a.document.readyState?t():(e=function(){t()},ln(window,"load",e))})).o((function(t){throw cn(window,"load",e),t}))}function vr(e){return e=e||Cr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var e=a.window;try{return!(!e||e==e.top)}catch(t){return!1}}function br(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return aC.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":aC.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function wr(){var e=_r();return"ReactNative"===e||"Node"===e}var xr="Firefox",Sr="Chrome";function Er(e){var t=e.toLowerCase();return oe(t,"opera/")||oe(t,"opr/")||oe(t,"opios/")?"Opera":oe(t,"iemobile")?"IEMobile":oe(t,"msie")||oe(t,"trident/")?"IE":oe(t,"edge/")?"Edge":oe(t,"firefox/")?xr:oe(t,"silk/")?"Silk":oe(t,"blackberry")?"Blackberry":oe(t,"webos")?"Webos":!oe(t,"safari/")||oe(t,"chrome/")||oe(t,"crios/")||oe(t,"android")?!oe(t,"chrome/")&&!oe(t,"crios/")||oe(t,"edge/")?oe(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Sr:"Safari"}var Tr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Mr(e,t){t=t||[];var n,r=[],i={};for(n in Tr)i[Tr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Er(i=Cr()):"Worker"===r&&(r=Er(i=Cr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function Ir(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Ar(){try{var e=a.localStorage,t=Fr();if(e)return e.setItem(t,"1"),e.removeItem(t),!sr()||!!a.indexedDB}catch(Py){return br()&&!!a.indexedDB}return!1}function kr(){return(Pr()||"chrome-extension:"===Rr()||vr())&&!wr()&&Ar()&&!br()}function Pr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Lr(e){return!hr(e=e||Cr())&&Er(e)!=xr}function Nr(e){return void 0===e?null:tr(e)}function Or(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Dr(e){if(null!==e)return JSON.parse(e)}function Fr(e){return e||Math.floor(1e9*Math.random()).toString()}function Ur(e){return"Safari"!=Er(e=e||Cr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function jr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Cr(),t=_r(),this.b=hr(e)||"ReactNative"===t}function Br(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Vr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(Py){}return null}function Hr(){return!(!Ir("fireauth.oauthhelper",a)&&!Ir("fireauth.iframe",a))}jr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!Pr()&&"chrome-extension:"!==Rr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function qr(e){Gr[e]||(Gr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Kr={};Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Kr.abcd}catch(ct){Wr=!1}function Xr(e,t,n){Wr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Yr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Xr(e,n,t[n])}function $r(e){var t={};return Yr(t,e),t}function Qr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Xr(t,n,Qr(e[n]));return t}function Jr(e){var t=e&&(e[ri]?"phone":null);if(!(t&&e&&e[ni]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",e[ni]),Xr(this,"displayName",e[ei]||null);var n=null;e[ti]&&(n=new Date(e[ti]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",t)}function Zr(e){try{var t=new ii(e)}catch(Py){t=null}return t}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ti="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(e){Jr.call(this,e),Xr(this,"phoneNumber",e[ri])}function oi(e){var t={},n=e[li],r=e[hi],i=e[fi];if(e=Zr(e[ci]),!i||i!=si&&i!=ui&&!n||i==ui&&!r||i==ai&&!e)throw Error("Invalid checkActionCode response!");i==ui?(t[pi]=n||null,t[gi]=n||null,t[di]=r):(t[pi]=r||null,t[gi]=r||null,t[di]=n||null),t[mi]=e||null,Xr(this,yi,i),Xr(this,vi,Qr(t))}w(ii,Jr),ii.prototype.w=function(){var e=ii.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var ai="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",li="email",ci="mfaInfo",hi="newEmail",fi="requestType",di="email",pi="fromEmail",mi="multiFactorInfo",gi="previousEmail",vi="data",yi="operation";function bi(e){var t=Dn(e=Fn(e),_i)||null,n=Dn(e,wi)||null,r=Dn(e,Ei)||null;if(r=r&&Mi[r]||null,!t||!n||!r)throw new S("argument-error",_i+", "+wi+"and "+Ei+" are required in a valid action code URL.");Yr(this,{apiKey:t,operation:r,code:n,continueUrl:Dn(e,xi)||null,languageCode:Dn(e,Si)||null,tenantId:Dn(e,Ti)||null})}var _i="apiKey",wi="oobCode",xi="continueUrl",Si="languageCode",Ei="mode",Ti="tenantId",Mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:si,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function Ci(e){try{return new bi(e)}catch(t){return null}}function Ii(e){var t=e[Li];if(void 0===t)throw new S("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new S("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Ai];if(n&&"object"==typeof n){t=n[Di];var r=n[Ni];if(n=n[Oi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Ni+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Oi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new S("argument-error",Di+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(t=e[Ri])&&"object"==typeof t){if("string"==typeof(t=t[Fi])&&t.length)this.f=t;else if(void 0!==t)throw new S("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new S("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(t=e[Pi])&&"boolean"!=typeof t)throw new S("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[ki])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new S("argument-error",ki+" property must be a non empty string when specified.");this.i=e||null}var Ai="android",ki="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",Li="url",Ni="installApp",Oi="minimumVersion",Di="packageName",Fi="bundleId";function Ui(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var zi=null;function ji(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!zi){zi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Bi(e){var t=Hi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Vi(e){try{return new Bi(e)}catch(t){return null}}function Hi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=ji(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],qi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Wi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ki(e){for(var t in qi)if(qi[t].fa==e)return qi[t];return null}function Xi(e){var t={};t["facebook.com"]=Zi,t["google.com"]=to,t["github.com"]=eo,t["twitter.com"]=no;var n=e&&e[$i];try{if(n)return t[n]?new t[n](e):new Ji(e);if(void 0!==e[Yi])return new Qi(e)}catch(r){}return null}var Yi="idToken",$i="providerId";function Qi(e){var t=e[$i];if(!t&&e[Yi]){var n=Vi(e[Yi]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Xr(this,"providerId",t),Xr(this,"isNewUser",n)}function Ji(e){Qi.call(this,e),Xr(this,"profile",Qr((e=Dr(e.rawUserInfo||"{}"))||{}))}function Zi(e){if(Ji.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(e){if(Ji.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function to(e){if(Ji.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(e){if(Ji.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",e.screenName||null)}function ro(e){var t=Fn(e),n=Dn(t,"link"),r=Dn(Fn(n),"link");return t=Dn(t,"deep_link_id"),Dn(Fn(t),"link")||t||r||n||e}function io(e,t){if(!e&&!t)throw new S("internal-error","Internal assert: no raw session string available");if(e&&t)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?oo:ao}w(Ji,Qi),w(Zi,Ji),w(eo,Ji),w(to,Ji),w(no,Ji);var oo="enroll",ao="signin";function so(){}function uo(e,t){return e.then((function(e){if(e[Qa]){var n=Vi(e[Qa]);if(!n||t!=n.i)throw new S("user-mismatch");return e}throw new S("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==M+"user-not-found"?new S("user-mismatch"):e}))}function lo(e,t){if(!t)throw new S("internal-error","failed to construct a credential");this.a=t,Xr(this,"providerId",e),Xr(this,"signInMethod",e)}function co(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function ho(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new lo(e.providerId,e.pendingToken)}catch(t){}return null}function fo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Xr(this,"idToken",t.idToken),t.accessToken&&Xr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Xr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Xr(this,"accessToken",t.oauthToken),Xr(this,"secret",t.oauthTokenSecret)}Xr(this,"providerId",e),Xr(this,"signInMethod",n)}function po(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Yn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function mo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new fo(e.providerId,t,e.signInMethod)}catch(Py){}}return null}function go(e,t){this.Qc=t||[],Yr(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Ki(e)||{}).Ja||null,this.pb=null}function vo(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,e,[])}function yo(e){go.call(this,e,Gi),this.a=[]}function bo(){yo.call(this,"facebook.com")}function _o(e){if(!e)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new bo).credential({accessToken:t})}function wo(){yo.call(this,"github.com")}function xo(e){if(!e)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new wo).credential({accessToken:t})}function So(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new So).credential({idToken:n,accessToken:t})}function To(){go.call(this,"twitter.com",Wi)}function Mo(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Co(e,t,n){this.a=e,this.f=t,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Io(e){return e&&e.email&&e.password?new Co(e.email,e.password,e.signInMethod):null}function Ao(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function ko(e,t){if(!(t=Po(t)))throw new S("argument-error","Invalid email link!");return new Co(e,t.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Po(e){return(e=Ci(e=ro(e)))&&e.operation===si?e:null}function Ro(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new S("internal-error");this.a=e,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function Lo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Ro(t)}return null}function No(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Oo(e){try{this.a=e||aC.auth()}catch(t){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Do(e,t){if(!e)throw new S("missing-verification-id");if(!t)throw new S("missing-verification-code");return new Ro({fb:e,eb:t})}function Fo(e){if(e.temporaryProof&&e.phoneNumber)return new Ro({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Eo(o,n);case"facebook.com":return _o(n);case"github.com":return xo(n);case"twitter.com":return Mo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new lo(t,a):new fo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new yo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Uo(e){if(!e.isOAuthProvider)throw new S("invalid-oauth-provider")}function zo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function jo(e){return(e=e||{}).type?new zo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&E(e.error),e.postBody,e.tenantId):null}function Bo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Mt(this.a):Mt(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ka=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},lo.prototype.ka=function(e){return bs(e,co(this))},lo.prototype.b=function(e,t){var n=co(this);return n.idToken=t,_s(e,n)},lo.prototype.c=function(e,t){return uo(ws(e,co(this)),t)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(e){return bs(e,po(this))},fo.prototype.b=function(e,t){var n=po(this);return n.idToken=t,_s(e,n)},fo.prototype.c=function(e,t){return uo(ws(e,po(this)),t)},fo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},go.prototype.Ka=function(e){return this.Jb=fe(e),this},w(vo,go),w(yo,go),yo.prototype.Ca=function(e){return G(this.a,e)||this.a.push(e),this},yo.prototype.Rb=function(){return Y(this.a)},yo.prototype.credential=function(e,t){var n;if(!(n=p(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},w(bo,yo),Xr(bo,"PROVIDER_ID","facebook.com"),Xr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(wo,yo),Xr(wo,"PROVIDER_ID","github.com"),Xr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),w(So,yo),Xr(So,"PROVIDER_ID","google.com"),Xr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),w(To,go),Xr(To,"PROVIDER_ID","twitter.com"),Xr(To,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?nu(e,As,{email:this.a,oobCode:this.f}):nu(e,Qs,{email:this.a,password:this.f})},Co.prototype.b=function(e,t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?nu(e,ks,{idToken:t,email:this.a,oobCode:this.f}):nu(e,Hs,{idToken:t,email:this.a,password:this.f})},Co.prototype.c=function(e,t){return uo(this.ka(e),t)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Ao,{PROVIDER_ID:"password"}),Yr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(e){return e.gb(No(this))},Ro.prototype.b=function(e,t){var n=No(this);return n.idToken=t,nu(e,Zs,n)},Ro.prototype.c=function(e,t){var n=No(this);return n.operation="REAUTH",uo(e=nu(e,eu,n),t)},Ro.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Oo.prototype.gb=function(e,t){var n=this.a.a;return Mt(t.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=p(e)?e.session:null,o=p(e)?e.phoneNumber:e;return(i&&i.type==oo?i.Ha().then((function(e){return function(e,t){return nu(e,Gs,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(t){return function(e,t){return nu(e,qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return nu(e,Bs,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Oo,{PROVIDER_ID:"phone"}),Yr(Oo,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},zo.prototype.T=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Vo,Ho=null;function Wo(e){var t="unauthorized-domain",n=void 0,r=Fn(e);e=r.a,"chrome-extension"==(r=r.c)?n=je("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=je("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",S.call(this,t,n)}function Go(e,t,n){S.call(this,e,n),(e=t||{}).Kb&&Xr(this,"email",e.Kb),e.ea&&Xr(this,"phoneNumber",e.ea),e.credential&&Xr(this,"credential",e.credential),e.$b&&Xr(this,"tenantId",e.$b)}function qo(e){if(e.code){var t=e.code||"";0==t.indexOf(M)&&(t=t.substring(M.length));var n={credential:Fo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new S(t,e.message||void 0);return new Go(t,n,e.message)}return null}function Ko(){}function Xo(e){return e.c||(e.c=e.b())}function Yo(){}function $o(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(bX){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Qo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Zo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ea(e,t,n){this.reset(e,t,n,void 0,void 0)}function ta(e){this.f=e,this.b=this.c=this.a=null}function na(e,t){this.name=e,this.value=t}w(Wo,S),w(Go,S),Go.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&pe(e,t),e},Go.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,w(Yo,Ko),Yo.prototype.a=function(){var e=$o(this);return e?new ActiveXObject(e):new XMLHttpRequest},Yo.prototype.b=function(){var e={};return $o(this)&&(e[0]=!0,e[1]=!0),e},Vo=new Yo,w(Qo,Ko),Qo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Qo.prototype.b=function(){return{}},(e=Jo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Zo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(e,t,n,r,i){delete this.a},na.prototype.toString=function(){return this.name};var ra=new na("SEVERE",1e3),ia=new na("WARNING",900),oa=new na("CONFIG",700),aa=new na("FINE",500);function sa(e){return e.c?e.c:e.a?sa(e.a):(L("Root logger has no level set."),null)}ta.prototype.log=function(e,t,n){if(e.value>=sa(this).value)for(d(t)&&(t=t()),e=new ea(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ua={},la=null;function ca(e){var t;if(la||(la=new ta(""),ua[""]=la,la.c=oa),!(t=ua[e])){t=new ta(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ca(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,ua[e]=t}return t}function ha(e,t){e&&e.log(aa,t,void 0)}function fa(e){this.f=e}function da(e){bn.call(this),this.u=e,this.h=void 0,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ca("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(fa,Ko),fa.prototype.a=function(){return new da(this.f)},fa.prototype.b=function(e){return function(){return e}}({}),w(da,bn);var pa=0;function ma(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function ga(e){e.readyState=4,e.g=null,e.c=null,e.m=null,va(e)}function va(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ya(e){bn.call(this),this.headers=new Cn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ba,this.u=this.S=!1}(e=da.prototype).open=function(e,t){if(this.readyState!=pa)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,va(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ga(this)),this.readyState=pa},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,va(this)),this.a&&(this.readyState=3,va(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ma(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ga(this):va(this),3==this.readyState&&ma(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,ga(this))},e.sc=function(e){this.a&&(this.response=e,ga(this))},e.Va=function(e){var t=this.i;t&&t.log(ia,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&ga(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(ia,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(ia,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),w(ya,bn);var ba="";ya.prototype.b=ca("goog.net.XhrIo");var _a=/^https?$/i,wa=["POST","PUT"];function xa(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Vo.a(),e.C=e.D?Xo(e.D):Xo(Vo),e.a.onreadystatechange=b(e.Wb,e);try{ha(e.b,Pa(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(s){return ha(e.b,Pa(e,"Error opening Xhr: "+s.message)),void Ea(e,s)}t=r||"";var o=new Cn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)B(e,t,void 0);else for(var n=Mn(e),r=Tn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Sa,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.Y()),r=a.FormData&&t instanceof a.FormData,!G(wa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Ia(e),0<e.g&&(e.u=function(e){return Ge&&nt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),ha(e.b,Pa(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=b(e.Ma,e)):e.s=Sn(e.Ma,e.g,e)),ha(e.b,Pa(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(s){ha(e.b,Pa(e,"Send error: "+s.message)),Ea(e,s)}}function Sa(e){return"content-type"==e.toLowerCase()}function Ea(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Ta(e),Ca(e)}function Ta(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Ma(e){if(e.c&&void 0!==o)if(e.C[1]&&4==Aa(e)&&2==ka(e))ha(e.b,Pa(e,"Local request error detected and ignored"));else if(e.i&&4==Aa(e))Sn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Aa(e)){ha(e.b,Pa(e,"Request complete")),e.c=!1;try{var t,n=ka(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.l).match(kn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!_a.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var l=2<Aa(e)?e.a.statusText:""}catch(c){ha(e.b,"Can not get status: "+c.message),l=""}e.h=l+" ["+ka(e)+"]",Ta(e)}}finally{Ca(e)}}}function Ca(e,t){if(e.a){Ia(e);var n=e.a,r=e.C[0]?c:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(bX){(e=e.b)&&e.log(ra,"Problem encountered resetting onreadystatechange: "+bX.message,void 0)}}}function Ia(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(a.clearTimeout(e.s),e.s=null)}function Aa(e){return e.a?e.a.readyState:0}function ka(e){try{return 2<Aa(e)?e.a.status:-1}catch(t){return-1}}function Pa(e,t){return t+" ["+e.P+" "+e.l+" "+ka(e)+"]"}function Ra(e){var t=Ha;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(e,t,n){e.a=!0,e.c=n,e.f=!t,Fa(e)}function Na(e){if(e.a){if(!e.v)throw new Ua(e);e.v=!1}}function Oa(e,t,n,r){e.g.push([t,n,r]),e.a&&Fa(e)}function Da(e){return W(e.g,(function(e){return d(e[1])}))}function Fa(e){if(e.h&&e.a&&Da(e)){var t=e.h,n=Ba[t];n&&(a.clearTimeout(n.a),delete Ba[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(k(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(l){t=l,e.f=!0,Da(e)||(n=!0)}}e.c=t,r&&(u=b(e.m,e,!0),r=b(e.m,e,!1),t instanceof Ra?(Oa(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new ja(t),Ba[t.a]=t,e.h=t.a)}function Ua(){P.call(this)}function za(){P.call(this)}function ja(e){this.a=a.setTimeout(b(this.c,this),0),this.b=e}(e=ya.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ha(this.b,Pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ha(this.b,Pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ca(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ca(this,!0)),ya.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Ma(this):this.Jc())},e.Jc=function(){Ma(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ba:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ra,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ha(this.b,"Can not get response: "+t.message),null}},Ra.prototype.cancel=function(e){if(this.a)this.c instanceof Ra&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new za(this),Na(this),La(this,!1,e))}},Ra.prototype.m=function(e,t){this.i=!1,La(this,e,t)},Ra.prototype.then=function(e,t,n){var r,i,o=new bt((function(e,t){r=e,i=t}));return Oa(this,r,(function(e){e instanceof za?o.cancel():i(e)})),o.then(e,t,n)},Ra.prototype.$goog_Thenable=!0,w(Ua,P),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",w(za,P),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",ja.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Va(e){var t,n=document,r=Se(e).toString(),i=dt(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ra(o);return t=window.setTimeout((function(){Wa(i,!0);var e=new Ka(qa,"Timeout reached for loading script "+r);Na(s),La(s,!1,e)}),5e3),o.Ma=t,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,!1,t),Na(s),La(s,!0,null))},i.onerror=function(){Wa(i,!0,t);var e=new Ka(Ga,"Error while loading script "+r);Na(s),La(s,!1,e)},pe(o={},{type:"text/javascript",charset:"UTF-8"}),st(i,o),function(e,t){me(e,"HTMLScriptElement"),e.src=Se(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=a?t=l(t.document):(null===u&&(u=l(a.document)),t=u),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function Ha(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Wa(e,!0,this.Ma)}}function Wa(e,t,n){null!=n&&a.clearTimeout(n),e.onload=c,e.onerror=c,e.onreadystatechange=c,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ga=0,qa=1;function Ka(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),P.call(this,n),this.code=e}function Xa(e){this.f=e}function Ya(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ja,this.g=fe(e.secureTokenHeaders||Za),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||es,this.a=fe(e.firebaseHeaders||ts),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&aC.INTERNAL.node&&aC.INTERNAL.node.XMLHttpRequest)&&!br())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new fa(self):wr()?this.f=new Xa(n):this.f=new Qo,this.b=null}w(Ka,P),w(Xa,Ko),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var $a,Qa="idToken",Ja=new jr(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},es=new jr(3e4,6e4),ts={"Content-Type":"application/json"};function ns(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function rs(e,t){t&&(e.l=is("https://securetoken.googleapis.com/v1/token",t),e.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=is("https://identitytoolkit.googleapis.com/v2/",t))}function is(e,t){return e=Fn(e),t=Fn(t.url),e.f=e.a+e.f,Rn(e,t.c),e.a=t.a,Ln(e,t.g),e.toString()}function os(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function as(e,t,n,r,i,o,s){(function(){var e=Cr();return!((e=Er(e)!=Sr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Ge&&it&&!(9<it))})()||br()?e=b(e.u,e):($a||($a=new bt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{a[us]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Oa(e,null,t,void 0)}(Va(Ee(ss,{onload:us})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=b(e.s,e)),e(t,n,r,i,o,s)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(e,t,n,r,i,o){if(br()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ya(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ha(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),wn(s,"ready",(function(){u&&clearTimeout(u),Ht(this)})),wn(s,"timeout",(function(){u&&clearTimeout(u),Ht(this),t&&t(null)})),xa(s,e,n,r,i)};var ss=new ge(_e,"https://apis.google.com/js/client.js?onload=%{onload}"),us="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(e,t,n,r,i,o,a){var s=Fn(t+n);On(s,"key",e.c),a&&On(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&On(s,l,i[l]);return new bt((function(t,n){as(e,s.toString(),(function(e){e?e.error?n(iu(e,o||{})):t(e):n(new S("network-request-failed"))}),r,u?void 0:tr(Or(i)),e.a,e.v.get())}))}function cs(e){if("string"!=typeof(e=e.email)||!mr.test(e))throw new S("invalid-email")}function hs(e){"email"in e&&cs(e)}function fs(e){if(!e[Qa]){if(e.mfaPendingCredential)throw new S("multi-factor-auth-required",null,fe(e));throw new S("internal-error")}}function ds(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new S("internal-error")}else{if(!e.sessionInfo)throw new S("missing-verification-id");if(!e.code)throw new S("missing-verification-code")}}Ya.prototype.s=function(e,t,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.Ab=function(){return nu(this,Ws,{})},Ya.prototype.Cb=function(e,t){return nu(this,Vs,{idToken:e,email:t})},Ya.prototype.Db=function(e,t){return nu(this,Hs,{idToken:e,password:t})};var ps={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(e){if(!e.phoneVerificationInfo)throw new S("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new S("missing-verification-code")}function gs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new S("internal-error")}function vs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(Qn(e=new Kn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ys(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=qo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=qo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=qo(e)):e.errorMessage&&(t=ru(e.errorMessage)),t)throw t;fs(e)}function bs(e,t){return t.returnIdpCredential=!0,nu(e,Ks,t)}function _s(e,t){return t.returnIdpCredential=!0,nu(e,Ys,t)}function ws(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,nu(e,Xs,t)}function xs(e){if(!e.oobCode)throw new S("invalid-action-code")}(e=Ya.prototype).Eb=function(e,t){var n={idToken:e},r=[];return ce(ps,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,Vs,n)},e.wb=function(e,t){return pe(e={requestType:"PASSWORD_RESET",email:e},t),nu(this,Fs,e)},e.xb=function(e,t){return pe(e={requestType:"EMAIL_SIGNIN",email:e},t),nu(this,Ns,e)},e.vb=function(e,t){return pe(e={requestType:"VERIFY_EMAIL",idToken:e},t),nu(this,Os,e)},e.Fb=function(e,t,n){return pe(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),nu(this,Ds,e)},e.gb=function(e){return nu(this,Js,e)},e.ob=function(e,t){return nu(this,js,{oobCode:e,newPassword:t})},e.Sa=function(e){return nu(this,Es,{oobCode:e})},e.kb=function(e){return nu(this,Ss,{oobCode:e})};var Ss={endpoint:"setAccountInfo",A:xs,Z:"email",B:!0},Es={endpoint:"resetPassword",A:xs,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new S("internal-error")},B:!0},Ts={endpoint:"signupNewUser",A:function(e){if(cs(e),!e.password)throw new S("weak-password")},G:fs,V:!0,B:!0},Ms={endpoint:"createAuthUri",B:!0},Cs={endpoint:"deleteAccount",O:["idToken"]},Is={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new S("internal-error")}},As={endpoint:"emailLinkSignin",O:["email","oobCode"],A:cs,G:fs,V:!0,B:!0},ks={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:cs,G:fs,V:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ms,G:fs,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:fs,B:!0,Na:!0},Ls={endpoint:"getAccountInfo"},Ns={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new S("internal-error");cs(e)},Z:"email",B:!0},Os={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new S("internal-error")},Z:"email",B:!0},Ds={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new S("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new S("internal-error");cs(e)},Z:"email",B:!0},Us={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new S("internal-error")}},js={endpoint:"resetPassword",A:xs,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Vs={endpoint:"setAccountInfo",O:["idToken"],A:hs,V:!0},Hs={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(hs(e),!e.password)throw new S("weak-password")},G:fs,V:!0},Ws={endpoint:"signupNewUser",G:fs,V:!0,B:!0},Gs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new S("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},qs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ks={endpoint:"verifyAssertion",A:gs,Za:vs,G:ys,V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:gs,Za:vs,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new S("user-not-found");if(e.errorMessage)throw ru(e.errorMessage);fs(e)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(e){if(gs(e),!e.idToken)throw new S("internal-error")},Za:vs,G:ys,V:!0},$s={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new S("invalid-custom-token")},G:fs,V:!0,B:!0},Qs={endpoint:"verifyPassword",A:function(e){if(cs(e),!e.password)throw new S("wrong-password")},G:fs,V:!0,B:!0},Js={endpoint:"verifyPhoneNumber",A:ds,G:fs,B:!0},Zs={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new S("internal-error");ds(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",qo(e);fs(e)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:fs,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Qa]^!!e.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function nu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.O))return Ct(new S("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return Mt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),ls(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new S("internal-error");return r[t.Z]}))}function ru(e){return iu({error:{errors:[{message:e}],code:400,message:e}})}function iu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",pe(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],t);return!t&&e&&(t=Nr(e)),new S("internal-error",t)}function ou(e){this.b=e,this.a=null,this.sb=function(e){return(lu||(lu=new bt((function(e,t){function n(){zr(),Ir("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){zr(),t(Error("Network Error"))},timeout:su.get()})}if(Ir("gapi.iframes.Iframe"))e();else if(Ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ir("gapi.load")?n():t(Error("Network Error"))},Mt(Va(r=Ee(au,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw lu=null,e})))).then((function(){return new bt((function(t,n){Ir("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new ge(_e,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new jr(3e4,6e4),uu=new jr(5e3,15e3),lu=null;function cu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Un((e=Fn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Un("https",this.l,null,"/__/auth/iframe"),this.a=e,On(this.a,"apiKey",this.h),On(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(e){try{return aC.app(e).auth().Ga()}catch(t){return[]}}function du(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pu(e){var t=ur();return function(e){return nu(e,Us,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Fn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Fn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:pr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Wo(ur())}))}function mu(e){return e.m||(e.m=gr().then((function(){if(!e.u){var t=e.c,n=e.i,r=fu(e.b),i=new cu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=Y(r||[]),e.u=i.toString()}e.v=new ou(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=jo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Mt(n)}return n.status="ERROR",Mt(n)}))}(e)}))),e.m}function gu(e){return e.l||(e.C=e.c?Mr(e.c,fu(e.b)):null,e.l=new Ya(e.g,A(e.i),e.C),e.f&&rs(e.l,e.f)),e.l}function vu(e,t,n,r,i,o,a,s,u,l,c,h){return(e=new hu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=fe(u||null),e.f=l,e.zb(c).toString()}function yu(e){if(this.a=e||aC.INTERNAL.reactNative&&aC.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(e){this.b=e,this.a={},this.f=b(this.c,this)}cu.prototype.toString=function(){return this.f?On(this.a,"v",this.f):$n(this.a.b,"v"),this.b?On(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?On(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},hu.prototype.zb=function(e){return this.h=e,this},hu.prototype.toString=function(){if(this.v){var e=Fn(this.v.url);e=Un(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Un("https",this.u,null,"/__/auth/handler");if(On(e,"apiKey",this.s),On(e,"appName",this.c),On(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=aC.app(this.c).auth().la()}catch(s){n=null}for(var r in t.pb=n,On(e,"providerId",this.a.providerId),t=Or((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=fe(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),he(t)||On(e,"customParameters",Nr(t))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&On(e,"scopes",n.join(","))),this.l?On(e,"redirectUrl",this.l):$n(e.b,"redirectUrl"),this.g?On(e,"eventId",this.g):$n(e.b,"eventId"),this.i?On(e,"v",this.i):$n(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Dn(e,a)&&On(e,a,this.b[a]);return this.h?On(e,"tid",this.h):$n(e.b,"tid"),this.f?On(e,"eid",this.f):$n(e.b,"eid"),(a=fu(this.c)).length&&On(e,"fw",a.join(",")),e.toString()},(e=du.prototype).Pb=function(e,t,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return mu(e).then((function(){return function(e,t){return e.sb.then((function(){return new bt((function(n){e.a.send(t.type,t,n,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&fr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new bt((function(t){return function n(){En(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return En(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Cr();return!Lr(e)&&!Ur(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return Ct(new S("popup-blocked"));if(a&&!Lr())return this.ma().o((function(t){fr(e),i(t)})),r(),Mt();this.a||(this.a=pu(gu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw fr(e),i(t),t}));return r(),t})).then((function(){(Uo(n),a)||lr(vu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=pu(gu(this)));var i=this;return this.a.then((function(){Uo(t),lr(vu(i.s,i.g,i.b,e,t,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return mu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new S("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){K(this.h,(function(t){return t==e}))},(e=yu.prototype).get=function(e){return Mt(this.a.getItem(e)).then((function(e){return e&&Dr(e)}))},e.set=function(e,t){return Mt(this.a.setItem(e,Nr(t)))},e.U=function(e){return Mt(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var _u,wu=[];function xu(e,t,n){he(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Su(e){this.a=e}function Eu(e){this.c=e,this.b=!1,this.a=[]}function Tu(e,t,n,r){var i,o,a,s,u=n||{},l=null;if(e.b)return Ct(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new bt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(l),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Mu(e,l),t})).o((function(t){throw Mu(e,l),t}))}function Mu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(e.a,(function(e){return e==t}))}}function Cu(){if(!Pu())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;br()&&self?(this.v=function(){var e=br()?self:null;if(B(wu,(function(n){n.b==e&&(t=n)})),!t){var t=new bu(e);wu.push(t)}return t}(),xu(this.v,"keyChanged",(function(t,n){return Du(e).then((function(t){return 0<t.length&&B(e.a,(function(e){e(t)})),{keyProcessed:G(t,n.key)}}))})),xu(this.v,"ping",(function(){return Mt(["keyChanged"])}))):function(){var e=a.navigator;return e&&e.serviceWorker?Mt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Mt(null)}().then((function(t){(e.h=t)&&(e.g=new Eu(new Su(t)),Tu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&G(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Iu(e){return new bt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new bt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Iu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Au(e){return e.i||(e.i=Iu(e)),e.i}function ku(e,t){var n=0;return new bt((function r(i,o){Au(e).then(t).then(i).o((function(t){if(!(3<++n))return Au(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Pu(){try{return!!a.indexedDB}catch(ct){return!1}}function Ru(e){return e.objectStore("firebaseLocalStorage")}function Lu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Nu(e){return new bt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Ou(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Tu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Mt()}function Du(e){return Au(e).then((function(e){var t=Ru(Lu(e,!1));return t.getAll?Nu(t.getAll()):new bt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=cr(e.c,n),e.c=n}return r}))}function Fu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Uu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Mt().then((function(){if(Pu()){var e=Fr(),r="__sak"+e;return _u||(_u=new Cu),(n=_u).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){B(t.a,(function(t){t(e)}))})),e}))}function zu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var e="Node"==_r();if(!(e=Bu()||e&&aC.INTERNAL.node&&aC.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Bu()||aC.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var e=a.localStorage,t=Fr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(Py){return null}}function Vu(){this.type="nullStorage"}function Hu(){if(!function(){var e="Node"==_r();if(!(e=Wu()||e&&aC.INTERNAL.node&&aC.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Wu()||aC.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var e=a.sessionStorage,t=Fr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(Py){return null}}function Gu(){var e={};e.Browser=Xu,e.Node=Yu,e.ReactNative=$u,e.Worker=Qu,this.a=e[_r()]}bu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];B(r,(function(t){i.push(Mt().then((function(){return t(e.origin,e.data.data)})))})),At(i).then((function(r){var i=[];B(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),B(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Su.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Eu.prototype.close=function(){for(;0<this.a.length;)Mu(this,this.a[0]);this.b=!0},(e=Cu.prototype).set=function(e,t){var n=this,r=!1;return ku(this,(function(t){return Nu((t=Ru(Lu(t,!0))).get(e))})).then((function(i){return ku(n,(function(o){if(o=Ru(Lu(o,!0)),i)return i.value=t,Nu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Nu(o.add(a))}))})).then((function(){return n.c[e]=t,Ou(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return ku(this,(function(t){return Nu(Ru(Lu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return ku(this,(function(r){return n=!0,t.b++,Nu(Ru(Lu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Ou(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Du(e).then((function(t){0<t.length&&B(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Fu(e),t()}(this),this.a.push(e)},e.ia=function(e){K(this.a,(function(t){return t==e})),0==this.a.length&&Fu(this)},(e=Uu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){K(this.a,(function(t){return t==e}))},(e=zu.prototype).get=function(e){return Mt(this.a[e])},e.set=function(e,t){return this.a[e]=t,Mt()},e.U=function(e){return delete this.a[e],Mt()},e.ca=function(){},e.ia=function(){},(e=ju.prototype).get=function(e){var t=this;return Mt().then((function(){return Dr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Mt().then((function(){var r=Nr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},e.ca=function(e){a.window&&sn(a.window,"storage",e)},e.ia=function(e){a.window&&cn(a.window,"storage",e)},(e=Vu.prototype).get=function(){return Mt(null)},e.set=function(){return Mt()},e.U=function(){return Mt()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(e){var t=this;return Mt().then((function(){return Dr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Mt().then((function(){var r=Nr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var qu,Ku,Xu={F:ju,cb:Hu},Yu={F:ju,cb:Hu},$u={F:yu,cb:Vu},Qu={F:ju,cb:Vu},Ju={rd:"local",NONE:"none",td:"session"};function Zu(){var e=!(Ur(Cr())||!yr()),t=Lr(),n=Ar();this.m=e,this.h=t,this.l=n,this.a={},qu||(qu=new Gu),e=qu;try{this.g=!sr()&&Hr()||!a.indexedDB?new e.a.F:new Uu(br()?new zu:new e.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=b(this.Zb,this),this.b={}}function el(){return Ku||(Ku=new Zu),Ku}function tl(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function nl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function rl(e,t,n){return n=nl(t,n),"local"==t.F&&(e.b[n]=null),tl(e,t.F).U(n)}function il(e){e.c&&(clearInterval(e.c),e.c=null)}function ol(e){this.a=e,this.b=el()}(e=Zu.prototype).get=function(e,t){return tl(this,e.F).get(nl(e,t))},e.set=function(e,t,n){var r=nl(e,n),i=this,o=tl(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=nl(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),he(this.a)&&(tl(this,"local").ca(this.f),this.h||(sr()||!Hr())&&a.indexedDB||!this.l||function(e){il(e),e.c=setInterval((function(){for(var t in e.a){var n=a.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Yt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=nl(e,t),this.a[e]&&(K(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),he(this.a)&&(tl(this,"local").ia(this.f),il(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?tl(this,"local").ia(this.f):il(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.nb(t))},Ge&&it&&10==it&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else B(e,b(this.nb,this))},e.nb=function(e){this.a[e]&&B(this.a[e],(function(e){e()}))};var al,sl={name:"authEvent",F:"local"};function ul(){this.a=el()}function ll(e,t){this.b=cl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===al&&(al=a.Int32Array?new Int32Array(vl):vl),this.reset()}w(ll,(function(){this.b=-1}));for(var cl=64,hl=cl-1,fl=[],dl=0;dl<hl;dl++)fl[dl]=0;var pl=X(128,fl);function ml(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|al[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function gl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(ml(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(ml(e),i=0)}}e.c=i,e.g+=n}ll.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var vl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yl(){ll.call(this,8,bl)}w(yl,ll);var bl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _l(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new ul,this.g=new ol(this.h),this.f=null,this.b=[],this.a=this.c=null}function wl(e){return new S("invalid-cordova-configuration",e)}function xl(e){var t=new yl;gl(t,e),e=[];var n=8*t.g;56>t.c?gl(t,pl,56-t.c):gl(t,pl,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(ml(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return H(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Sl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function El(e){return e.f||(e.f=e.ma().then((function(){return new bt((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Tl(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ro(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Dr(Dn(o=Fn(i),"firebaseError")||null))?E(o):null)?new zo(r.c,r.b,null,null,o,null,r.T()):new zo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Sl(e,i)}))}var n=new zo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=En(500).then((function(){return Tl(e).then((function(){r||Sl(e,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Ir("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},Ho||(Ho=new Bo),function(e){var t=Ho;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=Ir("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Tl(e){var t=null;return function(e){return e.b.get(sl,e.a).then((function(e){return jo(e)}))}(e.g).then((function(n){return t=n,rl((n=e.g).b,sl,n.a)})).then((function(){return t}))}function Ml(e){this.a=e,this.b=el()}(e=_l.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(vr(void 0)?gr().then((function(){return new bt((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Ct(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ir("universalLinks.subscribe",a))throw wl("cordova-universal-links-plugin-fix is not installed");if(void 0===Ir("BuildInfo.packageName",a))throw wl("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ir("cordova.plugins.browsertab.openUrl",a))throw wl("cordova-plugin-browsertab is not installed");if("function"!=typeof Ir("cordova.InAppBrowser.open",a))throw wl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},e.Pb=function(e,t){return t(new S("operation-not-supported-in-this-environment")),Mt()},e.Nb=function(){return Ct(new S("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return Ct(new S("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,l=null,c=null;return this.c=Mt().then((function(){return Uo(t),El(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new zo(t,r,null,o,new S("no-auth-event"),null,i),u=Ir("BuildInfo.packageName",a);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var l=Ir("BuildInfo.displayName",a),c={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Ct(new S("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=xl(o),c.sessionId=o;var h=vu(e.v,e.i,e.l,t,n,null,r,e.m,c,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(sl,s.w(),t)})).then((function(){var t=Ir("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new S("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Ir("cordova.plugins.browsertab.openUrl",a)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ir("cordova.InAppBrowser.open",a)))throw new S("invalid-cordova-configuration");t=Cr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new bt((function(e,t){u=function(){var t=Ir("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){s||(s=En(2e3).then((function(){t(new S("redirect-cancelled-by-user"))})))},c=function(){Br()&&l()},o.addEventListener("resume",l,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return Tl(i).then((function(){throw e}))}))})).oa((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),El(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new zo("unknown",null,null,null,new S("no-auth-event")),e(t))}))},e.Ta=function(e){K(this.b,(function(t){return t==e}))};var Cl={name:"pendingRedirect",F:"session"};function Il(e){return rl(e.b,Cl,e.a)}function Al(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Wl,this.C=new Yl,this.g=new Ml(Vl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=kl(this.D,this.v,this.m,T,this.J)}function kl(e,t,n,r,i){var o=aC.SDK_VERSION||null;return vr()?new _l(e,t,n,o,r,i):new du(e,t,n,o,r,i)}function Pl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Rl(e){e.a.Yb()&&Pl(e).o((function(t){var n=new zo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Ul(t)&&e.s(n)})),e.a.Ub()||Gl(e.b)}function Ll(e,t){G(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Cl,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Il(e.g).then((function(){Pl(e).o((function(t){var n=new zo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Ul(t)&&e.s(n)}))})):Rl(e)})).o((function(){Rl(e)}))}function Nl(e,t){K(e.h,(function(e){return e==t}))}Al.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=kl(this.D,this.v,this.m,null,this.J),this.i={}},Al.prototype.s=function(e){if(!e)throw new S("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Gl(this.b),t};var Ol=new jr(2e3,1e4),Dl=new jr(3e4,6e4);function Fl(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Ul(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function zl(e,t,n,r,i){var o;return function(e){return e.b.set(Cl,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Ul(t))throw new S("operation-not-supported-in-this-environment");return o=t,Il(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new bt((function(){})):Il(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function jl(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Ol.get())}Al.prototype.ra=function(){return this.b.ra()};var Bl={};function Vl(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Hl(e,t,n,r){var i=Vl(t,n,r);return Bl[i]||(Bl[i]=new Al(e,t,n,r)),Bl[i]}function Wl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gl(e){e.g||(e.g=!0,Xl(e,!1,null,null))}function ql(e){e.g&&!e.i&&Xl(e,!1,null,null)}function Kl(e,t){if(e.b=function(){return Mt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Xl(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Ct(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Kl(e,n):Kl(e,{user:null}),e.f=[],e.c=[]}function Yl(){}function $l(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function Ql(e,t){this.a=t,Xr(this,"verificationId",e)}function Jl(e,t,n,r){return new Oo(e).gb(t,n).then((function(e){return new Ql(e,r)}))}function Zl(e){var t=Hi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:e,expirationTime:Vr(1e3*t.exp),authTime:Vr(1e3*t.auth_time),issuedAtTime:Vr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ec(e,t,n){var r=t&&t[nc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=fe(t),this.g=n,this.c=new io(null,r),this.b=[];var i=this;B(t[tc]||[],(function(e){(e=Zr(e))&&i.b.push(e)})),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Wl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wl.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Xl(this,!0,null,e.a),Mt()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Xl(e,s,t,null)})).o((function(t){Xl(e,s,null,t)}))}(this,e,t):Ct(new S("invalid-auth-event")):(Xl(this,!1,null,null),Mt())}else Ct(new S("invalid-auth-event"))},Wl.prototype.ra=function(){var e=this;return new bt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new S("timeout");e.a&&e.a.cancel(),e.a=En(Dl.get()).then((function(){e.b||(e.g=!0,Xl(e,!0,null,t))}))}(e))}))},Yl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Mt()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Ct(new S("invalid-auth-event"))}else Ct(new S("invalid-auth-event"))},Ql.prototype.confirm=function(e){return e=Do(this.verificationId,e),this.a(e)};var tc="mfaInfo",nc="mfaPendingCredential";function rc(e,t,n,r){S.call(this,"multi-factor-auth-required",r,t),this.b=new ec(e,t,n),Xr(this,"resolver",this.b)}function ic(e,t,n){if(e&&p(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new rc(t,e.serverResponse,n,e.message)}catch(r){}return null}function oc(){}function ac(e){Xr(this,"factorId",e.fa),this.a=e}function sc(e){if(ac.call(this,e),this.a.fa!=Oo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uc(e,t){for(var n in Xt.call(this,e),t)this[n]=t[n]}function lc(e,t){this.a=e,this.b=[],this.c=b(this.yc,this),sn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&B(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ni]=e.uid),e.displayName&&(r[ei]=e.displayName),e.enrollmentTime&&(r[ti]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ri]=e.phoneNumber);try{t=new ii(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),cc(this,n)}function cc(e,t){e.b=t,Xr(e,"enrolledFactors",t)}function hc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fc(e,t){e.stop(),e.b=En(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=a.document,t=null;return Br()||!e?Mt():new bt((function(n){t=function(){Br()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){fc(e,!0)})).o((function(t){e.i(t)&&fc(e,!1)}))}function dc(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function pc(e,t){void 0===t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function mc(e,t){e.b=Vi(t[Qa]||""),e.a=t.refreshToken,pc(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function gc(e,t){return function(e,t){return new bt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?as(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(iu(e)):e.access_token&&e.refresh_token?n(e):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Yn(t).toString(),e.g,e.m.get()):r(new S("internal-error"))}))}(e.f,t).then((function(t){return e.b=Vi(t.access_token),e.a=t.refresh_token,pc(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function vc(e,t){this.a=e||null,this.b=t||null,Yr(this,{lastSignInTime:Vr(t||null),creationTime:Vr(e||null)})}function yc(e,t,n,r,i,o){Yr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function bc(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=aC.SDK_VERSION?Mr(aC.SDK_VERSION):null;this.a=new Ya(this.l,A(T),r),(this.u=e.emulatorConfig||null)&&rs(this.a,this.u),this.h=new dc(this.a),Ic(this,t[Qa]),mc(this.h,t),Xr(this,"refreshToken",this.h.a),Pc(this,n||{}),bn.call(this),this.P=!1,this.s&&kr()&&(this.b=Hl(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new hc((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){_c(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Sc(i,e.f)},this.ja=null,this.S=new lc(this,n),Xr(this,"multiFactor",this.S)}function _c(e,t){e.u=t,rs(e.a,t),e.b&&(t=e.b,e.b=Hl(e.s,e.l,e.m,e.u),e.P&&(Nl(t,e),Ll(e.b,e)))}function wc(e,t){e.qa&&cn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&sn(t,"languageCodeChanged",e.Pa)}function xc(e,t){e.$&&cn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&sn(t,"emulatorConfigChanged",e.Ba)}function Sc(e,t){e.aa=t,os(e.a,aC.SDK_VERSION?Mr(aC.SDK_VERSION,e.aa):null)}function Ec(e,t){e.ja&&cn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&sn(t,"frameworkChanged",e.Oa)}function Tc(e){try{return aC.app(e.m).auth()}catch(t){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Mc(e){e.J||e.D.b||(e.D.start(),cn(e,"tokenChanged",e.ba),sn(e,"tokenChanged",e.ba))}function Cc(e){cn(e,"tokenChanged",e.ba),e.D.stop()}function Ic(e,t){e.Aa=t,Xr(e,"_lat",t)}function Ac(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return At(t).then((function(){return e}))}function kc(e){e.b&&!e.P&&(e.P=!0,Ll(e.b,e))}function Pc(e,t){Yr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new vc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Rc(){}function Lc(e){return Mt().then((function(){if(e.J)throw new S("app-deleted")}))}function Nc(e){return H(e.providerData,(function(e){return e.providerId}))}function Oc(e,t){t&&(Dc(e,t.providerId),e.providerData.push(t))}function Dc(e,t){K(e.providerData,(function(e){return e.providerId==t}))}function Fc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Xr(e,t,n)}function Uc(e,t){e!=t&&(Yr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Xr(e,"metadata",function(e){return new vc(e.a,e.b)}(t.metadata)):Xr(e,"metadata",new vc),B(t.providerData,(function(t){Oc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Xr(e,"refreshToken",e.h.a),cc(e.S,t.S.b))}function zc(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return nu(e.a,Ls,{idToken:t}).then(b(e.Kc,e))}(e,t).then((function(){return n||Fc(e,"isAnonymous",!1),t}))}))}function jc(e,t){t[Qa]&&e.Aa!=t[Qa]&&(mc(e.h,t),e.dispatchEvent(new uc("tokenChanged")),Ic(e,t[Qa]),Fc(e,"refreshToken",e.h.a))}function Bc(e,t){return zc(e).then((function(){if(G(Nc(e),t))return Ac(e).then((function(){throw new S("provider-already-linked")}))}))}function Vc(e,t,n){return $r({user:e,credential:Fo(t),additionalUserInfo:t=Xi(t),operationType:n})}function Hc(e,t){return jc(e,t),e.reload().then((function(){return e}))}function Wc(e,t,n,r,i){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));if(e.i&&!i)return Ct(e.i);var o=Ki(n.providerId),a=Fr(e.uid+":::"),s=null;(!Lr()||yr())&&e.s&&n.isOAuthProvider&&(s=vu(e.s,e.l,e.m,t,n,null,a,aC.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=dr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(qc(e),!i)return e.I().then((function(){}))})).then((function(){return Fl(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new bt((function(n,r){e.na(t,null,new S("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=jl(e.b,e,t,u,a)}))})).then((function(e){return u&&fr(u),e?$r(e):null})).o((function(e){throw u&&fr(u),e})),Kc(e,r,i)}function Gc(e,t,n,r,i){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));if(e.i&&!i)return Ct(e.i);var o=null,a=Fr(e.uid+":::");return r=r().then((function(){if(qc(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Ac(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set($c,e.w(),t.a)),t})).then((function(){return zl(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Qc(e.ha);throw o})).then((function(){if(o)throw o})),Kc(e,r,i)}function qc(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Kc(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Ct(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new uc("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){q(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ic(t.w(),Tc(e),b(e.jc,e))),n||t}))}function Xc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Qa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bc(t,n,e);return e.providerData&&B(e.providerData,(function(e){e&&Oc(i,$r(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Yc(e){this.a=e,this.b=el()}ec.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=fe(t.f);return delete n[tc],delete n[nc],pe(n,e),t.g(n)}))},w(rc,S),oc.prototype.tb=function(e,t,n){return t.type==oo?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),pe(n,{phoneVerificationInfo:No(e.a)}),nu(t,Ps,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return pe(n={mfaPendingCredential:n},{phoneVerificationInfo:No(e.a)}),nu(t,Rs,n)}))}(this,e,t)},w(ac,oc),w(sc,ac),w(uc,Xt),(e=lc.prototype).yc=function(e){cc(this,function(e){var t=[];return B(e.mfaInfo||[],(function(e){(e=Zr(e))&&t.push(e)})),t}(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new io(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return jc(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return nu(r,tu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=V(t.b,(function(e){return e.uid!=n}));return cc(t,r),jc(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(e){return e.w()}))}}},hc.prototype.start=function(){this.a=this.c,fc(this,!0)},hc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ct(new S("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?gc(this,{grant_type:"refresh_token",refresh_token:this.a}):Mt(null):Mt({accessToken:this.b.toString(),refreshToken:this.a})},vc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(bc,bn),bc.prototype.xa=function(e){this.za=e,ns(this.a,e)},bc.prototype.la=function(){return this.za},bc.prototype.Ga=function(){return Y(this.aa)},bc.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Xr(bc.prototype,"providerId","firebase"),(e=bc.prototype).reload=function(){var e=this;return Kc(this,Lc(this).then((function(){return zc(e).then((function(){return Ac(e)})).then(Rc)})))},e.oc=function(e){return this.I(e).then((function(e){return new Zl(e)}))},e.I=function(e){var t=this;return Kc(this,Lc(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new S("internal-error");return e.accessToken!=t.Aa&&(Ic(t,e.accessToken),t.dispatchEvent(new uc("tokenChanged"))),Fc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new S("internal-error");Pc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?H(e,(function(e){return new yc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Oc(this,t[n]);Fc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uc("userReloaded",{hd:e}))},e.Lc=function(e){return qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return Kc(this,e.c(this.a,this.uid).then((function(e){return jc(t,e),n=Vc(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return Kc(this,Bc(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Vc(t,e,"link"),Hc(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return Kc(this,Bc(this,"phone").then((function(){return Jl(Tc(n),e,t,b(n.rb,n))})))},e.Mc=function(e,t){var n=this;return Kc(this,Mt().then((function(){return Jl(Tc(n),e,t,b(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return Kc(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return jc(t,e),t.reload()})))},e.ed=function(e){var t=this;return Kc(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return jc(t,e),t.reload()})))},e.Db=function(e){var t=this;return Kc(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return jc(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Lc(this);var t=this;return Kc(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return jc(t,e),Fc(t,"displayName",e.displayName||null),Fc(t,"photoURL",e.photoUrl||null),B(t.providerData,(function(e){"password"===e.providerId&&(Xr(e,"displayName",t.displayName),Xr(e,"photoURL",t.photoURL))})),Ac(t)})).then(Rc))},e.cd=function(e){var t=this;return Kc(this,zc(this).then((function(n){return G(Nc(t),e)?function(e,t,n){return nu(e,Is,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return B(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),B(Nc(t),(function(e){n[e]||Dc(t,e)})),n[Oo.PROVIDER_ID]||Xr(t,"phoneNumber",null),Ac(t)})):Ac(t).then((function(){throw new S("no-such-provider")}))})))},e.delete=function(){var e=this;return Kc(this,this.I().then((function(t){return nu(e.a,Cs,{idToken:t})})).then((function(){e.dispatchEvent(new uc("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");wc(e,null),xc(e,null),Ec(e,null),e.N=[],e.J=!0,Cc(e),Xr(e,"refreshToken",null),e.b&&Nl(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?b(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?b(this.Mb,this):null},e.Ec=function(e){var t=this;return Wc(this,"linkViaPopup",e,(function(){return Bc(t,e.providerId).then((function(){return Ac(t)}))}),!1)},e.Nc=function(e){return Wc(this,"reauthViaPopup",e,(function(){return Mt()}),!0)},e.Fc=function(e){var t=this;return Gc(this,"linkViaRedirect",e,(function(){return Bc(t,e.providerId)}),!1)},e.Oc=function(e){return Gc(this,"reauthViaRedirect",e,(function(){return Mt()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kc(this,this.I().then((function(n){return _s(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Vc(i,e,"link"),Hc(i,e)})).then((function(){return o})))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kc(this,Mt().then((function(){return uo(ws(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Vc(i,e,"reauthenticate"),jc(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return Kc(this,this.I().then((function(t){return n=t,void 0===e||he(e)?{}:Ui(new Ii(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return Kc(this,this.I().then((function(e){return r=e,void 0===t||he(t)?{}:Ui(new Ii(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return Kc(this,e=uo(Mt(e),n.uid).then((function(e){return t=Vc(n,e,"reauthenticate"),jc(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&pe(e,this.metadata.w()),B(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),pe(e,this.S.w()),e};var $c={name:"redirectUser",F:"session"};function Qc(e){return rl(e.b,$c,e.a)}function Jc(e){this.a=e,this.b=el(),this.c=null,this.f=function(e){var t=th("local"),n=th("session"),r=th("none");return function(e,t,n){var r=nl(t,n),i=tl(e,t.F);return e.get(t,n).then((function(o){var s=null;try{s=Dr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(eh,e.a).then((function(e){return e?th(e):t}))}))}))})).then((function(t){return e.c=t,Zc(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(th("local"),this.a,b(this.g,this))}function Zc(e,t){var n,r=[];for(n in Ju)Ju[n]!==t&&r.push(rl(e.b,th(Ju[n]),e.a));return r.push(rl(e.b,eh,e.a)),function(e){return new bt((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)It(e[s],_(o,s),a);else t(i)}))}(r)}Jc.prototype.g=function(){var e=this,t=th("local");oh(this,(function(){return Mt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Zc(e,"local").then((function(){e.c=t}))}))}))};var eh={name:"persistence",F:"session"};function th(e){return{name:"authUser",F:e}}function nh(e,t){return oh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function rh(e){return oh(e,(function(){return rl(e.b,e.c,e.a)}))}function ih(e,t,n){return oh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Xc(e||{})}))}))}function oh(e,t){return e.f=e.f.then(t,t),e.f}function ah(e){if(this.l=!1,Xr(this,"settings",new $l),Xr(this,"app",e),!mh(this).options||!mh(this).options.apiKey)throw new S("invalid-api-key");e=aC.SDK_VERSION?Mr(aC.SDK_VERSION):null,this.a=new Ya(mh(this).options&&mh(this).options.apiKey,A(T),e),this.P=[],this.s=[],this.N=[],this.Pa=aC.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=aC.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Jc(mh(this).options.apiKey+":"+mh(this).name),this.D=new Yc(mh(this).options.apiKey+":"+mh(this).name),this.$=bh(this,function(e){var t=mh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get($c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Xc(e||{})}))}(e.D,mh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Qc(e.D)}));return bh(e,t)}(e).then((function(){return ih(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return nh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:rh(e.i)}))):null})).then((function(t){dh(e,t||null)}));return bh(e,n)}(this)),this.h=bh(this,function(e){return e.$.then((function(){return hh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(th("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(e){var t=mh(e).options.authDomain,n=mh(e).options.apiKey;t&&kr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Hl(t,n,mh(e).name,e.R),Ll(e.b,e),gh(e)&&kc(gh(e)),e.m){kc(e.m);var r=e.m;r.xa(e.la()),wc(r,e),Sc(r=e.m,e.J),Ec(r,e),_c(r=e.m,e.R),xc(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Fn(this.R.url);e=$r({protocol:e.c,host:e.a,port:e.g,options:$r({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function sh(e){Xt.call(this,"languageCodeChanged"),this.h=e}function uh(e){Xt.call(this,"emulatorConfigChanged"),this.c=e}function lh(e){Xt.call(this,"frameworkChanged"),this.f=e}function ch(e){return e.Oa||Ct(new S("auth-domain-config-required"))}function hh(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=ch(e).then((function(){return e.b.ra()})).then((function(e){return e?$r(e):null}));return bh(e,t)}function fh(e,t){var n={};return n.apiKey=mh(e).options.apiKey,n.authDomain=mh(e).options.authDomain,n.appName=mh(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var i=new bc(e,t);return n&&(i.ha=n),r&&Sc(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return gh(e)&&t.uid==gh(e).uid?(Uc(gh(e),t),e.da(t)):(dh(e,t),kc(t),e.da(t))})).then((function(){yh(e)}))}function dh(e,t){gh(e)&&(function(e,t){K(e.W,(function(e){return e==t}))}(gh(e),e.Ba),cn(gh(e),"tokenChanged",e.qa),cn(gh(e),"userDeleted",e.za),cn(gh(e),"userInvalidated",e.Aa),Cc(gh(e))),t&&(t.W.push(e.Ba),sn(t,"tokenChanged",e.qa),sn(t,"userDeleted",e.za),sn(t,"userInvalidated",e.Aa),0<e.u&&Mc(t)),Xr(e,"currentUser",t),t&&(t.xa(e.la()),wc(t,e),Sc(t,e.J),Ec(t,e),_c(t,e.R),xc(t,e))}function ph(e,t){var n=null,r=null;return bh(e,t.then((function(t){return n=Fo(t),r=Xi(t),fh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ic(t.w(),e,b(e.kc,e))),n||t})).then((function(){return $r({user:gh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function mh(e){return e.app}function gh(e){return e.currentUser}function vh(e){return gh(e)&&gh(e)._lat||null}function yh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](vh(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](vh(e))}}function bh(e,t){return e.P.push(t),t.oa((function(){q(e.P,t)})),t}function _h(){}function wh(){this.a={},this.b=1e12}Jc.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");e:{for(r in Ju)if(Ju[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(_r()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Pu()&&"none"!==e)throw n;break;default:if(!Ar()&&"none"!==e)throw n}}(e),oh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Zc(n,e)})).then((function(){if(n.c=th(e),t)return n.b.set(n.c,t,n.a)})):Mt()}))},w(ah,bn),w(sh,Xt),w(uh,Xt),w(lh,Xt),(e=ah.prototype).yb=function(e){return bh(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,ns(this.a,this.aa),this.dispatchEvent(new sh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=a.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!e&&gr().then((function(){var e=a.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),a.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,rs(this.a,this.R),this.dispatchEvent(new uh(this.R))}},e.Gc=function(e){this.J.push(e),os(this.a,aC.SDK_VERSION?Mr(aC.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},e.Ga=function(){return Y(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:mh(this).options.apiKey,authDomain:mh(this).options.authDomain,appName:mh(this).name,currentUser:gh(this)&&gh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?b(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ph(i,bs(i.a,o))}))},e.Xc=function(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=this,n=Ki(e.providerId),r=Fr(),i=null;(!Lr()||yr())&&mh(this).options.authDomain&&e.isOAuthProvider&&(i=vu(mh(this).options.authDomain,mh(this).options.apiKey,mh(this).name,"signInViaPopup",e,null,r,aC.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return bh(this,n=ch(this).then((function(n){return Fl(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new bt((function(e,n){t.na("signInViaPopup",null,new S("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=jl(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&fr(o),e?$r(e):null})).o((function(e){throw o&&fr(o),e})))},e.Yc=function(e){if(!kr())return Ct(new S("operation-not-supported-in-this-environment"));var t=this;return bh(this,ch(this).then((function(){return function(e){return oh(e,(function(){return e.b.set(eh,e.c.F,e.a)}))}(t.i)})).then((function(){return zl(t.b,"signInViaRedirect",e,void 0,t.T())})))},e.ra=function(){var e=this;return hh(this).then((function(t){return e.b&&ql(e.b.b),t})).o((function(t){throw e.b&&ql(e.b.b),t}))},e.dd=function(e){if(!e)return Ct(new S("null-user"));if(this.S!=e.tenantId)return Ct(new S("tenant-id-mismatch"));var t=this,n={};n.apiKey=mh(this).options.apiKey,n.authDomain=mh(this).options.authDomain,n.appName=mh(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[Qa]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new bc(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Sc(t,r),Uc(t,e),t}(e,n,t.D,t.Ga());return bh(this,this.h.then((function(){if(mh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return gh(t)&&e.uid==gh(t).uid?(Uc(gh(t),e),t.da(e)):(dh(t,r),kc(r),t.da(r))})).then((function(){yh(t)})))},e.Bb=function(){var e=this;return bh(this,this.h.then((function(){return e.b&&ql(e.b.b),gh(e)?(dh(e,null),rh(e.i).then((function(){yh(e)}))):Mt()})))},e.Zc=function(){var e=this;return ih(this.i,mh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=gh(e)&&t){n=gh(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uc(gh(e),t),gh(e).I();(gh(e)||t)&&(dh(e,t),t&&(kc(t),t.ha=e.D),e.b&&Ll(e.b,e),yh(e))}}))},e.da=function(e){return nh(this.i,e)},e.mc=function(){yh(this),this.da(gh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return ph(t,Mt(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(gh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),bh(e,e.h.then((function(){!e.l&&G(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(vh(e)))})))}(this,(function(){e.next(gh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof e?e(gh(r)):"function"==typeof e.next&&e.next(gh(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof e?e(gh(r)):"function"==typeof e.next&&e.next(gh(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this;return bh(this,this.h.then((function(){return gh(t)?gh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return ph(t,nu(t.a,$s,{token:e}))})).then((function(e){var n=e.user;return Fc(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return ph(n,nu(n.a,Qs,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return ph(n,nu(n.a,Ts,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return ph(t,e.ka(t.a))}))},e.Sc=function(e){return qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=gh(e);if(t&&t.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ph(e,e.a.Ab()).then((function(t){var n=t.user;return Fc(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return gh(this)&&gh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&gh(this)&&Mc(gh(this))},e.Pc=function(e){var t=this;B(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&gh(this)&&Cc(gh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),bh(this,this.h.then((function(){t.l||G(t.s,e)&&e(vh(t))})))},e.removeAuthTokenListener=function(e){K(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(th("local"),e.a,this.ja),this.b&&(Nl(this.b,this),ql(this.b.b)),Promise.resolve()},e.hc=function(e){return bh(this,function(e,t){return nu(e,Ms,{identifier:t,continueUri:Pr()?ur():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Po(e)},e.xb=function(e,t){var n=this;return bh(this,Mt().then((function(){var e=new Ii(t);if(!e.c)throw new S("argument-error",Pi+" must be true when sending sign in link to email");return Ui(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return bh(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return bh(this,this.a.Sa(e).then((function(e){return new oi(e)})))},e.kb=function(e){return bh(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return bh(this,Mt().then((function(){return void 0===t||he(t)?{}:Ui(new Ii(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return bh(this,Jl(this,e,t,b(this.ab,this)))},e.Vc=function(e,t){var n=this;return bh(this,Mt().then((function(){var r=t||ur(),i=ko(e,r);if(!(r=Po(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.ab(i)})))},_h.prototype.render=function(){},_h.prototype.reset=function(){},_h.prototype.getResponse=function(){},_h.prototype.execute=function(){};var xh=null;function Sh(e,t){return(t=Eh(t))&&e.a[t]||null}function Eh(e){return(e=void 0===e?1e12:e)?e.toString():null}function Th(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=at(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():sn(this.f,"click",this.i)}function Mh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ch(){}function Ih(){}wh.prototype.render=function(e,t){return this.a[this.b.toString()]=new Th(e,t),this.b++},wh.prototype.reset=function(e){var t=Sh(this,e);e=Eh(e),t&&e&&(t.delete(),delete this.a[e])},wh.prototype.getResponse=function(e){return(e=Sh(this,e))?e.getResponse():null},wh.prototype.execute=function(e){(e=Sh(this,e))&&e.execute()},Th.prototype.getResponse=function(){return Mh(this),this.b},Th.prototype.execute=function(){Mh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Th.prototype.delete=function(){Mh(this),this.g=!0,clearTimeout(this.a),this.a=null,cn(this.f,"click",this.i)},Xr(Ch,"FACTOR_ID","phone"),Ih.prototype.g=function(){return xh||(xh=new wh),Mt(xh)},Ih.prototype.c=function(){};var Ah=null;function kh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ph=new ge(_e,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rh=new jr(3e4,6e4);kh.prototype.g=function(e){var t=this;return new bt((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),Rh.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete a[t.a]},Mt(Va(Ee(Ph,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kh.prototype.c=function(){this.b--};var Lh=null;function Nh(e,t,n,r,i,o,s){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,s?(Ah||(Ah=new Ih),s=Ah):(Lh||(Lh=new kh),s=Lh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fh])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Uh],!a.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!at(t)||!this.i&&at(t).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var l=this.a[Oh];this.a[Oh]=function(e){if(zh(u,e),"function"==typeof l)l(e);else if("string"==typeof l){var t=Ir(l,a);"function"==typeof t&&t(e)}};var c=this.a[Dh];this.a[Dh]=function(){if(zh(u,null),"function"==typeof c)c();else if("string"==typeof c){var e=Ir(c,a);"function"==typeof e&&e()}}}var Oh="callback",Dh="expired-callback",Fh="sitekey",Uh="size";function zh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function jh(e,t){return e.h.push(t),t.oa((function(){q(e.h,t)})),t}function Bh(e){if(e.J)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vh(e,t,n){var r=!1;try{this.b=n||aC.app()}catch(a){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=aC.SDK_VERSION?Mr(aC.SDK_VERSION,o):null,Nh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,A(T),r)}function Hh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Wh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=Wh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new S("argument-error",e+" failed: "+r)}(e=Nh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=jh(this,Mt().then((function(){if(Pr()&&!br())return gr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,nu(e.s,zs,{})})).then((function(t){e.a[Fh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Bh(this);var e=this;return jh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=at(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ot&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Be(a.name),'"'),a.type){o.push(' type="',Be(a.type),'"');var s={};pe(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=dt(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):st(o,a)),2<r.length&&ft(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Bh(this);var e=this;return jh(this,this.render().then((function(t){return new bt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){K(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Bh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=at(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},w(Vh,Nh);var Wh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function qh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function Kh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Xh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function Yh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function $h(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Qh(e,t){return p(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function Jh(e){return p(e)&&"string"==typeof e.uid}function Zh(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function ef(e,t){for(var n in t){var r=t[n].name;e[r]=rf(r,e[n],t[n].j)}}function tf(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:_((function(e){return this[e]}),n),set:_((function(e,t,n,r){Hh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function nf(e,t,n,r){e[t]=rf(t,n,r)}function rf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Hh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}ef(ah.prototype,{kb:{name:"applyActionCode",j:[Gh("code")]},Sa:{name:"checkActionCode",j:[Gh("code")]},ob:{name:"confirmPasswordReset",j:[Gh("code"),Gh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gh("email"),Gh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zh(Kh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zh(Kh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Gh("email"),Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Gh("email"),Kh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Gh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[$h()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[$h()]},Tc:{name:"signInWithCustomToken",j:[Gh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gh("email"),Gh("password")]},Vc:{name:"signInWithEmailLink",j:[Gh("email"),Gh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof bc)}},Yh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gh("url"),Kh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gh("code")]}}),tf(ah.prototype,{lc:{name:"languageCode",lb:Zh(Gh(),Yh(),"languageCode")},ti:{name:"tenantId",lb:Zh(Gh(),Yh(),"tenantId")}}),ah.Persistence=Ju,ah.Persistence.LOCAL="local",ah.Persistence.SESSION="session",ah.Persistence.NONE="none",ef(bc.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[$h()]},rb:{name:"linkWithCredential",j:[$h()]},Dc:{name:"linkWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$h()]},ub:{name:"reauthenticateWithCredential",j:[$h()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gh(null,!0)]},cd:{name:"unlink",j:[Gh("provider")]},Cb:{name:"updateEmail",j:[Gh("email")]},Db:{name:"updatePassword",j:[Gh("password")]},ed:{name:"updatePhoneNumber",j:[$h("phone")]},Eb:{name:"updateProfile",j:[Kh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Gh("email"),Zh(Kh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]}}),ef(wh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(_h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(bt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),tf($l.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:qh("appVerificationDisabledForTesting")}}),ef(Ql.prototype,{confirm:{name:"confirm",j:[Gh("verificationCode")]}}),nf(so,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[mo,Io,Lo,ho],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Zh(Gh(),Kh(),"json")]),nf(Ao,"credential",(function(e,t){return new Co(e,t)}),[Gh("email"),Gh("password")]),ef(Co.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(bo,"credential",_o,[Zh(Gh(),Kh(),"token")]),nf(Ao,"credentialWithLink",ko,[Gh("email"),Gh("emailLink")]),ef(wo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(wo,"credential",xo,[Zh(Gh(),Kh(),"token")]),ef(So.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(So,"credential",Eo,[Zh(Gh(),Zh(Kh(),Yh()),"idToken"),Zh(Gh(),Yh(),"accessToken",!0)]),ef(To.prototype,{Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),nf(To,"credential",Mo,[Zh(Gh(),Kh(),"token"),Gh("secret",!0)]),ef(yo.prototype,{Ca:{name:"addScope",j:[Gh("scope")]},credential:{name:"credential",j:[Zh(Gh(),Zh(Kh(),Yh()),"optionsOrIdToken"),Zh(Gh(),Yh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Kh("customOAuthParameters")]}}),ef(fo.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(lo.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),nf(Oo,"credential",Do,[Gh("verificationId"),Gh("verificationCode")]),ef(Oo.prototype,{gb:{name:"verifyPhoneNumber",j:[Zh(Gh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?Qh(e.session,oo)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Qh(e.session,ao)&&Jh(e.multiFactorHint):e.session&&e.multiFactorUid?Qh(e.session,ao)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),ef(Ro.prototype,{w:{name:"toJSON",j:[Gh(null,!0)]}}),ef(S.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(Go.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(Wo.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(rc.prototype,{toJSON:{name:"toJSON",j:[Gh(null,!0)]}}),ef(ec.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),ef(lc.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Gh("displayName",!0)]},bd:{name:"unenroll",j:[Zh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jh},Gh(),"multiFactorInfoIdentifier")]}}),ef(Vh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(bi,"parseLink",Ci,[Gh("link")]),nf(Ch,"assertion",(function(e){return new sc(e)}),[$h("phone")]),function(){if(void 0===aC||!aC.INTERNAL||!aC.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ah,AuthCredential:so,Error:S};nf(e,"EmailAuthProvider",Ao,[]),nf(e,"FacebookAuthProvider",bo,[]),nf(e,"GithubAuthProvider",wo,[]),nf(e,"GoogleAuthProvider",So,[]),nf(e,"TwitterAuthProvider",To,[]),nf(e,"OAuthProvider",yo,[Gh("providerId")]),nf(e,"SAMLAuthProvider",vo,[Gh("providerId")]),nf(e,"PhoneAuthProvider",Oo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ah)}}]),nf(e,"RecaptchaVerifier",Vh,[Zh(Gh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Kh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof aC.app.App)}}]),nf(e,"ActionCodeURL",bi,[]),nf(e,"PhoneMultiFactorGenerator",Ch,[]),aC.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ah(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),aC.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:b((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:b(e.nc,e),addAuthTokenListener:b(e.cc,e),removeAuthTokenListener:b(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),aC.registerVersion("@firebase/auth","0.16.8"),aC.INTERNAL.extendNamespace({User:bc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var sC="";function uC(e){sC=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lC,cC=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mM(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:pM(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),hC=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return vM(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),fC=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new cC(t)}}catch(bX){}return new hC},dC=fC("localStorage"),pC=fC("sessionStorage"),mC=new GM("@firebase/database"),gC=(lC=1,function(){return lC++}),vC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,qT(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wM;n.update(t);var r=n.digest();return YT.encodeByteArray(r)},yC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=yC.apply(null,i):n+="object"==typeof i?mM(i):i,n+=" "}return n},bC=null,_C=!0,wC=function(e,t){qT(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(mC.logLevel=FM.VERBOSE,bC=mC.log.bind(mC),t&&pC.set("logging_enabled",!0)):"function"==typeof e?bC=e:(bC=null,pC.remove("logging_enabled"))},xC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===_C&&(_C=!1,null===bC&&!0===pC.get("logging_enabled")&&wC(!0)),bC){var n=yC.apply(null,e);bC(n)}},SC=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];xC.apply(void 0,HT([e],VT(t)))}},EC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+yC.apply(void 0,HT([],VT(e)));mC.error(n)},TC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+yC.apply(void 0,HT([],VT(e)));throw mC.error(n),new Error(n)},MC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+yC.apply(void 0,HT([],VT(e)));mC.warn(n)},CC=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},IC="[MIN_NAME]",AC="[MAX_NAME]",kC=function(e,t){if(e===t)return 0;if(e===IC||t===AC)return-1;if(t===IC||e===AC)return 1;var n=UC(e),r=UC(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},PC=function(e,t){return e===t?0:e<t?-1:1},RC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+mM(t))},LC=function(e){if("object"!=typeof e||null===e)return mM(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=mM(t[i]),r+=":",r+=LC(e[t[i]]);return r+="}"},NC=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var DC=function(e){qT(!CC(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var FC=new RegExp("^-?(0*)\\d{1,10}$"),UC=function(e){if(FC.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},zC=function(e){try{e()}catch(bX){setTimeout((function(){var t=bX.stack||"";throw MC("Exception was thrown by user callback.",t),bX}),Math.floor(0))}},jC=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},BC=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){MC('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),VC=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(xC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',MC(e)},e}(),HC=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),WC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GC=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dC.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dC.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function qC(e,t,n){var r;if(qT("string"==typeof t,"typeof type must == string"),qT("object"==typeof n,"typeof params must == object"),"websocket"===t)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return OC(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KC=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),vM(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return QT(this.counters_)},e}(),XC={},YC={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(e){var t=e.toString();return XC[t]||(XC[t]=new KC),XC[t]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QC=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&zC((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),JC=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SC(e),this.stats_=$C(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),qC(t,"long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new QC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ZC((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=VT(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=VT(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&WC.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!!e.forceAllow_||!(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=mM(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n,r=(n=XT(t),YT.encodeByteArray(n,!0)),i=NC(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(e){var t=mM(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),ZC=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=gC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(bX){xC("frame writing exception"),bX.stack&&xC(bX.stack),xC(bX)}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xC("No IE domain setting required")}catch(bX){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){xC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(bX){}}),Math.floor(1))},e}(),eI=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?eI=MozWebSocket:"undefined"!=typeof WebSocket&&(eI=WebSocket);var tI=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SC(this.connId),this.stats_=$C(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&WC.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),qC(e,"websocket",i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dC.set("previous_websocket_failure",!0);try{if(aM());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new eI(this.connURL,[],r)}}catch(bX){this.log_("Error instantiating WebSocket.");var i=bX.message||bX.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==eI&&!e.forceDisallow_},e.previouslyFailed=function(){return dC.isInMemoryStorage||!0===dC.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){dC.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=pM(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(qT(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=mM(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=NC(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(bX){this.log_("Exception thrown from WebSocket.send():",bX.message||bX.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),nI=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[JC,tI]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=tI&&tI.isAvailable(),o=i&&!tI.previouslyFailed();if(t.webSocketOnly&&(i||MC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[tI];else{var a=this.transports_=[];try{for(var s=BT(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),rI=function(){function e(e,t,n,r,i,o,a,s,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SC("c:"+this.id+":"),this.transportManager_=new nI(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=jC((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=RC("t",e),n=RC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=RC("t",e),n=RC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=RC("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?EC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):EC("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&MC("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),jC((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jC((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),iI=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),oI=function(){function e(e){this.allowedEvents_=e,this.listeners_={},qT(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=HT([],VT(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){qT(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),aI=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||nM()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return FT(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return qT("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(oI),sI=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return new sI("")}function lI(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function cI(e){return e.pieces_.length-e.pieceNum_}function hI(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new sI(e.pieces_,t)}function fI(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function dI(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function pI(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new sI(t,0)}function mI(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof sI)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new sI(n,0)}function gI(e){return e.pieceNum_>=e.pieces_.length}function vI(e,t){var n=lI(e),r=lI(t);if(null===n)return t;if(n===r)return vI(hI(e),hI(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function yI(e,t){for(var n=dI(e,0),r=dI(t,0),i=0;i<n.length&&i<r.length;i++){var o=kC(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bI(e,t){if(cI(e)!==cI(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function _I(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(cI(e)>cI(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var wI=function(e,t){this.errorPrefix_=t,this.parts_=dI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=AM(this.parts_[n]);xI(this)};function xI(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+SI(e))}function SI(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EI,TI,MI=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return FT(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return qT("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(oI),CI=function(e){function t(n,r,i,o,a,s,u,l){var c=e.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=t.nextPersistentConnectionId_++,c.log_=SC("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!aM())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return MI.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&aI.getInstance().on("online",c.onOnline_,c),c}return FT(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(mM(i)),qT(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new ZT,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),qT(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),qT(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&vM(e,"w")){var n=yM(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();MC("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t;(e&&40===e.length||"object"==typeof(t=gM(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e,t=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(e=gM(n).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(e){var r=e.s,i=e.d||"error";t.authToken_===n&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),qT(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+mM(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):EC("Unrecognized action received from server: "+mM(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;qT(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return zT(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,l,c,h,f,d,p,m=this;return jT(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},l=function(e){qT(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:u,sendRequest:l},c=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)])];case 2:return h=VT.apply(void 0,[g.sent(),2]),f=h[0],d=h[1],a?xC("getToken() completed but was canceled"):(xC("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new rI(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){MC(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),[3,4];case 3:return p=g.sent(),this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&MC(p),u()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){xC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){xC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bM(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return LC(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new sI(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){xC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){xC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=BT(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,BT(a.values())),u=s.next();!u.done;u=s.next()){var l=u.value;this.sendListen_(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)},t.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+sC.replace(/\./g,"-")]=1,nM()?e["framework.cordova"]=1:oM()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=aI.getInstance().currentlyOnline();return bM(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(iI),II=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),AI=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new II(IC,e),r=new II(IC,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return II.MIN},e}(),kI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return EI},set:function(e){EI=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return kC(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw KT("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return II.MIN},t.prototype.maxPost=function(){return new II(AC,EI)},t.prototype.makePost=function(e,t){return qT("string"==typeof e,"KeyIndex indexValue must always be a string."),new II(e,EI)},t.prototype.toString=function(){return".key"},t}(AI),PI=new kI,RI=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),LI=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:OI.EMPTY_NODE,this.right=null!=o?o:OI.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return OI.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return OI.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),NI=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new LI(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),OI=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,LI.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,LI.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new RI(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new RI(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new RI(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new RI(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new NI,e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function DI(e,t){return kC(e.name,t.name)}function FI(e,t){return kC(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UI,zI,jI,BI=function(e){return"number"==typeof e?"number:"+DC(e):"string:"+e},VI=function(e){if(e.isLeafNode()){var t=e.val();qT("string"==typeof t||"number"==typeof t||"object"==typeof t&&vM(t,".sv"),"Priority must be a string or number.")}else qT(e===TI||e.isEmpty(),"priority of unexpected type.");qT(e===TI||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},HI=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,qT(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),VI(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return UI},set:function(e){UI=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return gI(t)?this:".priority"===lI(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=lI(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(qT(".priority"!==r||1===cI(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(hI(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+BI(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?DC(this.value_):this.value_,this.lazyHash_=vC(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(qT(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return qT(i>=0,"Unknown leaf type: "+n),qT(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var WI,GI,qI=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?kC(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return II.MIN},t.prototype.maxPost=function(){return new II(AC,new HI("[PRIORITY-POST]",jI))},t.prototype.makePost=function(e,t){var n=zI(e);return new II(t,new HI("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(AI)),KI=Math.log(2),XI=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/KI,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),YI=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new LI(a,o.node,LI.BLACK,null,null);var u=parseInt(s/2,10)+t,l=i(t,u),c=i(u+1,r);return o=e[u],a=n?n(o):o,new LI(a,o.node,LI.BLACK,l,c)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var l=i(o+1,s),c=e[o],h=n?n(c):c;u(new LI(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,LI.BLACK):(s(h,LI.BLACK),s(h,LI.RED))}return o}(new XI(e.length));return new OI(r||t,o)},$I={},QI=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return qT($I&&qI,"ChildrenNode.ts has not been loaded"),WI=WI||new e({".priority":$I},{".priority":qI})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=yM(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof OI?t:null},e.prototype.hasIndex=function(e){return vM(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){qT(t!==PI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(II.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?YI(i,t.getCompare()):$I;var u=t.toString(),l=UT({},this.indexSet_);l[u]=t;var c=UT({},this.indexes_);return c[u]=r,new e(c,l)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(_M(this.indexes_,(function(e,i){var o=yM(r.indexSet_,i);if(qT(o,"Missing index implementation for "+i),e===$I){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(II.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),YI(a,o.getCompare())}return $I}var l=n.get(t.name),c=e;return l&&(c=c.remove(new II(t.name,l))),c.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(_M(this.indexes_,(function(e){if(e===$I)return e;var r=n.get(t.name);return r?e.remove(new II(t.name,r)):e})),this.indexSet_)},e}(),JI=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&VI(this.priorityNode_),this.children_.isEmpty()&&qT(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return GI||(GI=new e(new OI(FI),null,QI.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||GI},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?GI:t},e.prototype.getChild=function(e){var t=lI(e);return null===t?this:this.getImmediateChild(t).getChild(hI(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(qT(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new II(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?GI:this.priorityNode_;return new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=lI(e);if(null===n)return t;qT(".priority"!==lI(e)||1===cI(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(hI(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(qI,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+BI(this.getPriority().val())+":"),this.forEachChild(qI,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":vC(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new II(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new II(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new II(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,II.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,II.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ZI?-1:0},e.prototype.withIndex=function(t){if(t===PI||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===PI||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(qI),r=t.getIterator(qI),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===PI?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ZI=new(function(e){function t(){return e.call(this,new OI(FI),JI.EMPTY_NODE,QI.Default)||this}return FT(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return JI.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(JI));Object.defineProperties(II,{MIN:{value:new II(IC,JI.EMPTY_NODE)},MAX:{value:new II(AC,ZI)}}),kI.__EMPTY_NODE=JI.EMPTY_NODE,HI.__childrenNodeConstructor=JI,TI=ZI,function(e){jI=e}(ZI);function eA(e,t){if(void 0===t&&(t=null),null===e)return JI.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),qT(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new HI(e,eA(t));if(e instanceof Array){var n=JI.EMPTY_NODE;return OC(e,(function(t,r){if(vM(e,t)&&"."!==t.substring(0,1)){var i=eA(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(eA(t))}var r=[],i=!1;if(OC(e,(function(e,t){if("."!==e.substring(0,1)){var n=eA(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new II(e,n)))}})),0===r.length)return JI.EMPTY_NODE;var o=YI(r,DI,(function(e){return e.name}),FI);if(i){var a=YI(r,qI.getCompare());return new JI(o,eA(t),new QI({".priority":a},{".priority":qI}))}return new JI(o,eA(t),QI.Default)}!function(e){zI=e}(eA);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tA,nA,rA=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,qT(!gI(t)&&".priority"!==lI(t),"Can't create PathIndex with empty path or .priority key"),n}return FT(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?kC(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=eA(e),r=JI.EMPTY_NODE.updateChild(this.indexPath_,n);return new II(t,r)},t.prototype.maxPost=function(){var e=JI.EMPTY_NODE.updateChild(this.indexPath_,ZI);return new II(AC,e)},t.prototype.toString=function(){return dI(this.indexPath_,0).join("/")},t}(AI),iA=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?kC(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return II.MIN},t.prototype.maxPost=function(){return II.MAX},t.prototype.makePost=function(e,t){var n=eA(e);return new II(t,n)},t.prototype.toString=function(){return".value"},t}(AI)),oA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aA=(tA=0,nA=[],function(e){var t,n=e===tA;tA=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=oA.charAt(e%64),e=Math.floor(e/64);qT(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===nA[t];t--)nA[t]=0;nA[t]++}else for(t=0;t<12;t++)nA[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=oA.charAt(nA[t]);return qT(20===i.length,"nextPushId: Length should be 20."),i}),sA=function(e){if("2147483647"===e)return"-";var t=UC(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return AC;var o=n[i],a=oA.charAt(oA.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},uA=function(e){if("-2147483648"===e)return IC;var t=UC(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oA.charAt(oA.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function lA(e){return{type:"value",snapshotNode:e}}function cA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function hA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function fA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dA=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){qT(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(hA(t,a)):qT(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(cA(t,n)):o.trackChildChange(fA(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(qI,(function(e,r){t.hasChild(e)||n.trackChildChange(hA(e,r))})),t.isLeafNode()||t.forEachChild(qI,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(fA(t,r,i))}else n.trackChildChange(cA(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?JI.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),pA=function(){function e(t){this.indexedFilter_=new dA(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new II(t,n))||(n=JI.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=JI.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(JI.EMPTY_NODE);var i=this;return t.forEachChild(qI,(function(e,t){i.matches(new II(e,t))||(r=r.updateImmediateChild(e,JI.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),mA=function(){function e(e){this.rangedFilter_=new pA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new II(t,n))||(n=JI.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=JI.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=JI.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(JI.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,JI.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;qT(s.numChildren()===this.limit_,"");var u=new II(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(fA(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(hA(t,h));var p=s.updateImmediateChild(t,JI.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(cA(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(hA(l.name,l.node)),i.trackChildChange(cA(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,JI.EMPTY_NODE)):e},e}(),gA=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qI}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return qT(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return qT(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:IC},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return qT(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return qT(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:AC},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return qT(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===qI},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function yA(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function bA(e,t){var n=e.copy();return n.index_=t,n}function _A(e){var t,n={};return e.isDefault()||(e.index_===qI?t="$priority":e.index_===iA?t="$value":e.index_===PI?t="$key":(qT(e.index_ instanceof rA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=mM(t),e.startSet_&&(n.startAt=mM(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+mM(e.indexStartName_))),e.endSet_&&(n.endAt=mM(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+mM(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function wA(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==qI&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xA=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=SC("p:rest:"),o.listens_={},o}return FT(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(qT(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var l=_A(e._queryParams);this.restRequest_(a+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),yM(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=_A(e._queryParams),r=e._path.toString(),i=new ZT;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=VT(i,2),a=o[0],s=o[1];a&&a.accessToken&&(t.auth=a.accessToken),s&&s.token&&(t.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}(t);r.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=pM(l.responseText)}catch(bX){MC("Failed to parse JSON response for "+u+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&MC("Got unsuccessful REST response for "+u+" Status: "+l.status),n(l.status);n=null}},l.open("GET",u,!0),l.send()}))},t}(iI),SA=function(){function e(){this.rootNode_=JI.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function EA(){return{value:null,children:new Map}}function TA(e,t,n){if(gI(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=lI(t);e.children.has(r)||e.children.set(r,EA()),TA(e.children.get(r),t=hI(t),n)}}function MA(e,t){if(gI(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(qI,(function(t,n){TA(e,new sI(t),n)})),MA(e,t)}if(e.children.size>0){var r=lI(t);if(t=hI(t),e.children.has(r))MA(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function CA(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,(function(e,r){CA(r,new sI(t.toString()+"/"+e),n)}))}var IA,AA,kA=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=UT({},e);return this.last_&&OC(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),PA=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kA(e);var n=1e4+2e4*Math.random();jC(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;OC(t,(function(t,i){i>0&&vM(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),jC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(AA=IA||(IA={}))[AA.OVERWRITE=0]="OVERWRITE",AA[AA.MERGE=1]="MERGE",AA[AA.ACK_USER_WRITE=2]="ACK_USER_WRITE",AA[AA.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var LA,NA=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=IA.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(gI(this.path)){if(null!=this.affectedTree.value)return qT(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new sI(t));return new e(uI(),n,this.revert)}return qT(lI(this.path)===t,"operationForChild called for unrelated child."),new e(hI(this.path),this.affectedTree,this.revert)},e}(),OA=function(){function e(e,t){this.source=e,this.path=t,this.type=IA.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return gI(this.path)?new e(this.source,uI()):new e(this.source,hI(this.path))},e}(),DA=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=IA.OVERWRITE}return e.prototype.operationForChild=function(t){return gI(this.path)?new e(this.source,uI(),this.snap.getImmediateChild(t)):new e(this.source,hI(this.path),this.snap)},e}(),FA=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=IA.MERGE}return e.prototype.operationForChild=function(t){if(gI(this.path)){var n=this.children.subtree(new sI(t));return n.isEmpty()?null:n.value?new DA(this.source,uI(),n.value):new e(this.source,uI(),n)}return qT(lI(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,hI(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),UA=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(gI(e))return this.isFullyInitialized()&&!this.filtered_;var t=lI(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),zA=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw KT("Should only compare child_ events.");var r=new II(t.childName,t.snapshotNode),i=new II(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function BA(e,t){return{eventCache:e,serverCache:t}}function VA(e,t,n,r){return BA(new UA(t,n,r),e.serverCache)}function HA(e,t,n,r){return BA(e.eventCache,new UA(t,n,r))}function WA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function GA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qA=function(){function e(e,t){void 0===t&&(LA||(LA=new OI(PC)),t=LA),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return OC(t,(function(e,t){n=n.set(new sI(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:uI(),value:this.value};if(gI(e))return null;var n=lI(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(hI(e),t);return null!=i?{path:mI(new sI(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(gI(t))return this;var n=lI(t),r=this.children.get(n);return null!==r?r.subtree(hI(t)):new e(null)},e.prototype.set=function(t,n){if(gI(t))return new e(n,this.children);var r=lI(t),i=(this.children.get(r)||new e(null)).set(hI(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(gI(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=lI(t),r=this.children.get(n);if(r){var i=r.remove(hI(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(gI(e))return this.value;var t=lI(e),n=this.children.get(t);return n?n.get(hI(e)):null},e.prototype.setTree=function(t,n){if(gI(t))return n;var r=lI(t),i=(this.children.get(r)||new e(null)).setTree(hI(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(uI(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(mI(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,uI(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(gI(e))return null;var i=lI(e),o=this.children.get(i);return o?o.findOnPath_(hI(e),mI(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,uI(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(gI(t))return this;this.value&&r(n,this.value);var i=lI(t),o=this.children.get(i);return o?o.foreachOnPath_(hI(t),mI(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(uI(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(mI(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),KA=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new qA(null))},e}();function XA(e,t,n){if(gI(t))return new KA(new qA(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=vI(i,t);return o=o.updateChild(a,n),new KA(e.writeTree_.set(i,o))}var s=new qA(n),u=e.writeTree_.setTree(t,s);return new KA(u)}function YA(e,t,n){var r=e;return OC(n,(function(e,n){r=XA(r,mI(t,e),n)})),r}function $A(e,t){if(gI(t))return KA.empty();var n=e.writeTree_.setTree(t,new qA(null));return new KA(n)}function QA(e,t){return null!=JA(e,t)}function JA(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(vI(n.path,t)):null}function ZA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(qI,(function(e,n){t.push(new II(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new II(e,n.value))})),t}function ek(e,t){if(gI(t))return e;var n=JA(e,t);return new KA(null!=n?new qA(n):e.writeTree_.subtree(t))}function tk(e){return e.writeTree_.isEmpty()}function nk(e,t){return rk(uI(),e.writeTree_,t)}function rk(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(qT(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=rk(mI(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(mI(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(e,t){return vk(t,e)}function ok(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));qT(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&ak(s,r.path)?i=!1:_I(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=uk(e.allWrites,sk,uI()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=$A(e.visibleWrites,r.path):OC(r.children,(function(t){e.visibleWrites=$A(e.visibleWrites,mI(r.path,t))}));return!0}return!1}function ak(e,t){if(e.snap)return _I(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&_I(mI(e.path,n),t))return!0;return!1}function sk(e){return e.visible}function uk(e,t,n){for(var r=KA.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)_I(n,a)?r=XA(r,s=vI(n,a),o.snap):_I(a,n)&&(s=vI(a,n),r=XA(r,uI(),o.snap.getChild(s)));else{if(!o.children)throw KT("WriteRecord should have .snap or .children");if(_I(n,a))r=YA(r,s=vI(n,a),o.children);else if(_I(a,n))if(gI(s=vI(a,n)))r=YA(r,uI(),o.children);else{var u=yM(o.children,lI(s));if(u){var l=u.getChild(hI(s));r=XA(r,uI(),l)}}}}}return r}function lk(e,t,n,r,i){if(r||i){var o=ek(e.visibleWrites,t);if(!i&&tk(o))return n;if(i||null!=n||QA(o,uI())){return nk(uk(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(_I(e.path,t)||_I(t,e.path))}),t),n||JI.EMPTY_NODE)}return null}var a=JA(e.visibleWrites,t);if(null!=a)return a;var s=ek(e.visibleWrites,t);return tk(s)?n:null!=n||QA(s,uI())?nk(s,n||JI.EMPTY_NODE):null}function ck(e,t,n,r){return lk(e.writeTree,e.treePath,t,n,r)}function hk(e,t){return function(e,t,n){var r=JI.EMPTY_NODE,i=JA(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(qI,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=ek(e.visibleWrites,t);return n.forEachChild(qI,(function(e,t){var n=nk(ek(o,new sI(e)),t);r=r.updateImmediateChild(e,n)})),ZA(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ZA(ek(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function fk(e,t,n,r){return function(e,t,n,r,i){qT(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=mI(t,n);if(QA(e.visibleWrites,o))return null;var a=ek(e.visibleWrites,o);return tk(a)?i.getChild(n):nk(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function dk(e,t){return function(e,t){return JA(e.visibleWrites,t)}(e.writeTree,mI(e.treePath,t))}function pk(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=ek(e.visibleWrites,t),l=JA(u,uI());if(null!=l)s=l;else{if(null==n)return[];s=nk(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,o)}function mk(e,t,n){return function(e,t,n,r){var i=mI(t,n),o=JA(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?nk(ek(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function gk(e,t){return vk(mI(e.treePath,t),e.writeTree)}function vk(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yk=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;qT("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),qT(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,fA(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,hA(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,cA(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw KT("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,fA(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),bk=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),_k=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new UA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mk(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:GA(this.viewCache_),i=pk(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e,t,n,r,i){var o,a,s=new yk;if(n.type===IA.OVERWRITE){var u=n;u.source.fromUser?o=Ek(e,t,u.path,u.snap,r,i,s):(qT(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!gI(u.path),o=Sk(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===IA.MERGE){var l=n;l.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var l=mI(n,r);Tk(t,lI(l))&&(s=Ek(e,s,l,u,i,o,a))})),r.foreach((function(r,u){var l=mI(n,r);Tk(t,lI(l))||(s=Ek(e,s,l,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,s):(qT(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Ck(e,t,l.path,l.children,r,i,a,s))}else if(n.type===IA.ACK_USER_WRITE){var c=n;o=c.revert?function(e,t,n,r,i,o){var a;if(null!=dk(r,n))return t;var s=new _k(r,t,i),u=t.eventCache.getNode(),l=void 0;if(gI(n)||".priority"===lI(n)){var c=void 0;if(t.serverCache.isFullyInitialized())c=ck(r,GA(t));else{var h=t.serverCache.getNode();qT(h instanceof JI,"serverChildren would be complete if leaf node"),c=hk(r,h)}c=c,l=e.filter.updateFullNode(u,c,o)}else{var f=lI(n),d=mk(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(l=null!=d?e.filter.updateChild(u,f,d,hI(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(u,f,JI.EMPTY_NODE,hI(n),s,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=ck(r,GA(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,a,o))}return a=t.serverCache.isFullyInitialized()||null!=dk(r,uI()),VA(t,l,a,e.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,c.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=dk(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(gI(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sk(e,t,n,u.getNode().getChild(n),i,o,s,a);if(gI(n)){var l=new qA(null);return u.getNode().forEachChild(PI,(function(e,t){l=l.set(new sI(e),t)})),Ck(e,t,n,l,i,o,s,a)}return t}var c=new qA(null);return r.foreach((function(e,t){var r=mI(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Ck(e,t,n,c,i,o,s,a)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==IA.LISTEN_COMPLETE)throw KT("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=HA(t,o.getNode(),o.isFullyInitialized()||gI(n),o.isFiltered());return xk(e,a,n,r,bk,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=WA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(lA(WA(t)))}}(t,o,h),{viewCache:o,changes:h}}function xk(e,t,n,r,i,o){var a=t.eventCache;if(null!=dk(r,n))return t;var s=void 0,u=void 0;if(gI(n))if(qT(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=GA(t),c=hk(r,l instanceof JI?l:JI.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{var h=ck(r,GA(t));s=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=lI(n);if(".priority"===f){qT(1===cI(n),"Can't have a priority with additional path components");var d=a.getNode(),p=fk(r,n,d,u=t.serverCache.getNode());s=null!=p?e.filter.updatePriority(d,p):a.getNode()}else{var m=hI(n),g=void 0;if(a.isCompleteForChild(f)){u=t.serverCache.getNode();var v=fk(r,n,a.getNode(),u);g=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else g=mk(r,f,t.serverCache);s=null!=g?e.filter.updateChild(a.getNode(),f,g,m,i,o):a.getNode()}}return VA(t,s,a.isFullyInitialized()||gI(n),e.filter.filtersNodes())}function Sk(e,t,n,r,i,o,a,s){var u,l=t.serverCache,c=a?e.filter:e.filter.getIndexedFilter();if(gI(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=lI(n);if(!l.isCompleteForPath(n)&&cI(n)>1)return t;var d=hI(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,bk,null)}var m=HA(t,u,l.isFullyInitialized()||gI(n),c.filtersNodes());return xk(e,m,n,i,new _k(i,m,o),s)}function Ek(e,t,n,r,i,o,a){var s,u,l=t.eventCache,c=new _k(i,t,o);if(gI(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=VA(t,u,!0,e.filter.filtersNodes());else{var h=lI(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=VA(t,u,l.isFullyInitialized(),l.isFiltered());else{var f=hI(n),d=l.getNode().getImmediateChild(h),p=void 0;if(gI(f))p=r;else{var m=c.getCompleteChild(h);p=null!=m?".priority"===fI(f)&&m.getChild(pI(f)).isEmpty()?m:m.updateChild(f,r):JI.EMPTY_NODE}if(d.equals(p))s=t;else s=VA(t,e.filter.updateChild(l.getNode(),h,p,f,c,a),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Tk(e,t){return e.eventCache.isCompleteForChild(t)}function Mk(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ck(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=gI(n)?r:new qA(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Mk(0,t.serverCache.getNode().getImmediateChild(n),r);l=Sk(e,l,new sI(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=Mk(0,t.serverCache.getNode().getImmediateChild(n),r);l=Sk(e,l,new sI(n),h,i,o,a,s)}})),l}var Ik,Ak=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new dA(r.getIndex()),o=(n=r).loadsAllData()?new dA(n.getIndex()):n.hasLimit()?new mA(n):new pA(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(JI.EMPTY_NODE,a.getNode(),null),l=o.updateFullNode(JI.EMPTY_NODE,s.getNode(),null),c=new UA(u,a.isFullyInitialized(),i.filtersNodes()),h=new UA(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=BA(h,c),this.eventGenerator_=new zA(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function kk(e,t){var n=GA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!gI(t)&&!n.getImmediateChild(lI(t)).isEmpty())?n.getChild(t):null}function Pk(e){return 0===e.eventRegistrations_.length}function Rk(e,t,n){var r=[];if(n){qT(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function Lk(e,t,n,r){t.type===IA.MERGE&&null!==t.source.queryId&&(qT(GA(e.viewCache_),"We should always have a full cache before handling merges"),qT(WA(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=wk(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,qT(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),qT(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),qT(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Nk(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Nk(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),jA(e,i,"child_removed",t,r,n),jA(e,i,"child_added",t,r,n),jA(e,i,"child_moved",o,r,n),jA(e,i,"child_changed",t,r,n),jA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ok,Dk=function(){this.views=new Map};function Fk(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return qT(null!=s,"SyncTree gave us an op for an invalid query."),Lk(s,t,n,r)}var u=[];try{for(var l=BT(e.views.values()),c=l.next();!c.done;c=l.next()){s=c.value;u=u.concat(Lk(s,t,n,r))}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return u}function Uk(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=ck(n,i?r:null),u=!1;s?u=!0:r instanceof JI?(s=hk(n,r),u=!1):(s=JI.EMPTY_NODE,u=!1);var l=BA(new UA(s,u,!1),new UA(r,i,!1));return new Ak(t,l)}return a}function zk(e,t,n,r,i,o){var a=Uk(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qI,(function(e,t){r.push(cA(e,t))})),n.isFullyInitialized()&&r.push(lA(n.getNode())),Nk(e,r,n.getNode(),t)}(a,n)}function jk(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],l=Gk(e);if("default"===a)try{for(var c=BT(e.views.entries()),h=c.next();!h.done;h=c.next()){var f=VT(h.value,2),d=f[0],p=f[1];u=u.concat(Rk(p,n,r)),Pk(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}else(p=e.views.get(a))&&(u=u.concat(Rk(p,n,r)),Pk(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return l&&!Gk(e)&&s.push(new(qT(Ik,"Reference.ts has not been loaded"),Ik)(t._repo,t._path)),{removed:s,events:u}}function Bk(e){var t,n,r=[];try{for(var i=BT(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Vk(e,t){var n,r,i=null;try{for(var o=BT(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||kk(s,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Hk(e,t){if(t._queryParams.loadsAllData())return qk(e);var n=t._queryIdentifier;return e.views.get(n)}function Wk(e,t){return null!=Hk(e,t)}function Gk(e){return null!=qk(e)}function qk(e){var t,n;try{for(var r=BT(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kk=1,Xk=function(e){this.listenProvider_=e,this.syncPointTree_=new qA(null),this.pendingWriteTree_={visibleWrites:KA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Yk(e,t,n,r,i){return function(e,t,n,r,i){qT(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=XA(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?rP(e,new DA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function $k(e,t,n,r){!function(e,t,n,r){qT(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=YA(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=qA.fromObject(n);return rP(e,new FA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Qk(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(ok(e.pendingWriteTree_,t)){var i=new qA(null);return null!=r.snap?i=i.set(uI(),!0):OC(r.children,(function(e){i=i.set(new sI(e),!0)})),rP(e,new NA(r.path,i,n))}return[]}function Jk(e,t,n){return rP(e,new DA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Zk(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||Wk(o,t))){var s=jk(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var l=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),c=e.syncPointTree_.findOnPath(i,(function(e,t){return Gk(t)}));if(l&&!c){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Gk(t))return[qk(t)];var r=[];return t&&(r=Bk(t)),OC(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],m=p.query,g=aP(e,p);e.listenProvider_.startListening(fP(m),sP(e,m),g.hashFn,g.onComplete)}}if(!c&&u.length>0&&!r)if(l){e.listenProvider_.stopListening(fP(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(uP(t));e.listenProvider_.stopListening(fP(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=uP(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function eP(e,t,n){var r=t._path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=vI(e,r);i=i||Vk(t,n),o=o||Gk(t)}));var a,s=e.syncPointTree_.get(r);(s?(o=o||Gk(s),i=i||Vk(s,uI())):(s=new Dk,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=JI.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Vk(t,uI());n&&(i=i.updateImmediateChild(e,n))})));var u=Wk(s,t);if(!u&&!t._queryParams.loadsAllData()){var l=uP(t);qT(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var c=Kk++;e.queryToTagMap.set(l,c),e.tagToQueryMap.set(c,l)}var h=zk(s,t,n,ik(e.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Hk(s,t);h=h.concat(function(e,t,n){var r=t._path,i=sP(e,t),o=aP(e,n),a=e.listenProvider_.startListening(fP(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)qT(!Gk(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!gI(e)&&t&&Gk(t))return[qk(t).query];var r=[];return t&&(r=r.concat(Bk(t).map((function(e){return e.query})))),OC(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(fP(c),sP(e,c))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,f))}return h}function tP(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Vk(n,vI(e,t));if(r)return r}));return lk(r,t,i,n,!0)}function nP(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=vI(e,n);r=r||Vk(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Vk(i,uI()):(i=new Dk,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new UA(r,!0,!1):null;return function(e){return WA(e.viewCache_)}(Uk(i,t,ik(e.pendingWriteTree_,t._path),o?a.getNode():JI.EMPTY_NODE,o))}function rP(e,t){return iP(t,e.syncPointTree_,null,ik(e.pendingWriteTree_,uI()))}function iP(e,t,n,r){if(gI(e.path))return oP(e,t,n,r);var i=t.get(uI());null==n&&null!=i&&(n=Vk(i,uI()));var o=[],a=lI(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=gk(r,a);o=o.concat(iP(s,u,l,c))}return i&&(o=o.concat(Fk(i,e,r,n))),o}function oP(e,t,n,r){var i=t.get(uI());null==n&&null!=i&&(n=Vk(i,uI()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=gk(r,t),u=e.operationForChild(t);u&&(o=o.concat(oP(u,i,a,s)))})),i&&(o=o.concat(Fk(i,e,r,n))),o}function aP(e,t){var n=t.query,r=sP(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||JI.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=lP(e,n);if(r){var i=cP(r),o=i.path,a=i.queryId,s=vI(o,t);return hP(e,o,new OA(RA(a),s))}return[]}(e,n._path,r):function(e,t){return rP(e,new OA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Zk(e,n,null,i)}}}function sP(e,t){var n=uP(t);return e.queryToTagMap.get(n)}function uP(e){return e._path.toString()+"$"+e._queryIdentifier}function lP(e,t){return e.tagToQueryMap.get(t)}function cP(e){var t=e.indexOf("$");return qT(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new sI(e.substr(0,t))}}function hP(e,t,n){var r=e.syncPointTree_.get(t);return qT(r,"Missing sync point for query tag that we're tracking"),Fk(r,n,ik(e.pendingWriteTree_,t),null)}function fP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(qT(Ok,"Reference.ts has not been loaded"),Ok)(e._repo,e._path):e}var dP=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),pP=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=mI(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return tP(this.syncTree_,this.path_)},e}(),mP=function(e,t,n){return e&&"object"==typeof e?(qT(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?gP(e[".sv"],t,n):"object"==typeof e[".sv"]?vP(e[".sv"],t):void qT(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gP=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:qT(!1,"Unexpected server value: "+e)}},vP=function(e,t,n){e.hasOwnProperty("increment")||qT(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&qT(!1,"Unexpected increment value: "+r);var i=t.node();if(qT(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},yP=function(e,t,n,r){return _P(t,new pP(n,e),r)},bP=function(e,t,n){return _P(e,new dP(t),n)};function _P(e,t,n){var r,i=e.getPriority().val(),o=mP(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=mP(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new HI(s,eA(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new HI(o))),u.forEachChild(qI,(function(e,i){var o=_P(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wP=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function xP(e,t){for(var n=t instanceof sI?t:new sI(t),r=e,i=lI(n);null!==i;){var o=yM(r.node.children,i)||{children:{},childCount:0};r=new wP(i,r,o),i=lI(n=hI(n))}return r}function SP(e){return e.node.value}function EP(e,t){e.node.value=t,AP(e)}function TP(e){return e.node.childCount>0}function MP(e,t){OC(e.node.children,(function(n,r){t(new wP(n,e,r))}))}function CP(e,t,n,r){n&&!r&&t(e),MP(e,(function(e){CP(e,t,!0,r)})),n&&r&&t(e)}function IP(e){return new sI(null===e.parent?e.name:IP(e.parent)+"/"+e.name)}function AP(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===SP(e)&&!TP(e)}(n),i=vM(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,AP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,AP(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.parent,e.name,e)}var kP=/[\[\].#$\/\u0000-\u001F\u007F]/,PP=/[\[\].#$\u0000-\u001F\u007F]/,RP=function(e){return"string"==typeof e&&0!==e.length&&!kP.test(e)},LP=function(e){return"string"==typeof e&&0!==e.length&&!PP.test(e)},NP=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!CC(e)||e&&"object"==typeof e&&vM(e,".sv")},OP=function(e,t,n,r){r&&void 0===t||DP(MM(e,"value"),t,n)},DP=function(e,t,n){var r=n instanceof sI?new wI(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+SI(r));if("function"==typeof t)throw new Error(e+"contains a function "+SI(r)+" with contents = "+t.toString());if(CC(t))throw new Error(e+"contains "+t.toString()+" "+SI(r));if("string"==typeof t&&t.length>10485760/3&&AM(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+SI(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(OC(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!RP(t)))throw new Error(e+" contains an invalid key ("+t+") "+SI(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=t,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=AM(s),xI(a),DP(e,n,r),function(e){var t=e.parts_.pop();e.byteLength_-=AM(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),i&&o)throw new Error(e+' contains ".value" child '+SI(r)+" in addition to actual children.")}},FP=function(e,t,n,r){if(!r||void 0!==t){var i=MM(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];OC(t,(function(e,t){var r=new sI(e);if(DP(i,t,mI(n,r)),".priority"===fI(r)&&!NP(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=dI(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!RP(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(yI);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&_I(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},UP=function(e,t,n){if(!n||void 0!==t){if(CC(t))throw new Error(MM(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NP(t))throw new Error(MM(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zP=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(MM(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},jP=function(e,t,n,r){if(!(r&&void 0===n||RP(n)))throw new Error(MM(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},BP=function(e,t,n,r){if(!(r&&void 0===n||LP(n)))throw new Error(MM(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},VP=function(e,t){if(".info"===lI(t))throw new Error(e+" failed = Can't modify data under /.info/")},HP=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!RP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),LP(e)}(n))throw new Error(MM(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},WP=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(MM(e,t)+"must be a boolean.")},GP=function(){this.eventLists_=[],this.recursionDepth_=0};function qP(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||bI(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function KP(e,t,n){qP(e,n),YP(e,(function(e){return bI(e,t)}))}function XP(e,t,n){qP(e,n),YP(e,(function(e){return _I(e,t)||_I(t,e)}))}function YP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?($P(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function $P(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();bC&&xC("event: "+n.toString()),zC(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QP=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=EA(),this.transactionQueueTree_=new wP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function JP(e,t,n){if(e.stats_=$C(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new xA(e.repoInfo_,(function(t,n,r,i){tR(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return nR(e,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mM(n)}catch(bX){throw new Error("Invalid authOverride provided: "+bX)}}e.persistentConnection_=new CI(e.repoInfo_,t,(function(t,n,r,i){tR(e,t,n,r,i)}),(function(t){nR(e,t)}),(function(t){!function(e,t){OC(t,(function(t,n){rR(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}var r,i,o;e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=(r=e.repoInfo_,i=function(){return new PA(e.stats_,e.server_)},o=r.toString(),YC[o]||(YC[o]=i()),YC[o]),e.infoData_=new SA,e.infoSyncTree_=new Xk({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=Jk(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),rR(e,"connected",!1),e.serverSyncTree_=new Xk({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);XP(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ZP(e){var t=e.infoData_.getNode(new sI(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eR(e){return(t=(t={timestamp:ZP(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function tR(e,t,n,r,i){e.dataUpdateCount++;var o=new sI(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=_M(n,(function(e){return eA(e)}));a=function(e,t,n,r){var i=lP(e,r);if(i){var o=cP(i),a=o.path,s=o.queryId,u=vI(a,t),l=qA.fromObject(n);return hP(e,a,new FA(RA(s),u,l))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=eA(n);a=function(e,t,n,r){var i=lP(e,r);if(null!=i){var o=cP(i),a=o.path,s=o.queryId,u=vI(a,t);return hP(e,a,new DA(RA(s),u,n))}return[]}(e.serverSyncTree_,o,u,i)}else if(r){var l=_M(n,(function(e){return eA(e)}));a=function(e,t,n){var r=qA.fromObject(n);return rP(e,new FA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,l)}else{var c=eA(n);a=Jk(e.serverSyncTree_,o,c)}var h=o;a.length>0&&(h=pR(e,o)),XP(e.eventQueue_,h,a)}function nR(e,t){rR(e,"connected",t),!1===t&&function(e){cR(e,"onDisconnectEvents");var t=eR(e),n=EA();CA(e.onDisconnect_,uI(),(function(r,i){var o=yP(r,i,e.serverSyncTree_,t);TA(n,r,o)}));var r=[];CA(n,uI(),(function(t,n){r=r.concat(Jk(e.serverSyncTree_,t,n));var i=bR(e,t);pR(e,i)})),e.onDisconnect_=EA(),XP(e.eventQueue_,uI(),r)}(e)}function rR(e,t,n){var r=new sI("/.info/"+t),i=eA(n);e.infoData_.updateSnapshot(r,i);var o=Jk(e.infoSyncTree_,r,i);XP(e.eventQueue_,r,o)}function iR(e){return e.nextWriteId_++}function oR(e,t,n,r,i){cR(e,"set",{path:t.toString(),value:n,priority:r});var o=eR(e),a=eA(n,r),s=tP(e.serverSyncTree_,t),u=bP(a,s,o),l=iR(e),c=Yk(e.serverSyncTree_,t,u,l,!0);qP(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||MC("set at "+t+" failed: "+n);var a=Qk(e.serverSyncTree_,l,!o);XP(e.eventQueue_,t,a),hR(e,i,n,r)}));var h=bR(e,t);pR(e,h),XP(e.eventQueue_,h,[])}function aR(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&MA(e.onDisconnect_,t),hR(e,n,r,i)}))}function sR(e,t,n,r){var i=eA(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&TA(e.onDisconnect_,t,i),hR(e,r,n,o)}))}function uR(e,t,n){var r;r=".info"===lI(t._path)?Zk(e.infoSyncTree_,t,n):Zk(e.serverSyncTree_,t,n),KP(e.eventQueue_,t._path,r)}function lR(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}function cR(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),xC.apply(void 0,HT([r],VT(t)))}function hR(e,t,n,r){t&&zC((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function fR(e,t,n){return tP(e.serverSyncTree_,t,n)||JI.EMPTY_NODE}function dR(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||yR(e,t),SP(t)){var n=gR(e,t);qT(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=fR(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];qT(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=vI(t,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){cR(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(Qk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);yR(e,xP(e.transactionQueueTree_,t)),dR(e,e.transactionQueueTree_),XP(e.eventQueue_,t,i);for(s=0;s<o.length;s++)zC(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{MC("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}pR(e,t)}}),a)}(e,IP(t),n)}else TP(t)&&MP(t,(function(t){dR(e,t)}))}function pR(e,t){var n=mR(e,t),r=IP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),a=function(a){var s,u,l=t[a],c=vI(n,l.path),h=!1;if(qT(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,s=l.abortReason,i=i.concat(Qk(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,s="maxretry",i=i.concat(Qk(e.serverSyncTree_,l.currentWriteId,!0));else{var f=fR(e,l.path,o);l.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){DP("transaction failed: Data returned ",d,l.path);var p=eA(d);"object"==typeof d&&null!=d&&vM(d,".priority")||(p=p.updatePriority(f.getPriority()));var m=l.currentWriteId,g=eR(e),v=bP(p,f,g);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=iR(e),o.splice(o.indexOf(m),1),i=(i=i.concat(Yk(e.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally))).concat(Qk(e.serverSyncTree_,m,!0))}else h=!0,s="nodata",i=i.concat(Qk(e.serverSyncTree_,l.currentWriteId,!0))}XP(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},s=0;s<t.length;s++)a(s);yR(e,e.transactionQueueTree_);for(s=0;s<r.length;s++)zC(r[s]);dR(e,e.transactionQueueTree_)}(e,gR(e,n),r),r}function mR(e,t){var n,r=e.transactionQueueTree_;for(n=lI(t);null!==n&&void 0===SP(r);)r=xP(r,n),n=lI(t=hI(t));return r}function gR(e,t){var n=[];return vR(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function vR(e,t,n){var r=SP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);MP(t,(function(t){vR(e,t,n)}))}function yR(e,t){var n=SP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,EP(t,n.length>0?n:void 0)}MP(t,(function(t){yR(e,t)}))}function bR(e,t){var n=IP(mR(e,t)),r=xP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){_R(e,t)})),_R(e,r),CP(r,(function(t){_R(e,t)})),n}function _R(e,t){var n=SP(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(qT(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(qT(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Qk(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?EP(t,void 0):n.length=o+1,XP(e.eventQueue_,IP(t),i);for(a=0;a<r.length;a++)zC(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wR=function(e,t){var n=xR(e),r=n.namespace;"firebase.com"===n.domain&&TC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||TC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&MC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new GC(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new sI(n.pathString)}},xR=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(bX){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=BT(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):MC("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},SR=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+mM(this.snapshot.exportVal())},e}(),ER=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),TR=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return qT(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),MR=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new ZT;return aR(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){VP("OnDisconnect.remove",this._path);var e=new ZT;return sR(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){VP("OnDisconnect.set",this._path),OP("OnDisconnect.set",e,this._path,!1);var t=new ZT;return sR(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){VP("OnDisconnect.setWithPriority",this._path),OP("OnDisconnect.setWithPriority",e,this._path,!1),UP("OnDisconnect.setWithPriority",t,!1);var n=new ZT;return function(e,t,n,r,i){var o=eA(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&TA(e.onDisconnect_,t,o),hR(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){VP("OnDisconnect.update",this._path),FP("OnDisconnect.update",e,this._path,!1);var t=new ZT;return function(e,t,n,r){if(bM(n))return xC("onDisconnect().update() called with empty data.  Don't do anything."),void hR(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&OC(n,(function(n,r){var i=eA(r);TA(e.onDisconnect_,mI(t,n),i)})),hR(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),CR=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return gI(this._path)?null:fI(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new PR(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=wA(this._queryParams),t=LC(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return wA(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=PM(t))instanceof e))return!1;var n=this._repo===t._repo,r=bI(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function IR(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function AR(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===PI){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==IC)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==AC)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===qI){if(null!=t&&!NP(t)||null!=n&&!NP(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(qT(e.getIndex()instanceof rA||e.getIndex()===iA,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kR(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var PR=function(e){function t(t,n){return e.call(this,t,n,new gA,!1)||this}return FT(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=pI(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(CR),RR=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new sI(t),r=OR(this.ref,t);return new e(this._node.getChild(n),r,qI)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,OR(n.ref,r),qI))}))},e.prototype.hasChild=function(e){var t=new sI(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function LR(e,t){return(e=PM(e))._checkNotDeleted("ref"),void 0!==t?OR(e._root,t):e._root}function NR(e,t){(e=PM(e))._checkNotDeleted("refFromURL");var n=wR(t,e._repo.repoInfo_.nodeAdmin);HP("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||TC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),LR(e,n.path.toString())}function OR(e,t){var n,r,i,o;return null===lI((e=PM(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),BP(n,r,i,o)):BP("child","path",t,!1),new PR(e._repo,mI(e._path,t))}function DR(e,t){e=PM(e),VP("push",e._path),OP("push",t,e._path,!0);var n,r=ZP(e._repo),i=aA(r),o=OR(e,i),a=OR(e,i);return n=null!=t?UR(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function FR(e){return VP("remove",e._path),UR(e,null)}function UR(e,t){e=PM(e),VP("set",e._path),OP("set",t,e._path,!1);var n=new ZT;return oR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function zR(e,t){e=PM(e),VP("setPriority",e._path),UP("setPriority",t,!1);var n=new ZT;return oR(e._repo,mI(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function jR(e,t,n){if(VP("setWithPriority",e._path),OP("setWithPriority",t,e._path,!1),UP("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new ZT;return oR(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function BR(e,t){FP("update",t,e._path,!1);var n=new ZT;return function(e,t,n,r){cR(e,"update",{path:t.toString(),value:n});var i=!0,o=eR(e),a={};if(OC(n,(function(n,r){i=!1,a[n]=yP(mI(t,n),eA(r),e.serverSyncTree_,o)})),i)xC("update() called with empty data.  Don't do anything."),hR(0,r,"ok",void 0);else{var s=iR(e),u=$k(e.serverSyncTree_,t,a,s);qP(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||MC("update at "+t+" failed: "+n);var a=Qk(e.serverSyncTree_,s,!o),u=a.length>0?pR(e,t):t;XP(e.eventQueue_,u,a),hR(0,r,n,i)})),OC(n,(function(n){var r=bR(e,mI(t,n));pR(e,r)})),XP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function VR(e){return function(e,t){var n=nP(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=eA(n).withIndex(t._queryParams.getIndex()),i=Jk(e.serverSyncTree_,t._path,r);return KP(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return cR(e,"get for query "+mM(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=PM(e))._repo,e).then((function(t){return new RR(t,new PR(e._repo,e._path),e._queryParams.getIndex())}))}var HR=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new SR("value",this,new RR(e.snapshotNode,new PR(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ER(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),WR=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ER(this,e,t):null},e.prototype.createEvent=function(e,t){qT(null!=e.childName,"Child events should have a childName.");var n=OR(new PR(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new SR(e.type,this,new RR(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function GR(e,t,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){uR(e._repo,e,l),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new TR(n,o||void 0),l="value"===t?new HR(u):new WR(t,u);return function(e,t,n){var r;r=".info"===lI(t._path)?eP(e.infoSyncTree_,t,n):eP(e.serverSyncTree_,t,n),KP(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return uR(e._repo,e,l)}}function qR(e,t,n,r){return GR(e,"value",t,n,r)}function KR(e,t,n,r){return GR(e,"child_added",t,n,r)}function XR(e,t,n,r){return GR(e,"child_changed",t,n,r)}function YR(e,t,n,r){return GR(e,"child_moved",t,n,r)}function $R(e,t,n,r){return GR(e,"child_removed",t,n,r)}function QR(e,t,n){var r=null,i=n?new TR(n):null;"value"===t?r=new HR(i):t&&(r=new WR(t,i)),uR(e._repo,e,r)}var JR=function(){},ZR=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return FT(t,e),t.prototype._apply=function(e){OP("endAt",this._value,e._path,!0);var t=yA(e._queryParams,this._value,this._key);if(kR(t),AR(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new CR(e._repo,e._path,t,e._orderByCalled)},t}(JR);function eL(e,t){return jP("endAt","key",t,!0),new ZR(e,t)}var tL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return FT(t,e),t.prototype._apply=function(e){OP("endBefore",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===PI?("string"==typeof n&&(n=uA(n)),i=yA(t,n,r)):i=yA(t,n,null==r?IC:uA(r)),i.endBeforeSet_=!0,i);if(kR(o),AR(o),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new CR(e._repo,e._path,o,e._orderByCalled)},t}(JR);function nL(e,t){return jP("endBefore","key",t,!0),new tL(e,t)}var rL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return FT(t,e),t.prototype._apply=function(e){OP("startAt",this._value,e._path,!0);var t=vA(e._queryParams,this._value,this._key);if(kR(t),AR(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new CR(e._repo,e._path,t,e._orderByCalled)},t}(JR);function iL(e,t){return void 0===e&&(e=null),jP("startAt","key",t,!0),new rL(e,t)}var oL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return FT(t,e),t.prototype._apply=function(e){OP("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;e.index_===PI?("string"==typeof t&&(t=sA(t)),r=vA(e,t,n)):r=vA(e,t,null==n?AC:sA(n));return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(kR(t),AR(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new CR(e._repo,e._path,t,e._orderByCalled)},t}(JR);function aL(e,t){return jP("startAfter","key",t,!0),new oL(e,t)}var sL=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return FT(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new CR(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled);var t,n,r},t}(JR);function uL(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sL(e)}var lL=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return FT(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new CR(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled);var t,n,r},t}(JR);function cL(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lL(e)}var hL=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return FT(t,e),t.prototype._apply=function(e){IR(e,"orderByChild");var t=new sI(this._path);if(gI(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new rA(t),r=bA(e._queryParams,n);return AR(r),new CR(e._repo,e._path,r,!0)},t}(JR);function fL(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return BP("orderByChild","path",e,!1),new hL(e)}var dL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype._apply=function(e){IR(e,"orderByKey");var t=bA(e._queryParams,PI);return AR(t),new CR(e._repo,e._path,t,!0)},t}(JR);function pL(){return new dL}var mL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype._apply=function(e){IR(e,"orderByPriority");var t=bA(e._queryParams,qI);return AR(t),new CR(e._repo,e._path,t,!0)},t}(JR);function gL(){return new mL}var vL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype._apply=function(e){IR(e,"orderByValue");var t=bA(e._queryParams,iA);return AR(t),new CR(e._repo,e._path,t,!0)},t}(JR);function yL(){return new vL}var bL=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return FT(t,e),t.prototype._apply=function(e){if(OP("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZR(this._value,this._key)._apply(new rL(this._value,this._key)._apply(e))},t}(JR);function _L(e,t){return jP("equalTo","key",t,!0),new bL(e,t)}function wL(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=PM(e);try{for(var a=BT(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}!function(e){qT(!Ik,"__referenceConstructor has already been defined"),Ik=e}(PR),function(e){qT(!Ok,"__referenceConstructor has already been defined"),Ok=e}(PR);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xL={},SL=!1;function EL(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||TC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xC("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=wR(o,i),u=s.repoInfo,l=void 0;"undefined"!=typeof process&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,o="http://"+l+"?ns="+u.namespace,u=(s=wR(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new HC(HC.OWNER):new VC(e.name,e.options,t);HP("Invalid Firebase Database URL",s),gI(s.path)||TC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=xL[t.name];i||(i={},xL[t.name]=i);var o=i[e.toURLString()];o&&TC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new QP(e,SL,n,r),i[e.toURLString()]=o,o}(u,e,c,new BC(e.name,n));return new TL(h,e)}var TL=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(JP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new PR(this._repo,uI())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return this._checkNotDeleted("delete"),e=this._repo,t=this.app.name,(n=xL[t])&&n[e.key]===e||TC("Database "+t+"("+e.repoInfo_+") has already been deleted."),lR(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&TC("Cannot call "+e+" on a deleted database.")},e}();function ML(e,t,n,r){void 0===r&&(r={}),(e=PM(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&TC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&TC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new HC(HC.OWNER);else if(r.mockUserToken){var a=eM(r.mockUserToken,e.app.options.projectId);o=new HC(a)}!function(e,t,n,r){e.repoInfo_=new GC(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function CL(e){(e=PM(e))._checkNotDeleted("goOffline"),lR(e._repo)}function IL(e){var t;(e=PM(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AL={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kL=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function PL(e,t,n){var r;if(e=PM(e),VP("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new ZT,a=qR(e,(function(){}));return function(e,t,n,r,i,o){cR(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:gC(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=fR(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{DP("transaction failed: Data returned ",u,a.path),a.status=0;var l=xP(e.transactionQueueTree_,t),c=SP(l)||[];c.push(a),EP(l,c);var h=void 0;"object"==typeof u&&null!==u&&vM(u,".priority")?(h=yM(u,".priority"),qT(NP(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(tP(e.serverSyncTree_,t)||JI.EMPTY_NODE).getPriority().val();var f=eR(e),d=eA(u,h),p=bP(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=iR(e);var m=Yk(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);XP(e.eventQueue_,t,m),dR(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new RR(r,new PR(e._repo,e._path),qI),o.resolve(new kL(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RL=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){TM("OnDisconnect.cancel",0,1,arguments.length),CM("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){TM("OnDisconnect.remove",0,1,arguments.length),CM("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){TM("OnDisconnect.set",1,2,arguments.length),CM("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){TM("OnDisconnect.setWithPriority",2,3,arguments.length),CM("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if(TM("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,MC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}CM("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),LL=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return TM("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),NL=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return TM("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return TM("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return TM("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return TM("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return TM("DataSnapshot.child",0,1,arguments.length),t=String(t),BP("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return TM("DataSnapshot.hasChild",1,1,arguments.length),BP("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return TM("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return TM("DataSnapshot.forEach",1,1,arguments.length),CM("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return TM("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return TM("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return TM("DataSnapshot.ref",0,0,arguments.length),new DL(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),OL=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var o,a=this;TM("Query.on",2,4,arguments.length),CM("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new NL(a.database,e),t)};u.userCallback=n,u.context=s.context;var l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return qR(this._delegate,u,l),n;case"child_added":return KR(this._delegate,u,l),n;case"child_removed":return $R(this._delegate,u,l),n;case"child_changed":return XR(this._delegate,u,l),n;case"child_moved":return YR(this._delegate,u,l),n;default:throw new Error(MM("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if(TM("Query.off",0,3,arguments.length),zP("Query.off",e,!0),CM("Query.off","callback",t,!0),IM("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,QR(this._delegate,e,r)}else QR(this._delegate,e)},e.prototype.get=function(){var e=this;return VR(this._delegate).then((function(t){return new NL(e.database,t)}))},e.prototype.once=function(t,n,r,i){var o=this;TM("Query.once",1,4,arguments.length),CM("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new ZT,u=function(e,t){var r=new NL(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var l=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":qR(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":KR(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":$R(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":XR(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":YR(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(MM("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},e.prototype.limitToFirst=function(t){return TM("Query.limitToFirst",1,1,arguments.length),new e(this.database,wL(this._delegate,uL(t)))},e.prototype.limitToLast=function(t){return TM("Query.limitToLast",1,1,arguments.length),new e(this.database,wL(this._delegate,cL(t)))},e.prototype.orderByChild=function(t){return TM("Query.orderByChild",1,1,arguments.length),new e(this.database,wL(this._delegate,fL(t)))},e.prototype.orderByKey=function(){return TM("Query.orderByKey",0,0,arguments.length),new e(this.database,wL(this._delegate,pL()))},e.prototype.orderByPriority=function(){return TM("Query.orderByPriority",0,0,arguments.length),new e(this.database,wL(this._delegate,gL()))},e.prototype.orderByValue=function(){return TM("Query.orderByValue",0,0,arguments.length),new e(this.database,wL(this._delegate,yL()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),TM("Query.startAt",0,2,arguments.length),new e(this.database,wL(this._delegate,iL(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),TM("Query.startAfter",0,2,arguments.length),new e(this.database,wL(this._delegate,aL(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),TM("Query.endAt",0,2,arguments.length),new e(this.database,wL(this._delegate,eL(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),TM("Query.endBefore",0,2,arguments.length),new e(this.database,wL(this._delegate,nL(t,n)))},e.prototype.equalTo=function(t,n){return TM("Query.equalTo",1,2,arguments.length),new e(this.database,wL(this._delegate,_L(t,n)))},e.prototype.toString=function(){return TM("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return TM("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(TM("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,CM(e,"cancel",r.cancel,!0),r.context=n,IM(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(MM(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new DL(this.database,new PR(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),DL=function(e){function t(t,n){var r=e.call(this,t,new CR(n._repo,n._path,new gA,!1))||this;return r.database=t,r._delegate=n,r}return FT(t,e),t.prototype.getKey=function(){return TM("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return TM("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,OR(this._delegate,e))},t.prototype.getParent=function(){TM("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return TM("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){TM("Reference.set",1,2,arguments.length),CM("Reference.set","onComplete",t,!0);var n=UR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if(TM("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,MC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}VP("Reference.update",this._delegate._path),CM("Reference.update","onComplete",t,!0);var i=BR(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){TM("Reference.setWithPriority",2,3,arguments.length),CM("Reference.setWithPriority","onComplete",n,!0);var r=jR(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){TM("Reference.remove",0,1,arguments.length),CM("Reference.remove","onComplete",e,!0);var t=FR(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;TM("Reference.transaction",1,3,arguments.length),CM("Reference.transaction","transactionUpdate",e,!1),CM("Reference.transaction","onComplete",t,!0),WP("Reference.transaction","applyLocally",n,!0);var i=PL(this._delegate,e,{applyLocally:n}).then((function(e){return new LL(e.committed,new NL(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){TM("Reference.setPriority",1,2,arguments.length),CM("Reference.setPriority","onComplete",t,!0);var n=zR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;TM("Reference.push",0,2,arguments.length),CM("Reference.push","onComplete",n,!0);var i=DR(this._delegate,e),o=i.then((function(e){return new t(r.database,e)}));n&&o.then((function(){return n(null)}),(function(e){return n(e)}));var a=new t(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},t.prototype.onDisconnect=function(){return VP("Reference.onDisconnect",this._delegate._path),new RL(new MR(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(OL),FL=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),ML(this._delegate,e,t,n)},e.prototype.ref=function(e){if(TM("database.ref",0,1,arguments.length),e instanceof DL){var t=NR(this._delegate,e.toString());return new DL(this,t)}t=LR(this._delegate,e);return new DL(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";TM(t,1,1,arguments.length);var n=NR(this._delegate,e);return new DL(this,n)},e.prototype.goOffline=function(){return TM("database.goOffline",0,0,arguments.length),CL(this._delegate)},e.prototype.goOnline=function(){return TM("database.goOnline",0,0,arguments.length),IL(this._delegate)},e.ServerValue={TIMESTAMP:AL,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UL=Object.freeze({__proto__:null,forceLongPolling:function(){tI.forceDisallow(),JC.forceAllow()},forceWebSockets:function(){JC.forceDisallow()},isWebSocketsAvailable:function(){return tI.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var n;t?(e.statsListener_||(e.statsListener_=new kA(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);OC(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;uC(r);var u=new LM("auth-internal",new OM("database-standalone"));return u.setComponent(new RM("auth-internal",(function(){return i}),"PRIVATE")),{instance:new FL(EL(t,u,void 0,n,s),t),namespace:o}}}),zL=CI;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */CI.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},CI.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var jL,BL=rI,VL=GC,HL=Object.freeze({__proto__:null,DataConnection:zL,RealTimeConnection:BL,hijackHash:function(e){var t=CI.prototype.put;return CI.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){CI.prototype.put=t}},ConnectionTarget:VL,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){SL=e}(e)}}),WL=FL.ServerValue;uC((jL=aC).SDK_VERSION),jL.INTERNAL.registerComponent(new RM("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new FL(EL(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:DL,Query:OL,Database:FL,DataSnapshot:NL,enableLogging:wC,INTERNAL:UL,ServerValue:WL,TEST_ACCESS:HL}).setMultipleInstances(!0)),jL.registerVersion("@firebase/database","0.10.7");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var GL=function(e,t){return(GL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function qL(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var KL,XL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},YL=YL||{},$L=XL||self;function QL(){}function JL(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ZL(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var eN="closure_uid_"+(1e9*Math.random()>>>0),tN=0;function nN(e,t,n){return e.call.apply(e.bind,arguments)}function rN(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function iN(e,t,n){return(iN=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nN:rN).apply(null,arguments)}function oN(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function aN(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function sN(){this.s=this.s,this.o=this.o}var uN={};sN.prototype.s=!1,sN.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,eN)&&e[eN]||(e[eN]=++tN)}(this);delete uN[e]}},sN.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var lN=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},cN=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function hN(e){return Array.prototype.concat.apply([],arguments)}function fN(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function dN(e){return/^[\s\xa0]*$/.test(e)}var pN,mN=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function gN(e,t){return-1!=e.indexOf(t)}function vN(e,t){return e<t?-1:e>t?1:0}e:{var yN=$L.navigator;if(yN){var bN=yN.userAgent;if(bN){pN=bN;break e}}pN=""}function _N(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function wN(e){var t={};for(var n in e)t[n]=e[n];return t}var xN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SN(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<xN.length;o++)n=xN[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function EN(e){return EN[" "](e),e}EN[" "]=QL;var TN,MN=gN(pN,"Opera"),CN=gN(pN,"Trident")||gN(pN,"MSIE"),IN=gN(pN,"Edge"),AN=IN||CN,kN=gN(pN,"Gecko")&&!(gN(pN.toLowerCase(),"webkit")&&!gN(pN,"Edge"))&&!(gN(pN,"Trident")||gN(pN,"MSIE"))&&!gN(pN,"Edge"),PN=gN(pN.toLowerCase(),"webkit")&&!gN(pN,"Edge");function RN(){var e=$L.document;return e?e.documentMode:void 0}e:{var LN="",NN=function(){var e=pN;return kN?/rv:([^\);]+)(\)|;)/.exec(e):IN?/Edge\/([\d\.]+)/.exec(e):CN?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):PN?/WebKit\/(\S+)/.exec(e):MN?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(NN&&(LN=NN?NN[1]:""),CN){var ON=RN();if(null!=ON&&ON>parseFloat(LN)){TN=String(ON);break e}}TN=LN}var DN,FN={};function UN(){return function(e){var t=FN;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=mN(String(TN)).split("."),n=mN("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=vN(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||vN(0==o[2].length,0==a[2].length)||vN(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if($L.document&&CN){var zN=RN();DN=zN||(parseInt(TN,10)||void 0)}else DN=void 0;var jN=DN,BN=function(){if(!$L.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{$L.addEventListener("test",QL,t),$L.removeEventListener("test",QL,t)}catch(Py){}return e}();function VN(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function HN(e,t){if(VN.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kN){e:{try{EN(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:WN[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&HN.Z.h.call(this)}}VN.prototype.h=function(){this.defaultPrevented=!0},aN(HN,VN);var WN={2:"touch",3:"pen",4:"mouse"};HN.prototype.h=function(){HN.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var GN="closure_listenable_"+(1e6*Math.random()|0),qN=0;function KN(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++qN,this.ca=this.fa=!1}function XN(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function YN(e){this.src=e,this.g={},this.h=0}function $N(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=lN(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(XN(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function QN(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}YN.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=QN(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new KN(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var JN="closure_lm_"+(1e6*Math.random()|0),ZN={};function eO(e,t,n,r,i){if(r&&r.once)return nO(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)eO(e,t[o],n,r,i);return null}return n=lO(n),e&&e[GN]?e.N(t,n,ZL(r)?!!r.capture:!!r,i):tO(e,t,n,!1,r,i)}function tO(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=ZL(i)?!!i.capture:!!i,s=sO(e);if(s||(e[JN]=s=new YN(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=aO;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)BN||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oO(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function nO(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)nO(e,t[o],n,r,i);return null}return n=lO(n),e&&e[GN]?e.O(t,n,ZL(r)?!!r.capture:!!r,i):tO(e,t,n,!0,r,i)}function rO(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)rO(e,t[o],n,r,i);else r=ZL(r)?!!r.capture:!!r,n=lO(n),e&&e[GN]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=QN(o=e.g[t],n,r,i))&&(XN(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=sO(e))&&(t=e.g[t.toString()],e=-1,t&&(e=QN(t,n,r,i)),(n=-1<e?t[e]:null)&&iO(n))}function iO(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[GN])$N(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oO(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sO(t))?($N(n,e),0==n.h&&(n.src=null,t[JN]=null)):XN(e)}}}function oO(e){return e in ZN?ZN[e]:ZN[e]="on"+e}function aO(e,t){if(e.ca)e=!0;else{t=new HN(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&iO(e),e=n.call(r,t)}return e}function sO(e){return(e=e[JN])instanceof YN?e:null}var uO="__closure_events_fn_"+(1e9*Math.random()>>>0);function lO(e){return"function"==typeof e?e:(e[uO]||(e[uO]=function(t){return e.handleEvent(t)}),e[uO])}function cO(){sN.call(this),this.i=new YN(this),this.P=this,this.I=null}function hO(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new VN(t,e);else if(t instanceof VN)t.target=t.target||e;else{var i=t;SN(t=new VN(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=fO(a,r,!0,t)&&i}if(i=fO(a=t.g=e,r,!0,t)&&i,i=fO(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=fO(a=t.g=n[o],r,!1,t)&&i}function fO(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&$N(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}aN(cO,sN),cO.prototype[GN]=!0,cO.prototype.removeEventListener=function(e,t,n,r){rO(this,e,t,n,r)},cO.prototype.M=function(){if(cO.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)XN(n[r]);delete t.g[e],t.h--}}this.I=null},cO.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},cO.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var dO=$L.JSON.stringify;function pO(){var e=xO,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var mO,gO=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=vO.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),vO=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new yO}),(function(e){return e.reset()})),yO=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function bO(e){$L.setTimeout((function(){throw e}),0)}function _O(e,t){mO||function(){var e=$L.Promise.resolve(void 0);mO=function(){e.then(SO)}}(),wO||(mO(),wO=!0),xO.add(e,t)}var wO=!1,xO=new gO;function SO(){for(var e;e=pO();){try{e.h.call(e.g)}catch(Py){bO(Py)}var t=vO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}wO=!1}function EO(e,t){cO.call(this),this.h=e||1,this.g=t||$L,this.j=iN(this.kb,this),this.l=Date.now()}function TO(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function MO(e,t,n){if("function"==typeof e)n&&(e=iN(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=iN(e.handleEvent,e)}return 2147483647<Number(t)?-1:$L.setTimeout(e,t||0)}function CO(e){e.g=MO((function(){e.g=null,e.i&&(e.i=!1,CO(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}aN(EO,cO),(KL=EO.prototype).da=!1,KL.S=null,KL.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hO(this,"tick"),this.da&&(TO(this),this.start()))}},KL.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},KL.M=function(){EO.Z.M.call(this),TO(this),delete this.g};var IO=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}GL(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:CO(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&($L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(sN);function AO(e){sN.call(this),this.h=e,this.g={}}aN(AO,sN);var kO=[];function PO(e,t,n,r){Array.isArray(n)||(n&&(kO[0]=n.toString()),n=kO);for(var i=0;i<n.length;i++){var o=eO(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function RO(e){_N(e.g,(function(e,t){this.g.hasOwnProperty(t)&&iO(e)}),e),e.g={}}function LO(){this.g=!0}function NO(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return dO(n)}catch(ky){return t}}(e,n)+(r?" "+r:"")}))}AO.prototype.M=function(){AO.Z.M.call(this),RO(this)},AO.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},LO.prototype.Aa=function(){this.g=!1},LO.prototype.info=function(){};var OO={},DO=null;function FO(){return DO=DO||new cO}function UO(e){VN.call(this,OO.Ma,e)}function zO(e){var t=FO();hO(t,new UO(t,e))}function jO(e,t){VN.call(this,OO.STAT_EVENT,e),this.stat=t}function BO(e){var t=FO();hO(t,new jO(t,e))}function VO(e,t){VN.call(this,OO.Na,e),this.size=t}function HO(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return $L.setTimeout((function(){e()}),t)}OO.Ma="serverreachability",aN(UO,VN),OO.STAT_EVENT="statevent",aN(jO,VN),OO.Na="timingevent",aN(VO,VN);var WO={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},GO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qO(){}function KO(e){return e.h||(e.h=e.i())}function XO(){}qO.prototype.h=null;var YO,$O={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function QO(){VN.call(this,"d")}function JO(){VN.call(this,"c")}function ZO(){}function eD(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new AO(this),this.P=nD,e=AN?125:void 0,this.W=new EO(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tD}function tD(){this.i=null,this.g="",this.h=!1}aN(QO,VN),aN(JO,VN),aN(ZO,qO),ZO.prototype.g=function(){return new XMLHttpRequest},ZO.prototype.i=function(){return{}},YO=new ZO;var nD=45e3,rD={},iD={};function oD(e,t,n){e.K=1,e.v=ID(xD(t)),e.s=n,e.U=!0,aD(e,null)}function aD(e,t){e.F=Date.now(),cD(e),e.A=xD(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),BD(n.h,"t",r),e.C=0,n=e.l.H,e.h=new tD,e.g=VF(e.l,n?t:null,!e.s),0<e.O&&(e.L=new IO(iN(e.Ia,e,e.g),e.O)),PO(e.V,e.g,"readystatechange",e.gb),t=e.H?wN(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zO(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function sD(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function uD(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=lD(e,n))==iD){4==t&&(e.o=4,BO(14),i=!1),NO(e.j,e.m,null,"[Incomplete Response]");break}if(r==rD){e.o=4,BO(15),NO(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}NO(e.j,e.m,r,null),mD(e,r)}sD(e)&&r!=iD&&r!=rD&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,BO(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),NF(t),t.L=!0,BO(11))):(NO(e.j,e.m,n,"[Invalid Chunked Response]"),pD(e),dD(e))}function lD(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?iD:(n=Number(t.substring(n,r)),isNaN(n)?rD:(r+=1)+n>t.length?iD:(t=t.substr(r,n),e.C=r+n,t))}function cD(e){e.Y=Date.now()+e.P,hD(e,e.P)}function hD(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=HO(iN(e.eb,e),t)}function fD(e){e.B&&($L.clearTimeout(e.B),e.B=null)}function dD(e){0==e.l.G||e.I||FF(e.l,e)}function pD(e){fD(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,TO(e.W),RO(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function mD(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||XD(n.i,e)))if(n.I=e.N,!e.J&&XD(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;DF(n),TF(n)}LF(n),BO(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=HO(iN(n.ab,n),6e3));if(1>=KD(n.i)&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else zF(n,11)}else if((e.J||n.g==e)&&DF(n),!dN(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(gN(c,"spdy")||gN(c,"quic")||gN(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(YD(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,CD(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=BF(r,r.H?r.la:null,r.W),d.J){$D(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(fD(p),cD(p)),r.g=d}else RF(r);0<n.l.length&&IF(n)}else"stop"!=o[0]&&"close"!=o[0]||zF(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?zF(n,7):EF(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}zO(4)}catch(g){}}function gD(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(JL(e)||"string"==typeof e)cN(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(JL(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(JL(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function vD(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof vD)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function yD(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];bD(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)bD(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function bD(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(KL=eD.prototype).setTimeout=function(e){this.P=e},KL.gb=function(e){e=e.target;var t=this.L;t&&3==bF(e)?t.l():this.Ia(e)},KL.Ia=function(e){try{if(e==this.g)e:{var t=bF(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||AN||this.g&&(this.h.h||this.g.ga()||_F(this.g)))){this.I||4!=t||7==n||zO(8==n||0>=r?3:2),fD(this);var i=this.g.ba();this.N=i;t:if(sD(this)){var o=_F(this.g);e="";var a=o.length,s=4==bF(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){pD(this),dD(this);var u="";break t}this.h.i=new $L.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dN(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,BO(12),pD(this),dD(this);break e}NO(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mD(this,i)}this.U?(uD(this,t,u),AN&&this.i&&3==t&&(PO(this.V,this.W,"tick",this.fb),this.W.start())):(NO(this.j,this.m,u,null),mD(this,u)),4==t&&pD(this),this.i&&!this.I&&(4==t?FF(this.l,this):(this.i=!1,cD(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,BO(12)):(this.o=0,BO(13)),pD(this),dD(this)}}}catch(f){}},KL.fb=function(){if(this.g){var e=bF(this.g),t=this.g.ga();this.C<t.length&&(fD(this),uD(this,e,t),this.i&&4!=e&&cD(this))}},KL.cancel=function(){this.I=!0,pD(this)},KL.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zO(3),BO(17)),pD(this),this.o=2,dD(this)):hD(this,this.Y-e)},(KL=vD.prototype).R=function(){yD(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},KL.T=function(){return yD(this),this.g.concat()},KL.get=function(e,t){return bD(this.h,e)?this.h[e]:t},KL.set=function(e,t){bD(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},KL.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var _D=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wD(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof wD){this.g=void 0!==t?t:e.g,SD(this,e.j),this.s=e.s,ED(this,e.i),TD(this,e.m),this.l=e.l,t=e.h;var n=new FD;n.i=t.i,t.g&&(n.g=new vD(t.g),n.h=t.h),MD(this,n),this.o=e.o}else e&&(n=String(e).match(_D))?(this.g=!!t,SD(this,n[1]||"",!0),this.s=AD(n[2]||""),ED(this,n[3]||"",!0),TD(this,n[4]),this.l=AD(n[5]||"",!0),MD(this,n[6]||"",!0),this.o=AD(n[7]||"")):(this.g=!!t,this.h=new FD(null,this.g))}function xD(e){return new wD(e)}function SD(e,t,n){e.j=n?AD(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ED(e,t,n){e.i=n?AD(t,!0):t}function TD(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function MD(e,t,n){t instanceof FD?(e.h=t,function(e,t){t&&!e.j&&(UD(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zD(this,t),BD(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=kD(t,OD)),e.h=new FD(t,e.g))}function CD(e,t,n){e.h.set(t,n)}function ID(e){return CD(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function AD(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kD(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,PD),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function PD(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wD.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kD(t,RD,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(kD(t,RD,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(kD(n,"/"==n.charAt(0)?ND:LD,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kD(n,DD)),e.join("")};var RD=/[#\/\?@]/g,LD=/[#\?:]/g,ND=/[#\?]/g,OD=/[#\?@]/g,DD=/#/g;function FD(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function UD(e){e.g||(e.g=new vD,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zD(e,t){UD(e),t=VD(e,t),bD(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,bD((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&yD(e)))}function jD(e,t){return UD(e),t=VD(e,t),bD(e.g.h,t)}function BD(e,t,n){zD(e,t),0<n.length&&(e.i=null,e.g.set(VD(e,t),fN(n)),e.h+=n.length)}function VD(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(KL=FD.prototype).add=function(e,t){UD(this),this.i=null,e=VD(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},KL.forEach=function(e,t){UD(this),this.g.forEach((function(n,r){cN(n,(function(n){e.call(t,n,r,this)}),this)}),this)},KL.T=function(){UD(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},KL.R=function(e){UD(this);var t=[];if("string"==typeof e)jD(this,e)&&(t=hN(t,this.g.get(VD(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=hN(t,e[n])}return t},KL.set=function(e,t){return UD(this),this.i=null,jD(this,e=VD(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},KL.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},KL.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var HD=function(e,t){this.h=e,this.g=t};function WD(e){this.l=e||GD,$L.PerformanceNavigationTiming?e=0<(e=$L.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($L.g&&$L.g.Ea&&$L.g.Ea()&&$L.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var GD=10;function qD(e){return!!e.h||!!e.g&&e.g.size>=e.j}function KD(e){return e.h?1:e.g?e.g.size:0}function XD(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function YD(e,t){e.g?e.g.add(t):e.h=t}function $D(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function QD(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=qL(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return fN(e.i)}function JD(){}function ZD(){this.g=new JD}function eF(e,t,n){var r=n||"";try{gD(e,(function(e,n){var i=e;ZL(e)&&(i=dO(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(bX){throw t.push(r+"type="+encodeURIComponent("_badmap")),bX}}function tF(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function nF(e){this.l=e.$b||null,this.j=e.ib||!1}function rF(e,t){cO.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=iF,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}WD.prototype.cancel=function(){var e,t;if(this.i=QD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=qL(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},JD.prototype.stringify=function(e){return $L.JSON.stringify(e,void 0)},JD.prototype.parse=function(e){return $L.JSON.parse(e,void 0)},aN(nF,qO),nF.prototype.g=function(){return new rF(this.l,this.j)},nF.prototype.i=function(e){return function(){return e}}({}),aN(rF,cO);var iF=0;function oF(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function aF(e){e.readyState=4,e.l=null,e.j=null,e.A=null,sF(e)}function sF(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(KL=rF.prototype).open=function(e,t){if(this.readyState!=iF)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,sF(this)},KL.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||$L).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},KL.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,aF(this)),this.readyState=iF},KL.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,sF(this)),this.g&&(this.readyState=3,sF(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==$L.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oF(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},KL.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?aF(this):sF(this),3==this.readyState&&oF(this)}},KL.Ua=function(e){this.g&&(this.response=this.responseText=e,aF(this))},KL.Ta=function(e){this.g&&(this.response=e,aF(this))},KL.ha=function(){this.g&&aF(this)},KL.setRequestHeader=function(e,t){this.v.append(e,t)},KL.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},KL.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(rF.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uF=$L.JSON.parse;function lF(e){cO.call(this),this.headers=new vD,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cF,this.K=this.L=!1}aN(lF,cO);var cF="",hF=/^https?$/i,fF=["POST","PUT"];function dF(e){return"content-type"==e.toLowerCase()}function pF(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mF(e),vF(e)}function mF(e){e.D||(e.D=!0,hO(e,"complete"),hO(e,"error"))}function gF(e){if(e.h&&void 0!==YL&&(!e.C[1]||4!=bF(e)||2!=e.ba()))if(e.v&&4==bF(e))MO(e.Fa,0,e);else if(hO(e,"readystatechange"),4==bF(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(_D)[1]||null;if(!o&&$L.self&&$L.self.location){var a=$L.self.location.protocol;o=a.substr(0,a.length-1)}i=!hF.test(o?o.toLowerCase():"")}t=i}if(t)hO(e,"complete"),hO(e,"success");else{e.m=6;try{var s=2<bF(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",mF(e)}}finally{vF(e)}}}function vF(e,t){if(e.g){yF(e);var n=e.g,r=e.C[0]?QL:null;e.g=null,e.C=null,t||hO(e,"ready");try{n.onreadystatechange=r}catch(bX){}}}function yF(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&($L.clearTimeout(e.A),e.A=null)}function bF(e){return e.g?e.g.readyState:0}function _F(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case cF:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function wF(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return _N(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):CD(e,t,n))}function xF(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function SF(e){this.za=0,this.l=[],this.h=new LO,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xF("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xF("baseRetryDelayMs",5e3,e),this.$a=xF("retryDelaySeedMs",1e4,e),this.Ya=xF("forwardChannelMaxRetries",2,e),this.ra=xF("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new WD(e&&e.concurrentRequestLimit),this.Ca=new ZD,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function EF(e){if(MF(e),3==e.G){var t=e.V++,n=xD(e.F);CD(n,"SID",e.J),CD(n,"RID",t),CD(n,"TYPE","terminate"),kF(e,n),(t=new eD(e,e.h,t,void 0)).K=2,t.v=ID(xD(n)),n=!1,$L.navigator&&$L.navigator.sendBeacon&&(n=$L.navigator.sendBeacon(t.v.toString(),"")),!n&&$L.Image&&((new Image).src=t.v,n=!0),n||(t.g=VF(t.l,null),t.g.ea(t.v)),t.F=Date.now(),cD(t)}jF(e)}function TF(e){e.g&&(NF(e),e.g.cancel(),e.g=null)}function MF(e){TF(e),e.u&&($L.clearTimeout(e.u),e.u=null),DF(e),e.i.cancel(),e.m&&("number"==typeof e.m&&$L.clearTimeout(e.m),e.m=null)}function CF(e,t){e.l.push(new HD(e.Za++,t)),3==e.G&&IF(e)}function IF(e){qD(e.i)||e.m||(e.m=!0,_O(e.Ha,e),e.C=0)}function AF(e,t){var n;n=t?t.m:e.V++;var r=xD(e.F);CD(r,"SID",e.J),CD(r,"RID",n),CD(r,"AID",e.U),kF(e,r),e.o&&e.s&&wF(r,e.o,e.s),n=new eD(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=PF(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),YD(e.i,n),oD(n,r,t)}function kF(e,t){e.j&&gD({},(function(e,n){CD(t,n,e)}))}function PF(e,t,n){n=Math.min(e.l.length,n);var r=e.j?iN(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=o))o=Math.max(0,i[u].h-100),s=!1;else try{eF(c,a,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function RF(e){e.g||e.u||(e.Y=1,_O(e.Ga,e),e.A=0)}function LF(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=HO(iN(e.Ga,e),UF(e,e.A)),e.A++,!0)}function NF(e){null!=e.B&&($L.clearTimeout(e.B),e.B=null)}function OF(e){e.g=new eD(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=xD(e.oa);CD(t,"RID","rpc"),CD(t,"SID",e.J),CD(t,"CI",e.N?"0":"1"),CD(t,"AID",e.U),kF(e,t),CD(t,"TYPE","xmlhttp"),e.o&&e.s&&wF(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ID(xD(t)),n.s=null,n.U=!0,aD(n,e)}function DF(e){null!=e.v&&($L.clearTimeout(e.v),e.v=null)}function FF(e,t){var n=null;if(e.g==t){DF(e),NF(e),e.g=null;var r=2}else{if(!XD(e.i,t))return;n=t.D,$D(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;hO(r=FO(),new VO(r,n,t,i)),IF(e)}else RF(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(KD(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=HO(iN(e.Ha,e,t),UF(e,e.C)),e.C++,0)))}(e,t)||2==r&&LF(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:zF(e,5);break;case 4:zF(e,10);break;case 3:zF(e,6);break;default:zF(e,2)}}function UF(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function zF(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=iN(e.jb,e);n||(n=new wD("//www.google.com/images/cleardot.gif"),$L.location&&"http"==$L.location.protocol||SD(n,"https"),ID(n)),function(e,t){var n=new LO;if($L.Image){var r=new Image;r.onload=oN(tF,n,r,"TestLoadImage: loaded",!0,t),r.onerror=oN(tF,n,r,"TestLoadImage: error",!1,t),r.onabort=oN(tF,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=oN(tF,n,r,"TestLoadImage: timeout",!1,t),$L.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else BO(2);e.G=0,e.j&&e.j.va(t),jF(e),MF(e)}function jF(e){e.G=0,e.I=-1,e.j&&(0==QD(e.i).length&&0==e.l.length||(e.i.i.length=0,fN(e.l),e.l.length=0),e.j.ua())}function BF(e,t,n){var r=function(e){return e instanceof wD?xD(e):new wD(e,void 0)}(n);if(""!=r.i)t&&ED(r,t+"."+r.i),TD(r,r.m);else{var i=$L.location;r=function(e,t,n,r){var i=new wD(null,void 0);return e&&SD(i,e),t&&ED(i,t),n&&TD(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&_N(e.aa,(function(e,t){CD(r,t,e)})),t=e.D,n=e.sa,t&&n&&CD(r,t,n),CD(r,"VER",e.ma),kF(e,r),r}function VF(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new lF(new nF({ib:!0})):new lF(e.qa)).L=e.H,t}function HF(){}function WF(){if(CN&&!(10<=Number(jN)))throw Error("Environmental error: no available transport.")}function GF(e,t){cO.call(this),this.g=new SF(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!dN(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dN(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new XF(this)}function qF(e){QO.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function KF(){JO.call(this),this.status=1}function XF(e){this.g=e}(KL=lF.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():YO.g(),this.C=this.u?KO(this.u):KO(YO),this.g.onreadystatechange=iN(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void pF(this,o)}e=n||"";var i=new vD(this.headers);r&&gD(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=dF,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=$L.FormData&&e instanceof $L.FormData,!(0<=lN(fF,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yF(this),0<this.B&&((this.K=function(e){return CN&&UN()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=iN(this.pa,this)):this.A=MO(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){pF(this,o)}},KL.pa=function(){void 0!==YL&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hO(this,"timeout"),this.abort(8))},KL.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hO(this,"complete"),hO(this,"abort"),vF(this))},KL.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vF(this,!0)),lF.Z.M.call(this)},KL.Fa=function(){this.s||(this.F||this.v||this.l?gF(this):this.cb())},KL.cb=function(){gF(this)},KL.ba=function(){try{return 2<bF(this)?this.g.status:-1}catch(ct){return-1}},KL.ga=function(){try{return this.g?this.g.responseText:""}catch(ct){return""}},KL.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uF(t)}},KL.Da=function(){return this.m},KL.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(KL=SF.prototype).ma=8,KL.G=1,KL.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},KL.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new eD(this,this.h,e,void 0),n=this.s;if(this.P&&(n?SN(n=wN(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=PF(this,t,r),CD(i=xD(this.F),"RID",e),CD(i,"CVER",22),this.D&&CD(i,"X-HTTP-Session-Id",this.D),kF(this,i),this.o&&n&&wF(i,this.o,n),YD(this.i,t),this.Ra&&CD(i,"TYPE","init"),this.ja?(CD(i,"$req",r),CD(i,"SID","null"),t.$=!0,oD(t,i,null)):oD(t,i,r),this.G=2}}else 3==this.G&&(e?AF(this,e):0==this.l.length||qD(this.i)||AF(this))},KL.Ga=function(){if(this.u=null,OF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=HO(iN(this.bb,this),e)}},KL.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,BO(10),TF(this),OF(this))},KL.ab=function(){null!=this.v&&(this.v=null,TF(this),LF(this),BO(19))},KL.jb=function(e){e?(this.h.info("Successfully pinged google.com"),BO(2)):(this.h.info("Failed to ping google.com"),BO(1))},(KL=HF.prototype).xa=function(){},KL.wa=function(){},KL.va=function(){},KL.ua=function(){},KL.Oa=function(){},WF.prototype.g=function(e,t){return new GF(e,t)},aN(GF,cO),GF.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_O(iN(e.hb,e,t))),BO(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=BF(e,null,e.W),IF(e)},GF.prototype.close=function(){EF(this.g)},GF.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,CF(this.g,t)}else this.v?((t={}).__data__=dO(e),CF(this.g,t)):CF(this.g,e)},GF.prototype.M=function(){this.g.j=null,delete this.j,EF(this.g),delete this.g,GF.Z.M.call(this)},aN(qF,QO),aN(KF,JO),aN(XF,HF),XF.prototype.xa=function(){hO(this.g,"a")},XF.prototype.wa=function(e){hO(this.g,new qF(e))},XF.prototype.va=function(e){hO(this.g,new KF(e))},XF.prototype.ua=function(){hO(this.g,"b")},WF.prototype.createWebChannel=WF.prototype.g,GF.prototype.send=GF.prototype.u,GF.prototype.open=GF.prototype.m,GF.prototype.close=GF.prototype.close,WO.NO_ERROR=0,WO.TIMEOUT=8,WO.HTTP_ERROR=6,GO.COMPLETE="complete",XO.EventType=$O,$O.OPEN="a",$O.CLOSE="b",$O.ERROR="c",$O.MESSAGE="d",cO.prototype.listen=cO.prototype.N,lF.prototype.listenOnce=lF.prototype.O,lF.prototype.getLastError=lF.prototype.La,lF.prototype.getLastErrorCode=lF.prototype.Da,lF.prototype.getStatus=lF.prototype.ba,lF.prototype.getResponseJson=lF.prototype.Qa,lF.prototype.getResponseText=lF.prototype.ga,lF.prototype.send=lF.prototype.ea;var YF=WO,$F=GO,QF=OO,JF=10,ZF=11,eU=nF,tU=XO,nU=lF,rU=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();rU.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iU={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oU=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return FT(t,e),t}(Error),aU=new GM("@firebase/firestore");function sU(){return aU.logLevel}function uU(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(aU.logLevel<=FM.DEBUG){var r=t.map(hU);aU.debug.apply(aU,HT(["Firestore (8.7.0): "+e],r))}}function lU(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(aU.logLevel<=FM.ERROR){var r=t.map(hU);aU.error.apply(aU,HT(["Firestore (8.7.0): "+e],r))}}function cU(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(aU.logLevel<=FM.WARN){var r=t.map(hU);aU.warn.apply(aU,HT(["Firestore (8.7.0): "+e],r))}}function hU(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+e;throw lU(t),new Error(t)}function dU(e,t){e||fU()}function pU(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gU=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=mU(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function vU(e,t){return e<t?-1:e>t?1:0}function yU(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function bU(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _U=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oU(iU.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oU(iU.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new oU(iU.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oU(iU.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?vU(this.nanoseconds,e.nanoseconds):vU(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),wU=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new _U(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function SU(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EU(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TU=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&fU(),void 0===n?n=e.length-t:n>e.length-t&&fU(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),MU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new oU(iU.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(TU),CU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,IU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return CU.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new oU(iU.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new oU(iU.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new oU(iU.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new oU(iU.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(TU),AU=function(){function e(e){this.fields=e,e.sort(IU.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return yU(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),kU=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return vU(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();kU.EMPTY_BYTE_STRING=new kU("");var PU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RU(e){if(dU(!!e),"string"==typeof e){var t=0,n=PU.exec(e);if(dU(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:LU(e.seconds),nanos:LU(e.nanos)}}function LU(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function NU(e){return"string"==typeof e?kU.fromBase64String(e):kU.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function DU(e){var t=e.mapValue.fields.__previous_value__;return OU(t)?DU(t):t}function FU(e){var t=RU(e.mapValue.fields.__local_write_time__.timestampValue);return new _U(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(e){return null==e}function zU(e){return 0===e&&1/e==-1/0}function jU(e){return"number"==typeof e&&Number.isInteger(e)&&!zU(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BU=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(MU.fromString(t))},e.fromName=function(t){return new e(MU.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===MU.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return MU.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new MU(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?OU(e)?4:10:fU()}function HU(e,t){var n,r=VU(e);if(r!==VU(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return FU(e).isEqual(FU(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=RU(e.timestampValue),r=RU(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,NU(e.bytesValue).isEqual(NU(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return LU(e.geoPointValue.latitude)===LU(t.geoPointValue.latitude)&&LU(e.geoPointValue.longitude)===LU(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return LU(e.integerValue)===LU(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=LU(e.doubleValue),r=LU(t.doubleValue);return n===r?zU(n)===zU(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yU(e.arrayValue.values||[],t.arrayValue.values||[],HU);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xU(n)!==xU(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!HU(n[i],r[i])))return!1;return!0}(e,t);default:return fU()}}function WU(e,t){return void 0!==(e.values||[]).find((function(e){return HU(e,t)}))}function GU(e,t){var n,r,i,o,a=VU(e),s=VU(t);if(a!==s)return vU(a,s);switch(a){case 0:return 0;case 1:return vU(e.booleanValue,t.booleanValue);case 2:return r=t,i=LU((n=e).integerValue||n.doubleValue),o=LU(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return qU(e.timestampValue,t.timestampValue);case 4:return qU(FU(e),FU(t));case 5:return vU(e.stringValue,t.stringValue);case 6:return function(e,t){var n=NU(e),r=NU(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=vU(n[i],r[i]);if(0!==o)return o}return vU(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=vU(LU(e.latitude),LU(t.latitude));return 0!==n?n:vU(LU(e.longitude),LU(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=GU(n[i],r[i]);if(o)return o}return vU(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=vU(r[a],o[a]);if(0!==s)return s;var u=GU(n[r[a]],i[o[a]]);if(0!==u)return u}return vU(r.length,o.length)}(e.mapValue,t.mapValue);default:throw fU()}}function qU(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vU(e,t);var n=RU(e),r=RU(t),i=vU(n.seconds,r.seconds);return 0!==i?i:vU(n.nanos,r.nanos)}function KU(e){return XU(e)}function XU(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,"time("+(n=RU(t)).seconds+","+n.nanos+")"):"stringValue"in e?e.stringValue:"bytesValue"in e?NU(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,BU.fromName(i).toString()):"geoPointValue"in e?"geo("+(r=e.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=XU(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+XU(e.fields[o])}return t+"}"}(e.mapValue):fU();var t,n,r,i}function YU(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function $U(e){return!!e&&"integerValue"in e}function QU(e){return!!e&&"arrayValue"in e}function JU(e){return!!e&&"nullValue"in e}function ZU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ez(e){return!!e&&"mapValue"in e}function tz(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue)return{timestampValue:Object.assign({},RU(e.timestampValue))};if(e.mapValue){var t={mapValue:{fields:{}}};return SU(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=tz(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=tz(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nz=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ez(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tz(t)},e.prototype.setAll=function(e){var t=this,n=IU.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=tz(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());ez(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return HU(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ez(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){SU(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(tz(this.value))},e}();function rz(e){var t=[];return SU(e.fields,(function(e,n){var r=new IU([e]);if(ez(n)){var i=rz(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new AU(t)}var iz=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,wU.min(),nz.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,nz.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,nz.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=nz.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=nz.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),oz=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new oz(e,t,n,r,i,o,a)}function sz(e){var t=pU(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+KU(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),UU(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=_z(t.startAt)),t.endAt&&(n+="|ub:",n+=_z(t.endAt)),t.h=n}return t.h}function uz(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!xz(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!HU(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ez(e.startAt,t.startAt)&&Ez(e.endAt,t.endAt)}function lz(e){return BU.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var cz=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return FT(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new hz(e,n,r):"array-contains"===n?new mz(e,r):"in"===n?new gz(e,r):"not-in"===n?new vz(e,r):"array-contains-any"===n?new yz(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new fz(e,n):new dz(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(GU(t,this.value)):null!==t&&VU(this.value)===VU(t)&&this.m(GU(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fU()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),hz=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=BU.fromName(r.referenceValue),i}return FT(t,e),t.prototype.matches=function(e){var t=BU.comparator(e.key,this.key);return this.m(t)},t}(cz),fz=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=pz("in",n),r}return FT(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(cz),dz=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=pz("not-in",n),r}return FT(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(cz);function pz(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return BU.fromName(e.referenceValue)}))}var mz=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return FT(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return QU(t)&&WU(t.arrayValue,this.value)},t}(cz),gz=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return FT(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&WU(this.value.arrayValue,t)},t}(cz),vz=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return FT(t,e),t.prototype.matches=function(e){if(WU(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!WU(this.value.arrayValue,t)},t}(cz),yz=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return FT(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!QU(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return WU(t.value.arrayValue,e)}))},t}(cz),bz=function(e,t){this.position=e,this.before=t};function _z(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return KU(e)})).join(",")}var wz=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function xz(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Sz(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?BU.comparator(BU.fromName(a.referenceValue),n.key):GU(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ez(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!HU(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tz=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Mz(e,t,n,r,i,o,a,s){return new Tz(e,t,n,r,i,o,a,s)}function Cz(e){return new Tz(e)}function Iz(e){return!UU(e.limit)&&"F"===e.limitType}function Az(e){return!UU(e.limit)&&"L"===e.limitType}function kz(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Pz(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Rz(e){return null!==e.collectionGroup}function Lz(e){var t=pU(e);if(null===t.p){t.p=[];var n=Pz(t),r=kz(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new wz(n)),t.p.push(new wz(IU.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new wz(IU.keyField(),u))}}}return t.p}function Nz(e){var t=pU(e);if(!t.T)if("F"===t.limitType)t.T=az(t.path,t.collectionGroup,Lz(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Lz(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new wz(o.field,a))}var s=t.endAt?new bz(t.endAt.position,!t.endAt.before):null,u=t.startAt?new bz(t.startAt.position,!t.startAt.before):null;t.T=az(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Oz(e,t,n){return new Tz(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dz(e,t){return uz(Nz(e),Nz(t))&&e.limitType===t.limitType}function Fz(e){return sz(Nz(e))+"|lt:"+e.limitType}function Uz(e){return"Query(target="+(t=Nz(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+KU(t.value);var t})).join(", ")+"]"),UU(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map((function(e){return(t=e).field.canonicalString()+" ("+t.dir+")";var t})).join(", ")+"]"),t.startAt&&(n+=", startAt: "+_z(t.startAt)),t.endAt&&(n+=", endAt: "+_z(t.endAt)),"Target("+n+"); limitType=")+e.limitType+")";var t,n}function zz(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):BU.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!Sz(n.startAt,Lz(n),r)||n.endAt&&Sz(n.endAt,Lz(n),r)));var n,r}function jz(e){return function(t,n){for(var r=!1,i=0,o=Lz(e);i<o.length;i++){var a=o[i],s=Bz(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Bz(e,t,n){var r,i,o,a,s=e.field.isKeyField()?BU.comparator(t.key,n.key):(r=e.field,i=n,o=t.data.field(r),a=i.data.field(r),null!==o&&null!==a?GU(o,a):fU());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return fU()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zU(t)?"-0":t}}function Hz(e){return{integerValue:""+e}}function Wz(e,t){return jU(t)?Hz(t):Vz(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gz=function(){this._=void 0};function qz(e,t,n){return e instanceof Yz?(i=t,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof $z?Qz(e,t):e instanceof Jz?Zz(e,t):function(e,t){var n=Xz(e,t),r=tj(n)+tj(e.A);return $U(n)&&$U(e.A)?Hz(r):Vz(e.R,r)}(e,t);var r,i,o}function Kz(e,t,n){return e instanceof $z?Qz(e,t):e instanceof Jz?Zz(e,t):n}function Xz(e,t){return e instanceof ej?$U(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var Yz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t}(Gz),$z=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return FT(t,e),t}(Gz);function Qz(e,t){for(var n=nj(t),r=function(e){n.some((function(t){return HU(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Jz=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return FT(t,e),t}(Gz);function Zz(e,t){for(var n=nj(t),r=function(e){n=n.filter((function(t){return!HU(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ej=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return FT(t,e),t}(Gz);function tj(e){return LU(e.integerValue||e.doubleValue)}function nj(e){return QU(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rj=function(e,t){this.field=e,this.transform=t},ij=function(e,t){this.version=e,this.transformResults=t},oj=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function aj(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sj=function(){};function uj(e,t,n){var r,i,o,a,s;e instanceof dj?(i=t,o=n,a=(r=e).value.clone(),s=gj(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof pj?function(e,t,n){if(aj(e.precondition,t)){var r=gj(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mj(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function lj(e,t,n){var r;e instanceof dj?function(e,t,n){if(aj(e.precondition,t)){var r=e.value.clone(),i=vj(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(fj(t),r).setHasLocalMutations()}}(e,t,n):e instanceof pj?function(e,t,n){if(aj(e.precondition,t)){var r=vj(e.fieldTransforms,n,t),i=t.data;i.setAll(mj(e)),i.setAll(r),t.convertToFoundDocument(fj(t),i).setHasLocalMutations()}}(e,t,n):(r=t,aj(e.precondition,r)&&r.convertToNoDocument(wU.min()))}function cj(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Xz(o.transform,a||null);null!=s&&(null==n&&(n=nz.empty()),n.set(o.field,s))}return n||null}function hj(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&yU(n,r,(function(e,t){return r=t,(n=e).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof $z&&o instanceof $z||i instanceof Jz&&o instanceof Jz?yU(i.elements,o.elements,HU):i instanceof ej&&o instanceof ej?HU(i.A,o.A):i instanceof Yz&&o instanceof Yz);var n,r,i,o}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function fj(e){return e.isFoundDocument()?e.version:wU.min()}var dj=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return FT(t,e),t}(sj),pj=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return FT(t,e),t}(sj);function mj(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function gj(e,t,n){var r=new Map;dU(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Kz(a,s,n[i]))}return r}function vj(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,qz(s,u,t))}return r}var yj,bj,_j=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return FT(t,e),t}(sj),wj=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return FT(t,e),t}(sj),xj=function(e){this.count=e};function Sj(e){switch(e){case iU.OK:return fU();case iU.CANCELLED:case iU.UNKNOWN:case iU.DEADLINE_EXCEEDED:case iU.RESOURCE_EXHAUSTED:case iU.INTERNAL:case iU.UNAVAILABLE:case iU.UNAUTHENTICATED:return!1;case iU.INVALID_ARGUMENT:case iU.NOT_FOUND:case iU.ALREADY_EXISTS:case iU.PERMISSION_DENIED:case iU.FAILED_PRECONDITION:case iU.ABORTED:case iU.OUT_OF_RANGE:case iU.UNIMPLEMENTED:case iU.DATA_LOSS:return!0;default:return fU()}}function Ej(e){if(void 0===e)return lU("GRPC error has no .code"),iU.UNKNOWN;switch(e){case yj.OK:return iU.OK;case yj.CANCELLED:return iU.CANCELLED;case yj.UNKNOWN:return iU.UNKNOWN;case yj.DEADLINE_EXCEEDED:return iU.DEADLINE_EXCEEDED;case yj.RESOURCE_EXHAUSTED:return iU.RESOURCE_EXHAUSTED;case yj.INTERNAL:return iU.INTERNAL;case yj.UNAVAILABLE:return iU.UNAVAILABLE;case yj.UNAUTHENTICATED:return iU.UNAUTHENTICATED;case yj.INVALID_ARGUMENT:return iU.INVALID_ARGUMENT;case yj.NOT_FOUND:return iU.NOT_FOUND;case yj.ALREADY_EXISTS:return iU.ALREADY_EXISTS;case yj.PERMISSION_DENIED:return iU.PERMISSION_DENIED;case yj.FAILED_PRECONDITION:return iU.FAILED_PRECONDITION;case yj.ABORTED:return iU.ABORTED;case yj.OUT_OF_RANGE:return iU.OUT_OF_RANGE;case yj.UNIMPLEMENTED:return iU.UNIMPLEMENTED;case yj.DATA_LOSS:return iU.DATA_LOSS;default:return fU()}}(bj=yj||(yj={}))[bj.OK=0]="OK",bj[bj.CANCELLED=1]="CANCELLED",bj[bj.UNKNOWN=2]="UNKNOWN",bj[bj.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bj[bj.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bj[bj.NOT_FOUND=5]="NOT_FOUND",bj[bj.ALREADY_EXISTS=6]="ALREADY_EXISTS",bj[bj.PERMISSION_DENIED=7]="PERMISSION_DENIED",bj[bj.UNAUTHENTICATED=16]="UNAUTHENTICATED",bj[bj.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bj[bj.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bj[bj.ABORTED=10]="ABORTED",bj[bj.OUT_OF_RANGE=11]="OUT_OF_RANGE",bj[bj.UNIMPLEMENTED=12]="UNIMPLEMENTED",bj[bj.INTERNAL=13]="INTERNAL",bj[bj.UNAVAILABLE=14]="UNAVAILABLE",bj[bj.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tj=function(){function e(e,t){this.comparator=e,this.root=t||Cj.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cj.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cj.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Mj(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Mj(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Mj(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Mj(this.root,e,this.comparator,!0)},e}(),Mj=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Cj=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw fU();if(this.right.isRed())throw fU();var e=this.left.check();if(e!==this.right.check())throw fU();return e+(this.isRed()?0:1)},e}();Cj.EMPTY=null,Cj.RED=!0,Cj.BLACK=!1,Cj.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw fU()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw fU()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw fU()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw fU()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw fU()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Cj(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ij=function(){function e(e){this.comparator=e,this.data=new Tj(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Aj(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Aj(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Aj=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),kj=new Tj(BU.comparator);function Pj(){return kj}var Rj=new Tj(BU.comparator);function Lj(){return Rj}var Nj=new Tj(BU.comparator);function Oj(){return Nj}var Dj=new Ij(BU.comparator);function Fj(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Dj,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Uj=new Ij(vU);function zj(){return Uj}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jj=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Bj.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(wU.min(),r,zj(),Pj(),Fj())},e}(),Bj=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(kU.EMPTY_BYTE_STRING,n,Fj(),Fj(),Fj())},e}(),Vj=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Hj=function(e,t){this.targetId=e,this.V=t},Wj=function(e,t,n,r){void 0===n&&(n=kU.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Gj=function(){function e(){this.S=0,this.D=Xj(),this.C=kU.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=Fj(),t=Fj(),n=Fj();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fU()}})),new Bj(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=Xj()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),qj=function(){function e(e){this.W=e,this.G=new Map,this.H=Pj(),this.J=Kj(),this.Y=new Ij(vU)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:fU()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(lz(i))if(0===n){var o=new BU(i.path);this.tt(t,o,iz.newNoDocument(o,wU.min()))}else dU(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&lz(o.target)){var a=new BU(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,iz.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Fj();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new jj(e,n,this.Y,this.H,r);return this.H=Pj(),this.J=Kj(),this.Y=new Ij(vU),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Gj,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Ij(vU),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||uU("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Gj),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Kj(){return new Tj(BU.comparator)}function Xj(){return new Tj(BU.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yj={asc:"ASCENDING",desc:"DESCENDING"},$j={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qj=function(e,t){this.databaseId=e,this.I=t};function Jj(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zj(e,t){return e.I?t.toBase64():t.toUint8Array()}function eB(e,t){return Jj(e,t.toTimestamp())}function tB(e){return dU(!!e),wU.fromTimestamp((t=RU(e),new _U(t.seconds,t.nanos)));var t}function nB(e,t){return(n=e,new MU(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function rB(e){var t=MU.fromString(e);return dU(CB(t)),t}function iB(e,t){return nB(e.databaseId,t.path)}function oB(e,t){var n=rB(t);if(n.get(1)!==e.databaseId.projectId)throw new oU(iU.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new oU(iU.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new BU(lB(n))}function aB(e,t){return nB(e.databaseId,t)}function sB(e){var t=rB(e);return 4===t.length?MU.emptyPath():lB(t)}function uB(e){return new MU(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lB(e){return dU(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cB(e,t,n){return{name:iB(e,t),fields:n.value.mapValue.fields}}function hB(e,t,n){var r=oB(e,t.name),i=tB(t.updateTime),o=new nz({mapValue:{fields:t.fields}}),a=iz.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function fB(e,t){var n,r,i;if(t instanceof dj)n={update:cB(e,t.key,t.value)};else if(t instanceof _j)n={delete:iB(e,t.key)};else if(t instanceof pj)n={update:cB(e,t.key,t.data),updateMask:MB(t.fieldMask)};else{if(!(t instanceof wj))return fU();n={verify:iB(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Yz)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $z)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jz)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ej)return{fieldPath:t.field.canonicalString(),increment:n.A};throw fU()}(0,e)}))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:eB(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:fU())),n}function dB(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?oj.updateTime(tB(n.updateTime)):void 0!==n.exists?oj.exists(n.exists):oj.none():oj.none(),i=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)dU("REQUEST_TIME"===t.setToServerValue),n=new Yz;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new $z(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Jz(i)}else"increment"in t?n=new ej(e,t.increment):fU();var o=IU.fromServerFormat(t.fieldPath);return new rj(o,n)}(e,t)})):[];if(t.update){t.update.name;var o=oB(e,t.update.name),a=new nz({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(e){var t=e.fieldPaths||[];return new AU(t.map((function(e){return IU.fromServerFormat(e)})))}(t.updateMask);return new pj(o,a,s,r,i)}return new dj(o,a,r,i)}if(t.delete){var u=oB(e,t.delete);return new _j(u,r)}if(t.verify){var l=oB(e,t.verify);return new wj(l,r)}return fU()}function pB(e,t){return{documents:[aB(e,t.path)]}}function mB(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=aB(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=aB(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ZU(e.value))return{unaryFilter:{field:xB(e.field),op:"IS_NAN"}};if(JU(e.value))return{unaryFilter:{field:xB(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ZU(e.value))return{unaryFilter:{field:xB(e.field),op:"IS_NOT_NAN"}};if(JU(e.value))return{unaryFilter:{field:xB(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xB(e.field),op:wB(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return{field:xB((t=e).field),direction:_B(t.dir)};var t}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u=(a=e,s=t.limit,a.I||UU(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=yB(t.startAt)),t.endAt&&(n.structuredQuery.endAt=yB(t.endAt)),n}function gB(e){var t=sB(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dU(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=vB(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return new wz(SB((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var u,l,c=null;n.limit&&(u=n.limit,c=UU(l="object"==typeof u?u.value:u)?null:l);var h=null;n.startAt&&(h=bB(n.startAt));var f=null;return n.endAt&&(f=bB(n.endAt)),Mz(t,i,s,a,c,"F",h,f)}function vB(e){return e?void 0!==e.unaryFilter?[TB(e)]:void 0!==e.fieldFilter?[EB(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return vB(e)})).reduce((function(e,t){return e.concat(t)})):fU():[]}function yB(e){return{before:e.before,values:e.position}}function bB(e){var t=!!e.before,n=e.values||[];return new bz(n,t)}function _B(e){return Yj[e]}function wB(e){return $j[e]}function xB(e){return{fieldPath:e.canonicalString()}}function SB(e){return IU.fromServerFormat(e.fieldPath)}function EB(e){return cz.create(SB(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return fU()}}(e.fieldFilter.op),e.fieldFilter.value)}function TB(e){switch(e.unaryFilter.op){case"IS_NAN":var t=SB(e.unaryFilter.field);return cz.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=SB(e.unaryFilter.field);return cz.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=SB(e.unaryFilter.field);return cz.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=SB(e.unaryFilter.field);return cz.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return fU()}}function MB(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function CB(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=kB(t)),t=AB(e.get(n),t);return kB(t)}function AB(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function kB(e){return e+""}function PB(e){var t=e.length;if(dU(t>=2),2===t)return dU(""===e.charAt(0)&&""===e.charAt(1)),MU.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&fU(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:fU()}o=a+2}return new MU(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RB=function(e,t){this.seconds=e,this.nanoseconds=t},LB=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};LB.store="owner",LB.key="owner";var NB=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};NB.store="mutationQueues",NB.keyPath="userId";var OB=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};OB.store="mutations",OB.keyPath="batchId",OB.userMutationsIndex="userMutationsIndex",OB.userMutationsKeyPath=["userId","batchId"];var DB=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,IB(t)]},e.key=function(e,t,n){return[e,IB(t),n]},e}();DB.store="documentMutations",DB.PLACEHOLDER=new DB;var FB=function(e,t){this.path=e,this.readTime=t},UB=function(e,t){this.path=e,this.version=t},zB=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zB.store="remoteDocuments",zB.readTimeIndex="readTimeIndex",zB.readTimeIndexPath="readTime",zB.collectionReadTimeIndex="collectionReadTimeIndex",zB.collectionReadTimeIndexPath=["parentPath","readTime"];var jB=function(e){this.byteSize=e};jB.store="remoteDocumentGlobal",jB.key="remoteDocumentGlobalKey";var BB=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};BB.store="targets",BB.keyPath="targetId",BB.queryTargetsIndexName="queryTargetsIndex",BB.queryTargetsKeyPath=["canonicalId","targetId"];var VB=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};VB.store="targetDocuments",VB.keyPath=["targetId","path"],VB.documentTargetsIndex="documentTargetsIndex",VB.documentTargetsKeyPath=["path","targetId"];var HB=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};HB.key="targetGlobalKey",HB.store="targetGlobal";var WB=function(e,t){this.collectionId=e,this.parent=t};WB.store="collectionParents",WB.keyPath=["collectionId","parent"];var GB=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};GB.store="clientMetadata",GB.keyPath="clientId";var qB=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};qB.store="bundles",qB.keyPath="bundleId";var KB=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};KB.store="namedQueries",KB.keyPath="name";var XB=HT(HT([],HT(HT([],HT(HT([],HT(HT([],[NB.store,OB.store,DB.store,zB.store,BB.store,LB.store,HB.store,VB.store]),[GB.store])),[jB.store])),[WB.store])),[qB.store,KB.store]),YB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$B=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),QB=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},JB=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&fU(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),ZB=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new QB,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new nV(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=sV(t.target.error);n.ft.reject(new nV(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new nV(n,o)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(uU("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new iV(t)},e}(),eV=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(tM())&&lU("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return uU("SimpleDb","Removing database:",e),oV(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=tM(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return zT(this,void 0,void 0,(function(){var t,n=this;return jT(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(uU("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new nV(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new oU(iU.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new nV(e,n))},i.onupgradeneeded=function(e){uU("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){uU("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,l,c;return jT(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=ZB.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),JB.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return l=h.sent(),c="FirebaseError"!==l.name&&o<3,uU("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),s.close(),c?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),tV=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return oV(this.Pt.delete())},e}(),nV=function(e){function t(t,n){var r=this;return(r=e.call(this,iU.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return FT(t,e),t}(oU);function rV(e){return"IndexedDbTransactionError"===e.name}var iV=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(uU("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(uU("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oV(n)},e.prototype.add=function(e){return uU("SimpleDb","ADD",this.store.name,e,e),oV(this.store.add(e))},e.prototype.get=function(e){var t=this;return oV(this.store.get(e)).next((function(n){return void 0===n&&(n=null),uU("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return uU("SimpleDb","DELETE",this.store.name,e),oV(this.store.delete(e))},e.prototype.count=function(){return uU("SimpleDb","COUNT",this.store.name),oV(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){uU("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new JB((function(n,r){t.onerror=function(e){var t=sV(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new JB((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new tV(i),a=t(i.primaryKey,i.value,o);if(a instanceof JB){var s=a.catch((function(e){return o.done(),JB.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return JB.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function oV(e){return new JB((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=sV(e.target.error);n(t)}}))}var aV=!1;function sV(e){var t=eV._t(tM());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new oU("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return aV||(aV=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uV=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return FT(t,e),t}($B);function lV(e,t){var n=pU(e);return eV.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cV=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&uj(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&lj(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&lj(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wU.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fj())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&yU(this.mutations,e.mutations,(function(e,t){return hj(e,t)}))&&yU(this.baseMutations,e.baseMutations,(function(e,t){return hj(e,t)}))},e}(),hV=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){dU(t.mutations.length===r.length);for(var i=Oj(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),fV=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=wU.min()),void 0===o&&(o=wU.min()),void 0===a&&(a=kU.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),dV=function(e){this.Lt=e};function pV(e,t){if(t.document)return hB(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=BU.fromSegments(t.noDocument.path),r=bV(t.noDocument.readTime),i=iz.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=BU.fromSegments(t.unknownDocument.path);return r=bV(t.unknownDocument.version),iz.newUnknownDocument(o,r)}return fU()}function mV(e,t,n){var r,i,o=gV(n),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s={name:iB(r=e.Lt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:Jj(r,i.version.toTimestamp())},u=t.hasCommittedMutations;return new zB(null,null,s,u,o,a)}if(t.isNoDocument()){var l=t.key.path.toArray(),c=yV(t.version);return u=t.hasCommittedMutations,new zB(null,new FB(l,c),null,u,o,a)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=yV(t.version);return new zB(new UB(h,f),null,null,!0,o,a)}return fU()}function gV(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vV(e){var t=new _U(e[0],e[1]);return wU.fromTimestamp(t)}function yV(e){var t=e.toTimestamp();return new RB(t.seconds,t.nanoseconds)}function bV(e){var t=new _U(e.seconds,e.nanoseconds);return wU.fromTimestamp(t)}function _V(e,t){for(var n=(t.baseMutations||[]).map((function(t){return dB(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return dB(e.Lt,t)})),s=_U.fromMillis(t.localWriteTimeMs);return new cV(t.batchId,s,n,a)}function wV(e){var t,n,r=bV(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bV(e.lastLimboFreeSnapshotVersion):wU.min();return void 0!==e.query.documents?(dU(1===(n=e.query).documents.length),t=Nz(Cz(sB(n.documents[0])))):t=Nz(gB(e.query)),new fV(t,e.targetId,0,e.lastListenSequenceNumber,r,i,kU.fromBase64String(e.resumeToken))}function xV(e,t){var n,r=yV(t.snapshotVersion),i=yV(t.lastLimboFreeSnapshotVersion);n=lz(t.target)?pB(e.Lt,t.target):mB(e.Lt,t.target);var o=t.resumeToken.toBase64();return new BB(t.targetId,sz(t.target),r,o,t.sequenceNumber,i,n)}function SV(e){var t=gB({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Oz(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EV=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return TV(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:bV(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return TV(e).put({bundleId:(n=t).id,createTime:yV(tB(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return MV(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:SV(t.bundledQuery),readTime:bV(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return MV(e).put({name:(n=t).name,readTime:yV(tB(n.readTime)),bundledQuery:n.bundledQuery});var n},e}();function TV(e){return lV(e,qB.store)}function MV(e){return lV(e,KB.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CV=function(){function e(){this.Bt=new IV}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),JB.resolve()},e.prototype.getCollectionParents=function(e,t){return JB.resolve(this.Bt.getEntries(t))},e}(),IV=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ij(MU.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Ij(MU.comparator)).toArray()},e}(),AV=function(){function e(){this.qt=new IV}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:IB(i)};return kV(e).put(o)}return JB.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[bU(t),""],!1,!0);return kV(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(PB(o.parent))}return n}))},e}();function kV(e){return lV(e,WB.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RV=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(e,t,n){var r=e.store(OB.store),i=e.store(DB.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){dU(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],d=DB.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return JB.waitFor(o).next((function(){return l}))}function NV(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fU();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */RV.DEFAULT_COLLECTION_PERCENTILE=10,RV.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,RV.DEFAULT=new RV(41943040,RV.DEFAULT_COLLECTION_PERCENTILE,RV.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),RV.DISABLED=new RV(-1,0,0);var OV=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return dU(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return FV(e).$t({index:OB.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=UV(e),a=FV(e);return a.add({}).next((function(s){dU("number"==typeof s);for(var u=new cV(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return fB(e.Lt,t)})),i=n.mutations.map((function(t){return fB(e.Lt,t)}));return new OB(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),c=[],h=new Ij((function(e,t){return vU(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=DB.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),c.push(a.put(l)),c.push(o.put(m,DB.PLACEHOLDER))}return h.forEach((function(t){c.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),JB.waitFor(c).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return FV(e).get(t).next((function(e){return e?(dU(e.userId===n.userId),_V(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?JB.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return FV(e).$t({index:OB.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(dU(t.batchId>=r),o=_V(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return FV(e).$t({index:OB.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return FV(e).Nt(OB.userMutationsIndex,n).next((function(e){return e.map((function(e){return _V(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=DB.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return UV(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=PB(u);if(s===n.userId&&t.path.isEqual(c))return FV(e).get(l).next((function(e){if(!e)throw fU();dU(e.userId===n.userId),o.push(_V(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ij(vU),i=[];return t.forEach((function(t){var o=DB.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=UV(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],l=PB(s);a===n.userId&&t.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),JB.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=DB.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ij(vU);return UV(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],l=e[2],c=PB(u);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(FV(e).get(t).next((function(e){if(null===e)throw fU();dU(e.userId===n.userId),r.push(_V(n.R,e))})))})),JB.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return LV(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),JB.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return JB.resolve();var r=IDBKeyRange.lowerBound(DB.prefixForUser(t.userId)),i=[];return UV(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=PB(e[1]);i.push(o)}else r.done()})).next((function(){dU(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return DV(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return zV(e).get(this.userId).next((function(e){return e||new NB(t.userId,-1,"")}))},e}();function DV(e,t,n){var r=DB.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return UV(e).$t({range:o,kt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function FV(e){return lV(e,OB.store)}function UV(e){return lV(e,DB.store)}function zV(e){return lV(e,NB.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jV=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),BV=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new jV(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return wU.fromTimestamp(new _U(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return VV(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return dU(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return VV(e).$t((function(a,s){var u=wV(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return JB.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return VV(e).$t((function(e,n){var r=wV(n);t(r)}))},e.prototype.Xt=function(e){return HV(e).get(HB.key).next((function(e){return dU(null!==e),e}))},e.prototype.Zt=function(e,t){return HV(e).put(HB.key,t)},e.prototype.te=function(e,t){return VV(e).put(xV(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=sz(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return VV(e).$t({range:r,index:BB.queryTargetsIndexName},(function(e,n,r){var o=wV(n);uz(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=WV(e);return t.forEach((function(t){var a=IB(t.path);i.push(o.put(new VB(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),JB.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=WV(e);return JB.forEach(t,(function(t){var o=IB(t.path);return JB.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=WV(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=WV(e),i=Fj();return r.$t({range:n,kt:!0},(function(e,t,n){var r=PB(e[1]),o=new BU(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=IB(t.path),r=IDBKeyRange.bound([n],[bU(n)],!1,!0),i=0;return WV(e).$t({index:VB.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return VV(e).get(t).next((function(e){return e?wV(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(e){return lV(e,BB.store)}function HV(e){return lV(e,HB.store)}function WV(e){return lV(e,VB.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){if(e.code!==iU.FAILED_PRECONDITION||e.message!==YB)throw e;return uU("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=vU(n,i);return 0===a?vU(r,o):a}var KV=function(){function e(e){this.ne=e,this.buffer=new Ij(qV),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qV(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),XV=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;uU("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return zT(t,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return rV(t=n.sent())?(uU("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,GV(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),YV=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return JB.resolve(rU.o);var r=new KV(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(uU("LruGarbageCollector","Garbage collection skipped; disabled"),JB.resolve(PV)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(uU("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),PV):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(uU("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),sU()<=FM.DEBUG&&uU("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-c)+"ms"),JB.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),$V=function(){function e(e,t){this.db=e,this.garbageCollector=new YV(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return QV(e,n)},e.prototype.removeReference=function(e,t,n){return QV(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return QV(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return zV(e).Ot((function(r){return DV(e,r,t).next((function(e){return e&&(n=!0),JB.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),WV(e).delete([0,IB(a.path)])}))}));i.push(u)}})).next((function(){return JB.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return QV(e,t)},e.prototype.we=function(e,t){var n,r=WV(e),i=rU.o;return r.$t({index:VB.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==rU.o&&t(new BU(PB(n)),i),i=s,n=a):i=rU.o})).next((function(){i!==rU.o&&t(new BU(PB(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function QV(e,t){return WV(e).put((n=t,r=e.currentSequenceNumber,new VB(0,IB(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JV=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){SU(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return EU(this.inner)},e}(),ZV=function(){function e(){this.changes=new JV((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:wU.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:iz.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?JB.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),eH=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return rH(e).put(iH(t),n)},e.prototype.removeEntry=function(e,t){var n=rH(e),r=iH(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return rH(e).get(iH(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return rH(e).get(iH(t)).next((function(e){return{document:n.ye(t,e),size:NV(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Pj();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Pj(),i=new Tj(BU.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,NV(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return JB.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return rH(e).$t({range:r},(function(e,t,r){for(var a=BU.fromSegments(e);o&&BU.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Pj(),o=t.path.length+1,a={};if(n.isEqual(wU.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),l=gV(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=zB.collectionReadTimeIndex}return rH(e).$t(a,(function(e,n,a){if(e.length===o){var s=pV(r.R,n);t.path.isPrefixOf(s.key.path)?zz(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new tH(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return nH(e).get(jB.key).next((function(e){return dU(!!e),e}))},e.prototype.me=function(e,t){return nH(e).put(jB.key,t)},e.prototype.ye=function(e,t){if(t){var n=pV(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(wU.min()))return n}return iz.newInvalidDocument(e)},e}(),tH=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new JV((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return FT(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Ij((function(e,t){return vU(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=mV(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var l=NV(u);r+=l-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var c=mV(t.Ie.R,iz.newNoDocument(o,wU.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,c))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),JB.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ZV);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(e){return lV(e,jB.store)}function rH(e){return lV(e,zB.store)}function iH(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oH=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;dU(n<r&&n>=0&&r<=11);var o=new ZB("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(LB.store),function(e){e.createObjectStore(NB.store,{keyPath:NB.keyPath}),e.createObjectStore(OB.store,{keyPath:OB.keyPath,autoIncrement:!0}).createIndex(OB.userMutationsIndex,OB.userMutationsKeyPath,{unique:!0}),e.createObjectStore(DB.store)}(e),aH(e),function(e){e.createObjectStore(zB.store)}(e));var a=JB.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(VB.store),e.deleteObjectStore(BB.store),e.deleteObjectStore(HB.store)}(e),aH(e)),a=a.next((function(){return function(e){var t=e.store(HB.store),n=new HB(0,0,wU.min().toTimestamp(),0);return t.put(HB.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(OB.store).Nt().next((function(n){e.deleteObjectStore(OB.store),e.createObjectStore(OB.store,{keyPath:OB.keyPath,autoIncrement:!0}).createIndex(OB.userMutationsIndex,OB.userMutationsKeyPath,{unique:!0});var r=t.store(OB.store),i=n.map((function(e){return r.put(e)}));return JB.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(GB.store,{keyPath:GB.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(jB.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(zB.store);t.createIndex(zB.readTimeIndex,zB.readTimeIndexPath,{unique:!1}),t.createIndex(zB.collectionReadTimeIndex,zB.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(qB.store,{keyPath:qB.keyPath})}(e),function(e){e.createObjectStore(KB.store,{keyPath:KB.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(zB.store).$t((function(e,n){t+=NV(n)})).next((function(){var n=new jB(t);return e.store(jB.store).put(jB.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(NB.store),r=e.store(OB.store);return n.Nt().next((function(n){return JB.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(OB.userMutationsIndex,i).next((function(r){return JB.forEach(r,(function(r){dU(r.userId===n.userId);var i=_V(t.R,r);return LV(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(VB.store),n=e.store(zB.store);return e.store(HB.store).get(HB.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new MU(n),a=[0,IB(o)];r.push(t.get(a).next((function(n){return n?JB.resolve():(r=o,t.put(new VB(0,IB(r),e.highestListenSequenceNumber)));var r})))})).next((function(){return JB.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(WB.store,{keyPath:WB.keyPath});var n=t.store(WB.store),r=new IV,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:IB(i)})}};return t.store(zB.store).$t({kt:!0},(function(e,t){var n=new MU(e);return i(n.popLast())})).next((function(){return t.store(DB.store).$t({kt:!0},(function(e,t){e[0];var n=e[1];e[2];var r=PB(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(BB.store);return n.$t((function(e,r){var i=wV(r),o=xV(t.R,i);return n.put(o)}))},e}();function aH(e){e.createObjectStore(VB.store,{keyPath:VB.keyPath}).createIndex(VB.documentTargetsIndex,VB.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(BB.store,{keyPath:BB.keyPath}).createIndex(BB.queryTargetsIndexName,BB.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(HB.store)}var sH="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uH=function(){function e(t,n,r,i,o,a,s,u,l,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=l,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new oU(iU.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new $V(this,i),this.Le=n+"main",this.R=new dV(u),this.Be=new eV(this.Le,11,new oH(this.R)),this.qe=new BV(this.referenceDelegate,this.R),this.Ut=new AV,this.Ue=(h=this.R,f=this.Ut,new eH(h,f)),this.Ke=new EV,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&lU("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new oU(iU.FAILED_PRECONDITION,sH);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new rU(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return zT(t,void 0,void 0,(function(){return jT(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return zT(t,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return zT(t,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return cH(t).put(new GB(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(rV(t))return uU("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return uU("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return lH(e).get(LB.key).next((function(e){return JB.resolve(t.tn(e))}))},e.prototype.en=function(e){return cH(e).delete(this.clientId)},e.prototype.nn=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r,i=this;return jT(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=lV(e,GB.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return JB.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?JB.resolve(!0):lH(e).get(LB.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new oU(iU.FAILED_PRECONDITION,sH);return!1}}return!(!t.networkEnabled||!t.inForeground)||cH(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&uU("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return zT(this,void 0,void 0,(function(){var e=this;return jT(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[LB.store,GB.store],(function(t){var n=new uV(t,rU.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return cH(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return OV.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;uU("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,XB,(function(o){return i=new uV(o,r.Ne?r.Ne.next():rU.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw lU("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new oU(iU.FAILED_PRECONDITION,YB);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return lH(e).get(LB.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new oU(iU.FAILED_PRECONDITION,sH)}))},e.prototype.Ze=function(e){var t=new LB(this.clientId,this.allowTabSynchronization,Date.now());return lH(e).put(LB.key,t)},e.yt=function(){return eV.yt()},e.prototype.Xe=function(e){var t=this,n=lH(e);return n.get(LB.key).next((function(e){return t.tn(e)?(uU("IndexedDbPersistence","Releasing primary lease."),n.delete(LB.key)):JB.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(lU("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return uU("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return lU("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){lU("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function lH(e){return lV(e,LB.store)}function cH(e){return lV(e,GB.store)}function hH(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var fH=function(e,t){this.progress=e,this.wn=t},dH=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return r=t,BU.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(e,t.path):Rz(t)?this.In(e,t,n):this.An(e,t,n);var r},e.prototype.Tn=function(e,t){return this.mn(e,new BU(t)).next((function(e){var t=Lj();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Lj();return this.Ut.getCollectionParents(e,i).next((function(a){return JB.forEach(a,(function(a){var s,u,l=(s=t,u=a.child(i),new Tz(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(e,l,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l);null==c&&(c=iz.newInvalidDocument(l),r=r.insert(l,c)),lj(u,c,o.localWriteTime),c.isFoundDocument()||(r=r.remove(l))}}))})).next((function(){return r.forEach((function(e,n){zz(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=Fj(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof pj&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))})),l}))},e}(),pH=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Fj(),i=Fj(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),mH=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i,o=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(wU.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(i){var a=o.Cn(t,i);return(Iz(t)||Az(t))&&o.Nn(t.limitType,a,r,n)?o.Dn(e,t):(sU()<=FM.DEBUG&&uU("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Uz(t)),o.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Ij(jz(e));return t.forEach((function(t,r){zz(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return sU()<=FM.DEBUG&&uU("QueryEngine","Using full collection scan to execute query:",Uz(t)),this.Sn.getDocumentsMatchingQuery(e,t,wU.min())},e}(),gH=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new Tj(vU),this.kn=new JV((function(e){return sz(e)}),uz),this.$n=wU.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new dH(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(e,t,n,r){return new gH(e,t,n,r)}function yH(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:return n=pU(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new dH(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=Fj(),s=0,u=o;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var f=h[c];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var g=0,v=m.mutations;g<v.length;g++){var y=v[g];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function bH(e,t){var n=pU(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,o,a,s,u,l,c=t.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,o=t,a=h,s=o.batch,u=s.keys(),l=JB.resolve(),u.forEach((function(e){l=l.next((function(){return a.getEntry(i,e)})).next((function(t){var n=o.docVersions.get(e);dU(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,o),t.isValidDocument()&&a.addEntry(t,o.commitVersion))}))})),l.next((function(){return r._n.removeMutationBatch(i,s)}))).next((function(){return h.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,c)}))}))}function _H(e){var t=pU(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function wH(e,t){var n=pU(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];t.targetChanges.forEach((function(t,o){var s,u,l,c=i.get(o);if(c){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var h=t.resumeToken;if(h.approximateByteSize()>0){var f=c.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,f),s=c,l=t,dU((u=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&a.push(n.qe.updateTargetData(e,f))}}}));var s=Pj();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(xH(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(wU.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return JB.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function xH(e,t,n,r,i){var o=Fj();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Pj();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(wU.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):uU("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function SH(e,t){var n=pU(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function EH(e,t){var n=pU(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,JB.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new fV(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function TH(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:r=pU(e),i=r.Fn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!rV(a=s.sent()))throw a;return uU("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}}))}))}function MH(e,t,n){var r=pU(e),i=wU.min(),o=Fj();return r.persistence.runTransaction("Execute query","readonly",(function(e){return(a=r,s=e,u=Nz(t),l=pU(a),c=l.kn.get(u),void 0!==c?JB.resolve(l.Fn.get(c)):l.qe.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:wU.min(),n?o:Fj())})).next((function(e){return{documents:e,Bn:o}}));var a,s,u,l,c}))}function CH(e,t){var n=pU(e),r=pU(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function IH(e){var t=pU(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=pU(e),i=Pj(),o=gV(n),a=rH(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:zB.readTimeIndex,range:s},(function(e,t){var n=pV(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:vV(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function AH(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){return[2,(t=pU(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return t=rH(e),n=wU.min(),t.$t({index:zB.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=vV(t.readTime)),r.done()})).next((function(){return n}));var t,n})).then((function(e){t.$n=e}))]}))}))}function kH(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a,s,u,l,c,h,f,d;return jT(this,(function(p){switch(p.label){case 0:for(i=pU(e),o=Fj(),a=Pj(),s=Oj(),u=0,l=n;u<l.length;u++)c=l[u],h=t.qn(c.metadata.name),c.document&&(o=o.add(h)),a=a.insert(h,t.Un(c)),s=s.insert(h,t.Kn(c.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,EH(i,(m=r,Nz(Cz(MU.fromString("__bundle__/docs/"+m)))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xH(e,f,a,wU.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.qe.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}var m}))}))}function PH(e,t,n){return void 0===n&&(n=Fj()),zT(this,void 0,void 0,(function(){var r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,EH(e,Nz(SV(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=pU(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=tB(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(kU.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var RH=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return JB.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:tB(n.createTime)}),JB.resolve()},e.prototype.getNamedQuery=function(e,t){return JB.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(n=t).name,query:SV(n.bundledQuery),readTime:tB(n.readTime)}),JB.resolve();var n},e}(),LH=function(){function e(){this.Wn=new Ij(NH.Gn),this.zn=new Ij(NH.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new NH(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new NH(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new BU(new MU([])),r=new NH(n,e),i=new NH(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new BU(new MU([])),n=new NH(t,e),r=new NH(t,e+1),i=Fj();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new NH(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),NH=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return BU.comparator(e.key,t.key)||vU(e.ns,t.ns)},e.Hn=function(e,t){return vU(e.ns,t.ns)||BU.comparator(e.key,t.key)},e}(),OH=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Ij(NH.Gn)}return e.prototype.checkEmpty=function(e){return JB.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new cV(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new NH(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return JB.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return JB.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return JB.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return JB.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return JB.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new NH(t,0),i=new NH(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),JB.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ij(vU);return t.forEach((function(e){var t=new NH(e,0),i=new NH(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),JB.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;BU.isDocumentKey(i)||(i=i.child(""));var o=new NH(new BU(i),0),a=new Ij(vU);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),JB.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;dU(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return JB.forEach(t.mutations,(function(i){var o=new NH(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new NH(t,0),r=this.rs.firstAfterOrEqual(n);return JB.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,JB.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),DH=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Tj(BU.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return JB.resolve(n?n.document.clone():iz.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Pj();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():iz.newInvalidDocument(e))})),JB.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Pj(),i=new BU(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,l=u.document,c=u.readTime;if(!t.path.isPrefixOf(s.path))break;c.compareTo(n)<=0||zz(t,l)&&(r=r.insert(l.key,l.clone()))}return JB.resolve(r)},e.prototype.fs=function(e,t){return JB.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new FH(this)},e.prototype.getSize=function(e){return JB.resolve(this.size)},e}(),FH=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return FT(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),JB.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ZV),UH=function(){function e(e){this.persistence=e,this.ds=new JV((function(e){return sz(e)}),uz),this.lastRemoteSnapshotVersion=wU.min(),this.highestTargetId=0,this.ws=0,this._s=new LH,this.targetCount=0,this.ys=jV.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),JB.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return JB.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return JB.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),JB.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),JB.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new jV(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,JB.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),JB.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,JB.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),JB.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return JB.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return JB.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),JB.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),JB.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),JB.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return JB.resolve(n)},e.prototype.containsKey=function(e,t){return JB.resolve(this._s.containsKey(t))},e}(),zH=function(){function e(e,t){var n,r=this;this.gs={},this.Ne=new rU(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new UH(this),this.Ut=new CV,this.Ue=(n=this.Ut,new DH(n,(function(e){return r.referenceDelegate.ps(e)}))),this.R=new dV(t),this.Ke=new RH(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new OH(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;uU("MemoryPersistence","Starting transaction:",e);var i=new jH(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return JB.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),jH=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return FT(t,e),t}($B),BH=function(){function e(e){this.persistence=e,this.As=new LH,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw fU()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),JB.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),JB.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),JB.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return JB.forEach(this.vs,(function(r){var i=BU.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return JB.or([function(){return JB.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),VH=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(e,t){return"firestore_clients_"+e+"_"+t}function WH(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function GH(e,t){return"firestore_targets_"+e+"_"+t}VH.UNAUTHENTICATED=new VH(null),VH.GOOGLE_CREDENTIALS=new VH("google-credentials-uid"),VH.FIRST_PARTY=new VH("first-party-uid");var qH=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new oU(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(lU("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),KH=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new oU(i.error.code,i.error.message)),o?new e(t,i.state,r):(lU("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),XH=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=zj(),a=0;i&&a<r.activeTargetIds.length;++a)i=jU(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(lU("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),YH=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(lU("SharedClientState","Failed to parse online state: "+t),null)},e}(),$H=function(){function e(){this.activeTargetIds=zj()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),QH=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Tj(vU),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=HH(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new $H),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,c,h=this;return jT(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(HH(this.persistenceKey,r)))&&(o=XH.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,l=this.$s;u<l.length;u++)c=l[u],this.Fs(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(GH(this.persistenceKey,e));if(n){var r=KH.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(GH(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return uU("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){uU("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){uU("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(uU("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void lU("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return zT(t,void 0,void 0,(function(){var e,t,r,i,o,a;return jT(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=rU.o;if(null!=e)try{var n=JSON.parse(e);dU("number"==typeof n),t=n}catch(r){lU("SharedClientState","Failed to read sequence number from WebStorage",r)}return t}(n.newValue))!==rU.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new qH(this.currentUser,e,t,n),i=WH(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=WH(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=GH(this.persistenceKey,e),i=new KH(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return XH.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qH.Vs(new VH(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return KH.Vs(r,t)},e.prototype.js=function(e){return YH.Vs(e)},e.prototype.ii=function(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(uU("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=zj();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),JH=function(){function e(){this.li=new $H,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new $H,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),ZH=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),eW=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){uU("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){uU("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),tW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},nW=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),rW=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return FT(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,o){var a=new nU;a.listenOnce($F.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case YF.NO_ERROR:var t=a.getResponseJson();uU("Connection","XHR received:",JSON.stringify(t)),i(t);break;case YF.TIMEOUT:uU("Connection",'RPC "'+e+'" timed out'),o(new oU(iU.DEADLINE_EXCEEDED,"Request time out"));break;case YF.HTTP_ERROR:var n=a.getStatus();if(uU("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,l=u.toLowerCase().replace(/_/g,"-"),Object.values(iU).indexOf(l)>=0?l:iU.UNKNOWN);o(new oU(s,r.message))}else o(new oU(iU.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new oU(iU.UNAVAILABLE,"Connection failed."));break;default:fU()}}finally{uU("Connection",'RPC "'+e+'" completed.')}var u,l}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new WF,o=FO(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new eU({})),this.Fi(a.initMessageHeaders,t),nM()||oM()||tM().indexOf("Electron/")>=0||((n=tM()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||tM().indexOf("MSAppHost/")>=0||iM()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");uU("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),l=!1,c=!1,h=new nW({Ei:function(e){c?uU("Connection","Not sending because WebChannel is closed:",e):(l||(uU("Connection","Opening WebChannel transport."),u.open(),l=!0),uU("Connection","WebChannel sending:",e),u.send(e))},Ti:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,tU.EventType.OPEN,(function(){c||uU("Connection","WebChannel transport opened.")})),f(u,tU.EventType.CLOSE,(function(){c||(c=!0,uU("Connection","WebChannel transport closed"),h.Vi())})),f(u,tU.EventType.ERROR,(function(e){c||(c=!0,cU("Connection","WebChannel transport errored:",e),h.Vi(new oU(iU.UNAVAILABLE,"The operation could not be completed")))})),f(u,tU.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];dU(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){uU("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=yj[e];if(void 0!==t)return Ej(t)}(o),s=i.message;void 0===a&&(a=iU.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new oU(a,s)),u.close()}else uU("Connection","WebChannel received:",n),h.Si(n)}})),f(o,QF.STAT_EVENT,(function(e){e.stat===JF?uU("Connection","Detected buffering proxy"):e.stat===ZF&&uU("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);uU("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then((function(e){return uU("RestConnection","Received: ",e),e}),(function(t){throw cU("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=tW[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(){return"undefined"!=typeof window?window:null}function oW(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(e){return new Qj(e,!0)}var sW=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&uU("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),uW=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sW(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return zT(this,void 0,void 0,(function(){return jT(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===iU.RESOURCE_EXHAUSTED?(lU(t.toString()),lU("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===iU.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new oU(iU.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return zT(e,void 0,void 0,(function(){return jT(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return uU("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(uU("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),lW=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return FT(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:fU(),o=t.targetChange.targetIds||[],a=function(e,t){return e.I?(dU(void 0===t||"string"==typeof t),kU.fromBase64String(t||"")):(dU(void 0===t||t instanceof Uint8Array),kU.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=(u=t.targetChange.cause)&&function(e){var t=void 0===e.code?iU.UNKNOWN:Ej(e.code);return new oU(t,e.message||"")}(u);n=new Wj(i,o,a,s||null)}else if("documentChange"in t){t.documentChange,(i=t.documentChange).document,i.document.name,i.document.updateTime,o=oB(e,i.document.name),a=tB(i.document.updateTime);var u=new nz({mapValue:{fields:i.document.fields}}),l=(s=iz.newFoundDocument(o,a,u),i.targetIds||[]),c=i.removedTargetIds||[];n=new Vj(l,c,s.key,s)}else if("documentDelete"in t)t.documentDelete,(i=t.documentDelete).document,o=oB(e,i.document),a=i.readTime?tB(i.readTime):wU.min(),u=iz.newNoDocument(o,a),s=i.removedTargetIds||[],n=new Vj([],s,u.key,u);else if("documentRemove"in t)t.documentRemove,(i=t.documentRemove).document,o=oB(e,i.document),a=i.removedTargetIds||[],n=new Vj([],a,o,null);else{if(!("filter"in t))return fU();t.filter;var h=t.filter;h.targetId,i=h.count||0,o=new xj(i),a=h.targetId,n=new Hj(a,o)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return wU.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?wU.min():t.readTime?tB(t.readTime):wU.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t,n,r,i,o={};o.database=uB(this.R),o.addTarget=(t=this.R,i=(n=e).target,(r=lz(i)?{documents:pB(t,i)}:{query:mB(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Zj(t,n.resumeToken):n.snapshotVersion.compareTo(wU.min())>0&&(r.readTime=Jj(t,n.snapshotVersion.toTimestamp())),r);var a=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fU()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);a&&(o.labels=a),this.cr(o)},t.prototype.yr=function(e){var t={};t.database=uB(this.R),t.removeTarget=e,this.cr(t)},t}(uW),cW=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return FT(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(dU(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(dU(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?tB(t.updateTime):tB(n)).isEqual(wU.min())&&(r=tB(n)),new ij(r,t.transformResults||[]);var t,n,r}))):[]),n=tB(e.commitTime);return this.listener.Tr(n,t)}var r,i;return dU(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=uB(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return fB(t.R,e)}))};this.cr(n)},t}(uW),hW=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return FT(t,e),t.prototype.br=function(){if(this.Rr)throw new oU(iU.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===iU.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new oU(iU.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===iU.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new oU(iU.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),fW=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(lU(t),this.Vr=!1):uU("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),dW=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return zT(o,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return xW(this)?(uU("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return(t=pU(e)).Or.add(4),[4,mW(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,pW(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new fW(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:if(!xW(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function mW(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function gW(e,t){var n=pU(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),wW(n)?_W(n):FW(n).er()&&yW(n,t))}function vW(e,t){var n=pU(e),r=FW(n);n.$r.delete(t),r.er()&&bW(n,t),0===n.$r.size&&(r.er()?r.ir():xW(n)&&n.Br.set("Unknown"))}function yW(e,t){e.qr.U(t.targetId),FW(e).mr(t)}function bW(e,t){e.qr.U(t),FW(e).yr(t)}function _W(e){e.qr=new qj({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),FW(e).start(),e.Br.Sr()}function wW(e){return xW(e)&&!FW(e).tr()&&e.$r.size>0}function xW(e){return 0===pU(e).Or.size}function SW(e){e.qr=void 0}function EW(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){return e.$r.forEach((function(t,n){yW(e,t)})),[2]}))}))}function TW(e,t){return zT(this,void 0,void 0,(function(){return jT(this,(function(n){return SW(e),wW(e)?(e.Br.Nr(t),_W(e)):e.Br.set("Unknown"),[2]}))}))}function MW(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o;return jT(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof Wj&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),uU("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,CW(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Vj?e.qr.X(t):t instanceof Hj?e.qr.rt(t):e.qr.et(t),n.isEqual(wU.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,_H(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(kU.EMPTY_BYTE_STRING,n.snapshotVersion)),bW(e,t);var r=new fV(n.target,t,1,n.sequenceNumber);yW(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return uU("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,CW(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function CW(e,t,n){return zT(this,void 0,void 0,(function(){var r=this;return jT(this,(function(i){switch(i.label){case 0:if(!rV(t))throw t;return e.Or.add(1),[4,mW(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return _H(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return zT(r,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return uU("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,pW(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function IW(e,t){return t().catch((function(n){return CW(e,n,t)}))}function AW(e){return zT(this,void 0,void 0,(function(){var t,n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:t=pU(e),n=UW(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!(xW(s=t)&&s.kr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,SH(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=UW(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,CW(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return kW(t)&&PW(t),[2]}var s}))}))}function kW(e){return xW(e)&&!UW(e).tr()&&e.kr.length>0}function PW(e){UW(e).start()}function RW(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){return UW(e).Ar(),[2]}))}))}function LW(e){return zT(this,void 0,void 0,(function(){var t,n,r,i;return jT(this,(function(o){for(t=UW(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function NW(e,t,n){return zT(this,void 0,void 0,(function(){var r,i;return jT(this,(function(o){switch(o.label){case 0:return r=e.kr.shift(),i=hV.from(r,t,n),[4,IW(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,AW(e)];case 2:return o.sent(),[2]}}))}))}function OW(e,t){return zT(this,void 0,void 0,(function(){return jT(this,(function(n){switch(n.label){case 0:return t&&UW(e).pr?[4,function(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return Sj(r=t.code)&&r!==iU.ABORTED?(n=e.kr.shift(),UW(e).sr(),[4,IW(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,AW(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return kW(e)&&PW(e),[2]}}))}))}function DW(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return n=pU(e),t?(n.Or.delete(2),[4,pW(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,mW(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function FW(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=pU(e);return r.br(),new lW(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:EW.bind(null,e),Ri:TW.bind(null,e),_r:MW.bind(null,e)}),e.Mr.push((function(n){return zT(t,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),wW(e)?_W(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),SW(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function UW(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=pU(e);return r.br(),new cW(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:RW.bind(null,e),Ri:OW.bind(null,e),Ir:LW.bind(null,e),Tr:NW.bind(null,e)}),e.Mr.push((function(n){return zT(t,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,AW(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.kr.length>0&&(uU("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr}var zW=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new QB,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oU(iU.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function jW(e,t){if(lU("AsyncQueue",t+": "+e),rV(e))return new oU(iU.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BW=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||BU.comparator(t.key,n.key)}:function(e,t){return BU.comparator(e.key,t.key)},this.keyedMap=Lj(),this.sortedSet=new Tj(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),VW=function(){function e(){this.Qr=new Tj(BU.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):fU():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),HW=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,BW.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dz(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),WW=function(){this.Wr=void 0,this.listeners=[]},GW=function(){this.queries=new JV((function(e){return Fz(e)}),Dz),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:if(n=pU(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new WW),!i)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=l.sent(),[3,4];case 3:return s=l.sent(),u=jW(s,"Initialization of query '"+Uz(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&$W(n),[2]}}))}))}function KW(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a;return jT(this,(function(s){return n=pU(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function XW(e,t){for(var n=pU(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var l=0,c=u.listeners;l<c.length;l++)c[l].Hr(a)&&(r=!0);u.Wr=a}}r&&$W(n)}function YW(e,t,n){var r=pU(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function $W(e){e.Gr.forEach((function(e){e.next()}))}var QW=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new HW(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=HW.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),JW=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),ZW=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return oB(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?hB(this.R,e.document,!1):iz.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return tB(e)},e}(),eG=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=tG(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new ZW(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var l=u[s],c=(t.get(l)||Fj()).add(a);t.set(l,c)}}return t},e.prototype.complete=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,kH(this.localStore,new ZW(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,PH(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new fH(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nG=function(e){this.key=e},rG=function(e){this.key=e},iG=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Fj(),this.mutatedKeys=Fj(),this.lo=jz(e),this.fo=new BW(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new VW,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Iz(this.query)&&i.size===this.query.limit?i.last():null,l=Az(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=zz(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||l&&n.lo(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Iz(this.query)||Az(this.query))for(;a.size>this.query.limit;){var c=Iz(this.query)?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fU()}})(n)-o(i)||r.lo(e.doc,t.doc);var n,i,o})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new HW(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new VW,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Fj(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new rG(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new nG(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Fj();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return HW.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),oG=function(e,t,n){this.query=e,this.targetId=t,this.view=n},aG=function(e){this.key=e,this.bo=!1},sG=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new JV((function(e){return Fz(e)}),Dz),this.Vo=new Map,this.So=new Set,this.Do=new Tj(BU.comparator),this.Co=new Map,this.No=new LH,this.xo={},this.Fo=new Map,this.ko=jV.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function uG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return n=FG(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,EH(n.localStore,Nz(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,lG(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&gW(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function lG(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a,s,u,l;return jT(this,(function(c){switch(c.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a;return jT(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,MH(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(xG(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,MH(e.localStore,t,!0)];case 1:return i=c.sent(),o=new iG(t,i.Bn),a=o._o(i.documents),s=Bj.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),xG(e,n,u.To),l=new oG(t,n,o),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function cG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return n=pU(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!Dz(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,TH(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),vW(n.remoteStore,r.targetId),_G(n,r.targetId)})).catch(GV)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return _G(n,r.targetId),[4,TH(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function hG(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:r=UG(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(u=r.localStore,l=t,h=pU(u),f=_U.now(),d=l.reduce((function(e,t){return e.add(t.key)}),Fj()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return h.Mn.pn(e,d).next((function(t){c=t;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=cj(o,c.get(o.key));null!=a&&n.push(new pj(o.key,a,rz(a.value.mapValue),oj.exists(!0)))}return h._n.addMutationBatch(e,f,n,l)}))})).then((function(e){return e.applyToLocalDocumentSet(c),{batchId:e.batchId,changes:c}})))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Tj(vU)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,TG(r,i.changes)];case 3:return s.sent(),[4,AW(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=jW(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var u,l,c,h,f,d}))}))}function fG(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:n=pU(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,wH(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(dU(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?dU(r.bo):e.removedDocuments.size>0&&(dU(r.bo),r.bo=!1))})),[4,TG(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,GV(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function dG(e,t,n){var r=pU(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=pU(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&$W(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function pG(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:return(r=pU(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new Tj(BU.comparator)).insert(o,iz.newNoDocument(o,wU.min())),s=Fj().add(o),u=new jj(wU.min(),new Map,new Ij(vU),a,s),[4,fG(r,u)]):[3,2];case 1:return l.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),EG(r),[3,4];case 2:return[4,TH(r.localStore,t,!1).then((function(){return _G(r,t,n)})).catch(GV)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))}function mG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:n=pU(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,bH(n.localStore,t)];case 2:return i=o.sent(),bG(n,r,null),yG(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,TG(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,GV(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function gG(e,t,n){return zT(this,void 0,void 0,(function(){var r,i;return jT(this,(function(o){switch(o.label){case 0:r=pU(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=t,u=pU(a),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var t;return u._n.lookupMutationBatch(e,s).next((function(n){return dU(null!==n),t=n.keys(),u._n.removeMutationBatch(e,n)})).next((function(){return u._n.performConsistencyCheck(e)})).next((function(){return u.Mn.pn(e,t)}))})))];case 2:return i=o.sent(),bG(r,t,n),yG(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,TG(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,GV(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function vG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:xW((n=pU(e)).remoteStore)||uU("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(u=n.localStore,l=pU(u),l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return l._n.getHighestUnacknowledgedBatchId(e)})))];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=jW(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}var u,l}))}))}function yG(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function bG(e,t,n){var r=pU(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function _G(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||wG(e,t)}))}function wG(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(vW(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),EG(e))}function xG(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof nG?(e.No.addReference(o.key,t),SG(e,o)):o instanceof rG?(uU("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||wG(e,o.key)):fU()}}function SG(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(uU("SyncEngine","New document in limbo: "+n),e.So.add(r),EG(e))}function EG(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new BU(MU.fromString(t)),r=e.ko.next();e.Co.set(r,new aG(n)),e.Do=e.Do.insert(n,r),gW(e.remoteStore,new fV(Nz(Cz(n.path)),r,2,rU.o))}}function TG(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:return r=pU(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=pH.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c;return jT(this,(function(h){switch(h.label){case 0:n=pU(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return JB.forEach(t,(function(t){return JB.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return JB.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!rV(r=h.sent()))throw r;return uU("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function MG(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return(n=pU(e)).currentUser.isEqual(t)?[3,3]:(uU("SyncEngine","User change. New user:",t.toKey()),[4,yH(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).Fo.forEach((function(e){e.forEach((function(e){e.reject(new oU(iU.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,TG(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function CG(e,t){var n=pU(e),r=n.Co.get(t);if(r&&r.bo)return Fj().add(r.key);var i=Fj(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],l=n.Po.get(u);i=i.unionWith(l.view.wo)}return i}function IG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,MH((n=pU(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&xG(n,t.targetId,i.To),i)]}}))}))}function AG(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){return[2,IH((t=pU(e)).localStore).then((function(e){return TG(t,e)}))]}))}))}function kG(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o;return jT(this,(function(a){switch(a.label){case 0:return[4,(s=(i=pU(e)).localStore,u=t,l=pU(s),c=pU(l._n),l.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return c.jt(e,u).next((function(t){return t?l.Mn.pn(e,t):JB.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,AW(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(bG(i,t,r||null),yG(i,t),function(e,t){pU(pU(e)._n).Gt(t)}(i.localStore,t)):fU(),a.label=4;case 4:return[4,TG(i,o)];case 5:return a.sent(),[3,7];case 6:uU("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}var s,u,l,c}))}))}function PG(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l;return jT(this,(function(c){switch(c.label){case 0:return FG(n=pU(e)),UG(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,RG(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,DW(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)s=a[o],gW(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):l=l.then((function(){return _G(n,t),TH(n.localStore,t,!0)})),vW(n.remoteStore,t)})),[4,l]);case 4:return c.sent(),[4,RG(n,u)];case 5:return c.sent(),(h=pU(n)).Co.forEach((function(e,t){vW(h.remoteStore,t)})),h.No.ts(),h.Co=new Map,h.Do=new Tj(BU.comparator),n.$o=!1,[4,DW(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}var h}))}))}function RG(e,t,n){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,h,f,d,p,m;return jT(this,(function(g){switch(g.label){case 0:n=pU(e),r=[],i=[],o=0,a=t,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(l=n.Vo.get(s))&&0!==l.length?[4,EH(n.localStore,Nz(l[0]))]:[3,7]):[3,13];case 2:u=g.sent(),c=0,h=l,g.label=3;case 3:return c<h.length?(f=h[c],d=n.Po.get(f),[4,IG(n,d)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,CH(n.localStore,s)];case 8:return m=g.sent(),[4,EH(n.localStore,m)];case 9:return u=g.sent(),[4,lG(n,LG(m),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function LG(e){return Mz(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function NG(e){var t=pU(e);return pU(pU(t.localStore).persistence).fn()}function OG(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a;return jT(this,(function(s){switch(s.label){case 0:return(i=pU(e)).$o?(uU("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,IH(i.localStore)];case 3:return o=s.sent(),a=jj.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,TG(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,TH(i.localStore,t,!0)];case 6:return s.sent(),_G(i,t,r),[3,8];case 7:fU(),s.label=8;case 8:return[2]}}))}))}function DG(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f;return jT(this,(function(d){switch(d.label){case 0:if(!(r=FG(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(uU("SyncEngine","Adding an already active target "+a),[3,5]):[4,CH(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,EH(r.localStore,s)];case 3:return u=d.sent(),[4,lG(r,LG(s),u.targetId,!1)];case 4:d.sent(),gW(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:l=function(e){return jT(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,TH(r.localStore,e,!1).then((function(){vW(r.remoteStore,e),_G(r,e)})).catch(GV)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},c=0,h=n,d.label=7;case 7:return c<h.length?(f=h[c],[5,l(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}function FG(e){var t=pU(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fG.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CG.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pG.bind(null,t),t.vo._r=XW.bind(null,t.eventManager),t.vo.Mo=YW.bind(null,t.eventManager),t}function UG(e){var t=pU(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mG.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gG.bind(null,t),t}function zG(e,t,n){var r=pU(e);(function(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:return l.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=l.sent(),[4,(c=e.localStore,h=r,f=pU(c),d=tB(h.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return f.Ke.getBundleMetadata(e,h.id)})).then((function(e){return!!e&&e.createTime.compareTo(d)>=0})))];case 2:return l.sent()?[4,t.close()]:[3,4];case 3:return[2,(l.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(tG(r)),i=new eG(r,e.localStore,t.R),[4,t.Lo()];case 5:o=l.sent(),l.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=l.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=l.sent(),l.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=l.sent(),[4,TG(e,s.wn,void 0)];case 12:return l.sent(),[4,function(e,t){var n=pU(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return l.sent(),n._completeWith(s.progress),[3,15];case 14:return cU("SyncEngine","Loading bundle failed with "+(u=l.sent())),n._failWith(u),[3,15];case 15:return[2]}var c,h,f,d}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var jG=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return this.R=aW(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return vH(this.persistence,new mH,e.initialUser,this.R)},e.prototype.qo=function(e){return new zH(BH.bs,this.R)},e.prototype.Bo=function(e){return new JH},e.prototype.terminate=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),BG=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return FT(t,e),t.prototype.initialize=function(t){return zT(this,void 0,void 0,(function(){return jT(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,AH(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,t)];case 3:return n.sent(),[4,UG(this.Qo.syncEngine)];case 4:return n.sent(),[4,AW(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ko=function(e){return vH(this.persistence,new mH,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new XV(t,e.asyncQueue)},t.prototype.qo=function(e){var t=hH(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?RV.withCacheSize(this.cacheSizeBytes):RV.DEFAULT;return new uH(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,iW(),oW(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new JH},t}(jG),VG=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return FT(t,e),t.prototype.initialize=function(t){return zT(this,void 0,void 0,(function(){var n,r=this;return jT(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof QH?(this.sharedClientState.syncEngine={ui:kG.bind(null,n),ai:OG.bind(null,n),hi:DG.bind(null,n),fn:NG.bind(null,n),ci:AG.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return zT(r,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return[4,PG(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=iW();if(!QH.yt(t))throw new oU(iU.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hH(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QH(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(BG),HG=function(){function e(){}return e.prototype.initialize=function(e,t){return zT(this,void 0,void 0,(function(){var n=this;return jT(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return dG(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=MG.bind(null,this.syncEngine),[4,DW(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new GW},e.prototype.createDatastore=function(e){var t,n,r=aW(e.databaseInfo.databaseId),i=(t=e.databaseInfo,new rW(t));return n=e.credentials,new hW(n,i,r)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return dG(a.syncEngine,e,0)},o=eW.yt()?new eW:new ZH,new dW(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new sG(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=pU(e),uU("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,mW(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return zT(this,void 0,void 0,(function(){var r;return jT(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GG=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),qG=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new QB,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new JW(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),KG=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return zT(this,void 0,void 0,(function(){var t,n=this;return jT(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new oU(iU.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return n=pU(e),r=uB(n.R)+"/documents",i={documents:t.map((function(e){return iB(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t,r,i=(t=n.R,"found"in(r=e)?function(e,t){dU(!!t.found),t.found.name,t.found.updateTime;var n=oB(e,t.found.name),r=tB(t.found.updateTime),i=new nz({mapValue:{fields:t.found.fields}});return iz.newFoundDocument(n,r,i)}(t,r):"missing"in r?function(e,t){dU(!!t.missing),dU(!!t.readTime);var n=oB(e,t.missing),r=tB(t.readTime);return iz.newNoDocument(n,r)}(t,r):fU());a.set(i.key.toString(),i)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());dU(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new _j(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return zT(this,void 0,void 0,(function(){var e,t=this;return jT(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=BU.fromPath(n);t.mutations.push(new wj(r,t.precondition(r)))})),[4,function(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return n=pU(e),r=uB(n.R)+"/documents",i={writes:t.map((function(e){return fB(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fU();t=wU.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new oU(iU.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?oj.updateTime(t):oj.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wU.min()))throw new oU(iU.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oj.updateTime(t)}return oj.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),XG=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sW(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return zT(e,void 0,void 0,(function(){var e,t,n=this;return jT(this,(function(r){return e=new KG(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!UU(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Sj(t)}return!1},e}(),YG=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=VH.UNAUTHENTICATED,this.clientId=gU.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return zT(r,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return uU("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new oU(iU.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new QB;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return zT(e,void 0,void 0,(function(){var e,n;return jT(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=jW(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $G(e,t){return zT(this,void 0,void 0,(function(){var n,r,i=this;return jT(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),uU("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return zT(i,void 0,void 0,(function(){return jT(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,yH(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function QG(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,JG(e)];case 1:return n=i.sent(),uU("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return(n=pU(e)).asyncQueue.verifyOperationInProgress(),uU("RemoteStore","RemoteStore received new credentials"),r=xW(n),n.Or.add(3),[4,mW(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,pW(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function JG(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(uU("FirestoreClient","Using default OfflineComponentProvider"),[4,$G(e,new jG)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function ZG(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(uU("FirestoreClient","Using default OnlineComponentProvider"),[4,QG(e,new HG)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function eq(e){return JG(e).then((function(e){return e.persistence}))}function tq(e){return JG(e).then((function(e){return e.localStore}))}function nq(e){return ZG(e).then((function(e){return e.remoteStore}))}function rq(e){return ZG(e).then((function(e){return e.syncEngine}))}function iq(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:return[4,ZG(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=uG.bind(null,t.syncEngine),n.onUnlisten=cG.bind(null,t.syncEngine),n)]}}))}))}function oq(e,t,n){var r=this;void 0===n&&(n={});var i=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(r,void 0,void 0,(function(){var r;return jT(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new GG({next:function(o){t.enqueueAndForget((function(){return KW(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new oU(iU.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new oU(iU.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new QW(Cz(n.path),o,{includeMetadataChanges:!0,so:!0});return qW(e,a)},[4,iq(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function aq(e,t,n){var r=this;void 0===n&&(n={});var i=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(r,void 0,void 0,(function(){var r;return jT(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new GG({next:function(n){t.enqueueAndForget((function(){return KW(e,a)})),n.fromCache&&"server"===r.source?i.reject(new oU(iU.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new QW(n,o,{includeMetadataChanges:!0,so:!0});return qW(e,a)},[4,iq(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var sq=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},uq=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),lq=new Map,cq=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},hq=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(VH.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),fq=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),dq=function(){function e(e){var t=this;this.currentUser=VH.UNAUTHENTICATED,this.oc=new QB,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){uU("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(uU("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(uU("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(dU("string"==typeof n.accessToken),new cq(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return zT(n,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return dU(null===e||"string"==typeof e),new VH(e)},e}(),pq=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=VH.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),mq=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new pq(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(VH.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(e,t,n){if(!n)throw new oU(iU.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function vq(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new oU(iU.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function yq(e,t,n,r){if(!0===t&&!0===r)throw new oU(iU.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function bq(e){if(!BU.isDocumentKey(e))throw new oU(iU.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function _q(e){if(BU.isDocumentKey(e))throw new oU(iU.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function wq(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":fU()}function xq(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new oU(iU.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=wq(e);throw new oU(iU.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Sq(e,t){if(t<=0)throw new oU(iU.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eq=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new oU(iU.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new oU(iU.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),Tq=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eq({}),this._settingsFrozen=!1,e instanceof uq?(this._databaseId=e,this._credentials=new hq):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new oU(iU.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uq(e.options.projectId)}(e),this._credentials=new dq(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new oU(iU.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new oU(iU.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eq(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new hq;switch(e.type){case"gapi":var t=e.client;return dU(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new mq(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new oU(iU.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=lq.get(this))&&(uU("ComponentProvider","Removing Datastore"),lq.delete(this),e.terminate()),Promise.resolve();var e},e}(),Mq=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Iq(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Cq=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Iq=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Cz(r))||this)._path=r,i.type="collection",i}return FT(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Mq(this.firestore,null,new BU(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Cq);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=PM(e),gq("collection","path",t),e instanceof Tq)return _q(n=MU.fromString.apply(MU,HT([t],r))),new Iq(e,null,n);if(!(e instanceof Mq||e instanceof Iq))throw new oU(iU.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _q(n=MU.fromString.apply(MU,HT([e.path],r)).child(MU.fromString(t))),new Iq(e.firestore,null,n)}function kq(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=PM(e),1===arguments.length&&(t=gU.u()),gq("doc","path",t),e instanceof Tq)return bq(n=MU.fromString.apply(MU,HT([t],r))),new Mq(e,null,new BU(n));if(!(e instanceof Mq||e instanceof Iq))throw new oU(iU.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bq(n=e._path.child(MU.fromString.apply(MU,HT([t],r)))),new Mq(e.firestore,e instanceof Iq?e.converter:null,new BU(n))}function Pq(e,t){return e=PM(e),t=PM(t),(e instanceof Mq||e instanceof Iq)&&(t instanceof Mq||t instanceof Iq)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Rq(e,t){return e=PM(e),t=PM(t),e instanceof Cq&&t instanceof Cq&&e.firestore===t.firestore&&Dz(e._query,t._query)&&e.converter===t.converter}var Lq=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new sW(this,"async_queue_retry"),this.Tc=function(){var t=oW();t&&uU("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=oW();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ic(),this.Ac(e)},e.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var e=oW();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Tc)}},e.prototype.enqueue=function(e){return this.Ic(),this._c?new Promise((function(e){})):this.Ac(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.Rc()}))},e.prototype.Rc=function(){return zT(this,void 0,void 0,(function(){var e,t=this;return jT(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!rV(e=n.sent()))throw e;return uU("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.Rc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Ac=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,lU("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ic(),this.Ec.indexOf(e)>-1&&(t=0);var i=zW.createAndSchedule(this,e,t,n,(function(e){return r.bc(e)}));return this.mc.push(i),i},e.prototype.Ic=function(){this.yc&&fU()},e.prototype.verifyOperationInProgress=function(){},e.prototype.vc=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Pc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Vc=function(e){var t=this;return this.vc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.vc()}))},e.prototype.Sc=function(e){this.Ec.push(e)},e.prototype.bc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function Nq(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Oq=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new QB,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Dq=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Lq,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return FT(t,e),t.prototype._terminate=function(){return this._firestoreClient||Uq(this),this._firestoreClient.terminate()},t}(Tq);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(e){return e._firestoreClient||Uq(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Uq(e){var t,n,r,i,o,a=e._freezeSettings(),s=(n=e._databaseId,r=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",i=e._persistenceKey,new sq(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));e._firestoreClient=new YG(e._credentials,e._queue,s)}function zq(e,t,n){var r=this,i=new QB;return e.asyncQueue.enqueue((function(){return zT(r,void 0,void 0,(function(){var r;return jT(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,$G(e,n)];case 1:return o.sent(),[4,QG(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===iU.FAILED_PRECONDITION||a.code===iU.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function jq(e){if(e._initialized||e._terminated)throw new oU(iU.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bq=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new oU(iU.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new IU(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Vq=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(kU.fromBase64String(t))}catch(n){throw new oU(iU.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(kU.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Hq=function(e){this._methodName=e},Wq=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new oU(iU.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oU(iU.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return vU(this._lat,e._lat)||vU(this._long,e._long)},e}(),Gq=/^__.*__$/,qq=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new pj(e,this.data,this.fieldMask,t,this.fieldTransforms):new dj(e,this.data,t,this.fieldTransforms)},e}(),Kq=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new pj(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fU()}}var Yq=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),e.prototype.Nc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.xc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Nc({path:n,Fc:!1});return r.kc(e),r},e.prototype.$c=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},e.prototype.Oc=function(e){return this.Nc({path:void 0,Fc:!0})},e.prototype.Mc=function(e){return mK(e,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Dc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.kc(this.path.get(e))},e.prototype.kc=function(e){if(0===e.length)throw this.Mc("Document fields must not be empty");if(Xq(this.Cc)&&Gq.test(e))throw this.Mc('Document fields cannot begin and end with "__"')},e}(),$q=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||aW(e)}return e.prototype.qc=function(e,t,n,r){return void 0===r&&(r=!1),new Yq({Cc:e,methodName:t,Bc:n,path:IU.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Qq(e){var t=e._freezeSettings(),n=aW(e._databaseId);return new $q(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Jq(e,t,n,r,i,o){void 0===o&&(o={});var a=e.qc(o.merge||o.mergeFields?2:0,t,n,i);hK("Data must be an object, but it was:",a,r);var s,u,l=lK(r,a);if(o.merge)s=new AU(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var d=fK(t,f[h],n);if(!a.contains(d))throw new oU(iU.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");gK(c,d)||c.push(d)}s=new AU(c),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new qq(new nz(l),s,u)}var Zq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Cc)throw 1===e.Cc?e.Mc(this._methodName+"() can only appear at the top level of your update data"):e.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Hq);function eK(e,t,n){return new Yq({Cc:3,Bc:t.settings.Bc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var tK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype._toFieldTransform=function(e){return new rj(e.path,new Yz)},t.prototype.isEqual=function(e){return e instanceof t},t}(Hq),nK=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Uc=n,r}return FT(t,e),t.prototype._toFieldTransform=function(e){var t=eK(this,e,!0),n=this.Uc.map((function(e){return uK(e,t)})),r=new $z(n);return new rj(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Hq),rK=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Uc=n,r}return FT(t,e),t.prototype._toFieldTransform=function(e){var t=eK(this,e,!0),n=this.Uc.map((function(e){return uK(e,t)})),r=new Jz(n);return new rj(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Hq),iK=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return FT(t,e),t.prototype._toFieldTransform=function(e){var t=new ej(e.R,Wz(e.R,this.Kc));return new rj(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Hq);function oK(e,t,n,r){var i=e.qc(1,t,n);hK("Data must be an object, but it was:",i,r);var o=[],a=nz.empty();SU(r,(function(e,r){var s=pK(t,e,n);r=PM(r);var u=i.$c(s);if(r instanceof Zq)o.push(s);else{var l=uK(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new AU(o);return new Kq(a,s,i.fieldTransforms)}function aK(e,t,n,r,i,o){var a=e.qc(1,t,n),s=[fK(t,r,n)],u=[i];if(o.length%2!=0)throw new oU(iU.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(fK(t,o[l])),u.push(o[l+1]);for(var c=[],h=nz.empty(),f=s.length-1;f>=0;--f)if(!gK(c,s[f])){var d=s[f],p=u[f];p=PM(p);var m=a.$c(d);if(p instanceof Zq)c.push(d);else{var g=uK(p,m);null!=g&&(c.push(d),h.set(d,g))}}var v=new AU(c);return new Kq(h,v,a.fieldTransforms)}function sK(e,t,n,r){return void 0===r&&(r=!1),uK(n,e.qc(r?4:3,t))}function uK(e,t){if(cK(e=PM(e)))return hK("Unsupported field value:",t,e),lK(e,t);if(e instanceof Hq)return function(e,t){if(!Xq(t.Cc))throw t.Mc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Mc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Cc)throw t.Mc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=uK(o[i],t.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=PM(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wz(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=_U.fromDate(e);return{timestampValue:Jj(t.R,n)}}if(e instanceof _U)return n=new _U(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Jj(t.R,n)};if(e instanceof Wq)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vq)return{bytesValue:Zj(t.R,e._byteString)};if(e instanceof Mq){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:nB(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Mc("Unsupported field value: "+wq(e))}(e,t)}function lK(e,t){var n={};return EU(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):SU(e,(function(e,r){var i=uK(r,t.xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function cK(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _U||e instanceof Wq||e instanceof Vq||e instanceof Mq||e instanceof Hq)}function hK(e,t,n){if(!cK(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=wq(n);throw"an object"===r?t.Mc(e+" a custom object"):t.Mc(e+" "+r)}var i}function fK(e,t,n){if((t=PM(t))instanceof Bq)return t._internalPath;if("string"==typeof t)return pK(e,t);throw mK("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var dK=new RegExp("[~\\*/\\[\\]]");function pK(e,t,n){if(t.search(dK)>=0)throw mK("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Bq.bind.apply(Bq,HT([void 0],t.split(".")))))._internalPath}catch(bX){throw mK("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function mK(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new oU(iU.INVALID_ARGUMENT,(s+=". ")+e+u)}function gK(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vK=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Mq(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new yK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(bK("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),yK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(vK);function bK(e,t){return"string"==typeof t?pK(e,t):t instanceof Bq?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _K=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),wK=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return FT(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new xK(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(bK("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(vK),xK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(wK),SK=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _K(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xK(n._firestore,n._userDataWriter,r.key,r,new _K(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oU(iU.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new xK(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _K(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xK(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _K(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:EK(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function EK(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fU()}}function TK(e,t){return e instanceof wK&&t instanceof wK?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof SK&&t instanceof SK&&e._firestore===t._firestore&&Rq(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(e){if(Az(e)&&0===e.explicitOrderBy.length)throw new oU(iU.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var CK=function(){};function IK(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var AK=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qc=t,i.jc=n,i.Wc=r,i.type="where",i}return FT(t,e),t.prototype._apply=function(e){var t,n,r,i=Qq(e.firestore),o=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new oU(iU.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){DK(a,o);for(var u=[],l=0,c=a;l<c.length;l++){var h=c[l];u.push(OK(r,e,h))}s={arrayValue:{values:u}}}else s=OK(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||DK(a,o),s=sK(n,"where",a,"in"===o||"not-in"===o);var f=cz.create(i,o,s);return function(e,t){if(t.g()){var n=Pz(e);if(null!==n&&!n.isEqual(t.field))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=kz(e);null!==r&&FK(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new oU(iU.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new oU(iU.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,i,e.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Cq(e.firestore,e.converter,(t=e._query,n=o,r=t.filters.concat([n]),new Tz(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))},t}(CK),kK=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Qc=t,r.Gc=n,r.type="orderBy",r}return FT(t,e),t.prototype._apply=function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new oU(iU.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new oU(iU.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new wz(t,n);return function(e,t){if(null===kz(e)){var n=Pz(e);null!==n&&FK(e,n,t.field)}}(e,r),r}(e._query,this.Qc,this.Gc);return new Cq(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Tz(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},t}(CK),PK=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.zc=n,i.Hc=r,i}return FT(t,e),t.prototype._apply=function(e){return new Cq(e.firestore,e.converter,Oz(e._query,this.zc,this.Hc))},t}(CK),RK=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return FT(t,e),t.prototype._apply=function(e){var t,n,r=NK(e,this.type,this.Jc,this.Yc);return new Cq(e.firestore,e.converter,(t=e._query,n=r,new Tz(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))},t}(CK),LK=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return FT(t,e),t.prototype._apply=function(e){var t,n,r=NK(e,this.type,this.Jc,this.Yc);return new Cq(e.firestore,e.converter,(t=e._query,n=r,new Tz(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))},t}(CK);function NK(e,t,n,r){if(n[0]=PM(n[0]),n[0]instanceof vK)return function(e,t,n,r,i){if(!r)throw new oU(iU.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Lz(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(YU(t,r.key));else{var l=r.data.field(u.field);if(OU(l))throw new oU(iU.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=u.field.canonicalString();throw new oU(iU.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}o.push(l)}}return new bz(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Qq(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new oU(iU.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.isKeyField()){if("string"!=typeof l)throw new oU(iU.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!Rz(e)&&-1!==l.indexOf("/"))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var c=e.path.child(MU.fromString(l));if(!BU.isDocumentKey(c))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var h=new BU(c);s.push(YU(t,h))}else{var f=sK(n,r,l);s.push(f)}}return new bz(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function OK(e,t,n){if("string"==typeof(n=PM(n))){if(""===n)throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rz(t)&&-1!==n.indexOf("/"))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(MU.fromString(n));if(!BU.isDocumentKey(r))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return YU(e,new BU(r))}if(n instanceof Mq)return YU(e,n._key);throw new oU(iU.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+wq(n)+".")}function DK(e,t){if(!Array.isArray(e)||0===e.length)throw new oU(iU.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new oU(iU.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function FK(e,t,n){if(!n.isEqual(t))throw new oU(iU.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UK=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),VU(e)){case 0:return null;case 1:return e.booleanValue;case 2:return LU(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(NU(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fU()}},e.prototype.convertObject=function(e,t){var n=this,r={};return SU(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Wq(LU(e.latitude),LU(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=DU(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(FU(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=RU(e);return new _U(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=MU.fromString(e);dU(CB(n));var r=new uq(n.get(1),n.get(3)),i=new BU(n.popFirst(5));return r.isEqual(t)||lU("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var jK=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return FT(t,e),t.prototype.convertBytes=function(e){return new Vq(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mq(this.firestore,null,t)},t}(UK),BK=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qq(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=VK(e,this._firestore),i=zK(r.converter,t,n),o=Jq(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,oj.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=VK(e,this._firestore);return o="string"==typeof(t=PM(t))||t instanceof Bq?aK(this._dataReader,"WriteBatch.update",a._key,t,n,r):oK(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,oj.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=VK(e,this._firestore);return this._mutations=this._mutations.concat(new _j(t._key,oj.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new oU(iU.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VK(e,t){if((e=PM(e)).firestore!==t)throw new oU(iU.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HK=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return FT(t,e),t.prototype.convertBytes=function(e){return new Vq(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mq(this.firestore,null,t)},t}(UK);function WK(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=xq(e,Mq);var o=xq(e.firestore,Dq),a=Qq(o);return qK(o,[("string"==typeof(t=PM(t))||t instanceof Bq?aK(a,"updateDoc",e._key,t,n,r):oK(a,"updateDoc",e._key,t)).toMutation(e._key,oj.exists(!0))])}function GK(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=PM(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Nq(i[s])||(a=i[s],s++);var u,l,c,h={includeMetadataChanges:a.includeMetadataChanges};if(Nq(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof Mq)l=xq(e.firestore,Dq),c=Cz(e._key.path),u={next:function(t){i[s]&&i[s](KK(l,e,t))},error:i[s+1],complete:i[s+2]};else{var d=xq(e,Cq);l=xq(d.firestore,Dq),c=d._query;var p=new HK(l);u={next:function(e){i[s]&&i[s](new SK(l,p,d,e))},error:i[s+1],complete:i[s+2]},MK(e._query)}return function(e,t,n,r){var i=this,o=new GG(r),a=new QW(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return zT(i,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=qW,[4,iq(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return zT(i,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=KW,[4,iq(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(Fq(l),c,h,u)}function qK(e,t){return function(e,t){var n=this,r=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(i){switch(i.label){case 0:return n=hG,[4,rq(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(Fq(e),t)}function KK(e,t,n){var r=n.docs.get(t._key),i=new HK(e);return new wK(e,i,t._key,r,new _K(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XK=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return FT(t,e),t.prototype.get=function(t){var n=this,r=VK(t,this._firestore),i=new HK(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new wK(n._firestore,i,r._key,e._document,new _K(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qq(e)}return e.prototype.get=function(e){var t=this,n=VK(e,this._firestore),r=new jK(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fU();var i=e[0];if(i.isFoundDocument())return new vK(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new vK(t._firestore,r,n._key,null,n.converter);throw fU()}))},e.prototype.set=function(e,t,n){var r=VK(e,this._firestore),i=zK(r.converter,t,n),o=Jq(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=VK(e,this._firestore);return o="string"==typeof(t=PM(t))||t instanceof Bq?aK(this._dataReader,"Transaction.update",a._key,t,n,r):oK(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=VK(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(){if("undefined"==typeof Uint8Array)throw new oU(iU.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $K(){if("undefined"==typeof atob)throw new oU(iU.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var QK=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return $K(),new e(Vq.fromBase64String(t))},e.fromUint8Array=function(t){return YK(),new e(Vq.fromUint8Array(t))},e.prototype.toBase64=function(){return $K(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return YK(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),JK=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){jq(e=xq(e,Dq));var n=Fq(e),r=e._freezeSettings(),i=new HG;return zq(n,i,new BG(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){jq(e=xq(e,Dq));var t=Fq(e),n=e._freezeSettings(),r=new HG;return zq(t,r,new VG(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new oU(iU.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new QB;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return zT(t,void 0,void 0,(function(){var t;return jT(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return eV.yt()?(t=e+"main",[4,eV.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(hH(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),ZK=function(){function e(e,t,n){var r=this;this._delegate=t,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof uq||(this.Zc=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||cU("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var i=(e=xq(e,Tq))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&cU("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:t+":"+n,ssl:!1})),r.mockUserToken){var o=eM(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new oU(iU.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new fq(new cq(o,new VH(a)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return zT(t,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:return[4,eq(e)];case 1:return t=r.sent(),[4,nq(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),i=n,o=pU(i),o.Or.delete(0),pW(o))]}var i,o}))}))}))}(Fq(xq(this._delegate,Dq)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return zT(t,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:return[4,eq(e)];case 1:return t=r.sent(),[4,nq(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return(t=pU(e)).Or.add(0),[4,mW(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Fq(xq(this._delegate,Dq)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&yq("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(t,void 0,void 0,(function(){var t;return jT(this,(function(r){switch(r.label){case 0:return t=vG,[4,rq(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Fq(xq(this._delegate,Dq)))},e.prototype.onSnapshotsInSync=function(e){return t=this._delegate,n=e,function(e,t){var n=this,r=new GG(t);return e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=function(e,t){pU(e).Gr.add(t),t.next()},[4,iq(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=function(e,t){pU(e).Gr.delete(t)},[4,iq(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(Fq(t=xq(t,Dq)),Nq(n)?n:{next:n});var t,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Zc)throw new oU(iU.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new dX(this,Aq(this._delegate,e))}catch(t){throw oX(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new iX(this,kq(this._delegate,e))}catch(t){throw oX(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new cX(this,function(e,t){if(e=xq(e,Tq),gq("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new oU(iU.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Cq(e,null,(n=t,new Tz(MU.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw oX(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t,n=this;return function(e,t){var n=this,r=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(i){switch(i.label){case 0:return[4,(o=e,ZG(o).then((function(e){return e.datastore})))];case 1:return n=i.sent(),new XG(e.asyncQueue,n,t,r).run(),[2]}var o}))}))})),r.promise}(Fq(t=this._delegate),(function(r){return function(t){return e(new tX(n,t))}(new XK(t,r))}))},e.prototype.batch=function(){var e=this;return Fq(this._delegate),new nX(new BK(this._delegate,(function(t){return qK(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new oU(iU.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new oU(iU.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),eX=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return FT(t,e),t.prototype.convertBytes=function(e){return new QK(new Vq(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return iX.tu(t,this.firestore,null)},t}(UK);var tX=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new eX(e)}return e.prototype.get=function(e){var t=this,n=pX(e);return this._delegate.get(n).then((function(e){return new uX(t._firestore,new wK(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=pX(e);return n?(vq("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=pX(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,HT([a,t,n],i)),this},e.prototype.delete=function(e){var t=pX(e);return this._delegate.delete(t),this},e}(),nX=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=pX(e);return n?(vq("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=pX(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,HT([a,t,n],i)),this},e.prototype.delete=function(e){var t=pX(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),rX=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new xK(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lX(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.eu=function(t,n){var r=e.nu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new eX(t),n),i.set(n,o)),o},e}();rX.nu=new WeakMap;var iX=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eX(e)}return e.su=function(t,n,r){if(t.length%2!=0)throw new oU(iU.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Mq(n._delegate,r,new BU(t)))},e.tu=function(t,n,r){return new e(n,new Mq(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new dX(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new dX(this.firestore,Aq(this._delegate,e))}catch(t){throw oX(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=PM(e))instanceof Mq&&Pq(this._delegate,e)},e.prototype.set=function(e,t){t=vq("DocumentReference.set",t);try{return function(e,t,n){e=xq(e,Mq);var r=xq(e.firestore,Dq),i=zK(e.converter,t,n);return qK(r,[Jq(Qq(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,oj.none())])}(this._delegate,e,t)}catch(n){throw oX(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?WK(this._delegate,e):WK.apply(void 0,HT([this._delegate,e,t],n))}catch(i){throw oX(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return qK(xq((e=this._delegate).firestore,Dq),[new _j(e._key,oj.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=aX(t),i=sX(t,(function(t){return new uX(e.firestore,new wK(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return GK(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=xq(e,Mq);var t=xq(e.firestore,Dq),n=Fq(t),r=new HK(t);return function(e,t){var n=this,r=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return zT(this,void 0,void 0,(function(){var r,i;return jT(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,s=t,u=pU(a),u.persistence.runTransaction("read document","readonly",(function(e){return u.Mn.mn(e,s)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new oU(iU.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=jW(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s,u}))}))},[4,tq(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new wK(t,r,e._key,n,new _K(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=xq(e,Mq);var t=xq(e.firestore,Dq);return oq(Fq(t),e._key,{source:"server"}).then((function(n){return KK(t,e,n)}))}(this._delegate):function(e){e=xq(e,Mq);var t=xq(e.firestore,Dq);return oq(Fq(t),e._key).then((function(n){return KK(t,e,n)}))}(this._delegate)).then((function(e){return new uX(t.firestore,new wK(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(rX.eu(this.firestore,t)):this._delegate.withConverter(null))},e}();function oX(e,t,n){return e.message=e.message.replace(t,n),e}function aX(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!Nq(r))return r}return{}}function sX(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Nq(e[0])?e[0]:Nq(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uX=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new iX(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return TK(this._delegate,e._delegate)},e}(),lX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return FT(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(uX),cX=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eX(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,IK(this._delegate,(o=r,a=i=n,s=bK("where",t),new AK(s,a,o))))}catch(i){throw oX(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,a,s},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,IK(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=bK("orderBy",e);return new kK(r,n)}(t,n)))}catch(r){throw oX(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,IK(this._delegate,(Sq("limit",n=t),new PK("limit",n,"F"))))}catch(r){throw oX(r,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,IK(this._delegate,(Sq("limitToLast",n=t),new PK("limitToLast",n,"L"))))}catch(r){throw oX(r,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,IK(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new RK("startAt",e,!0)}.apply(void 0,t)))}catch(r){throw oX(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,IK(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new RK("startAfter",e,!1)}.apply(void 0,t)))}catch(r){throw oX(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,IK(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new LK("endBefore",e,!0)}.apply(void 0,t)))}catch(r){throw oX(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,IK(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new LK("endAt",e,!1)}.apply(void 0,t)))}catch(r){throw oX(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Rq(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=xq(e,Cq);var t=xq(e.firestore,Dq),n=Fq(t),r=new HK(t);return function(e,t){var n=this,r=new QB;return e.asyncQueue.enqueueAndForget((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,MH(e,t,!0)];case 1:return s=u.sent(),r=new iG(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=jW(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,tq(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new SK(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=xq(e,Cq);var t=xq(e.firestore,Dq),n=Fq(t),r=new HK(t);return aq(n,e._query,{source:"server"}).then((function(n){return new SK(t,r,e,n)}))}(this._delegate):function(e){e=xq(e,Cq);var t=xq(e.firestore,Dq),n=Fq(t),r=new HK(t);return MK(e._query),aq(n,e._query).then((function(n){return new SK(t,r,e,n)}))}(this._delegate)).then((function(e){return new fX(t.firestore,new SK(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=aX(t),i=sX(t,(function(t){return new fX(e.firestore,new SK(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return GK(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(rX.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(),hX=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new lX(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),fX=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new cX(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new lX(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new hX(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new lX(n._firestore,r))}))},e.prototype.isEqual=function(e){return TK(this._delegate,e._delegate)},e}(),dX=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return FT(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new iX(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new iX(this.firestore,void 0===e?kq(this._delegate):kq(this._delegate,e))}catch(t){throw oX(t,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t,n,r,i,o,a=this;return(t=this._delegate,n=e,r=xq(t.firestore,Dq),i=kq(t),o=zK(t.converter,n),qK(r,[Jq(Qq(t.firestore),"addDoc",i._key,o,null!==t.converter,{}).toMutation(i._key,oj.exists(!1))]).then((function(){return i}))).then((function(e){return new iX(a.firestore,e)}))},t.prototype.isEqual=function(e){return Pq(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(rX.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(cX);function pX(e){return xq(e,Mq)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mX=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Bq.bind.apply(Bq,HT([void 0],e)))}return e.documentId=function(){return new e(IU.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=PM(e))instanceof Bq&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),gX=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new tK("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Zq("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new nK("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new rK("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new iK("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vX(e){return t=this._delegate,n=e,r=Fq(t=xq(t,Dq)),i=new Oq,function(e,t,n,r){var i,o,a,s=this,u=(i=n,o=aW(t),a=function(e,t){if(e instanceof Uint8Array)return WG(e,t);if(e instanceof ArrayBuffer)return WG(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new qG(a,o));e.asyncQueue.enqueueAndForget((function(){return zT(s,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return t=zG,[4,rq(e)];case 1:return t.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,t._databaseId,n,i),i;var t,n,r,i}function yX(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=pU(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,tq(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(Fq(t=xq(t,Dq)),n).then((function(e){return e?new Cq(t,null,e.query):null}))).then((function(e){return e?new cX(r,e):null}))}var bX,_X,wX={Firestore:ZK,GeoPoint:Wq,Timestamp:_U,Blob:QK,Transaction:tX,WriteBatch:nX,DocumentReference:iX,DocumentSnapshot:uX,Query:cX,QueryDocumentSnapshot:lX,QuerySnapshot:fX,CollectionReference:dX,FieldPath:mX,FieldValue:gX,setLogLevel:function(e){var t;t=e,aU.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(bX=aC).INTERNAL.registerComponent(new RM("firestore",(function(e){return function(e,t){return new ZK(e,new Dq(e,t),new JK)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},wX))),bX.registerVersion("@firebase/firestore","2.3.8"),(_X=ZK).prototype.loadBundle=vX,_X.prototype.namedQuery=yX;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xX={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},SX=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return FT(t,e),t}(Error);var EX=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TX(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var MX=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return TX(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?TX(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CX=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new MX,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new EX(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(bX){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o;return jT(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f,d;return jT(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new SX("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),l=u.timer,c=u.promise,[4,Promise.race([IX(l,this.postJSON(r,i,o)),c,IX(l,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new SX("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!xX[s])return new SX("internal","internal");r=xX[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(bX){}return"ok"===r?null:new SX(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new SX("internal","Response is not valid JSON object.");if(void 0===(d=h.json.data)&&(d=h.json.result),void 0===d)throw new SX("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function IX(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(e){return Array.prototype.slice.call(e)}function kX(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function PX(e,t,n){var r,i=new Promise((function(i,o){kX(r=e[t].apply(e,n)).then(i,o)}));return i.request=r,i}function RX(e,t,n){var r=PX(e,t,n);return r.then((function(e){if(e)return new UX(e,r.request)}))}function LX(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function NX(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return PX(this[t],r,arguments)})}))}function OX(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function DX(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return RX(this[t],r,arguments)})}))}function FX(e){this._index=e}function UX(e,t){this._cursor=e,this._request=t}function zX(e){this._store=e}function jX(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function BX(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new jX(n)}function VX(e){this._db=e}function HX(e,t,n){var r=PX(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new BX(i.result,e.oldVersion,i.transaction))}),r.then((function(e){return new VX(e)}))}function WX(e){return PX(indexedDB,"deleteDatabase",[e])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){var n={Functions:CX};e.INTERNAL.registerComponent(new RM("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new CX(i,o,s,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(aC,fetch.bind(self)),aC.registerVersion("@firebase/functions","0.6.13"),LX(FX,"_index",["name","keyPath","multiEntry","unique"]),NX(FX,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),DX(FX,"_index",IDBIndex,["openCursor","openKeyCursor"]),LX(UX,"_cursor",["direction","key","primaryKey","value"]),NX(UX,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(UX.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),kX(t._request).then((function(e){if(e)return new UX(e,t._request)}))}))})})),zX.prototype.createIndex=function(){return new FX(this._store.createIndex.apply(this._store,arguments))},zX.prototype.index=function(){return new FX(this._store.index.apply(this._store,arguments))},LX(zX,"_store",["name","keyPath","indexNames","autoIncrement"]),NX(zX,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),DX(zX,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),OX(zX,"_store",IDBObjectStore,["deleteIndex"]),jX.prototype.objectStore=function(){return new zX(this._tx.objectStore.apply(this._tx,arguments))},LX(jX,"_tx",["objectStoreNames","mode"]),OX(jX,"_tx",IDBTransaction,["abort"]),BX.prototype.createObjectStore=function(){return new zX(this._db.createObjectStore.apply(this._db,arguments))},LX(BX,"_db",["name","version","objectStoreNames"]),OX(BX,"_db",IDBDatabase,["deleteObjectStore","close"]),VX.prototype.transaction=function(){return new jX(this._db.transaction.apply(this._db,arguments))},LX(VX,"_db",["name","version","objectStoreNames"]),OX(VX,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[zX,FX].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=AX(arguments),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[FX,zX].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})}));var GX,qX=((GX={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',GX["not-registered"]="Firebase Installation is not registered.",GX["installation-not-found"]="Firebase Installation not found.",GX["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',GX["app-offline"]="Could not process request. Application offline.",GX["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",GX),KX=new hM("installations","Installations",qX);function XX(e){return e instanceof cM&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YX(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function $X(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function QX(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,KX.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function JX(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZX(e,t){var n=t.refreshToken,r=JX(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function eY(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function tY(e,t){var n=t.fid;return zT(this,void 0,void 0,(function(){var t,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return t=YX(e),r=JX(e),i={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.4.30"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,eY((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:$X(s.authToken)}];case 3:return[4,QX("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rY=/^[cdef][\w-]{21}$/;function iY(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,HT([],VT(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return rY.test(t)?t:""}catch(n){return""}}function oY(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aY=new Map;function sY(e,t){var n=oY(e);uY(n,t),function(e,t){var n=cY();n&&n.postMessage({key:e,fid:t});hY()}(n,t)}function uY(e,t){var n,r,i=aY.get(e);if(i)try{for(var o=BT(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var lY=null;function cY(){return!lY&&"BroadcastChannel"in self&&((lY=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){uY(e.data.key,e.data.fid)}),lY}function hY(){0===aY.size&&lY&&(lY.close(),lY=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fY,dY="firebase-installations-store",pY=null;function mY(){return pY||(pY=HX("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(dY)}}))),pY}function gY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:return n=oY(e),[4,mY()];case 1:return r=s.sent(),i=r.transaction(dY,"readwrite"),[4,(o=i.objectStore(dY)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||sY(e,t.fid),[2,t]}}))}))}function vY(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return t=oY(e),[4,mY()];case 1:return n=i.sent(),[4,(r=n.transaction(dY,"readwrite")).objectStore(dY).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function yY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return n=oY(e),[4,mY()];case 1:return r=u.sent(),i=r.transaction(dY,"readwrite"),[4,(o=i.objectStore(dY)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||sY(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bY(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,yY(e,(function(n){var r=function(e){return xY(e||{fid:iY(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(KX.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,tY(e,t)];case 1:return n=i.sent(),[2,gY(e,n)];case 2:return XX(r=i.sent())&&409===r.customData.serverCode?[4,vY(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,gY(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:_Y(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function _Y(e){return zT(this,void 0,void 0,(function(){var t,n,r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,wY(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,nY(100)];case 3:return o.sent(),[4,wY(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,bY(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function wY(e){return yY(e,(function(e){if(!e)throw KX.create("installation-not-found");return xY(e)}))}function xY(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function SY(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return zT(this,void 0,void 0,(function(){var e,i,o,a,s,u,l;return jT(this,(function(c){switch(c.label){case 0:return e=function(e,t){var n=t.fid;return YX(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=ZX(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.30"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,eY((function(){return fetch(e,s)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return l=c.sent(),[2,$X(l)];case 3:return[4,QX("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function EY(e,t){return void 0===t&&(t=!1),zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,yY(e.appConfig,(function(r){if(!MY(r))throw KX.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,TY(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,nY(100)];case 3:return i.sent(),[4,TY(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,EY(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw KX.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return UT(UT({},e),{authToken:t})}(r);return n=function(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,SY(e,t)];case 1:return n=o.sent(),i=UT(UT({},t),{authToken:n}),[4,gY(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!XX(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,vY(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=UT(UT({},t),{authToken:{requestStatus:0}}),[4,gY(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function TY(e){return yY(e,(function(e){if(!MY(e))throw KX.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+1e4<Date.now()?UT(UT({},e),{authToken:{requestStatus:0}}):e}))}function MY(e){return void 0!==e&&2===e.registrationStatus}function CY(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return[4,bY(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return YX(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=ZX(e,t),i={method:"DELETE",headers:r},[4,eY((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,QX("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function AY(e,t){var n=e.appConfig;return function(e,t){cY();var n=oY(e),r=aY.get(n);r||(r=new Set,aY.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=oY(e),r=aY.get(n);r&&(r.delete(t),0===r.size&&aY.delete(n),hY())}(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(e){return KX.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.INTERNAL.registerComponent(new RM("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw kY("App Configuration");if(!e.name)throw kY("App Name");try{for(var r=BT(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw kY(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,bY(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):EY(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),zT(this,void 0,void 0,(function(){return jT(this,(function(n){switch(n.label){case 0:return[4,CY(e.appConfig)];case 1:return n.sent(),[4,EY(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:return[4,yY(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw KX.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw KX.create("app-offline");case 3:return[4,IY(t,n)];case 4:return r.sent(),[4,vY(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return AY(n,e)}}}),"PUBLIC")),e.registerVersion("@firebase/installations","0.4.30")}(aC);var PY,RY,LY=((fY={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',fY["only-available-in-window"]="This method is available in a Window context.",fY["only-available-in-sw"]="This method is available in a service worker context.",fY["permission-default"]="The notification permission was not granted and dismissed instead.",fY["permission-blocked"]="The notification permission was not granted and blocked instead.",fY["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",fY["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",fY["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",fY["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",fY["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",fY["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",fY["token-update-no-token"]="FCM returned no token when updating the user to push.",fY["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",fY["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",fY["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",fY["invalid-vapid-key"]="The public VAPID key must be a string.",fY["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",fY),NY=new hM("messaging","Messaging",LY),OY="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function DY(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,HT([],VT(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FY(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(RY=PY||(PY={})).PUSH_RECEIVED="push-received",RY.NOTIFICATION_CLICKED="notification-clicked";function UY(e){return zT(this,void 0,void 0,(function(){var t,n,r=this;return jT(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,HX("fcm_token_details_db",5,(function(t){return zT(r,void 0,void 0,(function(){var r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=t.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:DY(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:DY(o.auth),p256dh:DY(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:DY(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,WX("fcm_token_details_db")];case 4:return i.sent(),[4,WX("fcm_vapid_details_db")];case 5:return i.sent(),[4,WX("undefined")];case 6:return i.sent(),[2,zY(n)?n:null]}}))}))}function zY(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jY="firebase-messaging-store",BY=null;function VY(){return BY||(BY=HX("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(jY)}}))),BY}function HY(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return t=qY(e),[4,VY()];case 1:return[4,i.sent().transaction(jY).objectStore(jY).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,UY(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,WY(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function WY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i;return jT(this,(function(o){switch(o.label){case 0:return n=qY(e),[4,VY()];case 1:return r=o.sent(),[4,(i=r.transaction(jY,"readwrite")).objectStore(jY).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function GY(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return t=qY(e),[4,VY()];case 1:return n=i.sent(),[4,(r=n.transaction(jY,"readwrite")).objectStore(jY).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function qY(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return[4,QY(e)];case 1:n=u.sent(),r=JY(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch($Y(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),NY.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,NY.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw NY.create("token-subscribe-no-token");return[2,o.token]}}))}))}function XY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return[4,QY(e)];case 1:n=u.sent(),r=JY(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch($Y(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),NY.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,NY.create("token-update-failed",{errorInfo:s});if(!o.token)throw NY.create("token-update-no-token");return[2,o.token]}}))}))}function YY(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:return[4,QY(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch($Y(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,NY.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),NY.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function $Y(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function QY(e){var t=e.appConfig,n=e.installations;return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function JY(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==OY&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o,a;return jT(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw NY.create("permission-blocked");return[4,r$(t,n)];case 1:return r=s.sent(),[4,HY(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:DY(r.getKey("auth")),p256dh:DY(r.getKey("p256dh"))},i?[3,3]:[2,n$(e,o)];case 3:if(u=i.subscriptionOptions,c=(l=o).vapidKey===u.vapidKey,h=l.endpoint===u.endpoint,f=l.auth===u.auth,d=l.p256dh===u.p256dh,c&&h&&f&&d)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,YY(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,n$(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,t$({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}var u,l,c,h,f,d;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function e$(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,HY(e)];case 1:return(n=i.sent())?[4,YY(e,n.token)]:[3,4];case 2:return i.sent(),[4,GY(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function t$(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o;return jT(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,XY(t,e)];case 1:return r=a.sent(),i=UT(UT({},e),{token:r,createTime:Date.now()}),[4,WY(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,e$(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function n$(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,KY(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,WY(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function r$(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FY(t)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i$(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a$=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw NY.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,HY(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:OY,r.label=2;case 2:return[2,ZY(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return e$(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw NY.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw NY.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw NY.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw NY.create("only-available-in-window")},e.prototype.onMessage=function(){throw NY.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw NY.create("only-available-in-window")},e.prototype.onPush=function(e){return zT(this,void 0,void 0,(function(){var t,n,r,i;return jT(this,(function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,c$()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,l$(n,t)]:(r=!1,t.notification?[4,h$(s$(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,o$(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return zT(this,void 0,void 0,(function(){var r;return jT(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,e$(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,HY(this.firebaseDependencies)];case 3:return r=i.sent(),[4,e$(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,ZY(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:OY)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return zT(this,void 0,void 0,(function(){var r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return i$(e.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,u$(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,o$(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=PY.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function s$(e){var t,n=UT({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function u$(e){return zT(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return jT(this,(function(u){switch(u.label){case 0:return[4,c$()];case 1:t=u.sent();try{for(n=BT(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function l$(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=PY.PUSH_RECEIVED;try{for(var i=BT(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function c$(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function h$(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var f$=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===PY.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),i$(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw NY.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,ZY(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=OY),[2]}))}))},e.prototype.updateSwReg=function(e){return zT(this,void 0,void 0,(function(){return jT(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw NY.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),NY.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,e$(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?NY.create("permission-blocked"):NY.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw NY.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw NY.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw NY.create("invalid-sw-registration");if(this.swRegistration)throw NY.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw NY.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw NY.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case PY.NOTIFICATION_CLICKED:return"notification_open";case PY.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function d$(e){return NY.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p$={isSupported:m$};function m$(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}aC.INTERNAL.registerComponent(new RM("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw d$("App Configuration Object");if(!e.name)throw d$("App Name");var r=e.options;try{for(var i=BT(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw d$(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!m$())throw NY.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new a$(n):new f$(n)}),"PUBLIC").setServiceProps(p$));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g$=function(e){function t(n,r){var i=e.call(this,v$(n),"Firebase Storage: "+r+" ("+v$(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return FT(t,e),t.prototype._codeEquals=function(e){return v$(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(cM);function v$(e){return"storage/"+e}function y$(){return new g$("unknown","An unknown error occurred, please check the error payload for server response.")}function b$(){return new g$("canceled","User canceled the upload/download.")}function _$(){return new g$("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function w$(e){return new g$("invalid-argument",e)}function x$(){return new g$("app-deleted","The Firebase app was deleted.")}function S$(e){return new g$("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E$(e,t){return new g$("invalid-format","String does not match format '"+e+"': "+t)}function T$(e){throw new g$("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var M$={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},C$=function(e,t){this.data=e,this.contentType=t||null};function I$(e,t){switch(e){case M$.RAW:return new C$(A$(t));case M$.BASE64:case M$.BASE64URL:return new C$(k$(e,t));case M$.DATA_URL:return new C$((n=new P$(t)).base64?k$(M$.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(bX){throw E$(M$.DATA_URL,"Malformed data URL.")}return A$(t)}(n.rest),function(e){return new P$(e).contentType}(t))}var n;throw y$()}function A$(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function k$(e,t){switch(e){case M$.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw E$(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case M$.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw E$(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(bX){throw E$(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var P$=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw E$(M$.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var R$,L$,N$={STATE_CHANGED:"state_changed"},O$={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D$(e){switch(e){case"running":case"pausing":case"canceling":return O$.RUNNING;case"paused":return O$.PAUSED;case"success":return O$.SUCCESS;case"canceled":return O$.CANCELED;case"error":default:return O$.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(L$=R$||(R$={}))[L$.NO_ERROR=0]="NO_ERROR",L$[L$.NETWORK_ERROR=1]="NETWORK_ERROR",L$[L$.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var F$=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=R$.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=R$.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=R$.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw T$("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw T$("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw T$("cannot .getStatus() before sending");try{return this.xhr_.status}catch(bX){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw T$("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var U$=function(){function e(){}return e.prototype.createConnection=function(){return new F$},e}(),z$=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(bX){return new e(t,"")}if(""===r.path)return r;throw new g$("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var f=h[c.indices.bucket],d=h[c.indices.path];d||(d=""),r=new e(f,d),c.postModify(r);break}}if(null==r)throw function(e){return new g$("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),j$=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B$(e){return"string"==typeof e||e instanceof String}function V$(e){return H$()&&e instanceof Blob}function H$(){return"undefined"!=typeof Blob}function W$(e,t,n,r){if(r<t)throw w$("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw w$("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function q$(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K$=function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(bX){o(bX)}else null!==a?((r=y$()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?x$():b$()):o(r=new g$("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new X$(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function c(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)l.call.apply(l,HT([null,e],t));else{var i;s()||o?l.call.apply(l,HT([null,e],t)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),c(i))}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),c(0)):e||(a=1)))}return c(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new X$(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===R$.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new X$(a,r))}else{var s=r.getErrorCode()===R$.ABORT;t(!1,new X$(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),X$=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Y$(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $$(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Y$();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(H$())return new Blob(e);throw new g$("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Q$=function(){function e(e,t){var n=0,r="";V$(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(V$(this.data_)){var r=this.data_,i=(a=t,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new e(i)}var o,a,s;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(H$()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e($$.apply(null,r))}var i=t.map((function(e){return B$(e)?I$(M$.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(e){var t,n;try{t=JSON.parse(e)}catch(bX){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eQ(e,t){return t}var tQ=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||eQ},nQ=null;function rQ(){if(nQ)return nQ;var e=[];e.push(new tQ("bucket")),e.push(new tQ("generation")),e.push(new tQ("metageneration")),e.push(new tQ("name","fullPath",!0));var t=new tQ("name");t.xform=function(e,t){return function(e){return!B$(e)||e.length<2?e:Z$(e)}(t)},e.push(t);var n=new tQ("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new tQ("timeCreated")),e.push(new tQ("updated")),e.push(new tQ("md5Hash",null,!0)),e.push(new tQ("cacheControl",null,!0)),e.push(new tQ("contentDisposition",null,!0)),e.push(new tQ("contentEncoding",null,!0)),e.push(new tQ("contentLanguage",null,!0)),e.push(new tQ("contentType",null,!0)),e.push(new tQ("metadata","customMetadata",!0)),nQ=e}function iQ(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new z$(n,r);return t._makeStorageReference(i)}})}(r,e),r}function oQ(e,t,n){var r=J$(t);return null===r?null:iQ(e,r,n)}function aQ(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(e,t,n){var r=J$(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new z$(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,l=n.items;u<l.length;u++){var c=l[u];s=e._makeStorageReference(new z$(t,c.name)),r.items.push(s)}return r}(e,t,r)}var uQ=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(e){if(!e)throw y$()}function cQ(e,t){return function(n,r){var i=oQ(e,r,t);return lQ(null!==i),i}}function hQ(e,t){return function(n,r){var i=oQ(e,r,t);return lQ(null!==i),function(e,t,n){var r=J$(t);if(null===r)return null;if(!B$(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return G$("/b/"+o(r)+"/o/"+o(i),n)+q$({alt:"media",token:t})}))[0]}(i,r,e.host)}}function fQ(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new g$("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new g$("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new g$("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new g$("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function dQ(e){var t=fQ(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new g$("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function pQ(e,t,n){var r=G$(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new uQ(r,"GET",cQ(e,n),i);return o.errorHandler=dQ(t),o}function mQ(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=G$(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new uQ(a,"GET",function(e,t){return function(n,r){var i=sQ(e,t,r);return lQ(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=fQ(t),u}function gQ(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var vQ=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function yQ(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(bX){lQ(!1)}return lQ(!!n&&-1!==(t||["active"]).indexOf(n)),n}function bQ(e,t,n,r,i,o,a,s){var u=new vQ(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new g$("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,f=h+c,d={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw _$();var m=t.maxUploadRetryTime,g=new uQ(n,"POST",(function(e,n){var i,a=yQ(e,["active","final"]),s=u.current+c,l=r.size();return i="final"===a?cQ(t,o)(e,n):null,new vQ(s,l,"final"===a,i)}),m);return g.headers=d,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=fQ(e),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _Q=function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xQ=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=rQ(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=gQ(t,r,i),s={name:a.fullPath},u=G$(o,e.host),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=aQ(a,n),h=e.maxUploadRetryTime,f=new uQ(u,"POST",(function(e){var t;yQ(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(bX){lQ(!1)}return lQ(B$(t)),t}),h);return f.urlParams=s,f.headers=l,f.body=c,f.errorHandler=fQ(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new uQ(n,"POST",(function(e){var t=yQ(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(bX){lQ(!1)}n||lQ(!1);var i=Number(n);return lQ(!isNaN(i)),new vQ(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=fQ(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new vQ(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=bQ(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(bX){return e._error=bX,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=pQ(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=gQ(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+aQ(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=Q$.getBlob(l,r,c);if(null===h)throw _$();var f={name:u.fullPath},d=G$(o,e.host),p=e.maxUploadRetryTime,m=new uQ(d,"POST",cQ(e,n),p);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=fQ(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=b$(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=D$(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new _Q(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(D$(this._state)){case O$.SUCCESS:wQ(this._resolve.bind(null,this.snapshot))();break;case O$.CANCELED:case O$.ERROR:wQ(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(D$(this._state)){case O$.RUNNING:case O$.PAUSED:e.next&&wQ(e.next.bind(e,this.snapshot))();break;case O$.SUCCESS:e.complete&&wQ(e.complete.bind(e))();break;case O$.CANCELED:case O$.ERROR:e.error&&wQ(e.error.bind(e,this._error))();break;default:e.error&&wQ(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),SQ=function(){function e(e,t){this._service=e,this._location=t instanceof z$?t:z$.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new z$(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Z$(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new z$(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw S$(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQ(e){var t={prefixes:[],items:[]};return TQ(e,t).then((function(){return t}))}function TQ(e,t,n){return zT(this,void 0,void 0,(function(){var r,i,o;return jT(this,(function(a){switch(a.label){case 0:return[4,MQ(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,TQ(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function MQ(e,t){return zT(this,void 0,void 0,(function(){var n,r;return jT(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&W$("options.maxResults",1,1e3,t.maxResults),n=t||{},r=mQ(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function CQ(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=G$(t.fullServerUrl(),e.host),o=aQ(n,r),a=e.maxOperationRetryTime,s=new uQ(i,"PATCH",cQ(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=dQ(t),s}(e.storage,e._location,t,rQ()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function IQ(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=G$(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new uQ(r,"GET",hQ(e,n),i);return o.errorHandler=dQ(t),o}(e.storage,e._location,rQ()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new g$("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function AQ(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=G$(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new uQ(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=dQ(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function kQ(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new z$(e._location.bucket,n);return new SQ(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(e){return/^[A-Za-z]+:\/\//.test(e)}function RQ(e,t){if(e instanceof OQ){var n=e;if(null==n._bucket)throw new g$("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new SQ(n,n._bucket);return null!=t?RQ(r,t):r}if(void 0!==t){if(t.includes(".."))throw w$('`path` param cannot contain ".."');return kQ(e,t)}return e}function LQ(e,t){if(t&&PQ(t)){if(e instanceof OQ)return new SQ(e,t);throw w$("To use ref(service, url), the first argument must be a Storage instance.")}return RQ(e,t)}function NQ(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:z$.makeFromBucketSpec(n,e)}var OQ=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?z$.makeFromBucketSpec(i,this._host):NQ(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=z$.makeFromBucketSpec(this._url,e):this._bucket=NQ(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){W$("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){W$("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new SQ(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new j$(x$());var i=function(e,t,n,r,i,o){var a=q$(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new K$(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return zT(this,void 0,void 0,(function(){var t,n,r;return jT(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DQ(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new xQ(e,new Q$(t),n)}(e=PM(e),t,n)}function FQ(e){return function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=pQ(e.storage,e._location,rQ()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=PM(e))}function UQ(e,t){return LQ(e=PM(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zQ=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),jQ=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new zQ(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new zQ(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new zQ(e,i,i._ref))}:{next:t.next?function(e){return t.next(new zQ(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),BQ=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new VQ(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new VQ(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),VQ=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return kQ(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new jQ(DQ(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=M$.RAW),this._throwIfRoot("putString");var r=I$(t,e),i=UT({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new jQ(new xQ(this._delegate,new Q$(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,EQ(e=PM(e))).then((function(e){return new BQ(e,t.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return MQ(e=PM(e),t)}(this._delegate,e||void 0).then((function(e){return new BQ(e,t.storage)}))},e.prototype.getMetadata=function(){return FQ(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return CQ(e=PM(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return IQ(PM(this._delegate))},e.prototype.delete=function(){return this._throwIfRoot("delete"),AQ(PM(this._delegate))},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw S$(e)},e}(),HQ=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(PQ(e))throw w$("ref() expected a child path but got a URL, use refFromURL instead.");return new VQ(UQ(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!PQ(e))throw w$("refFromURL() expected a full URL but got a child path, use ref() instead.");try{z$.makeFromUrl(e,this._delegate.host)}catch(bX){throw w$("refFromUrl() expected a valid full URL but got an invalid one.")}return new VQ(UQ(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){!function(e,t,n){e.host="http://"+t+":"+n}(this._delegate,e,t)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WQ(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new HQ(r,new OQ(r,i,o,new U$,n,aC.SDK_VERSION))}!function(e){var t={TaskState:O$,TaskEvent:N$,StringFormat:M$,Storage:OQ,Reference:VQ};e.INTERNAL.registerComponent(new RM("storage",WQ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.5.6")}(aC);var GQ,qQ,KQ,XQ=((GQ={})["trace started"]="Trace {$traceName} was started before.",GQ["trace stopped"]="Trace {$traceName} is not running.",GQ["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",GQ["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",GQ["no window"]="Window is not available.",GQ["no app id"]="App id is not available.",GQ["no project id"]="Project id is not available.",GQ["no api key"]="Api key is not available.",GQ["invalid cc log"]="Attempted to queue invalid cc event",GQ["FB not default"]="Performance can only start when Firebase app instance is the default one.",GQ["RC response not ok"]="RC response is not ok",GQ["invalid attribute name"]="Attribute name {$attributeName} is invalid.",GQ["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",GQ["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",GQ["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",GQ),YQ=new hM("performance","Performance",XQ),$Q=new GM("Performance");$Q.logLevel=FM.INFO;var QQ,JQ=function(){function e(e){if(this.window=e,!e)throw YQ.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!sM()||($Q.info("IndexedDB is not supported by current browswer"),!1):($Q.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===qQ&&(qQ=new e(KQ)),qQ},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ZQ(e,t){var n=e.length-t.length;if(n<0||n>1)throw YQ.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eJ,tJ,nJ,rJ=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ZQ("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ZQ("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw YQ.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw YQ.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw YQ.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===QQ&&(QQ=new e),QQ},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iJ(){return eJ}(nJ=tJ||(tJ={}))[nJ.UNKNOWN=0]="UNKNOWN",nJ[nJ.VISIBLE=1]="VISIBLE",nJ[nJ.HIDDEN=2]="HIDDEN";var oJ=["firebase_","google_","ga_"],aJ=new RegExp("^[a-zA-Z]\\w*$");function sJ(){switch(JQ.getInstance().document.visibilityState){case"visible":return tJ.VISIBLE;case"hidden":return tJ.HIDDEN;default:return tJ.UNKNOWN}}function uJ(){var e=JQ.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lJ=!0;function cJ(e){var t=function(){var e=JQ.getInstance().localStorage;if(!e)return;var t=e.getItem("@firebase/performance/configexpire");if(!(t&&(n=t,Number(n)>Date.now())))return;var n;var r=e.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return t?(hJ(t),Promise.resolve()):function(e){return(t=rJ.getInstance().installationsService.getToken(),t.then((function(e){})),t).then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+rJ.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+rJ.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:rJ.getInstance().getAppId(),app_version:"0.4.16",sdk_version:"0.0.1"})});return fetch(r).then((function(e){if(e.ok)return e.json();throw YQ.create("RC response not ok")}))})).catch((function(){$Q.info("Could not fetch config, will use default configs")}));var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e).then(hJ).then((function(e){return function(e){var t=JQ.getInstance().localStorage;if(!e||!t)return;t.setItem("@firebase/performance/config",JSON.stringify(e)),t.setItem("@firebase/performance/configexpire",String(Date.now()+60*rJ.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}function hJ(e){if(!e)return e;var t=rJ.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=lJ,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=fJ(t.tracesSamplingRate),t.logNetworkAfterSampling=fJ(t.networkRequestsSamplingRate),e}function fJ(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dJ,pJ=1;function mJ(){var e;return pJ=2,dJ=dJ||(e=JQ.getInstance().document,new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))).then((function(){return(e=rJ.getInstance().installationsService.getId()).then((function(e){eJ=e})),e;var e})).then((function(e){return cJ(e)})).then((function(){return gJ()}),(function(){return gJ()}))}function gJ(){pJ=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vJ,yJ=3,bJ=[],_J=!1;function wJ(e){setTimeout((function(){var e,t;if(0!==yJ)return bJ.length?(e=bJ.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),void function(e,t){return function(e){var t=rJ.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||$Q.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(bJ=HT(HT([],t),bJ),$Q.info("Retry transport request later.")),yJ=3,wJ(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:rJ.getInstance().logSource,log_event:t},e).catch((function(){bJ=HT(HT([],e),bJ),yJ--,$Q.info("Tries left: "+yJ+"."),wJ(1e4)}))):wJ(1e4)}),e)}function xJ(e){if(!e.eventTime||!e.message)throw YQ.create("invalid cc log");bJ=HT(HT([],bJ),[e])}function SJ(e,t){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vJ||(n=MJ,vJ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];xJ({message:n.apply(void 0,e),eventTime:Date.now()})}),vJ(e,t)}function EJ(e){var t=rJ.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&JQ.getInstance().requiredApisAvailable()&&(e.isAuto&&sJ()!==tJ.VISIBLE||(3===pJ?TJ(e):mJ().then((function(){return TJ(e)}),(function(){return TJ(e)}))))}function TJ(e){if(iJ()){var t=rJ.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return SJ(e,1)}),0)}}function MJ(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:CJ(),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:CJ(),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function CJ(){return{google_app_id:rJ.getInstance().getAppId(),app_instance_id:iJ(),web_app_info:{sdk_version:"0.4.16",page_url:JQ.getInstance().getUrl(),service_worker_status:(e=JQ.getInstance().navigator,"serviceWorker"in e?e.serviceWorker.controller?2:3:1),visibility_state:sJ(),effective_connection_type:uJ()},application_process_state:0};var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IJ=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AJ=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=JQ.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw YQ.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw YQ.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),EJ(this)},e.prototype.record=function(e,t,n){if(e<=0)throw YQ.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw YQ.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=UT({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}EJ(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(i=e,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&IJ.indexOf(i)>-1)&&i.startsWith("_"))throw YQ.create("invalid custom metric name",{customMetricName:e});var n,r,i,o;this.counters[e]=(n=t,(r=Math.floor(n))<n&&$Q.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40||oJ.some((function(e){return n.startsWith(e)}))||!n.match(aJ)),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw YQ.create("invalid attribute name",{attributeName:e});if(!i)throw YQ.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return UT({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=JQ.getInstance().getUrl();if(i){var o=new e("_wt_"+i,!0),a=Math.floor(1e3*JQ.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}EJ(o)}},e.createUserTimingTrace=function(t){EJ(new e(t,!1,t))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(e){var t=e;if(t&&void 0!==t.responseStart){var n=JQ.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=rJ.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return SJ(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PJ(){iJ()&&(setTimeout((function(){return function(){var e=JQ.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){AJ.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),AJ.createOobTrace(t,n,e))}))}else AJ.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=JQ.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){kJ(r[n])}e.setupObserver("resource",kJ)}()}),0),setTimeout((function(){return function(){for(var e=JQ.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){RJ(r[n])}e.setupObserver("measure",RJ)}()}),0))}function RJ(e){var t=e.name;"FB-PERF-TRACE-MEASURE"!==t.substring(0,"FB-PERF-TRACE-MEASURE".length)&&AJ.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LJ=function(){function e(e){this.app=e,JQ.getInstance().requiredApisAvailable()&&uM().then((function(e){e&&(_J||(wJ(5500),_J=!0),mJ().then(PJ,PJ))})).catch((function(e){$Q.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new AJ(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return rJ.getInstance().instrumentationEnabled},set:function(e){rJ.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return rJ.getInstance().dataCollectionEnabled},set:function(e){rJ.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw YQ.create("FB not default");if("undefined"==typeof window)throw YQ.create("no window");var n;return n=window,KQ=n,rJ.getInstance().firebaseAppInstance=e,rJ.getInstance().installationsService=t,new LJ(e)};e.INTERNAL.registerComponent(new RM("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance","0.4.16")}(aC);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NJ,OJ,DJ,FJ,UJ="https://www.googletagmanager.com/gtag/js";(OJ=NJ||(NJ={})).EVENT="event",OJ.SET="set",OJ.CONFIG="config",(FJ=DJ||(DJ={})).ADD_SHIPPING_INFO="add_shipping_info",FJ.ADD_PAYMENT_INFO="add_payment_info",FJ.ADD_TO_CART="add_to_cart",FJ.ADD_TO_WISHLIST="add_to_wishlist",FJ.BEGIN_CHECKOUT="begin_checkout",FJ.CHECKOUT_PROGRESS="checkout_progress",FJ.EXCEPTION="exception",FJ.GENERATE_LEAD="generate_lead",FJ.LOGIN="login",FJ.PAGE_VIEW="page_view",FJ.PURCHASE="purchase",FJ.REFUND="refund",FJ.REMOVE_FROM_CART="remove_from_cart",FJ.SCREEN_VIEW="screen_view",FJ.SEARCH="search",FJ.SELECT_CONTENT="select_content",FJ.SELECT_ITEM="select_item",FJ.SELECT_PROMOTION="select_promotion",FJ.SET_CHECKOUT_OPTION="set_checkout_option",FJ.SHARE="share",FJ.SIGN_UP="sign_up",FJ.TIMING_COMPLETE="timing_complete",FJ.VIEW_CART="view_cart",FJ.VIEW_ITEM="view_item",FJ.VIEW_ITEM_LIST="view_item_list",FJ.VIEW_PROMOTION="view_promotion",FJ.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zJ,jJ=new GM("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(e,t,n,r,i,o){return zT(this,void 0,void 0,(function(){var a,s,u,l;return jT(this,(function(c){switch(c.label){case 0:a=r[i],c.label=1;case 1:return c.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=c.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return l=c.sent(),jJ.error(l),[3,8];case 8:return e(NJ.CONFIG,i,o),[2]}}))}))}function VJ(e,t,n,r,i){return zT(this,void 0,void 0,(function(){var o,a,s,u,l,c,h,f;return jT(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=0,c=a;l<c.length&&(h=c[l],"break"!==u(h));l++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(NJ.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),jJ.error(f),[3,5];case 5:return[2]}}))}))}function HJ(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return zT(this,void 0,void 0,(function(){var s;return jT(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==NJ.EVENT?[3,2]:[4,VJ(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==NJ.CONFIG?[3,4]:[4,BJ(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(NJ.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),jJ.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var WJ=((zJ={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",zJ["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",zJ["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",zJ["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zJ["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zJ["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",zJ["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",zJ["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',zJ["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',zJ),GJ=new hM("analytics","Analytics",WJ),qJ=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function KJ(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function XJ(e){var t;return zT(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:KJ(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=l.sent()).status||304===a.status)return[3,6];s="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,a.json()];case 3:return u=l.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return l.sent(),[3,5];case 5:throw GJ.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function YJ(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=qJ),zT(this,void 0,void 0,(function(){var t,a,s,u,l,c,h;return jT(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,$J(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return jJ.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,XJ(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof cM&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=f.sent())){if(r.deleteThrottleMetadata(t),a)return jJ.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:t,measurementId:a}];throw l}return c=503===Number(l.customData.httpStatus)?kM(o,r.intervalMillis,30):kM(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:o+1},r.setThrottleMetadata(t,h),jJ.debug("Calling attemptFetch again in "+c+" millis"),[2,YJ(e,h,n,r)];case 7:return[2]}}))}))}function $J(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(GJ.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var QJ=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(e,t,n,r,i,o){return zT(this,void 0,void 0,(function(){var a,s,u,l,c,h,f;return jT(this,(function(d){switch(d.label){case 0:return(a=function(e,t,n){return void 0===t&&(t=qJ),zT(this,void 0,void 0,(function(){var r,i,o,a,s,u,l=this;return jT(this,(function(c){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw GJ.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw GJ.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new QJ,setTimeout((function(){return zT(l,void 0,void 0,(function(){return jT(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,YJ({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&jJ.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return jJ.error(e)})),t.push(a),s=function(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){switch(t.label){case 0:return sM()?[3,1]:(jJ.warn(GJ.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,uM()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),jJ.warn(GJ.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),l=u[0],c=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(UJ))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(e,t){var n=document.createElement("script");n.src=UJ+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=c&&(h.firebase_id=c),i(NJ.CONFIG,l.measurementId,h),[2,l.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZJ,eZ,tZ={},nZ=[],rZ={},iZ="dataLayer",oZ="gtag",aZ=!1;function sZ(e){if(aZ)throw GJ.create("already-initialized");e.dataLayerName&&(iZ=e.dataLayerName),e.gtagName&&(oZ=e.gtagName)}function uZ(e,t){!function(){var e=[];if(iM()&&e.push("This is a browser extension environment."),lM()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=GJ.create("invalid-analytics-context",{errorInfo:t});jJ.warn(n.message)}}();var n,r,i=e.options.appId;if(!i)throw GJ.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw GJ.create("no-api-key");jJ.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=tZ[i])throw GJ.create("already-exists",{id:i});if(!aZ){n=iZ,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=HJ(tZ,nZ,rZ,iZ,oZ),a=o.wrappedGtag,s=o.gtagCore;eZ=a,ZJ=s,aZ=!0}return tZ[i]=JJ(e,nZ,rZ,t,ZJ,iZ),{app:e,logEvent:function(e,t,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n,r,i){return zT(this,void 0,void 0,(function(){var o,a;return jT(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(NJ.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=UT(UT({},r),{send_to:o}),e(NJ.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(eZ,tZ[i],e,t,n).catch((function(e){return jJ.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return zT(this,void 0,void 0,(function(){var i;return jT(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(NJ.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(NJ.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(eZ,tZ[i],e,t).catch((function(e){return jJ.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return zT(this,void 0,void 0,(function(){var i;return jT(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(NJ.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(NJ.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(eZ,tZ[i],e,t).catch((function(e){return jJ.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return zT(this,void 0,void 0,(function(){var i,o,a,s,u;return jT(this,(function(l){switch(l.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(NJ.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=l.sent(),e(NJ.CONFIG,u,{update:!0,user_properties:n}),l.label=3;case 3:return[2]}}))}))})(eZ,tZ[i],e,t).catch((function(e){return jJ.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return zT(this,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(tZ[i],e).catch((function(e){return jJ.error(e)}))},INTERNAL:{delete:function(){return delete tZ[i],Promise.resolve()}}}}function lZ(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:if(iM())return[2,!1];if(!lM())return[2,!1];if(!sM())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,uM()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.INTERNAL.registerComponent(new RM("analytics",(function(e){return uZ(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:sZ,EventName:DJ,isSupported:lZ})),e.INTERNAL.registerComponent(new RM("analytics-internal",(function(e){try{return{logEvent:e.getProvider("analytics").getImmediate().logEvent}}catch(bX){throw GJ.create("interop-component-reg-failed",{reason:bX})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.14")}(aC);var cZ,hZ=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return zT(this,void 0,void 0,(function(){var t,n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),fZ=((cZ={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",cZ["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",cZ["registration-api-key"]="Undefined API key. Check Firebase app initialization.",cZ["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",cZ["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",cZ["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",cZ["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",cZ["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",cZ["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",cZ["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',cZ["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',cZ["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",cZ["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",cZ),dZ=new hM("remoteconfig","Remote Config",fZ);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pZ=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return zT(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,v,y,b;return jT(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=_.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},l=fetch(o,u),c=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([l,c])];case 3:return _.sent(),[4,l];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),dZ.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,m=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),dZ.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,v=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===v?p=500:"NO_CHANGE"===v?p=304:"NO_TEMPLATE"!==v&&"EMPTY_CONFIG"!==v||(g={}),304!==p&&200!==p)throw dZ.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:m,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},e}(),mZ=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),gZ=["1","true","t","yes","y","on"],vZ=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&gZ.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),yZ=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=FM.DEBUG;break;case"silent":this._logger.logLevel=FM.SILENT;break;default:this._logger.logLevel=FM.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return zT(this,void 0,void 0,(function(){var e,t,n;return jT(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r=this;return jT(this,(function(i){switch(i.label){case 0:e=new mZ,setTimeout((function(){return zT(r,void 0,void 0,(function(){return jT(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof cM&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return zT(this,void 0,void 0,(function(){return jT(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(UT(UT({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new vZ("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new vZ("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new vZ("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(e,t){var n=e.target.error||void 0;return dZ.create(t,{originalErrorMessage:n&&n.message})}var _Z=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(bZ(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return zT(this,void 0,void 0,(function(){var t,n=this;return jT(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(bZ(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(bX){i(dZ.create("storage-get",{originalErrorMessage:bX&&bX.message}))}}))]}}))}))},e.prototype.set=function(e,t){return zT(this,void 0,void 0,(function(){var n,r=this;return jT(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(bZ(e,"storage-set"))},u.onsuccess=function(){i()}}catch(bX){o(dZ.create("storage-set",{originalErrorMessage:bX&&bX.message}))}}))]}}))}))},e.prototype.delete=function(e){return zT(this,void 0,void 0,(function(){var t,n=this;return jT(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(bZ(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(bX){i(dZ.create("storage-delete",{originalErrorMessage:bX&&bX.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),wZ=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return zT(this,void 0,void 0,(function(){var e,t,n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xZ(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(dZ.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var SZ,EZ,TZ=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return zT(this,void 0,void 0,(function(){var t,i,o;return jT(this,(function(a){switch(a.label){case 0:return[4,xZ(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof cM&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+kM(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),MZ="@firebase/remote-config";(SZ=aC).INTERNAL.registerComponent(new RM("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw dZ.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw dZ.create("registration-project-id");if(!s)throw dZ.create("registration-api-key");if(!u)throw dZ.create("registration-app-id");n=n||"firebase";var l=new _Z(u,r.name,n),c=new wZ(l),h=new GM(MZ);h.logLevel=FM.ERROR;var f=new pZ(i,SZ.SDK_VERSION,n,a,s,u),d=new TZ(f,l),p=new hZ(d,l,c,h),m=new yZ(r,p,c,l,h);return m.ensureInitialized(),m}),"PUBLIC").setMultipleInstances(!0)),SZ.registerVersion(MZ,"0.1.41");var CZ=((EZ={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",EZ["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",EZ["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",EZ["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",EZ["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",EZ["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",EZ["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",EZ["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",EZ["recaptcha-error"]="ReCAPTCHA error.",EZ),IZ=new hM("appCheck","AppCheck",CZ),AZ=new Map,kZ={activated:!1,tokenObservers:[]},PZ={enabled:!1};function RZ(e){return AZ.get(e)||kZ}function LZ(e,t){AZ.set(e,t)}function NZ(){return PZ}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(){return self.grecaptcha}function DZ(e){if(!RZ(e).activated)throw IZ.create("use-before-activation",{appName:e.name})}function FZ(e,t){var n=RZ(e),r=new ZT;LZ(e,UT(UT({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=OZ();return u?u.ready((function(){zZ(e,t,u,i),r.resolve(u)})):(a=function(){var n=OZ();if(!n)throw new Error("no recaptcha");n.ready((function(){zZ(e,t,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function UZ(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:return DZ(e),[4,RZ(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=RZ(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function zZ(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),o=RZ(e);LZ(e,UT(UT({},o),{reCAPTCHAState:UT(UT({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jZ="https://content-firebaseappcheck.googleapis.com/v1beta",BZ=3e4,VZ=96e4,HZ=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return zT(this,void 0,void 0,(function(){var t;return jT(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new ZT,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new ZT,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function WZ(e,t){var n=e.url,r=e.body;return zT(this,void 0,void 0,(function(){var e,i,o,a,s,u,l,c,h,f;return jT(this,(function(d){switch(d.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:e},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=d.sent(),[3,4];case 3:throw s=d.sent(),IZ.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw IZ.create("fetch-status-error",{httpStatus:a.status});d.label=5;case 5:return d.trys.push([5,7,,8]),[4,a.json()];case 6:return u=d.sent(),[3,8];case 7:throw l=d.sent(),IZ.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(c=u.ttl.match(/^([\d.]+)(s)$/))||!c[2]||isNaN(Number(c[1])))throw IZ.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(c[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function GZ(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:jZ+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:t}}}function qZ(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:jZ+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KZ="firebase-app-check-store",XZ=null;function YZ(){return XZ||(XZ=new Promise((function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(IZ.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(KZ,{keyPath:"compositeKey"})}}}catch(bX){t(IZ.create("storage-open",{originalErrorMessage:bX.message}))}})))}function $Z(e){return JZ(ZZ(e))}function QZ(e,t){return zT(this,void 0,void 0,(function(){var n,r,i,o;return jT(this,(function(a){switch(a.label){case 0:return[4,YZ()];case 1:return n=a.sent(),r=n.transaction(KZ,"readwrite"),i=r.objectStore(KZ),o=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){o.onsuccess=function(t){e()},r.onerror=function(e){var n;t(IZ.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function JZ(e){return zT(this,void 0,void 0,(function(){var t,n,r,i;return jT(this,(function(o){switch(o.label){case 0:return[4,YZ()];case 1:return t=o.sent(),n=t.transaction(KZ,"readonly"),r=n.objectStore(KZ),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(IZ.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function ZZ(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e0=new GM("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(e){return zT(this,void 0,void 0,(function(){var t,n;return jT(this,(function(r){switch(r.label){case 0:if(!sM())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,$Z(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),e0.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function n0(e,t){return sM()?function(e,t){return QZ(ZZ(e),t)}(e,t).catch((function(e){e0.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function r0(){return zT(this,void 0,void 0,(function(){var e,t;return jT(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,JZ("debug-token")];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),(r=t,QZ("debug-token",r)).catch((function(e){return e0.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){return zT(this,void 0,void 0,(function(){var e;return jT(this,(function(t){if((e=NZ()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var o0={error:"UNKNOWN_ERROR"};function a0(e){return YT.encodeString(JSON.stringify(e),!1)}function s0(e,t,n){return void 0===n&&(n=!1),zT(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f,d,p,m,g;return jT(this,(function(v){switch(v.label){case 0:return DZ(e),r=RZ(e),i=r.token,o=void 0,i?[3,2]:[4,t0(e)];case 1:(a=v.sent())&&h0(a)&&(i=a,LZ(e,UT(UT({},r),{token:i})),c0(e,{token:i.token})),v.label=2;case 2:return!n&&i&&h0(i)?[2,{token:i.token}]:NZ().enabled?(u=WZ,l=qZ,c=[e],[4,i0()]):[3,6];case 3:return[4,u.apply(void 0,[l.apply(void 0,c.concat([v.sent()])),t])];case 4:return s=v.sent(),[4,n0(e,s)];case 5:return v.sent(),LZ(e,UT(UT({},r),{token:s})),[2,{token:s.token}];case 6:return v.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return h=v.sent(),f=function(e){var t=gM(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null}(h.token),d=null!==f&&f<Date.now()&&f>0?1e3*f:Date.now(),i=UT(UT({},h),{issuedAtTimeMillis:d}),[3,11];case 8:return[4,UZ(e).catch((function(e){throw IZ.create("recaptcha-error")}))];case 9:return p=v.sent(),[4,WZ(GZ(e,p),t)];case 10:i=v.sent(),v.label=11;case 11:return[3,13];case 12:return m=v.sent(),e0.error(m),o=m,[3,13];case 13:return i?[3,14]:(g=function(e){return{token:a0(o0),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,16]);case 14:return g={token:i.token},LZ(e,UT(UT({},r),{token:i})),[4,n0(e,i)];case 15:v.sent(),v.label=16;case 16:return c0(e,g),[2,g]}}))}))}function u0(e,t,n,r,i){var o=RZ(e),a={next:r,error:i,type:n},s=UT(UT({},o),{tokenObservers:HT(HT([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(e,t){var n=this;return new HZ((function(){return zT(n,void 0,void 0,(function(){var n;return jT(this,(function(r){switch(r.label){case 0:return RZ(e).token?[3,2]:[4,s0(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,s0(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=RZ(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),BZ,VZ)}(e,t);s.tokenRefresher=u}if(s.tokenRefresher.isRunning()||!0!==o.isTokenAutoRefreshEnabled||s.tokenRefresher.start(),o.token&&h0(o.token)){var l=o.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}LZ(e,s)}function l0(e,t){var n=RZ(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),LZ(e,UT(UT({},n),{tokenObservers:r}))}function c0(e,t){for(var n=0,r=RZ(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}function h0(e){return e.expireTimeMillis-Date.now()>0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f0(e,t){return{app:e,activate:function(t,n){return function(e,t,n){var r=RZ(e);if(r.activated)throw IZ.create("already-activated",{appName:e.name});var i=UT(UT({},r),{activated:!0});"string"==typeof t?i.siteKey=t:i.customProvider=t,i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,LZ(e,i),i.siteKey&&FZ(e,i.siteKey).catch((function(){}))}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(e,t){var n=RZ(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),LZ(e,UT(UT({},n),{isTokenAutoRefreshEnabled:t}))}(e,t)},getToken:function(n){return function(e,t,n){return zT(this,void 0,void 0,(function(){var r;return jT(this,(function(i){switch(i.label){case 0:return[4,s0(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return function(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),u0(e,t,"EXTERNAL",o,a),function(){return l0(e,o)}}(e,t,n,r)},INTERNAL:{delete:function(){for(var t=0,n=RZ(e).tokenObservers;t<n.length;t++){var r=n[t];l0(e,r.next)}return Promise.resolve()}}}}!function(e){e.INTERNAL.registerComponent(new RM("appCheck",(function(e){return f0(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("app-check-internal").initialize()}))),e.INTERNAL.registerComponent(new RM("app-check-internal",(function(e){return function(e,t){return{getToken:function(n){return s0(e,t,n)},addTokenListener:function(n){return u0(e,t,"INTERNAL",n)},removeTokenListener:function(t){return l0(e,t)}}}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion("@firebase/app-check","0.2.0")}(aC),function(){var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=NZ();t.enabled=!0;var n=new ZT;t.token=n,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(r0())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
aC.registerVersion("firebase","8.7.1","app"),aC.SDK_VERSION="8.7.1";function d0(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function p0(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:d0(t[n])&&d0(e[n])&&Object.keys(t[n]).length>0&&p0(e[n],t[n])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),aC.registerVersion("firebase","8.7.1");var m0={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function g0(){var e="undefined"!=typeof document?document:{};return p0(e,m0),e}var v0={document:m0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function y0(){var e="undefined"!=typeof window?window:{};return p0(e,v0),e}function b0(e){return(b0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _0(e,t){return(_0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w0(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(bX){return!1}}function x0(e,t,n){return(x0=w0()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_0(i,n.prototype),i}).apply(null,arguments)}function S0(e){var t="function"==typeof Map?new Map:void 0;return(S0=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return x0(e,arguments,b0(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_0(r,e)})(e)}var E0=function(e){var t,n;function r(t){var n;return function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=e.call.apply(e,[this].concat(t))||this)),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(S0(Array));function T0(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,T0(e)):t.push(e)})),t}function M0(e,t){return Array.prototype.filter.call(e,t)}function C0(e,t){var n=y0(),r=g0(),i=[];if(!t&&e instanceof E0)return e;if(!e)return new E0(i);if("string"==typeof e){var o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var a="div";0===o.indexOf("<li")&&(a="ul"),0===o.indexOf("<tr")&&(a="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(a="tr"),0===o.indexOf("<tbody")&&(a="table"),0===o.indexOf("<option")&&(a="select");var s=r.createElement(a);s.innerHTML=o;for(var u=0;u<s.childNodes.length;u+=1)i.push(s.childNodes[u])}else i=function(e,t){if("string"!=typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof E0)return e;i=e}return new E0(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}C0.fn=E0.prototype;var I0,A0,k0,P0={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=T0(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,r)})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=T0(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,r)})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=T0(t.map((function(e){return e.split(" ")})));return M0(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=T0(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),C0(t).is(i))o.apply(t,n);else for(var r=C0(t).parents(),a=0;a<r.length;a+=1)C0(r[a]).is(i)&&o.apply(r[a],n)}}function u(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),o.apply(this,t)}"function"==typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var l,c=r.split(" "),h=0;h<this.length;h+=1){var f=this[h];if(i)for(l=0;l<c.length;l+=1){var d=c[l];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[d]||(f.dom7LiveListeners[d]=[]),f.dom7LiveListeners[d].push({listener:o,proxyListener:s}),f.addEventListener(d,s,a)}else for(l=0;l<c.length;l+=1){var p=c[l];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[p]||(f.dom7Listeners[p]=[]),f.dom7Listeners[p].push({listener:o,proxyListener:u}),f.addEventListener(p,u,a)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];"function"==typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var s=r.split(" "),u=0;u<s.length;u+=1)for(var l=s[u],c=0;c<this.length;c+=1){var h=this[c],f=void 0;if(!i&&h.dom7Listeners?f=h.dom7Listeners[l]:i&&h.dom7LiveListeners&&(f=h.dom7LiveListeners[l]),f&&f.length)for(var d=f.length-1;d>=0;d-=1){var p=f[d];o&&p.listener===o||o&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===o?(h.removeEventListener(l,p.proxyListener,a),f.splice(d,1)):o||(h.removeEventListener(l,p.proxyListener,a),f.splice(d,1))}}return this},trigger:function(){for(var e=y0(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n[0].split(" "),o=n[1],a=0;a<i.length;a+=1)for(var s=i[a],u=0;u<this.length;u+=1){var l=this[u];if(e.CustomEvent){var c=new e.CustomEvent(s,{detail:o,bubbles:!0,cancelable:!0});l.dom7EventData=n.filter((function(e,t){return t>0})),l.dispatchEvent(c),l.dom7EventData=[],delete l.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=y0();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=y0(),t=g0(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+u-a}}return null},css:function(e,t){var n,r=y0();if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var i in e)this[n].style[i]=e[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=y0(),i=g0(),o=this[0];if(!o||void 0===e)return!1;if("string"==typeof e){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(t=C0(e),n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}if(e===i)return o===i;if(e===r)return o===r;if(e.nodeType||e instanceof E0){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return C0([]);if(e<0){var n=t+e;return C0(n<0?[]:[this[n]])}return C0([this[e]])},append:function(){for(var e,t=g0(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"==typeof e){var i=t.createElement("div");for(i.innerHTML=e;i.firstChild;)this[r].appendChild(i.firstChild)}else if(e instanceof E0)for(var o=0;o<e.length;o+=1)this[r].appendChild(e[o]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=g0();for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=r.createElement("div");for(i.innerHTML=e,n=i.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(i.childNodes[n],this[t].childNodes[0])}else if(e instanceof E0)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&C0(this[0].nextElementSibling).is(e)?C0([this[0].nextElementSibling]):C0([]):this[0].nextElementSibling?C0([this[0].nextElementSibling]):C0([]):C0([])},nextAll:function(e){var t=[],n=this[0];if(!n)return C0([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?C0(r).is(e)&&t.push(r):t.push(r),n=r}return C0(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&C0(t.previousElementSibling).is(e)?C0([t.previousElementSibling]):C0([]):t.previousElementSibling?C0([t.previousElementSibling]):C0([])}return C0([])},prevAll:function(e){var t=[],n=this[0];if(!n)return C0([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?C0(r).is(e)&&t.push(r):t.push(r),n=r}return C0(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?C0(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return C0(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?C0(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return C0(t)},closest:function(e){var t=this;return void 0===e?C0([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return C0(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)e&&!C0(r[i]).is(e)||t.push(r[i]);return C0(t)},filter:function(e){return C0(M0(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function R0(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function L0(){return Date.now()}function N0(e,t){void 0===t&&(t="x");var n,r,i,o=y0(),a=function(e){var t,n=y0();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return o.WebKitCSSMatrix?((r=a.transform||a.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new o.WebKitCSSMatrix("none"===r?"":r)):n=(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=o.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=o.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function O0(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function D0(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n="undefined"!=typeof window?window.HTMLElement:void 0,r=1;r<arguments.length;r+=1){var i=r<0||arguments.length<=r?void 0:arguments[r];if(null!=i&&!(n&&i instanceof n))for(var o=Object.keys(Object(i)).filter((function(e){return t.indexOf(e)<0})),a=0,s=o.length;a<s;a+=1){var u=o[a],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(O0(e[u])&&O0(i[u])?i[u].__swiper__?e[u]=i[u]:D0(e[u],i[u]):!O0(e[u])&&O0(i[u])?(e[u]={},i[u].__swiper__?e[u]=i[u]:D0(e[u],i[u])):e[u]=i[u])}}return e}function F0(e,t){Object.keys(t).forEach((function(n){O0(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function U0(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:\/])/g,"\\$1").replace(/ /g,".")}function z0(e,t,n,r){var i=g0();return n&&Object.keys(r).forEach((function(n){if(!t[n]&&!0===t.auto){var o=i.createElement("div");o.className=r[n],e.append(o),t[n]=o}})),t}function j0(){var e,t;return I0||(e=y0(),t=g0(),I0={touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(bX){}return t}(),gestures:"ongesturestart"in e}),I0}function B0(e){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m;return void 0===e&&(e={}),A0||(n=(void 0===(t=e)?{}:t).userAgent,r=j0(),i=y0(),o=i.navigator.platform,a=n||i.navigator.userAgent,s={ios:!1,android:!1},u=i.screen.width,l=i.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),f=a.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===o,m="MacIntel"===o,!h&&m&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(u+"x"+l)>=0&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),m=!1),c&&!p&&(s.os="android",s.android=!0),(h||d||f)&&(s.os="ios",s.ios=!0),A0=s),A0}function V0(){var e,t;return k0||(t=y0(),k0={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}),k0}Object.keys(P0).forEach((function(e){Object.defineProperty(C0.fn,e,{value:P0[e],writable:!0})}));var H0={name:"resize",create:function(){var e=this;D0(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var n=e.width,r=e.height,i=n,o=r;t.forEach((function(t){var n=t.contentBoxSize,r=t.contentRect,a=t.target;a&&a!==e.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)})),i===n&&o===r||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=y0();e.params.resizeObserver&&void 0!==y0().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=y0();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function W0(){return(W0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G0={attach:function(e,t){void 0===t&&(t={});var n=y0(),r=this,i=new(n.MutationObserver||n.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){r.emit("observerUpdate",e[0])};n.requestAnimationFrame?n.requestAnimationFrame(t):n.setTimeout(t,0)}else r.emit("observerUpdate",e[0])}));i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),r.observer.observers.push(i)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),n=0;n<t.length;n+=1)e.observer.attach(t[n]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},q0={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){F0(this,{observer:W0({},G0,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};function K0(e){var t=this,n=g0(),r=y0(),i=t.touchEventsData,o=t.params,a=t.touches;if(t.enabled&&(!t.animating||!o.preventInteractionOnTransition)){var s=e;s.originalEvent&&(s=s.originalEvent);var u=C0(s.target);if("wrapper"!==o.touchEventsTarget||u.closest(t.wrapperEl).length)if(i.isTouchEvent="touchstart"===s.type,i.isTouchEvent||!("which"in s)||3!==s.which)if(!(!i.isTouchEvent&&"button"in s&&s.button>0))if(!i.isTouched||!i.isMoved)if(!!o.noSwipingClass&&""!==o.noSwipingClass&&s.target&&s.target.shadowRoot&&e.path&&e.path[0]&&(u=C0(e.path[0])),o.noSwiping&&u.closest(o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass)[0])t.allowClick=!0;else if(!o.swipeHandler||u.closest(o.swipeHandler)[0]){a.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,a.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var l=a.currentX,c=a.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,f=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(h&&(l<=f||l>=r.innerWidth-f)){if("prevent"!==h)return;e.preventDefault()}if(D0(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=l,a.startY=c,i.touchStartTime=L0(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==s.type){var d=!0;u.is(i.focusableElements)&&(d=!1),n.activeElement&&C0(n.activeElement).is(i.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();var p=d&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!p||u[0].isContentEditable||s.preventDefault()}t.emit("touchStart",s)}}}function X0(e){var t=g0(),n=this,r=n.touchEventsData,i=n.params,o=n.touches,a=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===s.type){var u="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),l="touchmove"===s.type?u.pageX:s.pageX,c="touchmove"===s.type?u.pageY:s.pageY;if(s.preventedByNestedSwiper)return o.startX=l,void(o.startY=c);if(!n.allowTouchMove)return n.allowClick=!1,void(r.isTouched&&(D0(o,{startX:l,startY:c,currentX:l,currentY:c}),r.touchStartTime=L0()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(c<o.startY&&n.translate<=n.maxTranslate()||c>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(l<o.startX&&n.translate<=n.maxTranslate()||l>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&C0(s.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){o.currentX=l,o.currentY=c;var h=o.currentX-o.startX,f=o.currentY-o.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(f,2))<n.params.threshold)){var d;if(void 0===r.isScrolling)n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:h*h+f*f>=25&&(d=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?d>i.touchAngle:90-d>i.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",s),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!i.cssMode&&s.cancelable&&s.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&s.stopPropagation(),r.isMoved||(i.loop&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),r.isMoved=!0;var p=n.isHorizontal()?h:f;o.diff=p,p*=i.touchRatio,a&&(p=-p),n.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var m=!0,g=i.resistanceRatio;if(i.touchReleaseOnEdges&&(g=0),p>0&&r.currentTranslate>n.minTranslate()?(m=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+p,g))):p<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-p,g))),m&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(p)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&(0===r.velocities.length&&r.velocities.push({position:o[n.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:o[n.isHorizontal()?"currentX":"currentY"],time:L0()})),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",s)}}function Y0(e){var t=this,n=t.touchEventsData,r=t.params,i=t.touches,o=t.rtlTranslate,a=t.$wrapperEl,s=t.slidesGrid,u=t.snapGrid;if(t.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c,h=L0(),f=h-n.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(l),t.emit("tap click",l),f<300&&h-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)),n.lastClickTime=L0(),R0((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(r.freeMode){if(c<-t.minTranslate())return void t.slideTo(t.activeIndex);if(c>-t.maxTranslate())return void(t.slides.length<u.length?t.slideTo(u.length-1):t.slideTo(t.slides.length-1));if(r.freeModeMomentum){if(n.velocities.length>1){var d=n.velocities.pop(),p=n.velocities.pop(),m=d.position-p.position,g=d.time-p.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<r.freeModeMinimumVelocity&&(t.velocity=0),(g>150||L0()-d.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=r.freeModeMomentumVelocityRatio,n.velocities.length=0;var v=1e3*r.freeModeMomentumRatio,y=t.velocity*v,b=t.translate+y;o&&(b=-b);var _,w,x=!1,S=20*Math.abs(t.velocity)*r.freeModeMomentumBounceRatio;if(b<t.maxTranslate())r.freeModeMomentumBounce?(b+t.maxTranslate()<-S&&(b=t.maxTranslate()-S),_=t.maxTranslate(),x=!0,n.allowMomentumBounce=!0):b=t.maxTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(b>t.minTranslate())r.freeModeMomentumBounce?(b-t.minTranslate()>S&&(b=t.minTranslate()+S),_=t.minTranslate(),x=!0,n.allowMomentumBounce=!0):b=t.minTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(r.freeModeSticky){for(var E,T=0;T<u.length;T+=1)if(u[T]>-b){E=T;break}b=-(b=Math.abs(u[E]-b)<Math.abs(u[E-1]-b)||"next"===t.swipeDirection?u[E]:u[E-1])}if(w&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=o?Math.abs((-b-t.translate)/t.velocity):Math.abs((b-t.translate)/t.velocity),r.freeModeSticky){var M=Math.abs((o?-b:b)-t.translate),C=t.slidesSizesGrid[t.activeIndex];v=M<C?r.speed:M<2*C?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky)return void t.slideToClosest();r.freeModeMomentumBounce&&x?(t.updateProgress(_),t.setTransition(v),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&n.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(r.speed),setTimeout((function(){t.setTranslate(_),a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(b),t.setTransition(v),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(b)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(r.freeModeSticky)return void t.slideToClosest();r.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!r.freeModeMomentum||f>=r.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var I=0,A=t.slidesSizesGrid[0],k=0;k<s.length;k+=k<r.slidesPerGroupSkip?1:r.slidesPerGroup){var P=k<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==s[k+P]?c>=s[k]&&c<s[k+P]&&(I=k,A=s[k+P]-s[k]):c>=s[k]&&(I=k,A=s[s.length-1]-s[s.length-2])}var R=(c-s[I])/A,L=I<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(f>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(R>=r.longSwipesRatio?t.slideTo(I+L):t.slideTo(I)),"prev"===t.swipeDirection&&(R>1-r.longSwipesRatio?t.slideTo(I+L):t.slideTo(I))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(I+L):t.slideTo(I):("next"===t.swipeDirection&&t.slideTo(I+L),"prev"===t.swipeDirection&&t.slideTo(I))}}}}function $0(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,i=e.allowSlidePrev,o=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}}function Q0(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function J0(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=n?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var Z0=!1;function e1(){}var t1={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function n1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r1={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&D0(e,r.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n],i=e[n]||{};r.on&&t.on&&Object.keys(r.on).forEach((function(e){t.on(e,r.on[e])})),r.create&&r.create.bind(t)(i)}))}},eventsEmitter:{on:function(e,t,n){var r=this;if("function"!=typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once:function(e,t,n){var r=this;if("function"!=typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny:function(e,t){var n=this;if("function"!=typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners)return r;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=r):(e=o[0].events,t=o[0].data,n=o[0].context||r),t.unshift(n);var s=Array.isArray(e)?e:e.split(" ");return s.forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(t))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}},update:{updateSize:function(){var e,t,n=this,r=n.$el;e=void 0!==n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t=void 0!==n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),D0(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,i=e.$wrapperEl,o=e.size,a=e.rtlTranslate,s=e.wrongRTL,u=e.virtual&&r.virtual.enabled,l=u?e.virtual.slides.length:e.slides.length,c=i.children("."+e.params.slideClass),h=u?e.virtual.slides.length:c.length,f=[],d=[],p=[],m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));var g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));var v=e.snapGrid.length,y=e.slidesGrid.length,b=r.spaceBetween,_=-m,w=0,x=0;if(void 0!==o){var S,E;"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*o),e.virtualSize=-b,a?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),r.slidesPerColumn>1&&(S=Math.floor(h/r.slidesPerColumn)===h/e.params.slidesPerColumn?h:Math.ceil(h/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(S=Math.max(S,r.slidesPerView*r.slidesPerColumn)));for(var T,M,C,I=r.slidesPerColumn,A=S/I,k=Math.floor(h/r.slidesPerColumn),P=0;P<h;P+=1){E=0;var R=c.eq(P);if(r.slidesPerColumn>1){var L=void 0,N=void 0,O=void 0;if("row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){var D=Math.floor(P/(r.slidesPerGroup*r.slidesPerColumn)),F=P-r.slidesPerColumn*r.slidesPerGroup*D,U=0===D?r.slidesPerGroup:Math.min(Math.ceil((h-D*I*r.slidesPerGroup)/I),r.slidesPerGroup);L=(N=F-(O=Math.floor(F/U))*U+D*r.slidesPerGroup)+O*S/I,R.css({"-webkit-box-ordinal-group":L,"-moz-box-ordinal-group":L,"-ms-flex-order":L,"-webkit-order":L,order:L})}else"column"===r.slidesPerColumnFill?(O=P-(N=Math.floor(P/I))*I,(N>k||N===k&&O===I-1)&&(O+=1)>=I&&(O=0,N+=1)):N=P-(O=Math.floor(P/A))*A;R.css(t("margin-top"),0!==O?r.spaceBetween&&r.spaceBetween+"px":"")}if("none"!==R.css("display")){if("auto"===r.slidesPerView){var z=getComputedStyle(R[0]),j=R[0].style.transform,B=R[0].style.webkitTransform;if(j&&(R[0].style.transform="none"),B&&(R[0].style.webkitTransform="none"),r.roundLengths)E=e.isHorizontal()?R.outerWidth(!0):R.outerHeight(!0);else{var V=n(z,"width"),H=n(z,"padding-left"),W=n(z,"padding-right"),G=n(z,"margin-left"),q=n(z,"margin-right"),K=z.getPropertyValue("box-sizing");if(K&&"border-box"===K)E=V+G+q;else{var X=R[0],Y=X.clientWidth;E=V+H+W+G+q+(X.offsetWidth-Y)}}j&&(R[0].style.transform=j),B&&(R[0].style.webkitTransform=B),r.roundLengths&&(E=Math.floor(E))}else E=(o-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(E=Math.floor(E)),c[P]&&(c[P].style[t("width")]=E+"px");c[P]&&(c[P].swiperSlideSize=E),p.push(E),r.centeredSlides?(_=_+E/2+w/2+b,0===w&&0!==P&&(_=_-o/2-b),0===P&&(_=_-o/2-b),Math.abs(_)<.001&&(_=0),r.roundLengths&&(_=Math.floor(_)),x%r.slidesPerGroup==0&&f.push(_),d.push(_)):(r.roundLengths&&(_=Math.floor(_)),(x-Math.min(e.params.slidesPerGroupSkip,x))%e.params.slidesPerGroup==0&&f.push(_),d.push(_),_=_+E+b),e.virtualSize+=E+b,w=E,x+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:e.virtualSize+r.spaceBetween+"px"}),r.setWrapperSize)i.css(((M={})[t("width")]=e.virtualSize+r.spaceBetween+"px",M));if(r.slidesPerColumn>1)if(e.virtualSize=(E+r.spaceBetween)*S,e.virtualSize=Math.ceil(e.virtualSize/r.slidesPerColumn)-r.spaceBetween,i.css(((C={})[t("width")]=e.virtualSize+r.spaceBetween+"px",C)),r.centeredSlides){T=[];for(var $=0;$<f.length;$+=1){var Q=f[$];r.roundLengths&&(Q=Math.floor(Q)),f[$]<e.virtualSize+f[0]&&T.push(Q)}f=T}if(!r.centeredSlides){T=[];for(var J=0;J<f.length;J+=1){var Z=f[J];r.roundLengths&&(Z=Math.floor(Z)),f[J]<=e.virtualSize-o&&T.push(Z)}f=T,Math.floor(e.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-o)}if(0===f.length&&(f=[0]),0!==r.spaceBetween){var ee,te=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css(((ee={})[te]=b+"px",ee))}if(r.centeredSlides&&r.centeredSlidesBounds){var ne=0;p.forEach((function(e){ne+=e+(r.spaceBetween?r.spaceBetween:0)}));var re=(ne-=r.spaceBetween)-o;f=f.map((function(e){return e<0?-m:e>re?re+g:e}))}if(r.centerInsufficientSlides){var ie=0;if(p.forEach((function(e){ie+=e+(r.spaceBetween?r.spaceBetween:0)})),(ie-=r.spaceBetween)<o){var oe=(o-ie)/2;f.forEach((function(e,t){f[t]=e-oe})),d.forEach((function(e,t){d[t]=e+oe}))}}D0(e,{slides:c,snapGrid:f,slidesGrid:d,slidesSizesGrid:p}),h!==l&&e.emit("slidesLengthChange"),f.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),d.length!==y&&e.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,n=this,r=[],i=n.virtual&&n.params.virtual.enabled,o=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var a=function(e){return i?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!i)break;r.push(a(s))}else r.push(a(n.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){var u=r[t].offsetHeight;o=u>o?u:o}o&&n.$wrapperEl.css("height",o+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,i=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;i&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var a=0;a<r.length;a+=1){var s=r[a],u=(o+(n.centeredSlides?t.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var l=-(o-s.swiperSlideOffset),c=l+t.slidesSizesGrid[a];(l>=0&&l<t.size-1||c>1&&c<=t.size||l<=0&&c>=t.size)&&(t.visibleSlides.push(s),t.visibleSlidesIndexes.push(a),r.eq(a).addClass(n.slideVisibleClass))}s.progress=i?-u:u}t.visibleSlides=C0(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,i=t.maxTranslate()-t.minTranslate(),o=t.progress,a=t.isBeginning,s=t.isEnd,u=a,l=s;0===i?(o=0,a=!0,s=!0):(a=(o=(e-t.minTranslate())/i)<=0,s=o>=1),D0(t,{progress:o,isBeginning:a,isEnd:s}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),a&&!u&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(u&&!a||l&&!s)&&t.emit("fromEdge"),t.emit("progress",o)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,i=t.$wrapperEl,o=t.activeIndex,a=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(e=s?t.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+o+'"]'):n.eq(o)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass));var u=e.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===u.length&&(u=n.eq(0)).addClass(r.slideNextClass);var l=e.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===l.length&&(l=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(u.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),l.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,i=n.slidesGrid,o=n.snapGrid,a=n.params,s=n.activeIndex,u=n.realIndex,l=n.snapIndex,c=e;if(void 0===c){for(var h=0;h<i.length;h+=1)void 0!==i[h+1]?r>=i[h]&&r<i[h+1]-(i[h+1]-i[h])/2?c=h:r>=i[h]&&r<i[h+1]&&(c=h+1):r>=i[h]&&(c=h);a.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(o.indexOf(r)>=0)t=o.indexOf(r);else{var f=Math.min(a.slidesPerGroupSkip,c);t=f+Math.floor((c-f)/a.slidesPerGroup)}if(t>=o.length&&(t=o.length-1),c!==s){var d=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);D0(n,{snapIndex:t,realIndex:d,previousIndex:s,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),u!==d&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==l&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,i=C0(e.target).closest("."+r.slideClass)[0],o=!1;if(i)for(var a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){o=!0,t=a;break}if(!i||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(C0(i).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,i=t.translate,o=t.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var a=N0(o[0],e);return r&&(a=-a),a||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,i=n.params,o=n.$wrapperEl,a=n.wrapperEl,s=n.progress,u=0,l=0;n.isHorizontal()?u=r?-e:e:l=e,i.roundLengths&&(u=Math.floor(u),l=Math.floor(l)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-l:i.virtualTranslate||o.transform("translate3d("+u+"px, "+l+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:l;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this,a=o.params,s=o.wrapperEl;if(o.animating&&a.preventInteractionOnTransition)return!1;var u,l=o.minTranslate(),c=o.maxTranslate();if(u=r&&e>l?l:r&&e<c?c:e,o.updateProgress(u),a.cssMode){var h,f=o.isHorizontal();if(0===t)s[f?"scrollLeft":"scrollTop"]=-u;else if(s.scrollTo)s.scrollTo(((h={})[f?"left":"top"]=-u,h.behavior="smooth",h));else s[f?"scrollLeft":"scrollTop"]=-u;return!0}return 0===t?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.params,o=n.previousIndex;if(!i.cssMode){i.autoHeight&&n.updateAutoHeight();var a=t;if(a||(a=r>o?"next":r<o?"prev":"reset"),n.emit("transitionStart"),e&&r!==o){if("reset"===a)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===a?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.previousIndex,o=n.params;if(n.animating=!1,!o.cssMode){n.setTransition(0);var a=t;if(a||(a=r>i?"next":r<i?"prev":"reset"),n.emit("transitionEnd"),e&&r!==i){if("reset"===a)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===a?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,n,r,i){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var o=parseInt(e,10);if(!isFinite(o))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=o}var a=this,s=e;s<0&&(s=0);var u=a.params,l=a.snapGrid,c=a.slidesGrid,h=a.previousIndex,f=a.activeIndex,d=a.rtlTranslate,p=a.wrapperEl,m=a.enabled;if(a.animating&&u.preventInteractionOnTransition||!m&&!r&&!i)return!1;var g=Math.min(a.params.slidesPerGroupSkip,s),v=g+Math.floor((s-g)/a.params.slidesPerGroup);v>=l.length&&(v=l.length-1),(f||u.initialSlide||0)===(h||0)&&n&&a.emit("beforeSlideChangeStart");var y,b=-l[v];if(a.updateProgress(b),u.normalizeSlideIndex)for(var _=0;_<c.length;_+=1){var w=-Math.floor(100*b),x=Math.floor(100*c[_]),S=Math.floor(100*c[_+1]);void 0!==c[_+1]?w>=x&&w<S-(S-x)/2?s=_:w>=x&&w<S&&(s=_+1):w>=x&&(s=_)}if(a.initialized&&s!==f){if(!a.allowSlideNext&&b<a.translate&&b<a.minTranslate())return!1;if(!a.allowSlidePrev&&b>a.translate&&b>a.maxTranslate()&&(f||0)!==s)return!1}if(y=s>f?"next":s<f?"prev":"reset",d&&-b===a.translate||!d&&b===a.translate)return a.updateActiveIndex(s),u.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==u.effect&&a.setTranslate(b),"reset"!==y&&(a.transitionStart(n,y),a.transitionEnd(n,y)),!1;if(u.cssMode){var E,T=a.isHorizontal(),M=-b;if(d&&(M=p.scrollWidth-p.offsetWidth-M),0===t)p[T?"scrollLeft":"scrollTop"]=M;else if(p.scrollTo)p.scrollTo(((E={})[T?"left":"top"]=M,E.behavior="smooth",E));else p[T?"scrollLeft":"scrollTop"]=M;return!0}return 0===t?(a.setTransition(0),a.setTranslate(b),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(n,y),a.transitionEnd(n,y)):(a.setTransition(t),a.setTranslate(b),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(n,y),a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,y))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var i=this,o=e;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,o=r.animating;if(!r.enabled)return r;var a=r.activeIndex<i.slidesPerGroupSkip?1:i.slidesPerGroup;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return r.slideTo(r.activeIndex+a,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,o=r.animating,a=r.snapGrid,s=r.slidesGrid,u=r.rtlTranslate;if(!r.enabled)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,h=l(u?r.translate:-r.translate),f=a.map((function(e){return l(e)})),d=a[f.indexOf(h)-1];return void 0===d&&i.cssMode&&a.forEach((function(e){!d&&h>=e&&(d=e)})),void 0!==d&&(c=s.indexOf(d))<0&&(c=r.activeIndex-1),r.slideTo(c,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var i=this,o=i.activeIndex,a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){var l=i.snapGrid[s];u-l>(i.snapGrid[s+1]-l)*r&&(o+=i.params.slidesPerGroup)}else{var c=i.snapGrid[s-1];u-c<=(i.snapGrid[s]-c)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,o=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(C0(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<t.loopedSlides-i/2||o>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),o=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),R0((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-i?(t.loopFix(),o=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),R0((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}},loop:{loopCreate:function(){var e=this,t=g0(),n=e.params,r=e.$wrapperEl;r.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var i=r.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-i.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var a=0;a<o;a+=1){var s=C0(t.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);r.append(s)}i=r.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var u=[],l=[];i.each((function(t,n){var r=C0(t);n<e.loopedSlides&&l.push(t),n<i.length&&n>=i.length-e.loopedSlides&&u.push(t),r.attr("data-swiper-slide-index",n)}));for(var c=0;c<l.length;c+=1)r.append(C0(l[c].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var h=u.length-1;h>=0;h-=1)r.prepend(C0(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,i=e.loopedSlides,o=e.allowSlidePrev,a=e.allowSlideNext,s=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var l=-s[n]-e.getTranslate();if(n<i)t=r.length-3*i+n,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l);else if(n>=r.length-i){t=-r.length+n+i,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l)}e.allowSlidePrev=o,e.allowSlideNext=a,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n=t.el;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this,n=t.$wrapperEl,r=t.params;if(r.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var i=0;i<e.length;i+=1)e[i]&&n.append(e[i]);else n.append(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&t.loopDestroy();var o=i+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&r.prepend(e[a]);o=i+e.length}else r.prepend(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),t.slideTo(o,0,!1)},addSlide:function(e,t){var n=this,r=n.$wrapperEl,i=n.params,o=n.activeIndex;i.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.slides=r.children("."+i.slideClass));var a=n.slides.length;if(e<=0)n.prependSlide(t);else if(e>=a)n.appendSlide(t);else{for(var s=o>e?o+1:o,u=[],l=a-1;l>=e;l-=1){var c=n.slides.eq(l);c.remove(),u.unshift(c)}if("object"==typeof t&&"length"in t){for(var h=0;h<t.length;h+=1)t[h]&&r.append(t[h]);s=o>e?o+t.length:o}else r.append(t);for(var f=0;f<u.length;f+=1)r.append(u[f]);i.loop&&n.loopCreate(),i.observer&&n.support.observer||n.update(),i.loop?n.slideTo(s+n.loopedSlides,0,!1):n.slideTo(s,0,!1)}},removeSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&(i-=t.loopedSlides,t.loopDestroy(),t.slides=r.children("."+n.slideClass));var o,a=i;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)o=e[s],t.slides[o]&&t.slides.eq(o).remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=e,t.slides[o]&&t.slides.eq(o).remove(),o<a&&(a-=1),a=Math.max(a,0);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),n.loop?t.slideTo(a+t.loopedSlides,0,!1):t.slideTo(a,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=this,t=g0(),n=e.params,r=e.touchEvents,i=e.el,o=e.wrapperEl,a=e.device,s=e.support;e.onTouchStart=K0.bind(e),e.onTouchMove=X0.bind(e),e.onTouchEnd=Y0.bind(e),n.cssMode&&(e.onScroll=J0.bind(e)),e.onClick=Q0.bind(e);var u=!!n.nested;if(!s.touch&&s.pointerEvents)i.addEventListener(r.start,e.onTouchStart,!1),t.addEventListener(r.move,e.onTouchMove,u),t.addEventListener(r.end,e.onTouchEnd,!1);else{if(s.touch){var l=!("touchstart"!==r.start||!s.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.addEventListener(r.start,e.onTouchStart,l),i.addEventListener(r.move,e.onTouchMove,s.passiveListener?{passive:!1,capture:u}:u),i.addEventListener(r.end,e.onTouchEnd,l),r.cancel&&i.addEventListener(r.cancel,e.onTouchEnd,l),Z0||(t.addEventListener("touchstart",e1),Z0=!0)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!s.touch&&a.ios)&&(i.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,u),t.addEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.addEventListener("click",e.onClick,!0),n.cssMode&&o.addEventListener("scroll",e.onScroll),n.updateOnWindowResize?e.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",$0,!0):e.on("observerUpdate",$0,!0)},detachEvents:function(){var e=this,t=g0(),n=e.params,r=e.touchEvents,i=e.el,o=e.wrapperEl,a=e.device,s=e.support,u=!!n.nested;if(!s.touch&&s.pointerEvents)i.removeEventListener(r.start,e.onTouchStart,!1),t.removeEventListener(r.move,e.onTouchMove,u),t.removeEventListener(r.end,e.onTouchEnd,!1);else{if(s.touch){var l=!("onTouchStart"!==r.start||!s.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.removeEventListener(r.start,e.onTouchStart,l),i.removeEventListener(r.move,e.onTouchMove,u),i.removeEventListener(r.end,e.onTouchEnd,l),r.cancel&&i.removeEventListener(r.cancel,e.onTouchEnd,l)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!s.touch&&a.ios)&&(i.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,u),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.removeEventListener("click",e.onClick,!0),n.cssMode&&o.removeEventListener("scroll",e.onScroll),e.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",$0)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,i=void 0===r?0:r,o=e.params,a=e.$el,s=o.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var u=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(u&&e.currentBreakpoint!==u){var l=u in s?s[u]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=l||e.originalParams,h=o.slidesPerColumn>1,f=c.slidesPerColumn>1,d=o.enabled;h&&!f?(a.removeClass(o.containerModifierClass+"multirow "+o.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!h&&f&&(a.addClass(o.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&a.addClass(o.containerModifierClass+"multirow-column"),e.emitContainerClasses());var p=c.direction&&c.direction!==o.direction,m=o.loop&&(c.slidesPerView!==o.slidesPerView||p);p&&n&&e.changeDirection(),D0(e.params,c);var g=e.params.enabled;D0(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!g?e.disable():!d&&g&&e.enable(),e.currentBreakpoint=u,e.emit("_beforeBreakpoint",c),m&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,i=y0(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<a.length;s+=1){var u=a[s],l=u.point,c=u.value;"window"===t?i.matchMedia("(min-width: "+c+"px)").matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.params,n=e.isLocked,r=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&r?e.isLocked=r<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,n!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),n&&n!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:{addClasses:function(){var e,t,n,r=this,i=r.classNames,o=r.params,a=r.rtl,s=r.$el,u=r.device,l=r.support,c=(e=["initialized",o.direction,{"pointer-events":l.pointerEvents&&!l.touch},{"free-mode":o.freeMode},{autoheight:o.autoHeight},{rtl:a},{multirow:o.slidesPerColumn>1},{"multirow-column":o.slidesPerColumn>1&&"column"===o.slidesPerColumnFill},{android:u.android},{ios:u.ios},{"css-mode":o.cssMode}],t=o.containerModifierClass,n=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n);i.push.apply(i,c),s.addClass([].concat(i).join(" ")),r.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}},images:{loadImage:function(e,t,n,r,i,o){var a,s=y0();function u(){o&&o()}C0(e).parent("picture")[0]||e.complete&&i?u():t?((a=new s.Image).onload=u,a.onerror=u,r&&(a.sizes=r),n&&(a.srcset=n),t&&(a.src=t)):u()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},i1={},o1=function(){function e(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?n=i[0]:(t=i[0],n=i[1]),n||(n={}),n=D0({},n),t&&!n.el&&(n.el=t),n.el&&C0(n.el).length>1){var a=[];return C0(n.el).each((function(t){var r=D0({},n,{el:t});a.push(new e(r))})),a}var s=this;s.__swiper__=!0,s.support=j0(),s.device=B0({userAgent:n.userAgent}),s.browser=V0(),s.eventsListeners={},s.eventsAnyListeners=[],void 0===s.modules&&(s.modules={}),Object.keys(s.modules).forEach((function(e){var t=s.modules[e];if(t.params){var r=Object.keys(t.params)[0],i=t.params[r];if("object"!=typeof i||null===i)return;if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===n[r]&&(n[r]={auto:!0}),!(r in n)||!("enabled"in i))return;!0===n[r]&&(n[r]={enabled:!0}),"object"!=typeof n[r]||"enabled"in n[r]||(n[r].enabled=!0),n[r]||(n[r]={enabled:!1})}}));var u,l,c=D0({},t1);return s.useParams(c),s.params=D0({},c,i1,n),s.originalParams=D0({},s.params),s.passedParams=D0({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach((function(e){s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),s.$=C0,D0(s,{enabled:s.params.enabled,el:t,classNames:[],slides:C0(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===s.params.direction},isVertical:function(){return"vertical"===s.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:(u=["touchstart","touchmove","touchend","touchcancel"],l=["mousedown","mousemove","mouseup"],s.support.pointerEvents&&(l=["pointerdown","pointermove","pointerup"]),s.touchEventsTouch={start:u[0],move:u[1],end:u[2],cancel:u[3]},s.touchEventsDesktop={start:l[0],move:l[1],end:l[2]},s.support.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:L0(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.useModules(),s.emit("_swiper"),s.params.init&&s.init(),s}var t,n,r,i=e.prototype;return i.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},i.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},i.setProgress=function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()},i.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},i.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},i.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}},i.slidesPerViewDynamic=function(){var e=this,t=e.params,n=e.slides,r=e.slidesGrid,i=e.size,o=e.activeIndex,a=1;if(t.centeredSlides){for(var s,u=n[o].swiperSlideSize,l=o+1;l<n.length;l+=1)n[l]&&!s&&(a+=1,(u+=n[l].swiperSlideSize)>i&&(s=!0));for(var c=o-1;c>=0;c-=1)n[c]&&!s&&(a+=1,(u+=n[c].swiperSlideSize)>i&&(s=!0))}else for(var h=o+1;h<n.length;h+=1)r[h]-r[o]<i&&(a+=1);return a},i.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}},i.changeDirection=function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(""+n.params.containerModifierClass+r).addClass(""+n.params.containerModifierClass+e),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n},i.mount=function(e){var t=this;if(t.mounted)return!0;var n=C0(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=C0(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===i.length&&t.params.createElements){var o=g0().createElement("div");i=C0(o),o.className=t.params.wrapperClass,n.append(o),n.children("."+t.params.slideClass).each((function(e){i.append(e)}))}return D0(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0},i.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},i.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=this,r=n.params,i=n.$el,o=n.$wrapperEl,a=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(bX){}try{delete t[e]}catch(bX){}}))}(n)),n.destroyed=!0),null},e.extendDefaults=function(e){D0(i1,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+L0();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,r=[{key:"extendedDefaults",get:function(){return i1}},{key:"defaults",get:function(){return t1}}],(n=null)&&n1(t.prototype,n),r&&n1(t,r),e}();function a1(){return(a1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Object.keys(r1).forEach((function(e){Object.keys(r1[e]).forEach((function(t){o1.prototype[t]=r1[e][t]}))})),o1.use([H0,q0]);var s1={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,n=e.navigation.toggleEl;if(!e.params.loop){var r=e.navigation,i=r.$nextEl,o=r.$prevEl;o&&o.length>0&&(e.isBeginning?n(o,!0):n(o,!1),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(e.isEnd?n(i,!0):n(i,!1),e.params.watchOverflow&&e.enabled&&i[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,n=this,r=n.params.navigation;(n.params.navigation=z0(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),r.nextEl||r.prevEl)&&(r.nextEl&&(e=C0(r.nextEl),n.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===n.$el.find(r.nextEl).length&&(e=n.$el.find(r.nextEl))),r.prevEl&&(t=C0(r.prevEl),n.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===n.$el.find(r.prevEl).length&&(t=n.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",n.navigation.onNextClick),t&&t.length>0&&t.on("click",n.navigation.onPrevClick),D0(n.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),n.enabled||(e&&e.addClass(r.lockClass),t&&t.addClass(r.lockClass)))},destroy:function(){var e=this,t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n.length&&(n.off("click",e.navigation.onNextClick),n.removeClass(e.params.navigation.disabledClass)),r&&r.length&&(r.off("click",e.navigation.onPrevClick),r.removeClass(e.params.navigation.disabledClass))}},u1={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){F0(this,{navigation:a1({},s1)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var n=e.navigation,r=n.$nextEl,i=n.$prevEl,o=t.target;if(e.params.navigation.hideOnClick&&!C0(o).is(i)&&!C0(o).is(r)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;var a;r?a=r.hasClass(e.params.navigation.hiddenClass):i&&(a=i.hasClass(e.params.navigation.hiddenClass)),!0===a?e.emit("navigationShow"):e.emit("navigationHide"),r&&r.toggleClass(e.params.navigation.hiddenClass),i&&i.toggleClass(e.params.navigation.hiddenClass)}}}};function l1(){return(l1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c1={update:function(){var e=this,t=e.rtl,n=e.params.pagination;if(n.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,o=e.pagination.$el,a=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>i-1-2*e.loopedSlides&&(r-=i-2*e.loopedSlides),r>a-1&&(r-=a),r<0&&"bullets"!==e.params.paginationType&&(r=a+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var s,u,l,c=e.pagination.bullets;if(n.dynamicBullets&&(e.pagination.bulletSize=c.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),s=r-e.pagination.dynamicBulletIndex,l=((u=s+(Math.min(c.length,n.dynamicMainBullets)-1))+s)/2),c.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),o.length>1)c.each((function(e){var t=C0(e),i=t.index();i===r&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(i>=s&&i<=u&&t.addClass(n.bulletActiveClass+"-main"),i===s&&t.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),i===u&&t.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var h=c.eq(r),f=h.index();if(h.addClass(n.bulletActiveClass),n.dynamicBullets){for(var d=c.eq(s),p=c.eq(u),m=s;m<=u;m+=1)c.eq(m).addClass(n.bulletActiveClass+"-main");if(e.params.loop)if(f>=c.length-n.dynamicMainBullets){for(var g=n.dynamicMainBullets;g>=0;g-=1)c.eq(c.length-g).addClass(n.bulletActiveClass+"-main");c.eq(c.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else d.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else d.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var v=Math.min(c.length,n.dynamicMainBullets+4),y=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-l*e.pagination.bulletSize,b=t?"right":"left";c.css(e.isHorizontal()?b:"top",y+"px")}}if("fraction"===n.type&&(o.find(U0(n.currentClass)).text(n.formatFractionCurrent(r+1)),o.find(U0(n.totalClass)).text(n.formatFractionTotal(a))),"progressbar"===n.type){var _;_=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var w=(r+1)/a,x=1,S=1;"horizontal"===_?x=w:S=w,o.find(U0(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+x+") scaleY("+S+")").transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(o.html(n.renderCustom(e,r+1,a)),e.emit("paginationRender",o[0])):e.emit("paginationUpdate",o[0]),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el,i="";if("bullets"===t.type){var o=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&o>n&&(o=n);for(var a=0;a<o;a+=1)t.renderBullet?i+=t.renderBullet.call(e,a,t.bulletClass):i+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";r.html(i),e.pagination.bullets=r.find(U0(t.bulletClass))}"fraction"===t.type&&(i=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',r.html(i)),"progressbar"===t.type&&(i=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',r.html(i)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=z0(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var n=C0(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",U0(t.bulletClass),(function(t){t.preventDefault();var n=C0(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),D0(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",U0(t.bulletClass))}}},h1={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){F0(this,{pagination:l1({dynamicBulletIndex:0},c1)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var n=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!C0(n).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};function f1(){return(f1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d1={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=R0((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),n)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=g0();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}},p1={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){F0(this,{autoplay:f1({},d1,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),g0().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),g0().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};function m1(){return(m1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g1={setTranslate:function(){for(var e=this,t=e.width,n=e.height,r=e.slides,i=e.slidesSizesGrid,o=e.params.coverflowEffect,a=e.isHorizontal(),s=e.translate,u=a?t/2-s:n/2-s,l=a?o.rotate:-o.rotate,c=o.depth,h=0,f=r.length;h<f;h+=1){var d=r.eq(h),p=i[h],m=(u-d[0].swiperSlideOffset-p/2)/p*o.modifier,g=a?l*m:0,v=a?0:l*m,y=-c*Math.abs(m),b=o.stretch;"string"==typeof b&&-1!==b.indexOf("%")&&(b=parseFloat(o.stretch)/100*p);var _=a?0:b*m,w=a?b*m:0,x=1-(1-o.scale)*Math.abs(m);Math.abs(w)<.001&&(w=0),Math.abs(_)<.001&&(_=0),Math.abs(y)<.001&&(y=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),Math.abs(x)<.001&&(x=0);var S="translate3d("+w+"px,"+_+"px,"+y+"px)  rotateX("+v+"deg) rotateY("+g+"deg) scale("+x+")";if(d.transform(S),d[0].style.zIndex=1-Math.abs(Math.round(m)),o.slideShadows){var E=a?d.find(".swiper-slide-shadow-left"):d.find(".swiper-slide-shadow-top"),T=a?d.find(".swiper-slide-shadow-right"):d.find(".swiper-slide-shadow-bottom");0===E.length&&(E=C0('<div class="swiper-slide-shadow-'+(a?"left":"top")+'"></div>'),d.append(E)),0===T.length&&(T=C0('<div class="swiper-slide-shadow-'+(a?"right":"bottom")+'"></div>'),d.append(T)),E.length&&(E[0].style.opacity=m>0?m:0),T.length&&(T[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},v1={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){F0(this,{coverflowEffect:m1({},g1)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}};function y1(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function b1(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){void 0===e[n]?e[n]=t[n]:y1(t[n])&&y1(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:b1(e[n],t[n]):e[n]=t[n]}))}function _1(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function w1(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function x1(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function S1(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var E1=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function T1(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=o1.prototype.getBreakpoint(t.breakpoints),i=r in t.breakpoints?t.breakpoints[r]:void 0;i&&i.slidesPerView&&(n=i.slidesPerView)}var o=Math.ceil(parseFloat(t.loopedSlides||n,10));return(o+=t.loopAdditionalSlides)>e.length&&(o=e.length),o}function M1(e){var t=[];return q.Children.toArray(e).forEach((function(e){e.type&&"SwiperSlide"===e.type.displayName?t.push(e):e.props&&e.props.children&&M1(e.props.children).forEach((function(e){return t.push(e)}))})),t}function C1(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return q.Children.toArray(e).forEach((function(e){if(e.type&&"SwiperSlide"===e.type.displayName)t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var r=M1(e.props.children);r.length>0?r.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function I1(e){var t,n,r,i,o,a=e.swiper,s=e.slides,u=e.passedParams,l=e.changedParams,c=e.nextEl,h=e.prevEl,f=e.scrollbarEl,d=e.paginationEl,p=l.filter((function(e){return"children"!==e&&"direction"!==e})),m=a.params,g=a.pagination,v=a.navigation,y=a.scrollbar,b=a.virtual,_=a.thumbs;l.includes("thumbs")&&u.thumbs&&u.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),l.includes("controller")&&u.controller&&u.controller.control&&m.controller&&!m.controller.control&&(n=!0),l.includes("pagination")&&u.pagination&&(u.pagination.el||d)&&(m.pagination||!1===m.pagination)&&g&&!g.el&&(r=!0),l.includes("scrollbar")&&u.scrollbar&&(u.scrollbar.el||f)&&(m.scrollbar||!1===m.scrollbar)&&y&&!y.el&&(i=!0),l.includes("navigation")&&u.navigation&&(u.navigation.prevEl||h)&&(u.navigation.nextEl||c)&&(m.navigation||!1===m.navigation)&&v&&!v.prevEl&&!v.nextEl&&(o=!0);(p.forEach((function(e){if(y1(m[e])&&y1(u[e]))b1(m[e],u[e]);else{var t=u[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=u[e]:!1===t&&a[n=e]&&(a[n].destroy(),"navigation"===n?(m[n].prevEl=void 0,m[n].nextEl=void 0,a[n].prevEl=void 0,a[n].nextEl=void 0):(m[n].el=void 0,a[n].el=void 0))}var n})),l.includes("children")&&b&&m.virtual.enabled?(b.slides=s,b.update(!0)):l.includes("children")&&a.lazy&&a.params.lazy.enabled&&a.lazy.load(),t)&&(_.init()&&_.update(!0));n&&(a.controller.control=m.controller.control),r&&(d&&(m.pagination.el=d),g.init(),g.render(),g.update()),i&&(f&&(m.scrollbar.el=f),y.init(),y.updateSize(),y.setTranslate()),o&&(c&&(m.navigation.nextEl=c),h&&(m.navigation.prevEl=h),v.init(),v.update()),l.includes("allowSlideNext")&&(a.allowSlideNext=u.allowSlideNext),l.includes("allowSlidePrev")&&(a.allowSlidePrev=u.allowSlidePrev),l.includes("direction")&&a.changeDirection(u.direction,!1),a.update()}function A1(e,t){return"undefined"==typeof window?l.exports.useEffect(e,t):l.exports.useLayoutEffect(e,t)}var k1=["className","tag","wrapperTag","children","onSwiper"];function P1(){return(P1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R1=l.exports.forwardRef((function(e,t){var n=void 0===e?{}:e,r=n.className,i=n.tag,o=void 0===i?"div":i,a=n.wrapperTag,s=void 0===a?"div":a,u=n.children,c=n.onSwiper,h=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,k1),f=!1,d=l.exports.useState("swiper-container"),p=d[0],m=d[1],g=l.exports.useState(null),v=g[0],y=g[1],b=l.exports.useState(!1),_=b[0],w=b[1],x=l.exports.useRef(!1),S=l.exports.useRef(null),E=l.exports.useRef(null),T=l.exports.useRef(null),M=l.exports.useRef(null),C=l.exports.useRef(null),I=l.exports.useRef(null),A=l.exports.useRef(null),k=l.exports.useRef(null),P=function(e){void 0===e&&(e={});var t={on:{}},n={},r={};b1(t,o1.defaults),b1(t,o1.extendedDefaults),t._emitClasses=!0,t.init=!1;var i={},o=E1.map((function(e){return e.replace(/_/,"")}));return Object.keys(e).forEach((function(a){o.indexOf(a)>=0?y1(e[a])?(t[a]={},r[a]={},b1(t[a],e[a]),b1(r[a],e[a])):(t[a]=e[a],r[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"==typeof e[a]?n[""+a[2].toLowerCase()+a.substr(3)]=e[a]:i[a]=e[a]})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:r,rest:i,events:n}}(h),R=P.params,L=P.passedParams,N=P.rest,O=P.events,D=C1(u),F=D.slides,U=D.slots,z=function(){w(!_)};if(Object.assign(R.on,{_containerClasses:function(e,t){m(t)}}),!S.current&&(Object.assign(R.on,O),f=!0,E.current=function(e){return new o1(e)}(R),E.current.loopCreate=function(){},E.current.loopDestroy=function(){},R.loop&&(E.current.loopedSlides=T1(F,R)),E.current.virtual&&E.current.params.virtual.enabled)){E.current.virtual.slides=F;var j={cache:!1,renderExternal:y,renderExternalUpdate:!1};b1(E.current.params.virtual,j),b1(E.current.originalParams.virtual,j)}E.current&&E.current.on("_beforeBreakpoint",z);return l.exports.useEffect((function(){return function(){E.current&&E.current.off("_beforeBreakpoint",z)}})),l.exports.useEffect((function(){!x.current&&E.current&&(E.current.emitSlidesClasses(),x.current=!0)})),A1((function(){if(t&&(t.current=S.current),S.current)return function(e,t){var n=e.el,r=e.nextEl,i=e.prevEl,o=e.paginationEl,a=e.scrollbarEl,s=e.swiper;_1(t)&&r&&i&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),w1(t)&&o&&(s.params.pagination.el=o,s.originalParams.pagination.el=o),x1(t)&&a&&(s.params.scrollbar.el=a,s.originalParams.scrollbar.el=a),s.init(n)}({el:S.current,nextEl:C.current,prevEl:I.current,paginationEl:A.current,scrollbarEl:k.current,swiper:E.current},R),c&&c(E.current),function(){E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),A1((function(){!f&&O&&E.current&&Object.keys(O).forEach((function(e){E.current.on(e,O[e])}));var e=function(e,t,n,r){var i=[];if(!t)return i;var o=function(e){i.indexOf(e)<0&&i.push(e)},a=r.map((function(e){return e.key})),s=n.map((function(e){return e.key}));return a.join("")!==s.join("")&&o("children"),r.length!==n.length&&o("children"),E1.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(y1(e[n])&&y1(t[n])){var r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?o(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})),i.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})))}else e[n]!==t[n]&&o(n)})),i}(L,T.current,F,M.current);return T.current=L,M.current=F,e.length&&E.current&&!E.current.destroyed&&I1({swiper:E.current,slides:F,passedParams:L,changedParams:e,nextEl:C.current,prevEl:I.current,scrollbarEl:k.current,paginationEl:A.current}),function(){O&&E.current&&Object.keys(O).forEach((function(e){E.current.off(e,O[e])}))}})),A1((function(){var e;!(e=E.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[v]),q.createElement(o,P1({ref:S,className:S1(p+(r?" "+r:""))},N),U["container-start"],_1(R)&&q.createElement(q.Fragment,null,q.createElement("div",{ref:I,className:"swiper-button-prev"}),q.createElement("div",{ref:C,className:"swiper-button-next"})),x1(R)&&q.createElement("div",{ref:k,className:"swiper-scrollbar"}),w1(R)&&q.createElement("div",{ref:A,className:"swiper-pagination"}),q.createElement(s,{className:"swiper-wrapper"},U["wrapper-start"],R.virtual?function(e,t,n){var r;if(!n)return null;var i=e.isHorizontal()?((r={})[e.rtlTranslate?"right":"left"]=n.offset+"px",r):{top:n.offset+"px"};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return q.cloneElement(t,{swiper:e,style:i})}))}(E.current,F,v):!R.loop||E.current&&E.current.destroyed?F.map((function(e){return q.cloneElement(e,{swiper:E.current})})):function(e,t,n){var r=t.map((function(t,n){return q.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function i(e,t,r){return q.cloneElement(e,{key:e.key+"-duplicate-"+t+"-"+r,className:(e.props.className||"")+" "+n.slideDuplicateClass})}if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-r.length%n.slidesPerGroup;if(o!==n.slidesPerGroup)for(var a=0;a<o;a+=1){var s=q.createElement("div",{className:n.slideClass+" "+n.slideBlankClass});r.push(s)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);var u=T1(r,n),l=[],c=[];return r.forEach((function(e,t){t<u&&c.push(i(e,t,"prepend")),t<r.length&&t>=r.length-u&&l.push(i(e,t,"append"))})),e&&(e.loopedSlides=u),[].concat(l,r,c)}(E.current,F,R),U["wrapper-end"]),U["container-end"])}));R1.displayName="Swiper";var L1=["tag","children","className","swiper","zoom","virtualIndex"];function N1(){return(N1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O1=l.exports.forwardRef((function(e,t){var n,r=void 0===e?{}:e,i=r.tag,o=void 0===i?"div":i,a=r.children,s=r.className,u=void 0===s?"":s,c=r.swiper,h=r.zoom,f=r.virtualIndex,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,L1),p=l.exports.useRef(null),m=l.exports.useState("swiper-slide"),g=m[0],v=m[1];function y(e,t,n){t===p.current&&v(n)}A1((function(){if(t&&(t.current=p.current),p.current&&c){if(!c.destroyed)return c.on("_slideClass",y),function(){c&&c.off("_slideClass",y)};"swiper-slide"!==g&&v("swiper-slide")}})),A1((function(){c&&p.current&&v(c.getSlideClasses(p.current))}),[c]),"function"==typeof a&&(n={isActive:g.indexOf("swiper-slide-active")>=0||g.indexOf("swiper-slide-duplicate-active")>=0,isVisible:g.indexOf("swiper-slide-visible")>=0,isDuplicate:g.indexOf("swiper-slide-duplicate")>=0,isPrev:g.indexOf("swiper-slide-prev")>=0||g.indexOf("swiper-slide-duplicate-prev")>=0,isNext:g.indexOf("swiper-slide-next")>=0||g.indexOf("swiper-slide-duplicate-next")>=0});var b=function(){return"function"==typeof a?a(n):a};return q.createElement(o,N1({ref:p,className:S1(g+(u?" "+u:"")),"data-swiper-slide-index":f},d),h?q.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof h?h:void 0},b()):b())}));O1.displayName="SwiperSlide";var D1=Array.isArray,F1=Object.keys,U1=Object.prototype.hasOwnProperty,z1="undefined"!=typeof Element;function j1(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=D1(e),a=D1(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!j1(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=e instanceof Date,u=t instanceof Date;if(s!=u)return!1;if(s&&u)return e.getTime()==t.getTime();var l=e instanceof RegExp,c=t instanceof RegExp;if(l!=c)return!1;if(l&&c)return e.toString()==t.toString();var h=F1(e);if((r=h.length)!==F1(t).length)return!1;for(n=r;0!=n--;)if(!U1.call(t,h[n]))return!1;if(z1&&e instanceof Element&&t instanceof Element)return e===t;for(n=r;0!=n--;)if(!("_owner"===(i=h[n])&&e.$$typeof||j1(e[i],t[i])))return!1;return!0}return e!=e&&t!=t}var B1=function(e,t){try{return j1(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}},V1=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===H1}(e)}(e)};var H1="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function W1(e,t){return!1!==t.clone&&t.isMergeableObject(e)?q1(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function G1(e,t,n){return e.concat(t).map((function(e){return W1(e,n)}))}function q1(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||G1,n.isMergeableObject=n.isMergeableObject||V1;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=W1(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=q1(e[i],t[i],n):r[i]=W1(t[i],n)})),r}(e,t,n):W1(t,n)}q1.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return q1(e,n,t)}),{})};var K1=q1,X1="object"==typeof global&&global&&global.Object===Object&&global,Y1="object"==typeof self&&self&&self.Object===Object&&self,$1=X1||Y1||Function("return this")(),Q1=$1.Symbol,J1=Object.prototype,Z1=J1.hasOwnProperty,e2=J1.toString,t2=Q1?Q1.toStringTag:void 0;var n2=Object.prototype.toString;var r2=Q1?Q1.toStringTag:void 0;function i2(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r2&&r2 in Object(e)?function(e){var t=Z1.call(e,t2),n=e[t2];try{e[t2]=void 0;var r=!0}catch(bX){}var i=e2.call(e);return r&&(t?e[t2]=n:delete e[t2]),i}(e):function(e){return n2.call(e)}(e)}function o2(e,t){return function(n){return e(t(n))}}var a2=o2(Object.getPrototypeOf,Object);function s2(e){return null!=e&&"object"==typeof e}var u2=Function.prototype,l2=Object.prototype,c2=u2.toString,h2=l2.hasOwnProperty,f2=c2.call(Object);function d2(e){if(!s2(e)||"[object Object]"!=i2(e))return!1;var t=a2(e);if(null===t)return!0;var n=h2.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c2.call(n)==f2}function p2(e,t){return e===t||e!=e&&t!=t}function m2(e,t){for(var n=e.length;n--;)if(p2(e[n][0],t))return n;return-1}var g2=Array.prototype.splice;function v2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y2(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}v2.prototype.clear=function(){this.__data__=[],this.size=0},v2.prototype.delete=function(e){var t=this.__data__,n=m2(t,e);return!(n<0)&&(n==t.length-1?t.pop():g2.call(t,n,1),--this.size,!0)},v2.prototype.get=function(e){var t=this.__data__,n=m2(t,e);return n<0?void 0:t[n][1]},v2.prototype.has=function(e){return m2(this.__data__,e)>-1},v2.prototype.set=function(e,t){var n=this.__data__,r=m2(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function b2(e){if(!y2(e))return!1;var t=i2(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var _2,w2=$1["__core-js_shared__"],x2=(_2=/[^.]+$/.exec(w2&&w2.keys&&w2.keys.IE_PROTO||""))?"Symbol(src)_1."+_2:"";var S2=Function.prototype.toString;function E2(e){if(null!=e){try{return S2.call(e)}catch(bX){}try{return e+""}catch(bX){}}return""}var T2=/^\[object .+?Constructor\]$/,M2=Function.prototype,C2=Object.prototype,I2=M2.toString,A2=C2.hasOwnProperty,k2=RegExp("^"+I2.call(A2).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function P2(e){return!(!y2(e)||(t=e,x2&&x2 in t))&&(b2(e)?k2:T2).test(E2(e));var t}function R2(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return P2(n)?n:void 0}var L2=R2($1,"Map"),N2=R2(Object,"create");var O2=Object.prototype.hasOwnProperty;var D2=Object.prototype.hasOwnProperty;function F2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U2(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function z2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}F2.prototype.clear=function(){this.__data__=N2?N2(null):{},this.size=0},F2.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},F2.prototype.get=function(e){var t=this.__data__;if(N2){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return O2.call(t,e)?t[e]:void 0},F2.prototype.has=function(e){var t=this.__data__;return N2?void 0!==t[e]:D2.call(t,e)},F2.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=N2&&void 0===t?"__lodash_hash_undefined__":t,this},z2.prototype.clear=function(){this.size=0,this.__data__={hash:new F2,map:new(L2||v2),string:new F2}},z2.prototype.delete=function(e){var t=U2(this,e).delete(e);return this.size-=t?1:0,t},z2.prototype.get=function(e){return U2(this,e).get(e)},z2.prototype.has=function(e){return U2(this,e).has(e)},z2.prototype.set=function(e,t){var n=U2(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function j2(e){var t=this.__data__=new v2(e);this.size=t.size}j2.prototype.clear=function(){this.__data__=new v2,this.size=0},j2.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},j2.prototype.get=function(e){return this.__data__.get(e)},j2.prototype.has=function(e){return this.__data__.has(e)},j2.prototype.set=function(e,t){var n=this.__data__;if(n instanceof v2){var r=n.__data__;if(!L2||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new z2(r)}return n.set(e,t),this.size=n.size,this};var B2=function(){try{var e=R2(Object,"defineProperty");return e({},"",{}),e}catch(bX){}}();function V2(e,t,n){"__proto__"==t&&B2?B2(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var H2=Object.prototype.hasOwnProperty;function W2(e,t,n){var r=e[t];H2.call(e,t)&&p2(r,n)&&(void 0!==n||t in e)||V2(e,t,n)}function G2(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?V2(n,s,u):W2(n,s,u)}return n}function q2(e){return s2(e)&&"[object Arguments]"==i2(e)}var K2=Object.prototype,X2=K2.hasOwnProperty,Y2=K2.propertyIsEnumerable,$2=q2(function(){return arguments}())?q2:function(e){return s2(e)&&X2.call(e,"callee")&&!Y2.call(e,"callee")},Q2=Array.isArray;var J2="object"==typeof exports&&exports&&!exports.nodeType&&exports,Z2=J2&&"object"==typeof module&&module&&!module.nodeType&&module,e3=Z2&&Z2.exports===J2?$1.Buffer:void 0,t3=(e3?e3.isBuffer:void 0)||function(){return!1},n3=/^(?:0|[1-9]\d*)$/;function r3(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&n3.test(e))&&e>-1&&e%1==0&&e<t}function i3(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var o3={};function a3(e){return function(t){return e(t)}}o3["[object Float32Array]"]=o3["[object Float64Array]"]=o3["[object Int8Array]"]=o3["[object Int16Array]"]=o3["[object Int32Array]"]=o3["[object Uint8Array]"]=o3["[object Uint8ClampedArray]"]=o3["[object Uint16Array]"]=o3["[object Uint32Array]"]=!0,o3["[object Arguments]"]=o3["[object Array]"]=o3["[object ArrayBuffer]"]=o3["[object Boolean]"]=o3["[object DataView]"]=o3["[object Date]"]=o3["[object Error]"]=o3["[object Function]"]=o3["[object Map]"]=o3["[object Number]"]=o3["[object Object]"]=o3["[object RegExp]"]=o3["[object Set]"]=o3["[object String]"]=o3["[object WeakMap]"]=!1;var s3="object"==typeof exports&&exports&&!exports.nodeType&&exports,u3=s3&&"object"==typeof module&&module&&!module.nodeType&&module,l3=u3&&u3.exports===s3&&X1.process,c3=function(){try{var e=u3&&u3.require&&u3.require("util").types;return e||l3&&l3.binding&&l3.binding("util")}catch(bX){}}(),h3=c3&&c3.isTypedArray,f3=h3?a3(h3):function(e){return s2(e)&&i3(e.length)&&!!o3[i2(e)]},d3=Object.prototype.hasOwnProperty;function p3(e,t){var n=Q2(e),r=!n&&$2(e),i=!n&&!r&&t3(e),o=!n&&!r&&!i&&f3(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!d3.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||r3(l,u))||s.push(l);return s}var m3=Object.prototype;function g3(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||m3)}var v3=o2(Object.keys,Object),y3=Object.prototype.hasOwnProperty;function b3(e){return null!=e&&i3(e.length)&&!b2(e)}function _3(e){return b3(e)?p3(e):function(e){if(!g3(e))return v3(e);var t=[];for(var n in Object(e))y3.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var w3=Object.prototype.hasOwnProperty;function x3(e){if(!y2(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=g3(e),n=[];for(var r in e)("constructor"!=r||!t&&w3.call(e,r))&&n.push(r);return n}function S3(e){return b3(e)?p3(e,!0):x3(e)}var E3="object"==typeof exports&&exports&&!exports.nodeType&&exports,T3=E3&&"object"==typeof module&&module&&!module.nodeType&&module,M3=T3&&T3.exports===E3?$1.Buffer:void 0,C3=M3?M3.allocUnsafe:void 0;function I3(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function A3(){return[]}var k3=Object.prototype.propertyIsEnumerable,P3=Object.getOwnPropertySymbols,R3=P3?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(P3(e),(function(t){return k3.call(e,t)})))}:A3;function L3(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var N3=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)L3(t,R3(e)),e=a2(e);return t}:A3;function O3(e,t,n){var r=t(e);return Q2(e)?r:L3(r,n(e))}function D3(e){return O3(e,_3,R3)}function F3(e){return O3(e,S3,N3)}var U3=R2($1,"DataView"),z3=R2($1,"Promise"),j3=R2($1,"Set"),B3=R2($1,"WeakMap"),V3=E2(U3),H3=E2(L2),W3=E2(z3),G3=E2(j3),q3=E2(B3),K3=i2;(U3&&"[object DataView]"!=K3(new U3(new ArrayBuffer(1)))||L2&&"[object Map]"!=K3(new L2)||z3&&"[object Promise]"!=K3(z3.resolve())||j3&&"[object Set]"!=K3(new j3)||B3&&"[object WeakMap]"!=K3(new B3))&&(K3=function(e){var t=i2(e),n="[object Object]"==t?e.constructor:void 0,r=n?E2(n):"";if(r)switch(r){case V3:return"[object DataView]";case H3:return"[object Map]";case W3:return"[object Promise]";case G3:return"[object Set]";case q3:return"[object WeakMap]"}return t});var X3=K3,Y3=Object.prototype.hasOwnProperty;var $3=$1.Uint8Array;function Q3(e){var t=new e.constructor(e.byteLength);return new $3(t).set(new $3(e)),t}var J3=/\w*$/;var Z3=Q1?Q1.prototype:void 0,e4=Z3?Z3.valueOf:void 0;function t4(e,t,n){var r,i,o,a=e.constructor;switch(t){case"[object ArrayBuffer]":return Q3(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?Q3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Q3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(o=new(i=e).constructor(i.source,J3.exec(i))).lastIndex=i.lastIndex,o;case"[object Set]":return new a;case"[object Symbol]":return r=e,e4?Object(e4.call(r)):{}}}var n4=Object.create,r4=function(){function e(){}return function(t){if(!y2(t))return{};if(n4)return n4(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var i4=c3&&c3.isMap,o4=i4?a3(i4):function(e){return s2(e)&&"[object Map]"==X3(e)};var a4=c3&&c3.isSet,s4=a4?a3(a4):function(e){return s2(e)&&"[object Set]"==X3(e)},u4={};function l4(e,t,n,r,i,o){var a,s=1&t,u=2&t,l=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!y2(e))return e;var c=Q2(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Y3.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return I3(e,a)}else{var h=X3(e),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(t3(e))return function(e,t){if(t)return e.slice();var n=e.length,r=C3?C3(n):new e.constructor(n);return e.copy(r),r}(e,s);if("[object Object]"==h||"[object Arguments]"==h||f&&!i){if(a=u||f?{}:function(e){return"function"!=typeof e.constructor||g3(e)?{}:r4(a2(e))}(e),!s)return u?function(e,t){return G2(e,N3(e),t)}(e,function(e,t){return e&&G2(t,S3(t),e)}(a,e)):function(e,t){return G2(e,R3(e),t)}(e,function(e,t){return e&&G2(t,_3(t),e)}(a,e))}else{if(!u4[h])return i?e:{};a=t4(e,h,s)}}o||(o=new j2);var d=o.get(e);if(d)return d;o.set(e,a),s4(e)?e.forEach((function(r){a.add(l4(r,t,n,r,e,o))})):o4(e)&&e.forEach((function(r,i){a.set(i,l4(r,t,n,i,e,o))}));var p=c?void 0:(l?u?F3:D3:u?S3:_3)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,i){p&&(r=e[i=r]),W2(a,i,l4(r,t,n,i,e,o))})),a}u4["[object Arguments]"]=u4["[object Array]"]=u4["[object ArrayBuffer]"]=u4["[object DataView]"]=u4["[object Boolean]"]=u4["[object Date]"]=u4["[object Float32Array]"]=u4["[object Float64Array]"]=u4["[object Int8Array]"]=u4["[object Int16Array]"]=u4["[object Int32Array]"]=u4["[object Map]"]=u4["[object Number]"]=u4["[object Object]"]=u4["[object RegExp]"]=u4["[object Set]"]=u4["[object String]"]=u4["[object Symbol]"]=u4["[object Uint8Array]"]=u4["[object Uint8ClampedArray]"]=u4["[object Uint16Array]"]=u4["[object Uint32Array]"]=!0,u4["[object Error]"]=u4["[object Function]"]=u4["[object WeakMap]"]=!1;function c4(e){return l4(e,4)}function h4(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function f4(e){return"symbol"==typeof e||s2(e)&&"[object Symbol]"==i2(e)}function d4(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(d4.Cache||z2),n}d4.Cache=z2;var p4,m4,g4,v4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y4=/\\(\\)?/g,b4=(p4=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(v4,(function(e,n,r,i){t.push(r?i.replace(y4,"$1"):n||e)})),t},m4=d4(p4,(function(e){return 500===g4.size&&g4.clear(),e})),g4=m4.cache,m4);function _4(e){if("string"==typeof e||f4(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var w4=Q1?Q1.prototype:void 0,x4=w4?w4.toString:void 0;function S4(e){if("string"==typeof e)return e;if(Q2(e))return h4(e,S4)+"";if(f4(e))return x4?x4.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function E4(e){return Q2(e)?h4(e,_4):f4(e)?[e]:I3(b4(function(e){return null==e?"":S4(e)}(e)))}var T4={exports:{}},M4={},C4="function"==typeof Symbol&&Symbol.for,I4=C4?Symbol.for("react.element"):60103,A4=C4?Symbol.for("react.portal"):60106,k4=C4?Symbol.for("react.fragment"):60107,P4=C4?Symbol.for("react.strict_mode"):60108,R4=C4?Symbol.for("react.profiler"):60114,L4=C4?Symbol.for("react.provider"):60109,N4=C4?Symbol.for("react.context"):60110,O4=C4?Symbol.for("react.async_mode"):60111,D4=C4?Symbol.for("react.concurrent_mode"):60111,F4=C4?Symbol.for("react.forward_ref"):60112,U4=C4?Symbol.for("react.suspense"):60113,z4=C4?Symbol.for("react.suspense_list"):60120,j4=C4?Symbol.for("react.memo"):60115,B4=C4?Symbol.for("react.lazy"):60116,V4=C4?Symbol.for("react.block"):60121,H4=C4?Symbol.for("react.fundamental"):60117,W4=C4?Symbol.for("react.responder"):60118,G4=C4?Symbol.for("react.scope"):60119;function q4(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case I4:switch(e=e.type){case O4:case D4:case k4:case R4:case P4:case U4:return e;default:switch(e=e&&e.$$typeof){case N4:case F4:case B4:case j4:case L4:return e;default:return t}}case A4:return t}}}function K4(e){return q4(e)===D4}M4.AsyncMode=O4,M4.ConcurrentMode=D4,M4.ContextConsumer=N4,M4.ContextProvider=L4,M4.Element=I4,M4.ForwardRef=F4,M4.Fragment=k4,M4.Lazy=B4,M4.Memo=j4,M4.Portal=A4,M4.Profiler=R4,M4.StrictMode=P4,M4.Suspense=U4,M4.isAsyncMode=function(e){return K4(e)||q4(e)===O4},M4.isConcurrentMode=K4,M4.isContextConsumer=function(e){return q4(e)===N4},M4.isContextProvider=function(e){return q4(e)===L4},M4.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===I4},M4.isForwardRef=function(e){return q4(e)===F4},M4.isFragment=function(e){return q4(e)===k4},M4.isLazy=function(e){return q4(e)===B4},M4.isMemo=function(e){return q4(e)===j4},M4.isPortal=function(e){return q4(e)===A4},M4.isProfiler=function(e){return q4(e)===R4},M4.isStrictMode=function(e){return q4(e)===P4},M4.isSuspense=function(e){return q4(e)===U4},M4.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===k4||e===D4||e===R4||e===P4||e===U4||e===z4||"object"==typeof e&&null!==e&&(e.$$typeof===B4||e.$$typeof===j4||e.$$typeof===L4||e.$$typeof===N4||e.$$typeof===F4||e.$$typeof===H4||e.$$typeof===W4||e.$$typeof===G4||e.$$typeof===V4)},M4.typeOf=q4,T4.exports=M4;var X4=T4.exports,Y4={};function $4(){return($4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Q4(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Y4[X4.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Y4[X4.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var J4=function(e){return"function"==typeof e},Z4=function(e){return null!==e&&"object"==typeof e},e5=function(e){return String(Math.floor(Number(e)))===e},t5=function(e){return"[object String]"===Object.prototype.toString.call(e)},n5=function(e){return Z4(e)&&J4(e.then)};function r5(e,t,n,r){void 0===r&&(r=0);for(var i=E4(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function i5(e,t,n){for(var r=c4(e),i=r,o=0,a=E4(t);o<a.length-1;o++){var s=a[o],u=r5(e,a.slice(0,o+1));if(u&&(Z4(u)||Array.isArray(u)))i=i[s]=c4(u);else{var l=a[o+1];i=i[s]=e5(l)&&Number(l)>=0?[]:{}}}return(0===o?e:i)[a[o]]===n?e:(void 0===n?delete i[a[o]]:i[a[o]]=n,0===o&&void 0===n&&delete r[a[o]],r)}function o5(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];Z4(s)?n.get(s)||(n.set(s,!0),r[a]=Array.isArray(s)?[]:{},o5(s,t,n,r[a])):r[a]=t}return r}var a5=l.exports.createContext(void 0);a5.displayName="FormikContext";var s5=a5.Provider;function u5(){var e=l.exports.useContext(a5);return e}function l5(e,t){switch(t.type){case"SET_VALUES":return $4({},e,{values:t.payload});case"SET_TOUCHED":return $4({},e,{touched:t.payload});case"SET_ERRORS":return B1(e.errors,t.payload)?e:$4({},e,{errors:t.payload});case"SET_STATUS":return $4({},e,{status:t.payload});case"SET_ISSUBMITTING":return $4({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return $4({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return $4({},e,{values:i5(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return $4({},e,{touched:i5(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return $4({},e,{errors:i5(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return $4({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return $4({},e,{touched:o5(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return $4({},e,{isSubmitting:!1});default:return e}}a5.Consumer;var c5={},h5={};function f5(e){var t=e.validateOnChange,n=void 0===t||t,r=e.validateOnBlur,i=void 0===r||r,o=e.validateOnMount,a=void 0!==o&&o,s=e.isInitialValid,u=e.enableReinitialize,c=void 0!==u&&u,h=e.onSubmit,f=Q4(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=$4({validateOnChange:n,validateOnBlur:i,validateOnMount:a,onSubmit:h},f),p=l.exports.useRef(d.initialValues),m=l.exports.useRef(d.initialErrors||c5),g=l.exports.useRef(d.initialTouched||h5),v=l.exports.useRef(d.initialStatus),y=l.exports.useRef(!1),b=l.exports.useRef({});l.exports.useEffect((function(){return y.current=!0,function(){y.current=!1}}),[]);var _=l.exports.useReducer(l5,{values:d.initialValues,errors:d.initialErrors||c5,touched:d.initialTouched||h5,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),w=_[0],x=_[1],S=l.exports.useCallback((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(c5):n5(i)?i.then((function(e){n(e||c5)}),(function(e){r(e)})):n(i)}))}),[d.validate]),E=l.exports.useCallback((function(e,t){var n=d.validationSchema,r=J4(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=p5(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(c5)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return i5(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;r5(t,a.path)||(t=i5(t,a.path,a.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),T=l.exports.useCallback((function(e,t){return new Promise((function(n){return n(b.current[e].validate(t))}))}),[]),M=l.exports.useCallback((function(e){var t=Object.keys(b.current).filter((function(e){return J4(b.current[e].validate)})),n=t.length>0?t.map((function(t){return T(t,r5(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=i5(e,t[r],n)),e}),{})}))}),[T]),C=l.exports.useCallback((function(e){return Promise.all([M(e),d.validationSchema?E(e):{},d.validate?S(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return K1.all([t,n,r],{arrayMerge:m5})}))}),[d.validate,d.validationSchema,M,S,E]),I=v5((function(e){return void 0===e&&(e=w.values),x({type:"SET_ISVALIDATING",payload:!0}),C(e).then((function(e){return y.current&&(x({type:"SET_ISVALIDATING",payload:!1}),x({type:"SET_ERRORS",payload:e})),e}))}));l.exports.useEffect((function(){a&&!0===y.current&&B1(p.current,d.initialValues)&&I(p.current)}),[a,I]);var A=l.exports.useCallback((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:m.current?m.current:d.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:d.initialTouched||{},i=e&&e.status?e.status:v.current?v.current:d.initialStatus;p.current=t,m.current=n,g.current=r,v.current=i;var o=function(){x({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var a=d.onReset(w.values,X);n5(a)?a.then(o):o()}else o()}),[d.initialErrors,d.initialStatus,d.initialTouched]);l.exports.useEffect((function(){!0!==y.current||B1(p.current,d.initialValues)||(c&&(p.current=d.initialValues,A()),a&&I(p.current))}),[c,d.initialValues,A,a,I]),l.exports.useEffect((function(){c&&!0===y.current&&!B1(m.current,d.initialErrors)&&(m.current=d.initialErrors||c5,x({type:"SET_ERRORS",payload:d.initialErrors||c5}))}),[c,d.initialErrors]),l.exports.useEffect((function(){c&&!0===y.current&&!B1(g.current,d.initialTouched)&&(g.current=d.initialTouched||h5,x({type:"SET_TOUCHED",payload:d.initialTouched||h5}))}),[c,d.initialTouched]),l.exports.useEffect((function(){c&&!0===y.current&&!B1(v.current,d.initialStatus)&&(v.current=d.initialStatus,x({type:"SET_STATUS",payload:d.initialStatus}))}),[c,d.initialStatus,d.initialTouched]);var k=v5((function(e){if(b.current[e]&&J4(b.current[e].validate)){var t=r5(w.values,e),n=b.current[e].validate(t);return n5(n)?(x({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),x({type:"SET_ISVALIDATING",payload:!1})}))):(x({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(x({type:"SET_ISVALIDATING",payload:!0}),E(w.values,e).then((function(e){return e})).then((function(t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),x({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),P=l.exports.useCallback((function(e,t){var n=t.validate;b.current[e]={validate:n}}),[]),R=l.exports.useCallback((function(e){delete b.current[e]}),[]),L=v5((function(e,t){return x({type:"SET_TOUCHED",payload:e}),(void 0===t?i:t)?I(w.values):Promise.resolve()})),N=l.exports.useCallback((function(e){x({type:"SET_ERRORS",payload:e})}),[]),O=v5((function(e,t){var r=J4(e)?e(w.values):e;return x({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?I(r):Promise.resolve()})),D=l.exports.useCallback((function(e,t){x({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),F=v5((function(e,t,r){return x({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?I(i5(w.values,e,t)):Promise.resolve()})),U=l.exports.useCallback((function(e,t){var n,r=t,i=e;if(!t5(e)){e.persist&&e.persist();var o=e.target?e.target:e.currentTarget,a=o.type,s=o.name,u=o.id,l=o.value,c=o.checked,h=(o.outerHTML,o.options),f=o.multiple;r=t||(s||u),i=/number|range/.test(a)?(n=parseFloat(l),isNaN(n)?"":n):/checkbox/.test(a)?function(e,t,n){if("boolean"==typeof e)return Boolean(t);var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,i=(o=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,o).concat(r.slice(o+1))}(r5(w.values,r),c,l):h&&f?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(h):l}r&&F(r,i)}),[F,w.values]),z=v5((function(e){if(t5(e))return function(t){return U(t,e)};U(e)})),j=v5((function(e,t,n){return void 0===t&&(t=!0),x({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?i:n)?I(w.values):Promise.resolve()})),B=l.exports.useCallback((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,o=(n.outerHTML,t||(r||i));j(o,!0)}),[j]),V=v5((function(e){if(t5(e))return function(t){return B(t,e)};B(e)})),H=l.exports.useCallback((function(e){J4(e)?x({type:"SET_FORMIK_STATE",payload:e}):x({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),W=l.exports.useCallback((function(e){x({type:"SET_STATUS",payload:e})}),[]),G=l.exports.useCallback((function(e){x({type:"SET_ISSUBMITTING",payload:e})}),[]),q=v5((function(){return x({type:"SUBMIT_ATTEMPT"}),I().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Y()))return}catch(r){throw r}return Promise.resolve(n).then((function(e){return y.current&&x({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(y.current)throw x({type:"SUBMIT_FAILURE"}),e}))}if(y.current&&(x({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=v5((function(e){e&&e.preventDefault&&J4(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&J4(e.stopPropagation)&&e.stopPropagation(),q().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),X={resetForm:A,validateForm:I,validateField:k,setErrors:N,setFieldError:D,setFieldTouched:j,setFieldValue:F,setStatus:W,setSubmitting:G,setTouched:L,setValues:O,setFormikState:H,submitForm:q},Y=v5((function(){return h(w.values,X)})),$=v5((function(e){e&&e.preventDefault&&J4(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&J4(e.stopPropagation)&&e.stopPropagation(),A()})),Q=l.exports.useCallback((function(e){return{value:r5(w.values,e),error:r5(w.errors,e),touched:!!r5(w.touched,e),initialValue:r5(p.current,e),initialTouched:!!r5(g.current,e),initialError:r5(m.current,e)}}),[w.errors,w.touched,w.values]),J=l.exports.useCallback((function(e){return{setValue:function(t,n){return F(e,t,n)},setTouched:function(t,n){return j(e,t,n)},setError:function(t){return D(e,t)}}}),[F,j,D]),Z=l.exports.useCallback((function(e){var t=Z4(e),n=t?e.name:e,r=r5(w.values,n),i={name:n,value:r,onChange:z,onBlur:V};if(t){var o=e.type,a=e.value,s=e.as,u=e.multiple;"checkbox"===o?void 0===a?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(a)),i.value=a):"radio"===o?(i.checked=r===a,i.value=a):"select"===s&&u&&(i.value=i.value||[],i.multiple=!0)}return i}),[V,z,w.values]),ee=l.exports.useMemo((function(){return!B1(p.current,w.values)}),[p.current,w.values]),te=l.exports.useMemo((function(){return void 0!==s?ee?w.errors&&0===Object.keys(w.errors).length:!1!==s&&J4(s)?s(d):s:w.errors&&0===Object.keys(w.errors).length}),[s,ee,w.errors,d]);return $4({},w,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:v.current,handleBlur:V,handleChange:z,handleReset:$,handleSubmit:K,resetForm:A,setErrors:N,setFormikState:H,setFieldTouched:j,setFieldValue:F,setFieldError:D,setStatus:W,setSubmitting:G,setTouched:L,setValues:O,submitForm:q,validateForm:I,validateField:k,isValid:te,dirty:ee,unregisterField:R,registerField:P,getFieldProps:Z,getFieldMeta:Q,getFieldHelpers:J,validateOnBlur:i,validateOnChange:n,validateOnMount:a})}function d5(e){var t=f5(e),n=e.component,r=e.children,i=e.render,o=e.innerRef;return l.exports.useImperativeHandle(o,(function(){return t})),l.exports.createElement(s5,{value:t},n?l.exports.createElement(n,t):i?i(t):r?J4(r)?r(t):function(e){return 0===l.exports.Children.count(e)}(r)?null:l.exports.Children.only(r):null)}function p5(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||d2(e)?p5(e):""!==e?e:void 0})):d2(e[r])?t[r]=p5(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function m5(e,t,n){var r=e.slice();return t.forEach((function(t,i){if(void 0===r[i]){var o=!1!==n.clone&&n.isMergeableObject(t);r[i]=o?K1(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=K1(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var g5="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.exports.useLayoutEffect:l.exports.useEffect;function v5(e){var t=l.exports.useRef(e);return g5((function(){t.current=e})),l.exports.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}function y5(e){var t=e.validate,n=e.name,r=e.render,i=e.children,o=e.as,a=e.component,s=Q4(e,["validate","name","render","children","as","component"]),u=Q4(u5(),["validate","validationSchema"]),c=u.registerField,h=u.unregisterField;l.exports.useEffect((function(){return c(n,{validate:t}),function(){h(n)}}),[c,h,n,t]);var f=u.getFieldProps($4({name:n},s)),d=u.getFieldMeta(n),p={field:f,form:u};if(r)return r($4({},p,{meta:d}));if(J4(i))return i($4({},p,{meta:d}));if(a){if("string"==typeof a){var m=s.innerRef,g=Q4(s,["innerRef"]);return l.exports.createElement(a,$4({ref:m},f,g),i)}return l.exports.createElement(a,$4({field:f,form:u},s),i)}var v=o||"input";if("string"==typeof v){var y=s.innerRef,b=Q4(s,["innerRef"]);return l.exports.createElement(v,$4({ref:y},f,b),i)}return l.exports.createElement(v,$4({},f,s),i)}var b5,_5,w5=l.exports.forwardRef((function(e,t){var n=e.action,r=Q4(e,["action"]),i=null!=n?n:"#",o=u5(),a=o.handleReset,s=o.handleSubmit;return l.exports.createElement("form",Object.assign({onSubmit:s,ref:t,onReset:a,action:i},r))}));w5.displayName="Form";try{b5=Map}catch(yre){}try{_5=Set}catch(yre){}function x5(e,t,n){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(S5);if(b5&&e instanceof b5)return new Map(Array.from(e.entries()));if(_5&&e instanceof _5)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var o=t.findIndex((function(t){return t===e[i]}));r[i]=o>-1?n[o]:x5(e[i],t,n)}return r}return e}function S5(e){return x5(e,[],[])}const E5=Object.prototype.toString,T5=Error.prototype.toString,M5=RegExp.prototype.toString,C5="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",I5=/^Symbol\((.*)\)(.*)$/;function A5(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return C5.call(e).replace(I5,"Symbol($1)");const r=E5.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+T5.call(e)+"]":"RegExp"===r?M5.call(e):null}function k5(e,t){let n=A5(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=A5(this[e],t);return null!==r?r:n}),2)}let P5={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{let i=null!=r&&r!==n,o=`${e} must be a \`${t}\` type, but the final value was: \`${k5(n,!0)}\``+(i?` (cast from the value \`${k5(r,!0)}\`).`:".");return null===n&&(o+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),o},defined:"${path} must be defined"},R5={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},L5={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},N5={noUnknown:"${path} field has unspecified keys: ${unknown}"};Object.assign(Object.create(null),{mixed:P5,string:R5,number:{min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date:L5,object:N5,array:{min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must be have ${length} items"},boolean:{isValue:"${path} field must be ${value}"}});var O5=Object.prototype.hasOwnProperty;var D5=function(e,t){return null!=e&&O5.call(e,t)},F5=Array.isArray,U5="object"==typeof s&&s&&s.Object===Object&&s,z5=U5,j5="object"==typeof self&&self&&self.Object===Object&&self,B5=z5||j5||Function("return this")(),V5=B5.Symbol,H5=V5,W5=Object.prototype,G5=W5.hasOwnProperty,q5=W5.toString,K5=H5?H5.toStringTag:void 0;var X5=function(e){var t=G5.call(e,K5),n=e[K5];try{e[K5]=void 0;var r=!0}catch(bX){}var i=q5.call(e);return r&&(t?e[K5]=n:delete e[K5]),i},Y5=Object.prototype.toString;var $5=X5,Q5=function(e){return Y5.call(e)},J5=V5?V5.toStringTag:void 0;var Z5=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J5&&J5 in Object(e)?$5(e):Q5(e)};var e6=function(e){return null!=e&&"object"==typeof e},t6=Z5,n6=e6;var r6=function(e){return"symbol"==typeof e||n6(e)&&"[object Symbol]"==t6(e)},i6=F5,o6=r6,a6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s6=/^\w*$/;var u6=function(e,t){if(i6(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o6(e))||(s6.test(e)||!a6.test(e)||null!=t&&e in Object(t))};var l6=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},c6=Z5,h6=l6;var f6=function(e){if(!h6(e))return!1;var t=c6(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},d6=B5["__core-js_shared__"],p6=function(){var e=/[^.]+$/.exec(d6&&d6.keys&&d6.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var m6=function(e){return!!p6&&p6 in e},g6=Function.prototype.toString;var v6=function(e){if(null!=e){try{return g6.call(e)}catch(bX){}try{return e+""}catch(bX){}}return""},y6=f6,b6=m6,_6=l6,w6=v6,x6=/^\[object .+?Constructor\]$/,S6=Function.prototype,E6=Object.prototype,T6=S6.toString,M6=E6.hasOwnProperty,C6=RegExp("^"+T6.call(M6).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var I6=function(e){return!(!_6(e)||b6(e))&&(y6(e)?C6:x6).test(w6(e))},A6=function(e,t){return null==e?void 0:e[t]};var k6=function(e,t){var n=A6(e,t);return I6(n)?n:void 0},P6=k6(Object,"create"),R6=P6;var L6=function(){this.__data__=R6?R6(null):{},this.size=0};var N6=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},O6=P6,D6=Object.prototype.hasOwnProperty;var F6=function(e){var t=this.__data__;if(O6){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D6.call(t,e)?t[e]:void 0},U6=P6,z6=Object.prototype.hasOwnProperty;var j6=P6;var B6=L6,V6=N6,H6=F6,W6=function(e){var t=this.__data__;return U6?void 0!==t[e]:z6.call(t,e)},G6=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=j6&&void 0===t?"__lodash_hash_undefined__":t,this};function q6(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}q6.prototype.clear=B6,q6.prototype.delete=V6,q6.prototype.get=H6,q6.prototype.has=W6,q6.prototype.set=G6;var K6=q6;var X6=function(){this.__data__=[],this.size=0};var Y6=function(e,t){return e===t||e!=e&&t!=t},$6=Y6;var Q6=function(e,t){for(var n=e.length;n--;)if($6(e[n][0],t))return n;return-1},J6=Q6,Z6=Array.prototype.splice;var e8=Q6;var t8=Q6;var n8=Q6;var r8=X6,i8=function(e){var t=this.__data__,n=J6(t,e);return!(n<0)&&(n==t.length-1?t.pop():Z6.call(t,n,1),--this.size,!0)},o8=function(e){var t=this.__data__,n=e8(t,e);return n<0?void 0:t[n][1]},a8=function(e){return t8(this.__data__,e)>-1},s8=function(e,t){var n=this.__data__,r=n8(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function u8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u8.prototype.clear=r8,u8.prototype.delete=i8,u8.prototype.get=o8,u8.prototype.has=a8,u8.prototype.set=s8;var l8=u8,c8=k6(B5,"Map"),h8=K6,f8=l8,d8=c8;var p8=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var m8=function(e,t){var n=e.__data__;return p8(t)?n["string"==typeof t?"string":"hash"]:n.map},g8=m8;var v8=m8;var y8=m8;var b8=m8;var _8=function(){this.size=0,this.__data__={hash:new h8,map:new(d8||f8),string:new h8}},w8=function(e){var t=g8(this,e).delete(e);return this.size-=t?1:0,t},x8=function(e){return v8(this,e).get(e)},S8=function(e){return y8(this,e).has(e)},E8=function(e,t){var n=b8(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function T8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}T8.prototype.clear=_8,T8.prototype.delete=w8,T8.prototype.get=x8,T8.prototype.has=S8,T8.prototype.set=E8;var M8=T8,C8=M8;function I8(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(I8.Cache||C8),n}I8.Cache=C8;var A8=I8;var k8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P8=/\\(\\)?/g,R8=function(e){var t=A8(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(k8,(function(e,n,r,i){t.push(r?i.replace(P8,"$1"):n||e)})),t}));var L8=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},N8=F5,O8=r6,D8=V5?V5.prototype:void 0,F8=D8?D8.toString:void 0;var U8=function e(t){if("string"==typeof t)return t;if(N8(t))return L8(t,e)+"";if(O8(t))return F8?F8.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var z8=function(e){return null==e?"":U8(e)},j8=F5,B8=u6,V8=R8,H8=z8;var W8=function(e,t){return j8(e)?e:B8(e,t)?[e]:V8(H8(e))},G8=Z5,q8=e6;var K8=function(e){return q8(e)&&"[object Arguments]"==G8(e)},X8=e6,Y8=Object.prototype,$8=Y8.hasOwnProperty,Q8=Y8.propertyIsEnumerable,J8=K8(function(){return arguments}())?K8:function(e){return X8(e)&&$8.call(e,"callee")&&!Q8.call(e,"callee")},Z8=/^(?:0|[1-9]\d*)$/;var e7=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Z8.test(e))&&e>-1&&e%1==0&&e<t};var t7=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},n7=r6;var r7=function(e){if("string"==typeof e||n7(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},i7=W8,o7=J8,a7=F5,s7=e7,u7=t7,l7=r7;var c7=function(e,t,n){for(var r=-1,i=(t=i7(t,e)).length,o=!1;++r<i;){var a=l7(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&u7(i)&&s7(a,i)&&(a7(e)||o7(e))},h7=D5,f7=c7;var d7=function(e,t){return null!=e&&f7(e,t,h7)},p7=e=>e&&e.__isYupSchema__;class m7{constructor(e,t){if(this.refs=e,this.refs=e,"function"==typeof t)return void(this.fn=t);if(!d7(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,o="function"==typeof n?n:(...e)=>e.every((e=>e===n));this.fn=function(...e){let t=e.pop(),n=e.pop(),a=o(...e)?r:i;if(a)return"function"==typeof a?a(n):n.concat(a.resolve(t))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!p7(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}function g7(e){return null==e?[]:[].concat(e)}function v7(){return(v7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let y7=/\$\{\s*(\w+)\s*\}/g;class b7 extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=v7({},t,{path:n})),"string"==typeof e?e.replace(y7,((e,n)=>k5(t[n]))):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],g7(e).forEach((e=>{b7.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,b7)}}function _7(e,t){let{endEarly:n,tests:r,args:i,value:o,errors:a,sort:s,path:u}=e,l=(e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}})(t),c=r.length;const h=[];if(a=a||[],!c)return a.length?l(new b7(a,o,u)):l(null,o);for(let f=0;f<r.length;f++){(0,r[f])(i,(function(e){if(e){if(!b7.isError(e))return l(e,o);if(n)return e.value=o,l(e,o);h.push(e)}if(--c<=0){if(h.length&&(s&&h.sort(s),a.length&&h.push(...a),a=h),a.length)return void l(new b7(a,o,u),o);l(null,o)}}))}}var w7=k6,x7=function(){try{var e=w7(Object,"defineProperty");return e({},"",{}),e}catch(bX){}}();var S7=function(e,t,n){"__proto__"==t&&x7?x7(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var E7=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}();var T7=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},M7={exports:{}};var C7=function(){return!1};!function(e,t){var n=B5,r=C7,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;e.exports=s}(M7,M7.exports);var I7=Z5,A7=t7,k7=e6,P7={};P7["[object Float32Array]"]=P7["[object Float64Array]"]=P7["[object Int8Array]"]=P7["[object Int16Array]"]=P7["[object Int32Array]"]=P7["[object Uint8Array]"]=P7["[object Uint8ClampedArray]"]=P7["[object Uint16Array]"]=P7["[object Uint32Array]"]=!0,P7["[object Arguments]"]=P7["[object Array]"]=P7["[object ArrayBuffer]"]=P7["[object Boolean]"]=P7["[object DataView]"]=P7["[object Date]"]=P7["[object Error]"]=P7["[object Function]"]=P7["[object Map]"]=P7["[object Number]"]=P7["[object Object]"]=P7["[object RegExp]"]=P7["[object Set]"]=P7["[object String]"]=P7["[object WeakMap]"]=!1;var R7=function(e){return k7(e)&&A7(e.length)&&!!P7[I7(e)]};var L7=function(e){return function(t){return e(t)}},N7={exports:{}};!function(e,t){var n=U5,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(bX){}}();e.exports=a}(N7,N7.exports);var O7=R7,D7=L7,F7=N7.exports,U7=F7&&F7.isTypedArray,z7=U7?D7(U7):O7,j7=T7,B7=J8,V7=F5,H7=M7.exports,W7=e7,G7=z7,q7=Object.prototype.hasOwnProperty;var K7=function(e,t){var n=V7(e),r=!n&&B7(e),i=!n&&!r&&H7(e),o=!n&&!r&&!i&&G7(e),a=n||r||i||o,s=a?j7(e.length,String):[],u=s.length;for(var l in e)!t&&!q7.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||W7(l,u))||s.push(l);return s},X7=Object.prototype;var Y7=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X7)};var $7=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Q7=Y7,J7=$7,Z7=Object.prototype.hasOwnProperty;var e9=f6,t9=t7;var n9=K7,r9=function(e){if(!Q7(e))return J7(e);var t=[];for(var n in Object(e))Z7.call(e,n)&&"constructor"!=n&&t.push(n);return t},i9=function(e){return null!=e&&t9(e.length)&&!e9(e)};var o9=function(e){return i9(e)?n9(e):r9(e)},a9=E7,s9=o9;var u9=function(e,t){return e&&a9(e,t,s9)},l9=l8;var c9=l8,h9=c8,f9=M8;var d9=l8,p9=function(){this.__data__=new l9,this.size=0},m9=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},g9=function(e){return this.__data__.get(e)},v9=function(e){return this.__data__.has(e)},y9=function(e,t){var n=this.__data__;if(n instanceof c9){var r=n.__data__;if(!h9||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new f9(r)}return n.set(e,t),this.size=n.size,this};function b9(e){var t=this.__data__=new d9(e);this.size=t.size}b9.prototype.clear=p9,b9.prototype.delete=m9,b9.prototype.get=g9,b9.prototype.has=v9,b9.prototype.set=y9;var _9=b9;var w9=M8,x9=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},S9=function(e){return this.__data__.has(e)};function E9(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new w9;++t<n;)this.add(e[t])}E9.prototype.add=E9.prototype.push=x9,E9.prototype.has=S9;var T9=E9,M9=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},C9=function(e,t){return e.has(t)};var I9=function(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var h=-1,f=!0,d=2&n?new T9:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(r)var g=a?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!M9(t,(function(e,t){if(!C9(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){f=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var A9=B5.Uint8Array,k9=Y6,P9=I9,R9=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},L9=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},N9=V5?V5.prototype:void 0,O9=N9?N9.valueOf:void 0;var D9=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new A9(e),new A9(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k9(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=R9;case"[object Set]":var u=1&r;if(s||(s=L9),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=P9(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(O9)return O9.call(e)==O9.call(t)}return!1};var F9=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},U9=F5;var z9=function(e,t,n){var r=t(e);return U9(e)?r:F9(r,n(e))};var j9=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},B9=function(){return[]},V9=Object.prototype.propertyIsEnumerable,H9=Object.getOwnPropertySymbols,W9=z9,G9=H9?function(e){return null==e?[]:(e=Object(e),j9(H9(e),(function(t){return V9.call(e,t)})))}:B9,q9=o9;var K9=function(e){return W9(e,q9,G9)},X9=Object.prototype.hasOwnProperty;var Y9=function(e,t,n,r,i,o){var a=1&n,s=K9(e),u=s.length;if(u!=K9(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:X9.call(t,c)))return!1}var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<u;){var m=e[c=s[l]],g=t[c];if(r)var v=a?r(g,m,c,t,e,o):r(m,g,c,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(e),o.delete(t),d},$9=k6(B5,"DataView"),Q9=c8,J9=k6(B5,"Promise"),Z9=k6(B5,"Set"),eee=k6(B5,"WeakMap"),tee=Z5,nee=v6,ree=nee($9),iee=nee(Q9),oee=nee(J9),aee=nee(Z9),see=nee(eee),uee=tee;($9&&"[object DataView]"!=uee(new $9(new ArrayBuffer(1)))||Q9&&"[object Map]"!=uee(new Q9)||J9&&"[object Promise]"!=uee(J9.resolve())||Z9&&"[object Set]"!=uee(new Z9)||eee&&"[object WeakMap]"!=uee(new eee))&&(uee=function(e){var t=tee(e),n="[object Object]"==t?e.constructor:void 0,r=n?nee(n):"";if(r)switch(r){case ree:return"[object DataView]";case iee:return"[object Map]";case oee:return"[object Promise]";case aee:return"[object Set]";case see:return"[object WeakMap]"}return t});var lee=_9,cee=I9,hee=D9,fee=Y9,dee=uee,pee=F5,mee=M7.exports,gee=z7,vee="[object Object]",yee=Object.prototype.hasOwnProperty;var bee=function(e,t,n,r,i,o){var a=pee(e),s=pee(t),u=a?"[object Array]":dee(e),l=s?"[object Array]":dee(t),c=(u="[object Arguments]"==u?vee:u)==vee,h=(l="[object Arguments]"==l?vee:l)==vee,f=u==l;if(f&&mee(e)){if(!mee(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new lee),a||gee(e)?cee(e,t,n,r,i,o):hee(e,t,u,n,r,i,o);if(!(1&n)){var d=c&&yee.call(e,"__wrapped__"),p=h&&yee.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,g=p?t.value():t;return o||(o=new lee),i(m,g,n,r,o)}}return!!f&&(o||(o=new lee),fee(e,t,n,r,i,o))},_ee=e6;var wee=function e(t,n,r,i,o){return t===n||(null==t||null==n||!_ee(t)&&!_ee(n)?t!=t&&n!=n:bee(t,n,r,i,e,o))},xee=_9,See=wee;var Eee=l6;var Tee=function(e){return e==e&&!Eee(e)},Mee=Tee,Cee=o9;var Iee=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},Aee=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var h=new xee;if(r)var f=r(l,c,u,e,t,h);if(!(void 0===f?See(c,l,3,r,h):f))return!1}}return!0},kee=function(e){for(var t=Cee(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Mee(i)]}return t},Pee=Iee;var Ree=W8,Lee=r7;var Nee=function(e,t){for(var n=0,r=(t=Ree(t,e)).length;null!=e&&n<r;)e=e[Lee(t[n++])];return n&&n==r?e:void 0},Oee=Nee;var Dee=function(e,t){return null!=e&&t in Object(e)},Fee=c7;var Uee=wee,zee=function(e,t,n){var r=null==e?void 0:Oee(e,t);return void 0===r?n:r},jee=function(e,t){return null!=e&&Fee(e,t,Dee)},Bee=u6,Vee=Tee,Hee=Iee,Wee=r7;var Gee=Nee;var qee=function(e){return function(t){return null==t?void 0:t[e]}},Kee=function(e){return function(t){return Gee(t,e)}},Xee=u6,Yee=r7;var $ee=function(e){var t=kee(e);return 1==t.length&&t[0][2]?Pee(t[0][0],t[0][1]):function(n){return n===e||Aee(n,e,t)}},Qee=function(e,t){return Bee(e)&&Vee(t)?Hee(Wee(e),t):function(n){var r=zee(n,e);return void 0===r&&r===t?jee(n,e):Uee(t,r,3)}},Jee=function(e){return e},Zee=F5,ete=function(e){return Xee(e)?qee(Yee(e)):Kee(e)};var tte=function(e){return"function"==typeof e?e:null==e?Jee:"object"==typeof e?Zee(e)?Qee(e[0],e[1]):$ee(e):ete(e)},nte=S7,rte=u9,ite=tte;var ote=function(e,t){var n={};return t=ite(t),rte(e,(function(e,r,i){nte(n,r,t(e,r,i))})),n};function ate(e){this._maxSize=e,this.clear()}ate.prototype.clear=function(){this._size=0,this._values=Object.create(null)},ate.prototype.get=function(e){return this._values[e]},ate.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var ste=/[^.^\]^[]+|(?=\[\]|\.\.)/g,ute=/^\d+$/,lte=/^\d/,cte=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,hte=/^\s*(['"]?)(.*?)(\1)\s*$/,fte=new ate(512),dte=new ate(512),pte=new ate(512),mte={Cache:ate,split:vte,normalizePath:gte,setter:function(e){var t=gte(e);return dte.get(e)||dte.set(e,(function(e,n){for(var r=0,i=t.length,o=e;r<i-1;){var a=t[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return e;o=o[t[r++]]}o[t[r]]=n}))},getter:function(e,t){var n=gte(e);return pte.get(e)||pte.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(yte(t)||ute.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,o,a,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(bte(r)&&(r='"'+r+'"'),o=!(a=yte(r))&&/^\d+$/.test(r),t.call(n,r,a,o,i,e))}(Array.isArray(e)?e:vte(e),t,n)}};function gte(e){return fte.get(e)||fte.set(e,vte(e).map((function(e){return e.replace(hte,"$2")})))}function vte(e){return e.match(ste)}function yte(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function bte(e){return!yte(e)&&(function(e){return e.match(lte)&&!e.match(ute)}(e)||function(e){return cte.test(e)}(e))}const _te="$",wte=".";class xte{constructor(e,t={}){if("string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===_te,this.isValue=this.key[0]===wte,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?_te:this.isValue?wte:"";this.path=this.key.slice(n.length),this.getter=this.path&&mte.getter(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function Ste(){return(Ste=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ete(e){function t(t,n){let{value:r,path:i="",label:o,options:a,originalValue:s,sync:u}=t,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]);const{name:c,test:h,params:f,message:d}=e;let{parent:p,context:m}=a;function g(e){return xte.isRef(e)?e.getValue(r,p,m):e}function v(e={}){const t=ote(Ste({value:r,originalValue:s,label:o,path:e.path||i},f,e.params),g),n=new b7(b7.formatError(e.message||d,t),r,t.path,e.type||c);return n.params=t,n}let y,b=Ste({path:i,parent:p,type:c,createError:v,resolve:g,options:a,originalValue:s},l);if(u){try{var _;if(y=h.call(b,r,b),"function"==typeof(null==(_=y)?void 0:_.then))throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(w){return void n(w)}b7.isError(y)?n(y):y?n(null,y):n(v())}else try{Promise.resolve(h.call(b,r,b)).then((e=>{b7.isError(e)?n(e):e?n(null,e):n(v())}))}catch(w){n(w)}}return t.OPTIONS=e,t}xte.prototype.__isYupRef=!0;function Tte(e,t,n,r=n){let i,o,a;return t?(mte.forEach(t,((s,u,l)=>{let c=u?(e=>e.substr(0,e.length-1).substr(1))(s):s;if((e=e.resolve({context:r,parent:i,value:n})).innerType){let r=l?parseInt(c,10):0;if(n&&r>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[r],e=e.innerType}if(!l){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e._type}")`);i=n,n=n&&n[c],e=e.fields[c]}o=c,a=u?"["+s+"]":"."+s})),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class Mte{constructor(){this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}add(e){xte.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){xte.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}has(e,t){if(this.list.has(e))return!0;let n,r=this.refs.values();for(;n=r.next(),!n.done;)if(t(n.value)===e)return!0;return!1}clone(){const e=new Mte;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function Cte(){return(Cte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Ite{constructor(e){this.deps=[],this.conditions=[],this._whitelist=new Mte,this._blacklist=new Mte,this.exclusiveTests=Object.create(null),this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(P5.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=Cte({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=Cte({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=S5(Cte({},this.spec,e)),t}label(e){var t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=Cte({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(Cte({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let i=k5(e),o=k5(r);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". \n\nattempted value: ${i} \n`+(o!==i?`result of cast: ${o}`:""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:r,path:i,from:o=[],originalValue:a=e,strict:s=this.spec.strict,abortEarly:u=this.spec.abortEarly}=t,l=e;s||(l=this._cast(l,Cte({assert:!1},t)));let c={value:l,path:i,options:t,originalValue:a,schema:this,label:this.spec.label,sync:r,from:o},h=[];this._typeError&&h.push(this._typeError),this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),_7({args:c,value:l,path:i,sync:r,tests:h,endEarly:u},(e=>{e?n(e,l):_7({tests:this.tests,args:c,path:i,sync:r,value:l,endEarly:u},n)}))}validate(e,t,n){let r=this.resolve(Cte({},t,{value:e}));return"function"==typeof n?r._validate(e,t,n):new Promise(((n,i)=>r._validate(e,t,((e,t)=>{e?i(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(Cte({},t,{value:e}))._validate(e,Cte({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(b7.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(b7.isError(n))return!1;throw n}}_getDefault(){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this):S5(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){var t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=P5.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=P5.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){var e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){var t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=P5.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=Ete(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let n=this.clone(),r=g7(e).map((e=>new xte(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new m7(r,t)),n}typeError(e){var t=this.clone();return t._typeError=Ete({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=P5.oneOf){var n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=Ete({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist;return!!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),n}notOneOf(e,t=P5.notOneOf){var n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=Ete({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist;return!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec;return{meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))}}}Ite.prototype.__isYupSchema__=!0;for(const bre of["validate","validateSync"])Ite.prototype[`${bre}At`]=function(e,t,n={}){const{parent:r,parentPath:i,schema:o}=Tte(this,e,t,n.context);return o[bre](r&&r[i],Cte({},n,{parent:r,path:e}))};for(const bre of["equals","is"])Ite.prototype[bre]=Ite.prototype.oneOf;for(const bre of["not","nope"])Ite.prototype[bre]=Ite.prototype.notOneOf;Ite.prototype.optional=Ite.prototype.notRequired;var Ate=e=>null==e;let kte=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,Pte=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Rte=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Lte=e=>Ate(e)||e===e.trim(),Nte={}.toString();function Ote(){return new Dte}class Dte extends Ite{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===Nte?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=R5.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return Ate(t)||t.length===this.resolve(e)}})}min(e,t=R5.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Ate(t)||t.length>=this.resolve(e)}})}max(e,t=R5.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return Ate(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"==typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||R5.matches,params:{regex:e},test:t=>Ate(t)||""===t&&i||-1!==t.search(e)})}email(e=R5.email){return this.matches(kte,{name:"email",message:e,excludeEmptyString:!0})}url(e=R5.url){return this.matches(Pte,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=R5.uuid){return this.matches(Rte,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=R5.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:Lte})}lowercase(e=R5.lowercase){return this.transform((e=>Ate(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Ate(e)||e===e.toLowerCase()})}uppercase(e=R5.uppercase){return this.transform((e=>Ate(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Ate(e)||e===e.toUpperCase()})}}Ote.prototype=Dte.prototype;var Fte=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let Ute=new Date("");(class extends Ite{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Fte.exec(e)){for(var o,a=0;o=r[a];++a)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?Ute:new Date(e))}))}))}_typeCheck(e){return(e=>"[object Date]"===Object.prototype.toString.call(e))(e)&&!isNaN(e.getTime())}prepareParam(e,t){let n;if(xte.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=L5.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return Ate(e)||e>=this.resolve(n)}})}max(e,t=L5.max){var n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return Ate(e)||e<=this.resolve(n)}})}}).INVALID_DATE=Ute;var zte=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};var jte=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Bte=z8,Vte=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hte=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Wte=function(e){return(e=Bte(e))&&e.replace(Vte,jte).replace(Hte,"")},Gte=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var qte=function(e){return e.match(Gte)||[]},Kte=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Xte=function(e){return Kte.test(e)},Yte="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$te="["+Yte+"]",Qte="\\d+",Jte="[\\u2700-\\u27bf]",Zte="[a-z\\xdf-\\xf6\\xf8-\\xff]",ene="[^\\ud800-\\udfff"+Yte+Qte+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",tne="(?:\\ud83c[\\udde6-\\uddff]){2}",nne="[\\ud800-\\udbff][\\udc00-\\udfff]",rne="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ine="(?:"+Zte+"|"+ene+")",one="(?:"+rne+"|"+ene+")",ane="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sne="[\\ufe0e\\ufe0f]?"+ane+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",tne,nne].join("|")+")[\\ufe0e\\ufe0f]?"+ane+")*"),une="(?:"+[Jte,tne,nne].join("|")+")"+sne,lne=RegExp([rne+"?"+Zte+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[$te,rne,"$"].join("|")+")",one+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[$te,rne+ine,"$"].join("|")+")",rne+"?"+ine+"+(?:['](?:d|ll|m|re|s|t|ve))?",rne+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qte,une].join("|"),"g");var cne=qte,hne=Xte,fne=z8,dne=function(e){return e.match(lne)||[]};var pne=zte,mne=Wte,gne=function(e,t,n){return e=fne(e),void 0===(t=n?void 0:t)?hne(e)?dne(e):cne(e):e.match(t)||[]},vne=RegExp("[']","g");var yne=function(e){return function(t){return pne(gne(mne(t).replace(vne,"")),e,"")}},bne=yne((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var _ne=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var wne=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:_ne(e,t,n)},xne=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Sne=function(e){return xne.test(e)};var Ene=function(e){return e.split("")},Tne="[\\ud800-\\udfff]",Mne="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Cne="\\ud83c[\\udffb-\\udfff]",Ine="[^\\ud800-\\udfff]",Ane="(?:\\ud83c[\\udde6-\\uddff]){2}",kne="[\\ud800-\\udbff][\\udc00-\\udfff]",Pne="(?:"+Mne+"|"+Cne+")"+"?",Rne="[\\ufe0e\\ufe0f]?"+Pne+("(?:\\u200d(?:"+[Ine,Ane,kne].join("|")+")[\\ufe0e\\ufe0f]?"+Pne+")*"),Lne="(?:"+[Ine+Mne+"?",Mne,Ane,kne,Tne].join("|")+")",Nne=RegExp(Cne+"(?="+Cne+")|"+Lne+Rne,"g");var One=Ene,Dne=Sne,Fne=function(e){return e.match(Nne)||[]};var Une=wne,zne=Sne,jne=function(e){return Dne(e)?Fne(e):One(e)},Bne=z8;var Vne=function(e){return function(t){t=Bne(t);var n=zne(t)?jne(t):void 0,r=n?n[0]:t.charAt(0),i=n?Une(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),Hne=z8,Wne=Vne;var Gne=function(e){return Wne(Hne(e).toLowerCase())},qne=yne((function(e,t,n){return t=t.toLowerCase(),e+(n?Gne(t):t)})),Kne=S7,Xne=u9,Yne=tte;var $ne=function(e,t){var n={};return t=Yne(t),Xne(e,(function(e,r,i){Kne(n,t(e,r,i),e)})),n},Qne={exports:{}};function Jne(e,t){var n=e.length,r=new Array(n),i={},o=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||u(e[o],o,new Set);return r;function u(e,t,o){if(o.has(e)){var l;try{l=", node was:"+JSON.stringify(e)}catch(bX){l=""}throw new Error("Cyclic dependency"+l)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var c=a.get(e)||new Set;if(t=(c=Array.from(c)).length){o.add(e);do{var h=c[--t];u(h,s.get(h),o)}while(t);o.delete(e)}r[--n]=e}}}Qne.exports=function(e){return Jne(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},Qne.exports.array=Jne;var Zne=Qne.exports;function ere(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function tre(e){return(t,n)=>ere(e,t)-ere(e,n)}function nre(){return(nre=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let rre=e=>"[object Object]"===Object.prototype.toString.call(e);const ire=tre([]);class ore extends Ite{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=ire,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return rre(e)||"function"==typeof e}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,a=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),s={},u=nre({},t,{parent:s,__validating:t.__validating||!1}),l=!1;for(const c of a){let e=i[c],n=d7(r,c);if(e){let n,i=r[c];u.path=(t.path?`${t.path}.`:"")+c,e=e.resolve({value:i,context:t.context,parent:s});let o="spec"in e?e.spec:void 0,a=null==o?void 0:o.strict;if(null==o?void 0:o.strip){l=l||c in r;continue}n=t.__validating&&a?r[c]:e.cast(r[c],u),void 0!==n&&(s[c]=n)}else n&&!o&&(s[c]=r[c]);s[c]!==r[c]&&(l=!0)}return l?s:r}_validate(e,t={},n){let r=[],{sync:i,from:o=[],originalValue:a=e,abortEarly:s=this.spec.abortEarly,recursive:u=this.spec.recursive}=t;o=[{schema:this,value:a},...o],t.__validating=!0,t.originalValue=a,t.from=o,super._validate(e,t,((e,l)=>{if(e){if(!b7.isError(e)||s)return void n(e,l);r.push(e)}if(!u||!rre(l))return void n(r[0]||null,l);a=a||l;let c=this._nodes.map((e=>(n,r)=>{let i=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,s=this.fields[e];s&&"validate"in s?s.validate(l[e],nre({},t,{path:i,from:o,strict:!0,parent:l,originalValue:a[e]}),r):r(null)}));_7({sync:i,tests:c,value:l,errors:r,endEarly:s,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=nre({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];void 0===e?n[r]=i:e instanceof Ite&&i instanceof Ite&&(n[r]=i.concat(e))}return t.withMutation((()=>t.shape(n)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let n=this.clone(),r=Object.assign(n.fields,e);if(n.fields=r,n._sortErrors=tre(Object.keys(r)),t.length){Array.isArray(t[0])||(t=[t]);let e=t.map((([e,t])=>`${e}-${t}`));n._excludedEdges=n._excludedEdges.concat(e)}return n._nodes=function(e,t=[]){let n=[],r=[];function i(e,i){var o=mte.split(e)[0];~r.indexOf(o)||r.push(o),~t.indexOf(`${i}-${o}`)||n.push([i,o])}for(const o in e)if(d7(e,o)){let t=e[o];~r.indexOf(o)||r.push(o),xte.isRef(t)&&t.isSibling?i(t.path,o):p7(t)&&"deps"in t&&t.deps.forEach((e=>i(e,o)))}return Zne.array(r,n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const r of e)delete n[r];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=mte.getter(e,!0);return this.transform((i=>{if(null==i)return i;let o=i;return d7(i,e)&&(o=nre({},i),n||delete o[e],o[t]=r(i)),o}))}noUnknown(e=!0,t=N5.noUnknown){"string"==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=N5.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&$ne(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys(qne)}snakeCase(){return this.transformKeys(bne)}constantCase(){return this.transformKeys((e=>bne(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=ote(this.fields,(e=>e.describe())),e}}function are(e){return new ore(e)}are.prototype=ore.prototype;const sre={_origin:"https://api.emailjs.com"},ure=(e,t,n)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class lre{constructor(e){this.status=e.status,this.text=e.responseText}}const cre=(e,t,n={})=>new Promise(((r,i)=>{const o=new XMLHttpRequest;o.addEventListener("load",(({target:e})=>{const t=new lre(e);200===t.status||"OK"===t.text?r(t):i(t)})),o.addEventListener("error",(({target:e})=>{i(new lre(e))})),o.open("POST",sre._origin+e,!0),Object.keys(n).forEach((e=>{o.setRequestHeader(e,n[e])})),o.send(t)}));var hre={init:(e,t="https://api.emailjs.com")=>{sre._userID=e,sre._origin=t},send:(e,t,n,r)=>{const i=r||sre._userID;ure(i,e,t);const o={lib_version:"3.2.0",user_id:i,service_id:e,template_id:t,template_params:n};return cre("/api/v1.0/email/send",JSON.stringify(o),{"Content-type":"application/json"})},sendForm:(e,t,n,r)=>{const i=r||sre._userID,o=(e=>{let t;if(t="string"==typeof e?document.querySelector(e):e,!t||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t})(n);ure(i,e,t);const a=new FormData(o);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),cre("/api/v1.0/email/send-form",a)}},fre=o,dre=a,pre=function(e,t,n){n=n||{};var r=function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;return{top:e,left:t}}(),i=fre(r).ease(n.ease||"out-circ").to({top:t,left:e}).duration(n.duration||1e3);function o(){dre(o),i.update()}return i.update((function(e){window.scrollTo(0|e.left,0|e.top)})),i.on("end",(function(){o=function(){}})),o(),i};var mre=K.exports,gre=pre;var vre=function(e,t){t=t||{offset:0,align:"middle"};var n=mre.findDOMNode(e);return null===n?0:gre(0,function(e,t,n){var r,i=document.body,o=document.documentElement,a=e.getBoundingClientRect(),s=o.clientHeight,u=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);switch(t=t||0,n){case"top":r=a.top;break;case"middle":r=a.bottom-s/2-a.height/2;break;case"bottom":r=a.bottom-s;break;default:r=a.bottom-s/2-a.height/2}var l=u-s;return Math.min(r+t+window.pageYOffset,l)}(n,t.offset,t.align),t)};export{oc as A,ic as B,l as D,v1 as E,d5 as F,rm as G,Af as M,u1 as N,Ff as P,q as R,lm as S,_v as T,um as W,Of as a,$g as b,o1 as c,R1 as d,O1 as e,aC as f,kx as g,h1 as h,are as i,Ote as j,w5 as k,y5 as l,hre as m,p1 as n,vre as o,rc as p};
